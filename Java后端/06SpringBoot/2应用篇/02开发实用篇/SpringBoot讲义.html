<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta property="og:url" content="https://tommyi.netlify.app/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html"><meta property="og:site_name" content="Hades"><meta property="og:title" content="SpringBootå¼€å‘å®ç”¨ç¯‡"><meta property="og:type" content="article"><meta property="og:image" content="https://tommyi.netlify.app/"><meta property="og:updated_time" content="2022-12-13T10:18:09.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="SpringBootå¼€å‘å®ç”¨ç¯‡"><meta property="article:modified_time" content="2022-12-13T10:18:09.000Z"><script>
      (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2f464624c31a5d7de6e6fbc082a73e6b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);})();
     </script><link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="VuePress"><meta name="referrer" content="no-referrer"><meta name="apple-mobile-web-app-title" content="VuePress"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="https://www.vuepress.cn/icons/apple-touch-icon-152x152.png"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>SpringBootå¼€å‘å®ç”¨ç¯‡ | Hades</title><meta name="description" content="è¿™æ˜¯ä¸€æœ¬ç¬”è®°ï¼Œç”¨äºè®°å½•ç¼–ç¨‹è¿‡ç¨‹ä¸­çš„çŸ¥è¯†ç‚¹">
    <link rel="modulepreload" href="/assets/app.3924f47e.js"><link rel="modulepreload" href="/assets/SpringBootè®²ä¹‰.html.6e01245c.js"><link rel="modulepreload" href="/assets/SpringBootè®²ä¹‰.html.985d261c.js"><link rel="prefetch" href="/assets/index.html.3fba8fa2.js"><link rel="prefetch" href="/assets/index.html.4d596f1b.js"><link rel="prefetch" href="/assets/index.html.ac0d3ff8.js"><link rel="prefetch" href="/assets/Macä¸‹mongodbå®‰è£…å’Œé…ç½®.html.19173e70.js"><link rel="prefetch" href="/assets/Macä¸‹å‘½ä»¤è¡Œé…ç½®ç¯å¢ƒå˜é‡.html.c2873a5f.js"><link rel="prefetch" href="/assets/Macå…¨è‡ªåŠ¨å®‰è£…brewä¸€é”®é…ç½®å›½å†…é•œåƒæº.html.8866f2df.js"><link rel="prefetch" href="/assets/Macç»ˆç«¯å‘½ä»¤è®°å½•.html.75e46e91.js"><link rel="prefetch" href="/assets/Nginxæ­å»ºHTTPSï¼Œå¹¶åå‘ä»£ç†åˆ°webé¡µé¢_mkcertç”Ÿæˆæœ¬åœ°SSLè¯ä¹¦.html.f67c5203.js"><link rel="prefetch" href="/assets/PDFè½¬Markdownæ–‡ä»¶.html.dc7ca7bb.js"><link rel="prefetch" href="/assets/index.html.f2e8c2ba.js"><link rel="prefetch" href="/assets/VSCodeä½¿ç”¨è®°å½•.html.3b0db4ce.js"><link rel="prefetch" href="/assets/docsearchå…¨ç«™æœç´¢.html.105a6071.js"><link rel="prefetch" href="/assets/ideaæ’ä»¶åˆ†äº«.html.841f8833.js"><link rel="prefetch" href="/assets/jetbrainså…¨å®¶æ¡¶æ¿€æ´»ç­–ç•¥.html.daa401c8.js"><link rel="prefetch" href="/assets/ä¸­åäººæ°‘å…±å’Œå›½åŠ³åŠ¨åˆåŒæ³•.html.6b4a5117.js"><link rel="prefetch" href="/assets/æµ…è°ˆæ–‡è¨€æ–‡ä¸è‹±è¯­è¯­æ³•çš„ç›¸ä¼¼ç‚¹.html.96535ae8.js"><link rel="prefetch" href="/assets/é¢å‘AIå¼€å‘.html.06a44d4c.js"><link rel="prefetch" href="/assets/é¸¿è’™3å®‰è£…apkæ— é¡»ç™»å½•.html.7ceb3fbf.js"><link rel="prefetch" href="/assets/index.html.7d5c183e.js"><link rel="prefetch" href="/assets/index.html.f4857994.js"><link rel="prefetch" href="/assets/aboutme.html.03b08c9b.js"><link rel="prefetch" href="/assets/index.html.62929ac9.js"><link rel="prefetch" href="/assets/FRPå†…ç½‘ç©¿é€æ­å»º(æ— åŸŸåç‰ˆ).html.6029f667.js"><link rel="prefetch" href="/assets/index.html.5fd246dd.js"><link rel="prefetch" href="/assets/linuxå‰ç«¯é¡¹ç›®éƒ¨ç½².html.0029fa36.js"><link rel="prefetch" href="/assets/linuxç¯å¢ƒå˜é‡é…ç½®é”™è¯¯åå‘½ä»¤æ— æ³•ä½¿ç”¨è§£å†³æ–¹æ¡ˆ.html.e194e944.js"><link rel="prefetch" href="/assets/å†…ç½‘ç©¿é€å·¥å…·æ¯”è¾ƒ.html.a6564717.js"><link rel="prefetch" href="/assets/åœ¨CentOSä¸Šæ­å»ºSambaæœåŠ¡å™¨.html.5dc34a00.js"><link rel="prefetch" href="/assets/ç¬¬01ç« Androidå¼€å‘ç¯å¢ƒæ­å»º.html.4ea72447.js"><link rel="prefetch" href="/assets/ç¬¬02ç« AndroidAppå¼€å‘åŸºç¡€.html.24ac8732.js"><link rel="prefetch" href="/assets/ç¬¬03ç« ç®€å•æ§ä»¶.html.3128fa37.js"><link rel="prefetch" href="/assets/ç¬¬04ç« æ´»åŠ¨Activity.html.9169add5.js"><link rel="prefetch" href="/assets/ç¬¬05ç« ä¸­çº§æ§ä»¶.html.75bd951e.js"><link rel="prefetch" href="/assets/ç¬¬06ç« æ•°æ®å­˜å‚¨.html.c29220e0.js"><link rel="prefetch" href="/assets/ç¬¬07ç« å†…å®¹å…±äº«.html.ef3fb778.js"><link rel="prefetch" href="/assets/ç¬¬08ç« é«˜çº§æ§ä»¶.html.a4ef2f0d.js"><link rel="prefetch" href="/assets/ç¬¬09ç« å¹¿æ’­ç»„ä»¶Broadcast.html.7130bec3.js"><link rel="prefetch" href="/assets/ç¬¬10ç« è‡ªå®šä¹‰æ§ä»¶.html.1c777745.js"><link rel="prefetch" href="/assets/AndroidStudioä»£ç†é—®é¢˜Connect.html.357fa090.js"><link rel="prefetch" href="/assets/AndroidStudioæ‰“åŒ…aarä¸¢å¤±è¿œç¨‹ä¾èµ–é—®é¢˜è§£å†³.html.26db85ab.js"><link rel="prefetch" href="/assets/AndroidStudioç™»å½•googleè´¦å·å¤±è´¥é—®é¢˜.html.60601dbe.js"><link rel="prefetch" href="/assets/Apkåº”ç”¨é‡ç­¾åâ€”ä½¿ç”¨AndroidStudioè‡ªå¸¦å·¥å…·apksigner.html.be412465.js"><link rel="prefetch" href="/assets/ä¸å¸¸ç”¨çš„ADBå‘½ä»¤.html.162faa7e.js"><link rel="prefetch" href="/assets/01MySQLç²¾ç®€ç¬”è®°.html.b6c76536.js"><link rel="prefetch" href="/assets/02JDBC.html.cd83be25.js"><link rel="prefetch" href="/assets/03Maven.html.2826552b.js"><link rel="prefetch" href="/assets/04Mybatis.html.e3b26918.js"><link rel="prefetch" href="/assets/05ç½‘é¡µä¸‰å‰‘å®¢.html.7eb4fd73.js"><link rel="prefetch" href="/assets/06HTTP_Tomcat_Servlet.html.e72ce829.js"><link rel="prefetch" href="/assets/07Request_Response.html.dbb06678.js"><link rel="prefetch" href="/assets/08JSP.html.9fe6edfb.js"><link rel="prefetch" href="/assets/09Cookie_Session.html.a6775789.js"><link rel="prefetch" href="/assets/10Filter_Listener_Ajax.html.ca49deec.js"><link rel="prefetch" href="/assets/11Vue_Element.html.13f1ff54.js"><link rel="prefetch" href="/assets/12ç»¼åˆæ¡ˆä¾‹.html.0e382c65.js"><link rel="prefetch" href="/assets/index.html.145fbfc9.js"><link rel="prefetch" href="/assets/POMæ–‡ä»¶å¸®åŠ©æ–‡æ¡£.html.71fe5a3a.js"><link rel="prefetch" href="/assets/index.html.4c10d115.js"><link rel="prefetch" href="/assets/index.html.8002c9df.js"><link rel="prefetch" href="/assets/index.html.456530ad.js"><link rel="prefetch" href="/assets/index.html.a6dacb19.js"><link rel="prefetch" href="/assets/index.html.155f6415.js"><link rel="prefetch" href="/assets/index.html.ddabe501.js"><link rel="prefetch" href="/assets/index.html.85baad59.js"><link rel="prefetch" href="/assets/index.html.b4cc03cf.js"><link rel="prefetch" href="/assets/index.html.781336e1.js"><link rel="prefetch" href="/assets/index.html.61a0c47f.js"><link rel="prefetch" href="/assets/request.getInputStreamåªèƒ½è¯»å–ä¸€æ¬¡é—®é¢˜.html.b885ecdb.js"><link rel="prefetch" href="/assets/ç¨‹åºåŒ…com.alibaba.fastjsonä¸å­˜åœ¨.html.271dbf39.js"><link rel="prefetch" href="/assets/é”™è¯¯é›†åˆ.html.7aaff025.js"><link rel="prefetch" href="/assets/index.html.a8875e4a.js"><link rel="prefetch" href="/assets/index.html.500a4c6c.js"><link rel="prefetch" href="/assets/index.html.e490b0a7.js"><link rel="prefetch" href="/assets/index.html.7c8a7fda.js"><link rel="prefetch" href="/assets/Nodeå¤šç‰ˆæœ¬ç®¡ç†.html.323287ed.js"><link rel="prefetch" href="/assets/index.html.0e0c40e6.js"><link rel="prefetch" href="/assets/Webè°ƒè¯•å…¥é—¨.html.779c051c.js"><link rel="prefetch" href="/assets/å…³äºESLInké…ç½®é—®é¢˜.html.813173ed.js"><link rel="prefetch" href="/assets/index.html.bbbe52d8.js"><link rel="prefetch" href="/assets/MySQL-åŸºç¡€ç¯‡.html.72f3c6e1.js"><link rel="prefetch" href="/assets/Mavené«˜çº§.html.88e987e2.js"><link rel="prefetch" href="/assets/SpringBoot.html.900a4e3a.js"><link rel="prefetch" href="/assets/MyBatisPlus.html.f232bc92.js"><link rel="prefetch" href="/assets/RestTemplate.html.e8ab904e.js"><link rel="prefetch" href="/assets/Dubboè¯¦è§£.html.99b80cf1.js"><link rel="prefetch" href="/assets/Macä¸‹ZooKeeperå®‰è£…å’Œä½¿ç”¨.html.6c1f13af.js"><link rel="prefetch" href="/assets/Zookeeperé›†ç¾¤æ­å»º.html.52dab835.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬10ç« ï¼‰.html.e13e9f83.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬11ç« ï¼‰.html.f5126906.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬12ç« ï¼‰.html.44d84044.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬13ç« ï¼‰.html.a07d7436.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬1ç« ï¼‰.html.a4da5427.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬2ç« ï¼‰.html.2fefeebf.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬3ç« ï¼‰.html.027ab944.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬4ç« ï¼‰.html.0dbf7d93.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬5ç« ï¼‰.html.fdc355fa.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬6ç« ï¼‰.html.cfd20322.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬7ç« ï¼‰.html.b3623f0b.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬8ç« ï¼‰.html.9d9da6cc.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬9ç« ï¼‰.html.90642054.js"><link rel="prefetch" href="/assets/SpringBootè®²ä¹‰.html.7a7d55bb.js"><link rel="prefetch" href="/assets/Linux-Day01.html.fdebd37c.js"><link rel="prefetch" href="/assets/Linux-Day02.html.7812a3ac.js"><link rel="prefetch" href="/assets/RedisåŸºç¡€.html.601c5b80.js"><link rel="prefetch" href="/assets/Gitè¯¾ç¨‹è®²ä¹‰.html.ebe75592.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day01.html.f58e19c2.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day02.html.4ded6959.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day03.html.c35f1242.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day04.html.3d44fe14.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day05.html.3f4ef4e7.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day06.html.9cd411dc.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–ä¼˜åŒ–-Day01.html.78783912.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–ä¼˜åŒ–-Day02.html.cb2d7616.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–ä¼˜åŒ–-Day03.html.6076c5a3.js"><link rel="prefetch" href="/assets/å¾®æœåŠ¡å¸¸è§é¢è¯•é¢˜.html.a5dcd6ba.js"><link rel="prefetch" href="/assets/é”™è¯¯ç¬”è®°.html.ed3ccb3a.js"><link rel="prefetch" href="/assets/day01-HTMLåŸºç¡€.html.a6ab2338.js"><link rel="prefetch" href="/assets/day02-HTMLè¿›é˜¶.html.6a75b495.js"><link rel="prefetch" href="/assets/day03-CSSåŸºç¡€.html.42169736.js"><link rel="prefetch" href="/assets/day04-CSSè¿›é˜¶.html.691a9b64.js"><link rel="prefetch" href="/assets/day05-ç›’å­æ¨¡å‹.html.4992e05c.js"><link rel="prefetch" href="/assets/day06-Flexå¸ƒå±€.html.c0632a9a.js"><link rel="prefetch" href="/assets/day07-å­¦æˆåœ¨çº¿.html.31966167.js"><link rel="prefetch" href="/assets/day08-CSSé«˜çº§.html.7139befe.js"><link rel="prefetch" href="/assets/day09-å°å…”é²œå„¿.html.a4f48ad2.js"><link rel="prefetch" href="/assets/day10-å°å…”é²œå„¿.html.58643326.js"><link rel="prefetch" href="/assets/Day01-é¡¹ç›®ä»‹ç»åŠåˆå§‹åŒ–-ç™»å½•é¡µé¢.html.1162a8bc.js"><link rel="prefetch" href="/assets/Day02-ç™»å½•æ¨¡å—-ä¸»é¡µé‰´æƒ.html.8dfc8019.js"><link rel="prefetch" href="/assets/Day03-ä¸»é¡µæ¨¡å—-ä¿®æ”¹å¯†ç .html.011cdd7f.js"><link rel="prefetch" href="/assets/Day04-ç»„ç»‡æ¶æ„.html.5275e26a.js"><link rel="prefetch" href="/assets/Day05-ç»„ç»‡æ¶æ„-è§’è‰²ç®¡ç†.html.ced63442.js"><link rel="prefetch" href="/assets/Day06-è§’è‰²ç®¡ç†-å‘˜å·¥ç®¡ç†.html.6caefea8.js"><link rel="prefetch" href="/assets/Day07-å‘˜å·¥ç®¡ç†-ä¸Šä¼ ä¸‹è½½.html.e3f31d8e.js"><link rel="prefetch" href="/assets/Day08-Cosä¸Šä¼ å’Œæƒé™æ•°æ®.html.20830962.js"><link rel="prefetch" href="/assets/Day09-æƒé™åº”ç”¨-é¦–é¡µ.html.da56bbaa.js"><link rel="prefetch" href="/assets/Day10-é¦–é¡µå›¾è¡¨-Nginxä¸Šçº¿.html.d3348164.js"><link rel="prefetch" href="/assets/1.Vue3å…¥é—¨.html.03fe22ad.js"><link rel="prefetch" href="/assets/10.è´­ç‰©è½¦.html.471b3316.js"><link rel="prefetch" href="/assets/11.è®¢å•é¡µ.html.f7fcb785.js"><link rel="prefetch" href="/assets/12.æ”¯ä»˜é¡µ.html.7e26fb78.js"><link rel="prefetch" href="/assets/13.ä¼šå‘˜ä¸­å¿ƒ.html.b90bf2e3.js"><link rel="prefetch" href="/assets/14.æ‹“å±•éƒ¨åˆ†.html.0d32fa78.js"><link rel="prefetch" href="/assets/2.Piniaå…¥é—¨.html.e8abdd29.js"><link rel="prefetch" href="/assets/3.é¡¹ç›®èµ·æ­¥.html.498101f0.js"><link rel="prefetch" href="/assets/4.Layouté¡µ.html.0c374127.js"><link rel="prefetch" href="/assets/5.Homeé¡µ.html.a6e30fe0.js"><link rel="prefetch" href="/assets/6.ä¸€çº§åˆ†ç±»é¡µ.html.f6efdd5c.js"><link rel="prefetch" href="/assets/7.äºŒçº§åˆ†ç±»é¡µ.html.01823995.js"><link rel="prefetch" href="/assets/8.å•†å“è¯¦æƒ….html.5c665585.js"><link rel="prefetch" href="/assets/9.ç™»å½•é¡µ.html.35d98706.js"><link rel="prefetch" href="/assets/day01.html.8ffdb6de.js"><link rel="prefetch" href="/assets/day02.html.43bccf1f.js"><link rel="prefetch" href="/assets/day03.html.191e82ec.js"><link rel="prefetch" href="/assets/index.html.f947a12b.js"><link rel="prefetch" href="/assets/day01.html.de22280d.js"><link rel="prefetch" href="/assets/day02.html.37fef858.js"><link rel="prefetch" href="/assets/day03.html.b3311c03.js"><link rel="prefetch" href="/assets/day04.html.14ed5a97.js"><link rel="prefetch" href="/assets/index.html.ea0c61d2.js"><link rel="prefetch" href="/assets/interview-base.html.b48b64bf.js"><link rel="prefetch" href="/assets/interview-enjoy-plus.html.8071948e.js"><link rel="prefetch" href="/assets/RedisåŸºç¡€ç¯‡.html.a0667b10.js"><link rel="prefetch" href="/assets/Rediså¿«é€Ÿå…¥é—¨.html.d25877b5.js"><link rel="prefetch" href="/assets/Rediså®æˆ˜ç¯‡.html.9a5d06d2.js"><link rel="prefetch" href="/assets/RedisåŸç†ç¯‡.html.4f69d42d.js"><link rel="prefetch" href="/assets/è¯¾å ‚ç¬”è®°.html.6422e94e.js"><link rel="prefetch" href="/assets/è¯¾å ‚ç¬”è®°.html.3b96b75e.js"><link rel="prefetch" href="/assets/Spring-day01.html.e68ec110.js"><link rel="prefetch" href="/assets/Spring-day02.html.59a1d60e.js"><link rel="prefetch" href="/assets/Spring-day03.html.7c161a28.js"><link rel="prefetch" href="/assets/SpringMVC-day01.html.457335ff.js"><link rel="prefetch" href="/assets/SpringMVC-day02.html.031f2edf.js"><link rel="prefetch" href="/assets/é”™è¯¯ç¬”è®°.html.62610a4e.js"><link rel="prefetch" href="/assets/SpringBootStart.html.105a81fc.js"><link rel="prefetch" href="/assets/SpringBootæ•´åˆSSMP.html.e9ae476c.js"><link rel="prefetch" href="/assets/SpringBootç»¼åˆæ¡ˆä¾‹.html.0b423631.js"><link rel="prefetch" href="/assets/SpringBootè®²ä¹‰.html.ab71429a.js"><link rel="prefetch" href="/assets/Centos8-streamåœ¨çœŸæœºä¸Šå®‰è£…æ’å‘.html.6126641d.js"><link rel="prefetch" href="/assets/Centos9å®‰è£…mysql.html.2e8a0e74.js"><link rel="prefetch" href="/assets/SpringCloud01.html.7e4ce9d2.js"><link rel="prefetch" href="/assets/SpringCloudå®ç”¨ç¯‡02.html.96a09c5c.js"><link rel="prefetch" href="/assets/Dockerå®ç”¨ç¯‡.html.a17cc52f.js"><link rel="prefetch" href="/assets/RabbitMQ.html.bd4e2cf4.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼æœç´¢å¼•æ“01.html.4e38b9ff.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼æœç´¢å¼•æ“02.html.57698f1d.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼æœç´¢å¼•æ“03.html.28ba2809.js"><link rel="prefetch" href="/assets/å¾®æœåŠ¡ä¿æŠ¤.html.62adb493.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡.html.e90c30b9.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼ç¼“å­˜.html.01435b66.js"><link rel="prefetch" href="/assets/å¤šçº§ç¼“å­˜.html.4a5cc484.js"><link rel="prefetch" href="/assets/RabbitMQ-é«˜çº§ç¯‡.html.0c480ed8.js"><link rel="prefetch" href="/assets/Mybatisç¬¬ä¸€å¤©.html.a3edd17b.js"><link rel="prefetch" href="/assets/Mybatisç¬¬äºŒå¤©.html.802a2571.js"><link rel="prefetch" href="/assets/ç§»åŠ¨webç¬¬ä¸€å¤©.html.2e8f46f4.js"><link rel="prefetch" href="/assets/ç§»åŠ¨Webç¬¬äºŒå¤©.html.8226f808.js"><link rel="prefetch" href="/assets/ç§»åŠ¨Webç¬¬ä¸‰å¤©.html.11831bcd.js"><link rel="prefetch" href="/assets/ç§»åŠ¨Webç¬¬å››å¤©.html.6547a63e.js"><link rel="prefetch" href="/assets/ç§»åŠ¨Webç¬¬äº”å¤©.html.d74bd617.js"><link rel="prefetch" href="/assets/JavaScriptåŸºç¡€ç¬¬ä¸€å¤©.html.cff4e109.js"><link rel="prefetch" href="/assets/JavaScriptåŸºç¡€ç¬¬ä¸‰å¤©.html.f99eff7e.js"><link rel="prefetch" href="/assets/javascriptåŸºç¡€ç¬¬äºŒå¤©ç¬”è®°.html.aebc5333.js"><link rel="prefetch" href="/assets/JavaScriptåŸºç¡€ç¬¬äº”å¤©.html.e35620d6.js"><link rel="prefetch" href="/assets/JavaScriptåŸºç¡€ç¬¬å››å¤©.html.958a84e6.js"><link rel="prefetch" href="/assets/index.html.ef8647c7.js"><link rel="prefetch" href="/assets/ä¸ªäººå®æˆ˜æ–‡æ¡£.html.1743365c.js"><link rel="prefetch" href="/assets/index.html.c647080e.js"><link rel="prefetch" href="/assets/index.html.04decc95.js"><link rel="prefetch" href="/assets/index.html.dbce89c2.js"><link rel="prefetch" href="/assets/index.html.850a5fdc.js"><link rel="prefetch" href="/assets/index.html.c1ac903f.js"><link rel="prefetch" href="/assets/JavaScriptè¿›é˜¶ç¬¬ä¸€å¤©.html.1df28442.js"><link rel="prefetch" href="/assets/day03.html.c7bd1e6a.js"><link rel="prefetch" href="/assets/day02.html.d4b18232.js"><link rel="prefetch" href="/assets/day04.html.c85f4095.js"><link rel="prefetch" href="/assets/ç¬”è®°.html.f18bcd72.js"><link rel="prefetch" href="/assets/ç¬”è®°.html.cc5e606b.js"><link rel="prefetch" href="/assets/ç¬”è®°.html.9b36d8a2.js"><link rel="prefetch" href="/assets/day01.html.afa0570c.js"><link rel="prefetch" href="/assets/day02.html.cc0ddb05.js"><link rel="prefetch" href="/assets/day03.html.66b1101e.js"><link rel="prefetch" href="/assets/day04.html.d57e8ef7.js"><link rel="prefetch" href="/assets/day05.html.be548191.js"><link rel="prefetch" href="/assets/day06.html.9d2732e7.js"><link rel="prefetch" href="/assets/day07.html.e2014f42.js"><link rel="prefetch" href="/assets/æ™ºæ…§å•†åŸé¡¹ç›®.html.b037ba30.js"><link rel="prefetch" href="/assets/Vue3å…¥é—¨.html.1dddd2c1.js"><link rel="prefetch" href="/assets/Pinia.html.d1f7ef83.js"><link rel="prefetch" href="/assets/å¤§äº‹ä»¶ç®¡ç†ç³»ç»Ÿ.html.a9636e94.js"><link rel="prefetch" href="/assets/01-é¡¹ç›®èµ·æ­¥.html.82651da2.js"><link rel="prefetch" href="/assets/02-é¦–é¡µæ¨¡å—.html.6f46afbf.js"><link rel="prefetch" href="/assets/03-æ¨èæ¨¡å—.html.b6efbf66.js"><link rel="prefetch" href="/assets/04-åˆ†ç±»æ¨¡å—.html.89b1138d.js"><link rel="prefetch" href="/assets/05-è¯¦æƒ…æ¨¡å—.html.e88ab276.js"><link rel="prefetch" href="/assets/06-ç™»å½•æ¨¡å—.html.277d50c6.js"><link rel="prefetch" href="/assets/07-ç”¨æˆ·æ¨¡å—.html.925b2d13.js"><link rel="prefetch" href="/assets/08-åœ°å€æ¨¡å—.html.f75d39b9.js"><link rel="prefetch" href="/assets/09-SKUæ¨¡å—.html.397ec6ac.js"><link rel="prefetch" href="/assets/10-è´­ç‰©è½¦æ¨¡å—.html.813ab58c.js"><link rel="prefetch" href="/assets/11-è®¢å•æ¨¡å—.html.26617e36.js"><link rel="prefetch" href="/assets/12-é¡¹ç›®æ‰“åŒ….html.bcb19f5b.js"><link rel="prefetch" href="/assets/index.html.0ad324c8.js"><link rel="prefetch" href="/assets/ç¬¬1å¤©.html.2a9a1263.js"><link rel="prefetch" href="/assets/ç¬¬2å¤©.html.f92837a4.js"><link rel="prefetch" href="/assets/ç¬¬3å¤©.html.8346e116.js"><link rel="prefetch" href="/assets/ç¬¬4å¤©.html.64ba4427.js"><link rel="prefetch" href="/assets/ç¬¬5å¤©.html.aa93a841.js"><link rel="prefetch" href="/assets/å°ç¨‹åºè‡ªå®šä¹‰tabBar.html.efad290d.js"><link rel="prefetch" href="/assets/ç¬¬6å¤©.html.44cac1f7.js"><link rel="prefetch" href="/assets/Redisé«˜çº§-åˆ†å¸ƒå¼ç¼“å­˜.html.3b0165ff.js"><link rel="prefetch" href="/assets/Redisé«˜çº§ç¯‡ä¹‹æœ€ä½³å®è·µ.html.7874bd22.js"><link rel="prefetch" href="/assets/å¤šçº§ç¼“å­˜.html.bffd36ce.js"><link rel="prefetch" href="/assets/Nacoså®‰è£…æŒ‡å—.html.39daa776.js"><link rel="prefetch" href="/assets/Nacosé›†ç¾¤æ­å»º.html.568d560d.js"><link rel="prefetch" href="/assets/Centos7å®‰è£…Docker.html.b0ad27b4.js"><link rel="prefetch" href="/assets/RabbitMQéƒ¨ç½²æŒ‡å—.html.1ab7fab6.js"><link rel="prefetch" href="/assets/å®‰è£…elasticsearch.html.81544b59.js"><link rel="prefetch" href="/assets/Day01_AJAXå…¥é—¨.html.2b734238.js"><link rel="prefetch" href="/assets/Day02_AJAXç»¼åˆæ¡ˆä¾‹.html.afc30063.js"><link rel="prefetch" href="/assets/Day03_AJAXåŸç†.html.099c6350.js"><link rel="prefetch" href="/assets/Day04_AJAXè¿›é˜¶.html.54ac1199.js"><link rel="prefetch" href="/assets/404.html.65323de0.js"><link rel="prefetch" href="/assets/index.html.c2004e41.js"><link rel="prefetch" href="/assets/index.html.0a1a6ee5.js"><link rel="prefetch" href="/assets/index.html.f945d969.js"><link rel="prefetch" href="/assets/Macä¸‹mongodbå®‰è£…å’Œé…ç½®.html.e2c67aa6.js"><link rel="prefetch" href="/assets/Macä¸‹å‘½ä»¤è¡Œé…ç½®ç¯å¢ƒå˜é‡.html.8a2850de.js"><link rel="prefetch" href="/assets/Macå…¨è‡ªåŠ¨å®‰è£…brewä¸€é”®é…ç½®å›½å†…é•œåƒæº.html.07fdd575.js"><link rel="prefetch" href="/assets/Macç»ˆç«¯å‘½ä»¤è®°å½•.html.6d80b9a9.js"><link rel="prefetch" href="/assets/Nginxæ­å»ºHTTPSï¼Œå¹¶åå‘ä»£ç†åˆ°webé¡µé¢_mkcertç”Ÿæˆæœ¬åœ°SSLè¯ä¹¦.html.a7957a1e.js"><link rel="prefetch" href="/assets/PDFè½¬Markdownæ–‡ä»¶.html.feec0bcf.js"><link rel="prefetch" href="/assets/index.html.5e329dbc.js"><link rel="prefetch" href="/assets/VSCodeä½¿ç”¨è®°å½•.html.1b9c3954.js"><link rel="prefetch" href="/assets/docsearchå…¨ç«™æœç´¢.html.11ac0386.js"><link rel="prefetch" href="/assets/ideaæ’ä»¶åˆ†äº«.html.e735132b.js"><link rel="prefetch" href="/assets/jetbrainså…¨å®¶æ¡¶æ¿€æ´»ç­–ç•¥.html.2c4209df.js"><link rel="prefetch" href="/assets/ä¸­åäººæ°‘å…±å’Œå›½åŠ³åŠ¨åˆåŒæ³•.html.25a32dec.js"><link rel="prefetch" href="/assets/æµ…è°ˆæ–‡è¨€æ–‡ä¸è‹±è¯­è¯­æ³•çš„ç›¸ä¼¼ç‚¹.html.70458d5a.js"><link rel="prefetch" href="/assets/é¢å‘AIå¼€å‘.html.bbacf680.js"><link rel="prefetch" href="/assets/é¸¿è’™3å®‰è£…apkæ— é¡»ç™»å½•.html.954e9feb.js"><link rel="prefetch" href="/assets/index.html.7945a029.js"><link rel="prefetch" href="/assets/index.html.0ae148ed.js"><link rel="prefetch" href="/assets/aboutme.html.fc5cac36.js"><link rel="prefetch" href="/assets/index.html.2b0f20c6.js"><link rel="prefetch" href="/assets/FRPå†…ç½‘ç©¿é€æ­å»º(æ— åŸŸåç‰ˆ).html.81827334.js"><link rel="prefetch" href="/assets/index.html.99e37cf4.js"><link rel="prefetch" href="/assets/linuxå‰ç«¯é¡¹ç›®éƒ¨ç½².html.ac0e6e56.js"><link rel="prefetch" href="/assets/linuxç¯å¢ƒå˜é‡é…ç½®é”™è¯¯åå‘½ä»¤æ— æ³•ä½¿ç”¨è§£å†³æ–¹æ¡ˆ.html.55d4e715.js"><link rel="prefetch" href="/assets/å†…ç½‘ç©¿é€å·¥å…·æ¯”è¾ƒ.html.5a67b7cd.js"><link rel="prefetch" href="/assets/åœ¨CentOSä¸Šæ­å»ºSambaæœåŠ¡å™¨.html.00a1980e.js"><link rel="prefetch" href="/assets/ç¬¬01ç« Androidå¼€å‘ç¯å¢ƒæ­å»º.html.cf4d9730.js"><link rel="prefetch" href="/assets/ç¬¬02ç« AndroidAppå¼€å‘åŸºç¡€.html.754702f7.js"><link rel="prefetch" href="/assets/ç¬¬03ç« ç®€å•æ§ä»¶.html.01b0c160.js"><link rel="prefetch" href="/assets/ç¬¬04ç« æ´»åŠ¨Activity.html.fefe5748.js"><link rel="prefetch" href="/assets/ç¬¬05ç« ä¸­çº§æ§ä»¶.html.4ffad4a2.js"><link rel="prefetch" href="/assets/ç¬¬06ç« æ•°æ®å­˜å‚¨.html.c5ecff80.js"><link rel="prefetch" href="/assets/ç¬¬07ç« å†…å®¹å…±äº«.html.c4a4f5a6.js"><link rel="prefetch" href="/assets/ç¬¬08ç« é«˜çº§æ§ä»¶.html.370cebf1.js"><link rel="prefetch" href="/assets/ç¬¬09ç« å¹¿æ’­ç»„ä»¶Broadcast.html.48bd6edd.js"><link rel="prefetch" href="/assets/ç¬¬10ç« è‡ªå®šä¹‰æ§ä»¶.html.c461cf7c.js"><link rel="prefetch" href="/assets/AndroidStudioä»£ç†é—®é¢˜Connect.html.52cac2d0.js"><link rel="prefetch" href="/assets/AndroidStudioæ‰“åŒ…aarä¸¢å¤±è¿œç¨‹ä¾èµ–é—®é¢˜è§£å†³.html.b9dfedc9.js"><link rel="prefetch" href="/assets/AndroidStudioç™»å½•googleè´¦å·å¤±è´¥é—®é¢˜.html.d68b7a31.js"><link rel="prefetch" href="/assets/Apkåº”ç”¨é‡ç­¾åâ€”ä½¿ç”¨AndroidStudioè‡ªå¸¦å·¥å…·apksigner.html.478565d0.js"><link rel="prefetch" href="/assets/ä¸å¸¸ç”¨çš„ADBå‘½ä»¤.html.e2566718.js"><link rel="prefetch" href="/assets/01MySQLç²¾ç®€ç¬”è®°.html.94a32d52.js"><link rel="prefetch" href="/assets/02JDBC.html.d492416c.js"><link rel="prefetch" href="/assets/03Maven.html.e1ad8403.js"><link rel="prefetch" href="/assets/04Mybatis.html.fd2ed841.js"><link rel="prefetch" href="/assets/05ç½‘é¡µä¸‰å‰‘å®¢.html.17b749de.js"><link rel="prefetch" href="/assets/06HTTP_Tomcat_Servlet.html.dbceb0a6.js"><link rel="prefetch" href="/assets/07Request_Response.html.f3027523.js"><link rel="prefetch" href="/assets/08JSP.html.1035c2be.js"><link rel="prefetch" href="/assets/09Cookie_Session.html.b2d088ee.js"><link rel="prefetch" href="/assets/10Filter_Listener_Ajax.html.227df185.js"><link rel="prefetch" href="/assets/11Vue_Element.html.505f4406.js"><link rel="prefetch" href="/assets/12ç»¼åˆæ¡ˆä¾‹.html.b838ca5a.js"><link rel="prefetch" href="/assets/index.html.47cf74ec.js"><link rel="prefetch" href="/assets/POMæ–‡ä»¶å¸®åŠ©æ–‡æ¡£.html.a94cca23.js"><link rel="prefetch" href="/assets/index.html.2201bff8.js"><link rel="prefetch" href="/assets/index.html.8c27f45b.js"><link rel="prefetch" href="/assets/index.html.3a2e6e3b.js"><link rel="prefetch" href="/assets/index.html.05a74410.js"><link rel="prefetch" href="/assets/index.html.b8265f48.js"><link rel="prefetch" href="/assets/index.html.d506303c.js"><link rel="prefetch" href="/assets/index.html.e82b5574.js"><link rel="prefetch" href="/assets/index.html.f2b238c0.js"><link rel="prefetch" href="/assets/index.html.6aa4c4d9.js"><link rel="prefetch" href="/assets/index.html.3c05eba6.js"><link rel="prefetch" href="/assets/request.getInputStreamåªèƒ½è¯»å–ä¸€æ¬¡é—®é¢˜.html.fcce7ee3.js"><link rel="prefetch" href="/assets/ç¨‹åºåŒ…com.alibaba.fastjsonä¸å­˜åœ¨.html.babc873c.js"><link rel="prefetch" href="/assets/é”™è¯¯é›†åˆ.html.a1ecc4a5.js"><link rel="prefetch" href="/assets/index.html.fa4dfe36.js"><link rel="prefetch" href="/assets/index.html.e61f55a9.js"><link rel="prefetch" href="/assets/index.html.1e34786c.js"><link rel="prefetch" href="/assets/index.html.b91e9ccf.js"><link rel="prefetch" href="/assets/Nodeå¤šç‰ˆæœ¬ç®¡ç†.html.168fea28.js"><link rel="prefetch" href="/assets/index.html.0dbd251c.js"><link rel="prefetch" href="/assets/Webè°ƒè¯•å…¥é—¨.html.f16d6923.js"><link rel="prefetch" href="/assets/å…³äºESLInké…ç½®é—®é¢˜.html.2c7b7f3a.js"><link rel="prefetch" href="/assets/index.html.6fb059c2.js"><link rel="prefetch" href="/assets/MySQL-åŸºç¡€ç¯‡.html.b2722477.js"><link rel="prefetch" href="/assets/Mavené«˜çº§.html.024104c5.js"><link rel="prefetch" href="/assets/SpringBoot.html.663c509e.js"><link rel="prefetch" href="/assets/MyBatisPlus.html.a68080f4.js"><link rel="prefetch" href="/assets/RestTemplate.html.80f150f6.js"><link rel="prefetch" href="/assets/Dubboè¯¦è§£.html.5587eca9.js"><link rel="prefetch" href="/assets/Macä¸‹ZooKeeperå®‰è£…å’Œä½¿ç”¨.html.acc0383e.js"><link rel="prefetch" href="/assets/Zookeeperé›†ç¾¤æ­å»º.html.68e733e2.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬10ç« ï¼‰.html.0650bc5a.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬11ç« ï¼‰.html.354aac2b.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬12ç« ï¼‰.html.20276d75.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬13ç« ï¼‰.html.193981fb.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬1ç« ï¼‰.html.103f148c.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬2ç« ï¼‰.html.afae10ca.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬3ç« ï¼‰.html.ff571203.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬4ç« ï¼‰.html.32780907.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬5ç« ï¼‰.html.1cffb0e0.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬6ç« ï¼‰.html.e6e80ae2.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬7ç« ï¼‰.html.06771479.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬8ç« ï¼‰.html.bf5b5766.js"><link rel="prefetch" href="/assets/ä¼ æ™ºå¥åº·é¡¹ç›®è®²ä¹‰ï¼ˆç¬¬9ç« ï¼‰.html.bb663df8.js"><link rel="prefetch" href="/assets/SpringBootè®²ä¹‰.html.69f86bff.js"><link rel="prefetch" href="/assets/Linux-Day01.html.b1b6fb06.js"><link rel="prefetch" href="/assets/Linux-Day02.html.bea67e08.js"><link rel="prefetch" href="/assets/RedisåŸºç¡€.html.4d6aced6.js"><link rel="prefetch" href="/assets/Gitè¯¾ç¨‹è®²ä¹‰.html.189b44ac.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day01.html.5616fc38.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day02.html.bf4badc4.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day03.html.7827f98f.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day04.html.9c611a94.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day05.html.4f7ada6b.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–-Day06.html.55fe895e.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–ä¼˜åŒ–-Day01.html.6b5a4312.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–ä¼˜åŒ–-Day02.html.0349c8df.js"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–ä¼˜åŒ–-Day03.html.9f453a10.js"><link rel="prefetch" href="/assets/å¾®æœåŠ¡å¸¸è§é¢è¯•é¢˜.html.3faa5dc5.js"><link rel="prefetch" href="/assets/é”™è¯¯ç¬”è®°.html.83b74f2f.js"><link rel="prefetch" href="/assets/day01-HTMLåŸºç¡€.html.63b748cd.js"><link rel="prefetch" href="/assets/day02-HTMLè¿›é˜¶.html.46a16144.js"><link rel="prefetch" href="/assets/day03-CSSåŸºç¡€.html.54c26625.js"><link rel="prefetch" href="/assets/day04-CSSè¿›é˜¶.html.e2d4feae.js"><link rel="prefetch" href="/assets/day05-ç›’å­æ¨¡å‹.html.01441e17.js"><link rel="prefetch" href="/assets/day06-Flexå¸ƒå±€.html.5d92e88d.js"><link rel="prefetch" href="/assets/day07-å­¦æˆåœ¨çº¿.html.3466d7e7.js"><link rel="prefetch" href="/assets/day08-CSSé«˜çº§.html.d3c2c18c.js"><link rel="prefetch" href="/assets/day09-å°å…”é²œå„¿.html.9b9ec0c3.js"><link rel="prefetch" href="/assets/day10-å°å…”é²œå„¿.html.3f83236a.js"><link rel="prefetch" href="/assets/Day01-é¡¹ç›®ä»‹ç»åŠåˆå§‹åŒ–-ç™»å½•é¡µé¢.html.915f4e88.js"><link rel="prefetch" href="/assets/Day02-ç™»å½•æ¨¡å—-ä¸»é¡µé‰´æƒ.html.3be6906c.js"><link rel="prefetch" href="/assets/Day03-ä¸»é¡µæ¨¡å—-ä¿®æ”¹å¯†ç .html.4d558a4d.js"><link rel="prefetch" href="/assets/Day04-ç»„ç»‡æ¶æ„.html.dc7c7c0e.js"><link rel="prefetch" href="/assets/Day05-ç»„ç»‡æ¶æ„-è§’è‰²ç®¡ç†.html.b9eea018.js"><link rel="prefetch" href="/assets/Day06-è§’è‰²ç®¡ç†-å‘˜å·¥ç®¡ç†.html.2d8e165b.js"><link rel="prefetch" href="/assets/Day07-å‘˜å·¥ç®¡ç†-ä¸Šä¼ ä¸‹è½½.html.7a06865a.js"><link rel="prefetch" href="/assets/Day08-Cosä¸Šä¼ å’Œæƒé™æ•°æ®.html.25a1a504.js"><link rel="prefetch" href="/assets/Day09-æƒé™åº”ç”¨-é¦–é¡µ.html.6eca6b6c.js"><link rel="prefetch" href="/assets/Day10-é¦–é¡µå›¾è¡¨-Nginxä¸Šçº¿.html.69bcc449.js"><link rel="prefetch" href="/assets/1.Vue3å…¥é—¨.html.c7761663.js"><link rel="prefetch" href="/assets/10.è´­ç‰©è½¦.html.4c6880a6.js"><link rel="prefetch" href="/assets/11.è®¢å•é¡µ.html.94088313.js"><link rel="prefetch" href="/assets/12.æ”¯ä»˜é¡µ.html.2d478a1d.js"><link rel="prefetch" href="/assets/13.ä¼šå‘˜ä¸­å¿ƒ.html.c7b3f643.js"><link rel="prefetch" href="/assets/14.æ‹“å±•éƒ¨åˆ†.html.893b37a4.js"><link rel="prefetch" href="/assets/2.Piniaå…¥é—¨.html.e287b89d.js"><link rel="prefetch" href="/assets/3.é¡¹ç›®èµ·æ­¥.html.41d2fdfc.js"><link rel="prefetch" href="/assets/4.Layouté¡µ.html.ecc0d610.js"><link rel="prefetch" href="/assets/5.Homeé¡µ.html.9d314e7c.js"><link rel="prefetch" href="/assets/6.ä¸€çº§åˆ†ç±»é¡µ.html.730e97a5.js"><link rel="prefetch" href="/assets/7.äºŒçº§åˆ†ç±»é¡µ.html.2ebfc31b.js"><link rel="prefetch" href="/assets/8.å•†å“è¯¦æƒ….html.b9adfba3.js"><link rel="prefetch" href="/assets/9.ç™»å½•é¡µ.html.964580c2.js"><link rel="prefetch" href="/assets/day01.html.983104c3.js"><link rel="prefetch" href="/assets/day02.html.467dd511.js"><link rel="prefetch" href="/assets/day03.html.d28d4956.js"><link rel="prefetch" href="/assets/index.html.67f1f801.js"><link rel="prefetch" href="/assets/day01.html.69f0117d.js"><link rel="prefetch" href="/assets/day02.html.f4928106.js"><link rel="prefetch" href="/assets/day03.html.5717e8c8.js"><link rel="prefetch" href="/assets/day04.html.02e02b44.js"><link rel="prefetch" href="/assets/index.html.3b33834d.js"><link rel="prefetch" href="/assets/interview-base.html.c7ded4c6.js"><link rel="prefetch" href="/assets/interview-enjoy-plus.html.45300616.js"><link rel="prefetch" href="/assets/RedisåŸºç¡€ç¯‡.html.4bfe8e4c.js"><link rel="prefetch" href="/assets/Rediså¿«é€Ÿå…¥é—¨.html.6f71b8c9.js"><link rel="prefetch" href="/assets/Rediså®æˆ˜ç¯‡.html.a9cb7bba.js"><link rel="prefetch" href="/assets/RedisåŸç†ç¯‡.html.4ace4ced.js"><link rel="prefetch" href="/assets/è¯¾å ‚ç¬”è®°.html.97e38832.js"><link rel="prefetch" href="/assets/è¯¾å ‚ç¬”è®°.html.8fd679e5.js"><link rel="prefetch" href="/assets/Spring-day01.html.7d9834f7.js"><link rel="prefetch" href="/assets/Spring-day02.html.53dd479c.js"><link rel="prefetch" href="/assets/Spring-day03.html.608fd426.js"><link rel="prefetch" href="/assets/SpringMVC-day01.html.8cda15fa.js"><link rel="prefetch" href="/assets/SpringMVC-day02.html.a7e2d610.js"><link rel="prefetch" href="/assets/é”™è¯¯ç¬”è®°.html.7636a53c.js"><link rel="prefetch" href="/assets/SpringBootStart.html.803fe3e4.js"><link rel="prefetch" href="/assets/SpringBootæ•´åˆSSMP.html.4894a971.js"><link rel="prefetch" href="/assets/SpringBootç»¼åˆæ¡ˆä¾‹.html.b4285cc6.js"><link rel="prefetch" href="/assets/SpringBootè®²ä¹‰.html.5b7f2173.js"><link rel="prefetch" href="/assets/Centos8-streamåœ¨çœŸæœºä¸Šå®‰è£…æ’å‘.html.a00dfbf5.js"><link rel="prefetch" href="/assets/Centos9å®‰è£…mysql.html.9839b7c4.js"><link rel="prefetch" href="/assets/SpringCloud01.html.aaa7056a.js"><link rel="prefetch" href="/assets/SpringCloudå®ç”¨ç¯‡02.html.93522e30.js"><link rel="prefetch" href="/assets/Dockerå®ç”¨ç¯‡.html.6ad09e7e.js"><link rel="prefetch" href="/assets/RabbitMQ.html.077be3a0.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼æœç´¢å¼•æ“01.html.c091c964.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼æœç´¢å¼•æ“02.html.6db2bda3.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼æœç´¢å¼•æ“03.html.60987b70.js"><link rel="prefetch" href="/assets/å¾®æœåŠ¡ä¿æŠ¤.html.edcfd89b.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡.html.dcb38d3b.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼ç¼“å­˜.html.18b00f8d.js"><link rel="prefetch" href="/assets/å¤šçº§ç¼“å­˜.html.ef484c28.js"><link rel="prefetch" href="/assets/RabbitMQ-é«˜çº§ç¯‡.html.92e0e932.js"><link rel="prefetch" href="/assets/Mybatisç¬¬ä¸€å¤©.html.32fa553b.js"><link rel="prefetch" href="/assets/Mybatisç¬¬äºŒå¤©.html.1520f9ca.js"><link rel="prefetch" href="/assets/ç§»åŠ¨webç¬¬ä¸€å¤©.html.185c706b.js"><link rel="prefetch" href="/assets/ç§»åŠ¨Webç¬¬äºŒå¤©.html.e629a529.js"><link rel="prefetch" href="/assets/ç§»åŠ¨Webç¬¬ä¸‰å¤©.html.4847f02c.js"><link rel="prefetch" href="/assets/ç§»åŠ¨Webç¬¬å››å¤©.html.3a0294df.js"><link rel="prefetch" href="/assets/ç§»åŠ¨Webç¬¬äº”å¤©.html.29106f91.js"><link rel="prefetch" href="/assets/JavaScriptåŸºç¡€ç¬¬ä¸€å¤©.html.2ae59154.js"><link rel="prefetch" href="/assets/JavaScriptåŸºç¡€ç¬¬ä¸‰å¤©.html.6eec45f8.js"><link rel="prefetch" href="/assets/javascriptåŸºç¡€ç¬¬äºŒå¤©ç¬”è®°.html.92ef5a75.js"><link rel="prefetch" href="/assets/JavaScriptåŸºç¡€ç¬¬äº”å¤©.html.3a05ee93.js"><link rel="prefetch" href="/assets/JavaScriptåŸºç¡€ç¬¬å››å¤©.html.b0965889.js"><link rel="prefetch" href="/assets/index.html.3532905b.js"><link rel="prefetch" href="/assets/ä¸ªäººå®æˆ˜æ–‡æ¡£.html.1219b0c5.js"><link rel="prefetch" href="/assets/index.html.8ac87d00.js"><link rel="prefetch" href="/assets/index.html.833ddf1f.js"><link rel="prefetch" href="/assets/index.html.30fa6ee5.js"><link rel="prefetch" href="/assets/index.html.ffa1d9e6.js"><link rel="prefetch" href="/assets/index.html.256e1857.js"><link rel="prefetch" href="/assets/JavaScriptè¿›é˜¶ç¬¬ä¸€å¤©.html.fd4dc190.js"><link rel="prefetch" href="/assets/day03.html.0fede3dc.js"><link rel="prefetch" href="/assets/day02.html.f0628b07.js"><link rel="prefetch" href="/assets/day04.html.6662bf39.js"><link rel="prefetch" href="/assets/ç¬”è®°.html.ba7f84fe.js"><link rel="prefetch" href="/assets/ç¬”è®°.html.405fd872.js"><link rel="prefetch" href="/assets/ç¬”è®°.html.ff2cfadd.js"><link rel="prefetch" href="/assets/day01.html.05d34547.js"><link rel="prefetch" href="/assets/day02.html.7915261c.js"><link rel="prefetch" href="/assets/day03.html.e408c947.js"><link rel="prefetch" href="/assets/day04.html.8200ae76.js"><link rel="prefetch" href="/assets/day05.html.57f1c253.js"><link rel="prefetch" href="/assets/day06.html.fca25782.js"><link rel="prefetch" href="/assets/day07.html.caddaa6d.js"><link rel="prefetch" href="/assets/æ™ºæ…§å•†åŸé¡¹ç›®.html.17d5c345.js"><link rel="prefetch" href="/assets/Vue3å…¥é—¨.html.6509aa8c.js"><link rel="prefetch" href="/assets/Pinia.html.9731a05b.js"><link rel="prefetch" href="/assets/å¤§äº‹ä»¶ç®¡ç†ç³»ç»Ÿ.html.2083634a.js"><link rel="prefetch" href="/assets/01-é¡¹ç›®èµ·æ­¥.html.82296ed4.js"><link rel="prefetch" href="/assets/02-é¦–é¡µæ¨¡å—.html.027baa52.js"><link rel="prefetch" href="/assets/03-æ¨èæ¨¡å—.html.1a8f7677.js"><link rel="prefetch" href="/assets/04-åˆ†ç±»æ¨¡å—.html.00dccc34.js"><link rel="prefetch" href="/assets/05-è¯¦æƒ…æ¨¡å—.html.050a4cdf.js"><link rel="prefetch" href="/assets/06-ç™»å½•æ¨¡å—.html.b3d03669.js"><link rel="prefetch" href="/assets/07-ç”¨æˆ·æ¨¡å—.html.a1cd89f0.js"><link rel="prefetch" href="/assets/08-åœ°å€æ¨¡å—.html.8523f29f.js"><link rel="prefetch" href="/assets/09-SKUæ¨¡å—.html.9e62e508.js"><link rel="prefetch" href="/assets/10-è´­ç‰©è½¦æ¨¡å—.html.aa4ef1c9.js"><link rel="prefetch" href="/assets/11-è®¢å•æ¨¡å—.html.5c39dd64.js"><link rel="prefetch" href="/assets/12-é¡¹ç›®æ‰“åŒ….html.79bb2732.js"><link rel="prefetch" href="/assets/index.html.c2edc3d0.js"><link rel="prefetch" href="/assets/ç¬¬1å¤©.html.6724bab7.js"><link rel="prefetch" href="/assets/ç¬¬2å¤©.html.0189ab64.js"><link rel="prefetch" href="/assets/ç¬¬3å¤©.html.eabae459.js"><link rel="prefetch" href="/assets/ç¬¬4å¤©.html.feb9c93d.js"><link rel="prefetch" href="/assets/ç¬¬5å¤©.html.7eec068b.js"><link rel="prefetch" href="/assets/å°ç¨‹åºè‡ªå®šä¹‰tabBar.html.877050c0.js"><link rel="prefetch" href="/assets/ç¬¬6å¤©.html.56404fba.js"><link rel="prefetch" href="/assets/Redisé«˜çº§-åˆ†å¸ƒå¼ç¼“å­˜.html.c0fef97b.js"><link rel="prefetch" href="/assets/Redisé«˜çº§ç¯‡ä¹‹æœ€ä½³å®è·µ.html.d07579cb.js"><link rel="prefetch" href="/assets/å¤šçº§ç¼“å­˜.html.3cfed601.js"><link rel="prefetch" href="/assets/Nacoså®‰è£…æŒ‡å—.html.24a99942.js"><link rel="prefetch" href="/assets/Nacosé›†ç¾¤æ­å»º.html.f7992a9d.js"><link rel="prefetch" href="/assets/Centos7å®‰è£…Docker.html.21528208.js"><link rel="prefetch" href="/assets/RabbitMQéƒ¨ç½²æŒ‡å—.html.322eec03.js"><link rel="prefetch" href="/assets/å®‰è£…elasticsearch.html.590faa07.js"><link rel="prefetch" href="/assets/Day01_AJAXå…¥é—¨.html.040ae3b9.js"><link rel="prefetch" href="/assets/Day02_AJAXç»¼åˆæ¡ˆä¾‹.html.ccc4e15a.js"><link rel="prefetch" href="/assets/Day03_AJAXåŸç†.html.9228fe0b.js"><link rel="prefetch" href="/assets/Day04_AJAXè¿›é˜¶.html.3e127c52.js"><link rel="prefetch" href="/assets/404.html.2052d23f.js"><link rel="prefetch" href="/assets/404.c9d416d2.js"><link rel="prefetch" href="/assets/Layout.33a11a1a.js"><link rel="prefetch" href="/assets/index.0e8935cb.js"><link rel="prefetch" href="/assets/giscus.15440425.js">
    <link rel="stylesheet" href="/assets/style.5869c25b.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/logo.png" alt="Hades"><span class="site-name can-hide">Hades</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/Android/" class="" aria-label="Android"><!--[--><!--]--> Android <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Javaåç«¯/" class="" aria-label="Javaåç«¯"><!--[--><!--]--> Javaåç«¯ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Webå‰ç«¯/" class="" aria-label="Webå‰ç«¯"><!--[--><!--]--> Webå‰ç«¯ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/æ•°æ®åº“/" class="" aria-label="æ•°æ®åº“"><!--[--><!--]--> æ•°æ®åº“ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/è¿ç»´æŠ€æœ¯/" class="" aria-label="è¿ç»´æŠ€æœ¯"><!--[--><!--]--> è¿ç»´æŠ€æœ¯ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Tips/" class="" aria-label="Tipsâ¤ï¸â€"><!--[--><!--]--> Tipsâ¤ï¸â€ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ä¹¦ç­¾ğŸ”–"><span class="title">ä¹¦ç­¾ğŸ”–</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ä¹¦ç­¾ğŸ”–"><span class="title">ä¹¦ç­¾ğŸ”–</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æœç´¢</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://www.baidu.com" rel="noopener noreferrer" target="_blank" aria-label="ç™¾åº¦ä¸€ä¸‹"><!--[--><!--]--> ç™¾åº¦ä¸€ä¸‹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å¸¸ç”¨</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="http://gitee.com" rel="noopener noreferrer" target="_blank" aria-label="gitee"><!--[--><!--]--> gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="http://bilibili.com" rel="noopener noreferrer" target="_blank" aria-label="å“”å“©å“”å“©"><!--[--><!--]--> å“”å“©å“”å“© <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/start/BuildError/README.md" class="" aria-label="Vuepressæ‰“åŒ…é”™è¯¯"><!--[--><!--]--> Vuepressæ‰“åŒ…é”™è¯¯ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/Android/" class="" aria-label="Android"><!--[--><!--]--> Android <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Javaåç«¯/" class="" aria-label="Javaåç«¯"><!--[--><!--]--> Javaåç«¯ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Webå‰ç«¯/" class="" aria-label="Webå‰ç«¯"><!--[--><!--]--> Webå‰ç«¯ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/æ•°æ®åº“/" class="" aria-label="æ•°æ®åº“"><!--[--><!--]--> æ•°æ®åº“ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/è¿ç»´æŠ€æœ¯/" class="" aria-label="è¿ç»´æŠ€æœ¯"><!--[--><!--]--> è¿ç»´æŠ€æœ¯ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Tips/" class="" aria-label="Tipsâ¤ï¸â€"><!--[--><!--]--> Tipsâ¤ï¸â€ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ä¹¦ç­¾ğŸ”–"><span class="title">ä¹¦ç­¾ğŸ”–</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ä¹¦ç­¾ğŸ”–"><span class="title">ä¹¦ç­¾ğŸ”–</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>æœç´¢</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://www.baidu.com" rel="noopener noreferrer" target="_blank" aria-label="ç™¾åº¦ä¸€ä¸‹"><!--[--><!--]--> ç™¾åº¦ä¸€ä¸‹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>å¸¸ç”¨</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="http://gitee.com" rel="noopener noreferrer" target="_blank" aria-label="gitee"><!--[--><!--]--> gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="http://bilibili.com" rel="noopener noreferrer" target="_blank" aria-label="å“”å“©å“”å“©"><!--[--><!--]--> å“”å“©å“”å“© <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/start/BuildError/README.md" class="" aria-label="Vuepressæ‰“åŒ…é”™è¯¯"><!--[--><!--]--> Vuepressæ‰“åŒ…é”™è¯¯ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">SpringBootå¼€å‘å®ç”¨ç¯‡ <!----></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_1-çƒ­éƒ¨ç½²" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.çƒ­éƒ¨ç½²"><!--[--><!--]--> 1.çƒ­éƒ¨ç½² <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_1-1-æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²" class="router-link-active router-link-exact-active sidebar-item" aria-label="1-1.æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²"><!--[--><!--]--> 1-1.æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½² <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_1-2-è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²" class="router-link-active router-link-exact-active sidebar-item" aria-label="1-2.è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²"><!--[--><!--]--> 1-2.è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½² <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_1-3-å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®" class="router-link-active router-link-exact-active sidebar-item" aria-label="1-3.å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®"><!--[--><!--]--> 1-3.å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½® <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_1-4-å…³é—­çƒ­éƒ¨ç½²" class="router-link-active router-link-exact-active sidebar-item" aria-label="1-4.å…³é—­çƒ­éƒ¨ç½²"><!--[--><!--]--> 1-4.å…³é—­çƒ­éƒ¨ç½² <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_2-é…ç½®é«˜çº§" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.é…ç½®é«˜çº§"><!--[--><!--]--> 2.é…ç½®é«˜çº§ <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_2-1-configurationproperties" class="router-link-active router-link-exact-active sidebar-item" aria-label="2-1.@ConfigurationProperties"><!--[--><!--]--> 2-1.@ConfigurationProperties <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_2-2-å®½æ¾ç»‘å®š-æ¾æ•£ç»‘å®š" class="router-link-active router-link-exact-active sidebar-item" aria-label="2-2.å®½æ¾ç»‘å®š/æ¾æ•£ç»‘å®š"><!--[--><!--]--> 2-2.å®½æ¾ç»‘å®š/æ¾æ•£ç»‘å®š <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_2-3-å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š" class="router-link-active router-link-exact-active sidebar-item" aria-label="2-3.å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š"><!--[--><!--]--> 2-3.å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_2-4-æ ¡éªŒ" class="router-link-active router-link-exact-active sidebar-item" aria-label="2-4.æ ¡éªŒ"><!--[--><!--]--> 2-4.æ ¡éªŒ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_2-5-æ•°æ®ç±»å‹è½¬æ¢" class="router-link-active router-link-exact-active sidebar-item" aria-label="2-5.æ•°æ®ç±»å‹è½¬æ¢"><!--[--><!--]--> 2-5.æ•°æ®ç±»å‹è½¬æ¢ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_3-æµ‹è¯•" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.æµ‹è¯•"><!--[--><!--]--> 3.æµ‹è¯• <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_3-1-åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§" class="router-link-active router-link-exact-active sidebar-item" aria-label="3-1.åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§"><!--[--><!--]--> 3-1.åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_3-2-åŠ è½½æµ‹è¯•ä¸“ç”¨é…ç½®" class="router-link-active router-link-exact-active sidebar-item" aria-label="3-2.åŠ è½½æµ‹è¯•ä¸“ç”¨é…ç½®"><!--[--><!--]--> 3-2.åŠ è½½æµ‹è¯•ä¸“ç”¨é…ç½® <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_3-3-webç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•" class="router-link-active router-link-exact-active sidebar-item" aria-label="3-3.Webç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•"><!--[--><!--]--> 3-3.Webç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯• <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_3-4-æ•°æ®å±‚æµ‹è¯•å›æ»š" class="router-link-active router-link-exact-active sidebar-item" aria-label="3-4.æ•°æ®å±‚æµ‹è¯•å›æ»š"><!--[--><!--]--> 3-4.æ•°æ®å±‚æµ‹è¯•å›æ»š <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_3-5-æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š" class="router-link-active router-link-exact-active sidebar-item" aria-label="3-5.æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š"><!--[--><!--]--> 3-5.æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_4-æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ"><!--[--><!--]--> 4.æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_4-1-sql" class="router-link-active router-link-exact-active sidebar-item" aria-label="4-1.SQL"><!--[--><!--]--> 4-1.SQL <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_4-2-nosql" class="router-link-active router-link-exact-active sidebar-item" aria-label="4-2.NoSQL"><!--[--><!--]--> 4-2.NoSQL <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_5-æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯"><!--[--><!--]--> 5.æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯ <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_5-1-ç¼“å­˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="5-1.ç¼“å­˜"><!--[--><!--]--> 5-1.ç¼“å­˜ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_5-2-ä»»åŠ¡" class="router-link-active router-link-exact-active sidebar-item" aria-label="5-2.ä»»åŠ¡"><!--[--><!--]--> 5-2.ä»»åŠ¡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_5-3-é‚®ä»¶" class="router-link-active router-link-exact-active sidebar-item" aria-label="5-3.é‚®ä»¶"><!--[--><!--]--> 5-3.é‚®ä»¶ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_5-4-æ¶ˆæ¯" class="router-link-active router-link-exact-active sidebar-item" aria-label="5-4.æ¶ˆæ¯"><!--[--><!--]--> 5-4.æ¶ˆæ¯ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_6-ç›‘æ§" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.ç›‘æ§"><!--[--><!--]--> 6.ç›‘æ§ <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_6-1-ç›‘æ§çš„æ„ä¹‰" class="router-link-active router-link-exact-active sidebar-item" aria-label="6-1.ç›‘æ§çš„æ„ä¹‰"><!--[--><!--]--> 6-1.ç›‘æ§çš„æ„ä¹‰ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_6-2-å¯è§†åŒ–ç›‘æ§å¹³å°" class="router-link-active router-link-exact-active sidebar-item" aria-label="6-2.å¯è§†åŒ–ç›‘æ§å¹³å°"><!--[--><!--]--> 6-2.å¯è§†åŒ–ç›‘æ§å¹³å° <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_6-3-ç›‘æ§åŸç†" class="router-link-active router-link-exact-active sidebar-item" aria-label="6-3.ç›‘æ§åŸç†"><!--[--><!--]--> 6-3.ç›‘æ§åŸç† <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#_6-4-è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡" class="router-link-active router-link-exact-active sidebar-item" aria-label="6-4.è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡"><!--[--><!--]--> 6-4.è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Java%E5%90%8E%E7%AB%AF/06SpringBoot/2%E5%BA%94%E7%94%A8%E7%AF%87/02%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/SpringBoot%E8%AE%B2%E4%B9%89.html#å¼€å‘å®ç”¨ç¯‡å®Œç»“" class="router-link-active router-link-exact-active sidebar-item" aria-label="å¼€å‘å®ç”¨ç¯‡å®Œç»“"><!--[--><!--]--> å¼€å‘å®ç”¨ç¯‡å®Œç»“ <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="springbootå¼€å‘å®ç”¨ç¯‡" tabindex="-1"><a class="header-anchor" href="#springbootå¼€å‘å®ç”¨ç¯‡" aria-hidden="true">#</a> SpringBootå¼€å‘å®ç”¨ç¯‡</h1><p>â€‹ æ€€ç€å¿å¿‘çš„å¿ƒæƒ…ï¼Œå¼€å§‹äº†å¼€å‘å®ç”¨ç¯‡æ–‡æ¡£çš„ç¼–å†™ã€‚ä¸ºä»€ä¹ˆå¿å¿‘ï¼Ÿç‰¹å–µçš„å€ºæ¬ çš„å¤ªå¤šï¼Œä¸çŸ¥é“ä»ä½•å†™èµ·ã€‚å“ï¼Œä¸ç…½æƒ…äº†ï¼Œå¼€å·¥ã€‚</p><p>â€‹ è¿ç»´å®ç”¨ç¯‡å®Œç»“ä»¥åï¼Œå¼€å‘å®ç”¨ç¯‡é‡‡ç”¨æ—¥æ›´æ–°çš„å½¢å¼å‘å¸ƒç»™å„ä½å°ä¼™ä¼´ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ¯å¤©ä¸€é›†ï¼Œç›®å‰å·²ç»å‘å¸ƒå®Œæ¯•ã€‚çœ‹è¯„è®ºåŒºï¼Œå¥½å¤šå°ä¼™ä¼´åœ¨æ±‚æ–‡æ¡£ï¼Œæ‰€ä»¥èµ¶ç´§æ¥è¡¥æ–‡æ¡£ï¼ŒåŠ ç­åŠ ç‚¹æŠŠå¼€å‘å®ç”¨ç¯‡çš„æ–‡æ¡£åˆ¨å‡ºæ¥ã€‚</p><p>â€‹ å¼€å‘å®ç”¨ç¯‡ä¸­å› ä¸ºç‰µæ‰¯åˆ°SpringBootæ•´åˆå„ç§å„æ ·çš„æŠ€æœ¯ï¼Œç”±äºä¸æ˜¯æ¯ä¸ªå°ä¼™ä¼´å¯¹å„ç§æŠ€æœ¯éƒ½æœ‰æ‰€æŒæ¡ï¼Œæ‰€ä»¥åœ¨æ•´åˆæ¯ä¸€ä¸ªæŠ€æœ¯ä¹‹å‰ï¼Œéƒ½ä¼šåšä¸€ä¸ªå¿«é€Ÿçš„æ™®åŠï¼Œè¿™æ ·çš„è¯å†…å®¹æ•´ä¸ªå¼€å‘å®ç”¨ç¯‡æ‰€åŒ…å«çš„å†…å®¹å°±ä¼šæ¯”è¾ƒå¤šã€‚å„ä½å°ä¼™ä¼´åœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œå¦‚æœå¯¹æŸä¸€ä¸ªæŠ€æœ¯ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå¯ä»¥å…ˆè·³è¿‡å¯¹åº”ç« èŠ‚ï¼Œæˆ–è€…å…ˆè¡¥å……ä¸€ä¸‹æŠ€æœ¯çŸ¥è¯†ï¼Œç„¶åå†æ¥çœ‹å¯¹åº”çš„è¯¾ç¨‹ã€‚å¼€å‘å®ç”¨ç¯‡å…·ä½“åŒ…å«çš„å†…å®¹å¦‚ä¸‹ï¼š</p><ul><li>çƒ­éƒ¨ç½²</li><li>é…ç½®é«˜çº§</li><li>æµ‹è¯•</li><li>æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ</li><li>æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯</li><li>ç›‘æ§</li></ul><p>â€‹ çœ‹ç›®å½•æ„Ÿè§‰å†…å®¹é‡å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯åœ¨æ•°æ®å±‚è§£å†³æ–¹æ¡ˆå’Œæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯ä¸­åŒ…å«äº†å¤§é‡çš„çŸ¥è¯†ï¼Œä¸€ç‚¹ä¸€ç‚¹æ…¢æ…¢å­¦å§ã€‚ä¸‹é¢å¼€å¯ç¬¬ä¸€éƒ¨åˆ†çƒ­éƒ¨ç½²ç›¸å…³çŸ¥è¯†çš„å­¦ä¹ </p><h2 id="_1-çƒ­éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_1-çƒ­éƒ¨ç½²" aria-hidden="true">#</a> 1.çƒ­éƒ¨ç½²</h2><p>â€‹ ä»€ä¹ˆæ˜¯çƒ­éƒ¨ç½²ï¼Ÿç®€å•è¯´å°±æ˜¯ä½ ç¨‹åºæ”¹äº†ï¼Œç°åœ¨è¦é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œå«Œéº»çƒ¦ï¼Ÿä¸ç”¨é‡å¯ï¼ŒæœåŠ¡å™¨ä¼šè‡ªå·±æ‚„æ‚„çš„æŠŠæ›´æ–°åçš„ç¨‹åºç»™é‡æ–°åŠ è½½ä¸€éï¼Œè¿™å°±æ˜¯çƒ­éƒ¨ç½²ã€‚</p><p>â€‹ çƒ­éƒ¨ç½²çš„åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿè¿™å°±è¦åˆ†ä¸¤ç§æƒ…å†µæ¥è¯´äº†ï¼Œéspringbootå·¥ç¨‹å’Œspringbootå·¥ç¨‹çš„çƒ­éƒ¨ç½²å®ç°æ–¹å¼å®Œå…¨ä¸ä¸€æ ·ã€‚å…ˆè¯´ä¸€ä¸‹åŸå§‹çš„éspringbooté¡¹ç›®æ˜¯å¦‚ä½•å®ç°çƒ­éƒ¨ç½²çš„ã€‚</p><p><strong>éspringbooté¡¹ç›®çƒ­éƒ¨ç½²å®ç°åŸç†</strong></p><p>â€‹ å¼€å‘éspringbooté¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬è¦åˆ¶ä½œä¸€ä¸ªwebå·¥ç¨‹å¹¶é€šè¿‡tomcatå¯åŠ¨ï¼Œé€šå¸¸éœ€è¦å…ˆå®‰è£…tomcatæœåŠ¡å™¨åˆ°ç£ç›˜ä¸­ï¼Œå¼€å‘çš„ç¨‹åºé…ç½®å‘å¸ƒåˆ°å®‰è£…çš„tomcatæœåŠ¡å™¨ä¸Šã€‚å¦‚æœæƒ³å®ç°çƒ­éƒ¨ç½²çš„æ•ˆæœï¼Œè¿™ç§æƒ…å†µå…¶å®æœ‰ä¸¤ç§åšæ³•ï¼Œä¸€ç§æ˜¯åœ¨tomcatæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œè¿™ç§åšæ³•ä¸ä½ ä½¿ç”¨ä»€ä¹ˆIDEå·¥å…·æ— å…³ï¼Œä¸ç®¡ä½ ä½¿ç”¨eclipseè¿˜æ˜¯ideaéƒ½è¡Œã€‚è¿˜æœ‰ä¸€ç§åšæ³•æ˜¯é€šè¿‡IDEå·¥å…·è¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚åœ¨ideaå·¥å…·ä¸­è¿›è¡Œè®¾ç½®ï¼Œè¿™ç§å½¢å¼éœ€è¦ä¾èµ–IDEå·¥å…·ï¼Œæ¯æ¬¾IDEå·¥å…·ä¸åŒï¼Œå¯¹åº”çš„é…ç½®ä¹Ÿä¸å¤ªä¸€æ ·ã€‚ä½†æ˜¯æ ¸å¿ƒæ€æƒ³æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯ä½¿ç”¨æœåŠ¡å™¨å»ç›‘æ§å…¶ä¸­åŠ è½½çš„åº”ç”¨ï¼Œå‘ç°äº§ç”Ÿäº†å˜åŒ–å°±é‡æ–°åŠ è½½ä¸€æ¬¡ã€‚</p><p>â€‹ ä¸Šé¢æ‰€è¯´çš„éspringbooté¡¹ç›®å®ç°çƒ­éƒ¨ç½²çœ‹ä¸Šå»æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„è¿‡ç¨‹ï¼Œå‡ ä¹æ¯ä¸ªå°ä¼™ä¼´éƒ½èƒ½è‡ªå·±å†™å‡ºæ¥ã€‚å¦‚æœä½ ä¸ä¼šå†™ï¼Œæˆ‘ç»™ä½ ä¸ªæœ€ç®€å•çš„æ€è·¯ï¼Œä½†æ˜¯å®é™…è®¾è®¡è¦æ¯”è¿™å¤æ‚ä¸€äº›ã€‚ä¾‹å¦‚å¯åŠ¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œä»»åŠ¡å¯åŠ¨æ—¶è®°å½•æ¯ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œä»¥åæ¯5ç§’æ¯”å¯¹ä¸€ä¸‹æ¯ä¸ªæ–‡ä»¶çš„å¤§å°æ˜¯å¦æœ‰æ”¹å˜ï¼Œæˆ–è€…æ˜¯å¦æœ‰æ–°æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰æ”¹å˜ï¼Œæ”¾è¡Œï¼Œå¦‚æœæœ‰æ”¹å˜ï¼Œåˆ·æ–°å½“å‰è®°å½•çš„æ–‡ä»¶ä¿¡æ¯ï¼Œç„¶åé‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œè¿™å°±å¯ä»¥å®ç°çƒ­éƒ¨ç½²äº†ã€‚å½“ç„¶ï¼Œè¿™ä¸ªè¿‡ç¨‹è‚¯å®šä¸èƒ½è¿™ä¹ˆåšï¼Œæ¯”å¦‚æˆ‘æŠŠä¸€ä¸ªæ‰“å°è¾“å‡ºçš„å­—ç¬¦ä¸²&quot;abc&quot;æ”¹æˆ&quot;cba&quot;ï¼Œæ¯”å¯¹å¤§å°æ˜¯æ²¡æœ‰å˜åŒ–çš„ï¼Œä½†æ˜¯å†…å®¹ç¼ºå®å˜äº†ï¼Œæ‰€ä»¥è¿™ä¹ˆåšè‚¯å®šä¸è¡Œï¼Œåªæ˜¯ç»™å¤§å®¶æ‰“ä¸ªæ¯”æ–¹ï¼Œè€Œä¸”é‡å¯æœåŠ¡å™¨è¿™å°±æ˜¯å†·å¯åŠ¨äº†ï¼Œä¸èƒ½ç®—çƒ­éƒ¨ç½²ï¼Œé¢†ä¼šç²¾ç¥å§ã€‚</p><p>â€‹ çœ‹ä¸Šå»è¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ²¡å¤šå¤æ‚ï¼Œåœ¨springbooté¡¹ç›®ä¸­éš¾é“è¿˜æœ‰å…¶ä»–çš„å¼¯å¼¯ç»•å—ï¼Ÿè¿˜çœŸæœ‰ã€‚</p><p><strong>springbooté¡¹ç›®çƒ­éƒ¨ç½²å®ç°åŸç†</strong></p><p>â€‹ åŸºäºspringbootå¼€å‘çš„webå·¥ç¨‹å…¶å®æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹å¾ï¼Œå°±æ˜¯tomcatæœåŠ¡å™¨å†…ç½®äº†ï¼Œè¿˜è®°å¾—å†…åµŒæœåŠ¡å™¨å—ï¼ŸæœåŠ¡å™¨æ˜¯ä»¥ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼åœ¨springå®¹å™¨ä¸­è¿è¡Œçš„ã€‚æœ¬æ¥æˆ‘ä»¬æœŸæœ›äºtomcatæœåŠ¡å™¨åŠ è½½ç¨‹åºåç”±tomcatæœåŠ¡å™¨ç›¯ç€ç¨‹åºï¼Œä½ å˜åŒ–åæˆ‘å°±é‡æ–°å¯åŠ¨é‡æ–°åŠ è½½ï¼Œä½†æ˜¯ç°åœ¨tomcatå’Œæˆ‘ä»¬çš„ç¨‹åºæ˜¯å¹³çº§çš„äº†ï¼Œéƒ½æ˜¯springå®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œè¿™ä¸‹å°±éº»çƒ¦äº†ï¼Œç¼ºä¹äº†ä¸€ä¸ªç›´æ¥çš„ç®¡ç†æƒï¼Œé‚£è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿç®€å•ï¼Œå†æä¸€ä¸ªç¨‹åºXåœ¨springå®¹å™¨ä¸­ç›¯ç€ä½ åŸå§‹å¼€å‘çš„ç¨‹åºAä¸å°±è¡Œäº†å—ï¼Ÿç¡®å®ï¼Œæä¸€ä¸ªç›¯ç€ç¨‹åºAçš„ç¨‹åºXå°±è¡Œäº†ï¼Œå¦‚æœä½ è‡ªå·±å¼€å‘çš„ç¨‹åºAå˜åŒ–äº†ï¼Œé‚£ä¹ˆç¨‹åºXå°±å‘½ä»¤tomcatå®¹å™¨é‡æ–°åŠ è½½ç¨‹åºAå°±OKäº†ã€‚å¹¶ä¸”è¿™æ ·åšæœ‰ä¸€ä¸ªå¥½å¤„ï¼Œspringå®¹å™¨ä¸­ä¸œè¥¿ä¸ç”¨å…¨éƒ¨é‡æ–°åŠ è½½ä¸€éï¼Œåªéœ€è¦é‡æ–°åŠ è½½ä½ å¼€å‘çš„ç¨‹åºé‚£ä¸€éƒ¨åˆ†å°±å¯ä»¥äº†ï¼Œè¿™ä¸‹æ•ˆç‡åˆé«˜äº†ï¼ŒæŒºå¥½ã€‚</p><p>â€‹ ä¸‹é¢å°±è¯´è¯´ï¼Œæ€ä¹ˆæå‡ºæ¥è¿™ä¹ˆä¸€ä¸ªç¨‹åºXï¼Œè‚¯å®šä¸æ˜¯æˆ‘ä»¬è‡ªå·±æ‰‹å†™äº†ï¼Œspringbootæ—©å°±åšå¥½äº†ï¼Œæä¸€ä¸ªåæ ‡å¯¼å…¥è¿›å»å°±è¡Œäº†ã€‚</p><h3 id="_1-1-æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_1-1-æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²" aria-hidden="true">#</a> 1-1.æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²</h3><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥å¼€å‘è€…å·¥å…·å¯¹åº”çš„åæ ‡</p><div class="language-XML ext-XML line-numbers-mode"><pre class="language-XML"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šæ„å»ºé¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨å¿«æ·é”®æ¿€æ´»æ­¤åŠŸèƒ½</p><p><img src="/assets/image-20220222121257218.accc491a.png" alt="image-20220222121257218"></p><p>â€‹ å¯¹åº”çš„å¿«æ·é”®ä¸€å®šè¦è®°å¾—</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>&lt;CTR&gt;L+&lt;F9&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ ä»¥ä¸Šè¿‡ç¨‹å°±å®ç°äº†springbootå·¥ç¨‹çš„çƒ­éƒ¨ç½²ï¼Œæ˜¯ä¸æ˜¯æŒºç®€å•çš„ã€‚ä¸è¿‡è¿™é‡Œéœ€è¦æŠŠåº•å±‚çš„å·¥ä½œå·¥ç¨‹ç»™æ™®åŠä¸€ä¸‹ã€‚</p><p><strong>é‡å¯ä¸é‡è½½</strong></p><p>â€‹ ä¸€ä¸ªspringbooté¡¹ç›®åœ¨è¿è¡Œæ—¶å®é™…ä¸Šæ˜¯åˆ†ä¸¤ä¸ªè¿‡ç¨‹è¿›è¡Œçš„ï¼Œæ ¹æ®åŠ è½½çš„ä¸œè¥¿ä¸åŒï¼Œåˆ’åˆ†æˆbaseç±»åŠ è½½å™¨ä¸restartç±»åŠ è½½å™¨ã€‚</p><ul><li>baseç±»åŠ è½½å™¨ï¼šç”¨æ¥åŠ è½½jaråŒ…ä¸­çš„ç±»ï¼ŒjaråŒ…ä¸­çš„ç±»å’Œé…ç½®æ–‡ä»¶ç”±äºä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¸ç®¡åŠ è½½å¤šå°‘æ¬¡ï¼ŒåŠ è½½çš„å†…å®¹ä¸ä¼šå‘ç”Ÿå˜åŒ–</li><li>restartç±»åŠ è½½å™¨ï¼šç”¨æ¥åŠ è½½å¼€å‘è€…è‡ªå·±å¼€å‘çš„ç±»ã€é…ç½®æ–‡ä»¶ã€é¡µé¢ç­‰ä¿¡æ¯ï¼Œè¿™ä¸€ç±»æ–‡ä»¶å—å¼€å‘è€…å½±å“</li></ul><p>â€‹ å½“springbooté¡¹ç›®å¯åŠ¨æ—¶ï¼Œbaseç±»åŠ è½½å™¨æ‰§è¡Œï¼ŒåŠ è½½jaråŒ…ä¸­çš„ä¿¡æ¯åï¼Œrestartç±»åŠ è½½å™¨æ‰§è¡Œï¼ŒåŠ è½½å¼€å‘è€…åˆ¶ä½œçš„å†…å®¹ã€‚å½“æ‰§è¡Œæ„å»ºé¡¹ç›®åï¼Œç”±äºjarä¸­çš„ä¿¡æ¯ä¸ä¼šå˜åŒ–ï¼Œå› æ­¤baseç±»åŠ è½½å™¨æ— éœ€å†æ¬¡æ‰§è¡Œï¼Œæ‰€ä»¥ä»…ä»…è¿è¡Œrestartç±»åŠ è½½å³å¯ï¼Œä¹Ÿå°±æ˜¯å°†å¼€å‘è€…è‡ªå·±åˆ¶ä½œçš„å†…å®¹é‡æ–°åŠ è½½å°±è¡Œäº†ï¼Œè¿™å°±å®Œæˆäº†ä¸€æ¬¡çƒ­éƒ¨ç½²çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥è¯´çƒ­éƒ¨ç½²çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯é‡æ–°åŠ è½½restartç±»åŠ è½½å™¨ä¸­çš„ä¿¡æ¯ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨å¼€å‘è€…å·¥å…·å¯ä»¥ä¸ºå½“å‰é¡¹ç›®å¼€å¯çƒ­éƒ¨ç½²åŠŸèƒ½</li><li>ä½¿ç”¨æ„å»ºé¡¹ç›®æ“ä½œå¯¹å·¥ç¨‹è¿›è¡Œçƒ­éƒ¨ç½²</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ ä¸Šè¿°è¿‡ç¨‹æ¯æ¬¡è¿›è¡Œçƒ­éƒ¨ç½²éƒ½éœ€è¦å¼€å‘è€…æ‰‹å·¥æ“ä½œï¼Œä¸ç®¡æ˜¯ç‚¹å‡»æŒ‰é’®è¿˜æ˜¯å¿«æ·é”®éƒ½éœ€è¦å¼€å‘è€…æ‰‹å·¥æ‰§è¡Œã€‚è¿™ç§æ“ä½œçš„åº”ç”¨åœºæ™¯ä¸»è¦æ˜¯åœ¨å¼€å‘è°ƒè¯•æœŸï¼Œå¹¶ä¸”è°ƒè¯•çš„ä»£ç å¤„äºä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚æœåŠ¡å™¨å¯åŠ¨äº†ï¼Œæˆ‘éœ€è¦æ”¹4ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œç„¶åé‡å¯ï¼Œç­‰4ä¸ªæ–‡ä»¶éƒ½æ”¹å®Œäº†å†æ‰§è¡Œçƒ­éƒ¨ç½²ï¼Œä½¿ç”¨ä¸€ä¸ªå¿«æ·é”®å°±OKäº†ã€‚ä½†æ˜¯å¦‚æœç°åœ¨å¼€å‘è€…è¦ä¿®æ”¹çš„å†…å®¹å°±åªæœ‰ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å°‘é‡ä»£ç ï¼Œè¿™ä¸ªæ—¶å€™ä»£ç ä¿®æ”¹å®Œæ¯•å¦‚æœèƒ½å¤Ÿè®©ç¨‹åºè‡ªå·±æ‰§è¡Œçƒ­éƒ¨ç½²åŠŸèƒ½ï¼Œå°±å¯ä»¥å‡å°‘å¼€å‘è€…çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨è¿›è¡Œçƒ­éƒ¨ç½²ï¼Œèƒ½è¿™ä¹ˆåšå—ï¼Ÿæ˜¯å¯ä»¥çš„ã€‚å’±ä»¬ä¸‹ä¸€èŠ‚å†è¯´ã€‚</p><p>â€‹</p><h3 id="_1-2-è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_1-2-è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²" aria-hidden="true">#</a> 1-2.è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²</h3><p>â€‹ è‡ªåŠ¨çƒ­éƒ¨ç½²å…¶å®å°±æ˜¯è®¾è®¡ä¸€ä¸ªå¼€å…³ï¼Œæ‰“å¼€è¿™ä¸ªå¼€å…³åï¼ŒIDEå·¥å…·å°±å¯ä»¥è‡ªåŠ¨çƒ­éƒ¨ç½²ã€‚å› æ­¤è¿™ä¸ªæ“ä½œå’ŒIDEå·¥å…·æœ‰å…³ï¼Œä»¥ä¸‹ä»¥ideaä¸ºä¾‹è®¾ç½®ideaä¸­å¯åŠ¨çƒ­éƒ¨ç½²</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šè®¾ç½®è‡ªåŠ¨æ„å»ºé¡¹ç›®</p><p>â€‹ æ‰“å¼€ã€Fileã€‘ï¼Œé€‰æ‹©ã€settings...ã€‘,åœ¨é¢æ¿å·¦ä¾§çš„èœå•ä¸­æ‰¾åˆ°ã€Compileã€‘é€‰é¡¹ï¼Œç„¶åå‹¾é€‰ã€Build project automaticallyã€‘ï¼Œæ„æ€æ˜¯è‡ªåŠ¨æ„å»ºé¡¹ç›®</p><p><img src="/assets/image-20220222123543551.5b062f40.png" alt="image-20220222123543551"></p><p>â€‹ è‡ªåŠ¨æ„å»ºé¡¹ç›®é€‰é¡¹å‹¾é€‰å</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå…è®¸åœ¨ç¨‹åºè¿è¡Œæ—¶è¿›è¡Œè‡ªåŠ¨æ„å»º</p><p>â€‹ ä½¿ç”¨å¿«æ·é”®ã€Ctrlã€‘+ã€Altã€‘+ã€Shitã€‘+ã€/ã€‘æ‰“å¼€ç»´æŠ¤é¢æ¿ï¼Œé€‰æ‹©ç¬¬1é¡¹ã€Registry...ã€‘</p><p><img src="/assets/image-20220222124006910.12f98a37.png" alt="image-20220222124006910"></p><p>â€‹ åœ¨é€‰é¡¹ä¸­æœç´¢compleï¼Œç„¶åå‹¾é€‰å¯¹åº”é¡¹å³å¯</p><img src="/assets/image-20220222124240069.c16d2b1a.png" alt="image-20220222124240069" style="zoom:80%;"><p>â€‹ è¿™æ ·ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™å°±å¯ä»¥è¿›è¡Œè‡ªåŠ¨æ„å»ºäº†ï¼Œå®ç°äº†çƒ­éƒ¨ç½²çš„æ•ˆæœã€‚</p><p>â€‹ å…³äºåœ¨IDEA2022.xä¸­ï¼Œå¼€å¯è‡ªåŠ¨çƒ­éƒ¨ç½²ï¼Œéœ€è¦æ‰“å¼€è®¾ç½®é¢æ¿-&gt;é«˜çº§è®¾ç½®ï¼Œå‹¾é€‰<strong>å³ä½¿å¼€å‘çš„åº”ç”¨ç¨‹åºå½“å‰æ­£åœ¨è¿è¡Œï¼Œä¹Ÿå…è®¸è‡ªåŠ¨ make å¯åŠ¨</strong>ã€‚</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202211151038655.png" alt="image-20221115103838556"></p><p>**å…³æ³¨ï¼š**å¦‚æœä½ æ¯æ•²ä¸€ä¸ªå­—æ¯ï¼ŒæœåŠ¡å™¨å°±é‡æ–°æ„å»ºä¸€æ¬¡ï¼Œè¿™æœªå…æœ‰ç‚¹å¤ªé¢‘ç¹äº†ï¼Œæ‰€ä»¥ideaè®¾ç½®å½“ideaå·¥å…·å¤±å»ç„¦ç‚¹5ç§’åè¿›è¡Œçƒ­éƒ¨ç½²ã€‚å…¶å®å°±æ˜¯ä½ ä»ideaå·¥å…·ä¸­åˆ‡æ¢åˆ°å…¶ä»–å·¥å…·æ—¶è¿›è¡Œçƒ­éƒ¨ç½²ï¼Œæ¯”å¦‚æ”¹å®Œç¨‹åºéœ€è¦åˆ°æµè§ˆå™¨ä¸Šå»è°ƒè¯•ï¼Œè¿™ä¸ªæ—¶å€™ideaå°±è‡ªåŠ¨è¿›è¡Œçƒ­éƒ¨ç½²æ“ä½œã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>è‡ªåŠ¨çƒ­éƒ¨ç½²è¦å¼€å¯è‡ªåŠ¨æ„å»ºé¡¹ç›®</li><li>è‡ªåŠ¨çƒ­éƒ¨ç½²è¦å¼€å¯åœ¨ç¨‹åºè¿è¡Œæ—¶è‡ªåŠ¨æ„å»ºé¡¹ç›®</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ ç°åœ¨å·²ç»å®ç°äº†çƒ­éƒ¨ç½²äº†ï¼Œä½†æ˜¯åˆ°ä¼ä¸šå¼€å‘çš„æ—¶å€™ä½ ä¼šå‘ç°ï¼Œä¸ºäº†ä¾¿äºç®¡ç†ï¼Œåœ¨ä½ çš„ç¨‹åºç›®å½•ä¸­é™¤äº†æœ‰ä»£ç ï¼Œè¿˜æœ‰å¯èƒ½æœ‰æ–‡æ¡£ï¼Œå¦‚æœä½ ä¿®æ”¹äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œè¿™ä¸ªæ—¶å€™ä¼šè¿›è¡Œçƒ­éƒ¨ç½²å—ï¼Ÿä¸ç®¡æ˜¯å¦è¿›è¡Œçƒ­éƒ¨ç½²ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬éœ€è¦è‡ªå·±æ§åˆ¶æ‰æ¯”è¾ƒåˆç†ï¼Œé‚£è¿™ä¸ªä¸œè¥¿èƒ½æ§åˆ¶å—ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è¯´ã€‚</p><h3 id="_1-3-å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-3-å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®" aria-hidden="true">#</a> 1-3.å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®</h3><p>â€‹ é€šè¿‡ä¿®æ”¹é¡¹ç›®ä¸­çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥å‘ç°å…¶å®å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ–‡ä»¶ä¿®æ”¹éƒ½ä¼šæ¿€æ´»çƒ­éƒ¨ç½²çš„ï¼ŒåŸå› åœ¨äºåœ¨å¼€å‘è€…å·¥å…·ä¸­æœ‰ä¸€ç»„é…ç½®ï¼Œå½“æ»¡è¶³äº†é…ç½®ä¸­çš„æ¡ä»¶åï¼Œæ‰ä¼šå¯åŠ¨çƒ­éƒ¨ç½²ï¼Œé…ç½®ä¸­é»˜è®¤ä¸å‚ä¸çƒ­éƒ¨ç½²çš„ç›®å½•ä¿¡æ¯å¦‚ä¸‹</p><ul><li>/META-INF/maven</li><li>/META-INF/resources</li><li>/resources</li><li>/static</li><li>/public</li><li>/templates</li></ul><p>â€‹ ä»¥ä¸Šç›®å½•ä¸­çš„æ–‡ä»¶å¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œæ˜¯ä¸å‚ä¸çƒ­éƒ¨ç½²çš„ã€‚å¦‚æœæƒ³ä¿®æ”¹é…ç½®ï¼Œå¯ä»¥é€šè¿‡application.ymlæ–‡ä»¶è¿›è¡Œè®¾å®šå“ªäº›æ–‡ä»¶ä¸å‚ä¸çƒ­éƒ¨ç½²æ“ä½œ</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">devtools</span><span class="token punctuation">:</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span>
      <span class="token comment"># è®¾ç½®ä¸å‚ä¸çƒ­éƒ¨ç½²çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</span>
      <span class="token key atrule">exclude</span><span class="token punctuation">:</span> static/<span class="token important">**</span><span class="token punctuation">,</span>public/<span class="token important">**</span><span class="token punctuation">,</span>config/application.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>é€šè¿‡é…ç½®å¯ä»¥ä¿®æ”¹ä¸å‚ä¸çƒ­éƒ¨ç½²çš„æ–‡ä»¶æˆ–ç›®å½•</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ çƒ­éƒ¨ç½²åŠŸèƒ½æ˜¯ä¸€ä¸ªå…¸å‹çš„å¼€å‘é˜¶æ®µä½¿ç”¨çš„åŠŸèƒ½ï¼Œåˆ°äº†çº¿ä¸Šç¯å¢ƒè¿è¡Œç¨‹åºæ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚èƒ½å¦å…³é—­çƒ­éƒ¨ç½²åŠŸèƒ½å‘¢ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è¯´ã€‚</p><h3 id="_1-4-å…³é—­çƒ­éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_1-4-å…³é—­çƒ­éƒ¨ç½²" aria-hidden="true">#</a> 1-4.å…³é—­çƒ­éƒ¨ç½²</h3><p>â€‹ çº¿ä¸Šç¯å¢ƒè¿è¡Œæ—¶æ˜¯ä¸å¯èƒ½ä½¿ç”¨çƒ­éƒ¨ç½²åŠŸèƒ½çš„ï¼Œæ‰€ä»¥éœ€è¦å¼ºåˆ¶å…³é—­æ­¤åŠŸèƒ½ï¼Œé€šè¿‡é…ç½®å¯ä»¥å…³é—­æ­¤åŠŸèƒ½ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">devtools</span><span class="token punctuation">:</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¦‚æœå½“å¿ƒé…ç½®æ–‡ä»¶å±‚çº§è¿‡å¤šå¯¼è‡´ç›¸ç¬¦è¦†ç›–æœ€ç»ˆå¼•èµ·é…ç½®å¤±æ•ˆï¼Œå¯ä»¥æé«˜é…ç½®çš„å±‚çº§ï¼Œåœ¨æ›´é«˜å±‚çº§ä¸­é…ç½®å…³é—­çƒ­éƒ¨ç½²ã€‚ä¾‹å¦‚åœ¨å¯åŠ¨å®¹å™¨å‰é€šè¿‡ç³»ç»Ÿå±æ€§è®¾ç½®å…³é—­çƒ­éƒ¨ç½²åŠŸèƒ½ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SSMPApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;spring.devtools.restart.enabled&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SSMPApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å…¶å®ä¸Šè¿°æ‹…å¿ƒç•¥å¾®æœ‰ç‚¹å¤šä½™ï¼Œå› ä¸ºçº¿ä¸Šç¯å¢ƒçš„ç»´æŠ¤æ˜¯ä¸å¯èƒ½å‡ºç°ä¿®æ”¹ä»£ç çš„æ“ä½œçš„ï¼Œè¿™ä¹ˆåšå”¯ä¸€çš„ä½œç”¨æ˜¯é™ä½èµ„æºæ¶ˆè€—ï¼Œæ¯•ç«Ÿé‚£åŒç›¯ç€ä½ é¡¹ç›®æ˜¯ä¸æ˜¯äº§ç”Ÿå˜åŒ–çš„çœ¼ç›åªè¦é—­ä¸Šäº†ï¼Œå°±ä¸å…·æœ‰çƒ­éƒ¨ç½²åŠŸèƒ½äº†ï¼Œè¿™ä¸ªå¼€å…³çš„ä½œç”¨å°±æ˜¯ç¦ç”¨å¯¹åº”åŠŸèƒ½ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>é€šè¿‡é…ç½®å¯ä»¥å…³é—­çƒ­éƒ¨ç½²åŠŸèƒ½é™ä½çº¿ä¸Šç¨‹åºçš„èµ„æºæ¶ˆè€—</li></ol><h2 id="_2-é…ç½®é«˜çº§" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®é«˜çº§" aria-hidden="true">#</a> 2.é…ç½®é«˜çº§</h2><p>â€‹ è¿›å…¥å¼€å‘å®ç”¨ç¯‡ç¬¬äºŒç« å†…å®¹ï¼Œé…ç½®é«˜çº§ï¼Œå…¶å®é…ç½®åœ¨åŸºç¡€ç¯‡è®²äº†ä¸€éƒ¨åˆ†ï¼Œåœ¨è¿ç»´å®ç”¨ç¯‡è®²äº†ä¸€éƒ¨åˆ†ï¼Œè¿™é‡Œè¿˜è¦è®²ï¼Œè®²çš„ä¸œè¥¿æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè·ç¦»å¼€å‘è¿‡ç¨‹è¶Šæ¥è¶Šæ¥è¿‘ï¼Œè§£å†³çš„é—®é¢˜ä¹Ÿè¶Šæ¥è¶Šé è¿‘çº¿ä¸Šç¯å¢ƒï¼Œä¸‹é¢å°±å¼€å¯æœ¬ç« çš„å­¦ä¹ ã€‚</p><h3 id="_2-1-configurationproperties" tabindex="-1"><a class="header-anchor" href="#_2-1-configurationproperties" aria-hidden="true">#</a> 2-1.@ConfigurationProperties</h3><p>â€‹ åœ¨åŸºç¡€ç¯‡å­¦ä¹ äº†@ConfigurationPropertiesæ³¨è§£ï¼Œæ­¤æ³¨è§£çš„ä½œç”¨æ˜¯ç”¨æ¥ä¸ºbeanç»‘å®šå±æ€§çš„ã€‚å¼€å‘è€…å¯ä»¥åœ¨ymlé…ç½®æ–‡ä»¶ä¸­ä»¥å¯¹è±¡çš„æ ¼å¼æ·»åŠ è‹¥å¹²å±æ€§</p><div class="language-YML ext-YML line-numbers-mode"><pre class="language-YML"><code>servers:
  ip-address: 192.168.0.1 
  port: 2345
  timeout: -1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„ï¼Œymlè¯­æ³•è§„èŒƒï¼Œå±æ€§å’Œvalueä¹‹é—´è¦æœ‰ç©ºæ ¼ï¼Œä¸ç„¶æ•°æ®æ— æ³•æ˜ å°„æˆåŠŸã€‚</strong></p><p>ç„¶åå†å¼€å‘ä¸€ä¸ªç”¨æ¥å°è£…æ•°æ®çš„å®ä½“ç±»ï¼Œæ³¨æ„è¦æä¾›å±æ€§å¯¹åº”çš„setteræ–¹æ³•</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ipAddress<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> timeout<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å°±å¯ä»¥å°†é…ç½®ä¸­çš„å±æ€§å€¼å…³è”åˆ°å¼€å‘çš„æ¨¡å‹ç±»ä¸Š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;servers&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ipAddress<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> timeout<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿™æ ·åŠ è½½å¯¹åº”beançš„æ—¶å€™å°±å¯ä»¥ç›´æ¥åŠ è½½é…ç½®å±æ€§å€¼äº†ã€‚ä½†æ˜¯ç›®å‰æˆ‘ä»¬å­¦çš„éƒ½æ˜¯ç»™è‡ªå®šä¹‰çš„beanä½¿ç”¨è¿™ç§å½¢å¼åŠ è½½å±æ€§å€¼ï¼Œå¦‚æœæ˜¯ç¬¬ä¸‰æ–¹çš„beanå‘¢ï¼Ÿèƒ½ä¸èƒ½ç”¨è¿™ç§å½¢å¼åŠ è½½å±æ€§å€¼å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¼šæå‡ºè¿™ä¸ªç–‘é—®ï¼ŸåŸå› å°±åœ¨äºå½“å‰@ConfigurationPropertiesæ³¨è§£æ˜¯å†™åœ¨ç±»å®šä¹‰çš„ä¸Šæ–¹ï¼Œè€Œç¬¬ä¸‰æ–¹å¼€å‘çš„beanæºä»£ç ä¸æ˜¯ä½ è‡ªå·±ä¹¦å†™çš„ï¼Œä½ ä¹Ÿä¸å¯èƒ½åˆ°æºä»£ç ä¸­å»æ·»åŠ @ConfigurationPropertiesæ³¨è§£ï¼Œè¿™ç§é—®é¢˜è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿä¸‹é¢å°±æ¥è¯´è¯´è¿™ä¸ªé—®é¢˜ã€‚</p><p>â€‹ ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å…¶å®å¯ä»¥ä¸ºç¬¬ä¸‰æ–¹beanåŠ è½½å±æ€§ï¼Œæ ¼å¼ç‰¹æ®Šä¸€ç‚¹è€Œå·²ã€‚</p><p>â€‹ å¯¼å…¥åæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘ </strong>ï¼šä½¿ç”¨@Beanæ³¨è§£å®šä¹‰ç¬¬ä¸‰æ–¹bean</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">DruidDataSource</span> <span class="token function">datasource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">DruidDataSource</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ds<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨ymlä¸­å®šä¹‰è¦ç»‘å®šçš„å±æ€§ï¼Œæ³¨æ„datasourceæ­¤æ—¶å…¨å°å†™</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>datasource:
  driverClassName: com.mysql.jdbc.Driver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ä¸ºç¬¬ä¸‰æ–¹beanè¿›è¡Œå±æ€§ç»‘å®šï¼Œæ³¨æ„å‰ç¼€æ˜¯å…¨å°å†™çš„datasource</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;datasource&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">DruidDataSource</span> <span class="token function">datasource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">DruidDataSource</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ds<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è°ƒç”¨ç¬¬ä¸‰æ–¹beanï¼Œå¹¶è®¾ç½®æ•°æ®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot13ConfigurationApplication</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;datasource&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">DruidDataSource</span> <span class="token function">datasource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">DruidDataSource</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ds<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ConfigurableApplicationContext</span> context <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Springboot13ConfigurationApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DruidDataSource</span> ds <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">DruidDataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ds<span class="token punctuation">.</span><span class="token function">getDriverClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        æ‰“å°ç»“æœï¼šcom.mysql.jdbc.Driver123</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ“ä½œæ–¹å¼å®Œå…¨ä¸€æ ·ï¼Œåªä¸è¿‡@ConfigurationPropertiesæ³¨è§£ä¸ä»…èƒ½æ·»åŠ åˆ°ç±»ä¸Šï¼Œè¿˜å¯ä»¥æ·»åŠ åˆ°æ–¹æ³•ä¸Šï¼Œæ·»åŠ åˆ°ç±»ä¸Šæ˜¯ä¸ºspringå®¹å™¨ç®¡ç†çš„å½“å‰ç±»çš„å¯¹è±¡ç»‘å®šå±æ€§ï¼Œæ·»åŠ åˆ°æ–¹æ³•ä¸Šæ˜¯ä¸ºspringå®¹å™¨ç®¡ç†çš„å½“å‰æ–¹æ³•çš„è¿”å›å€¼å¯¹è±¡ç»‘å®šå±æ€§ï¼Œå…¶å®æœ¬è´¨ä¸Šéƒ½ä¸€æ ·ã€‚</p><p>â€‹ åšåˆ°è¿™å…¶å®å°±å‡ºç°äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œç›®å‰æˆ‘ä»¬å®šä¹‰beanä¸æ˜¯é€šè¿‡ç±»æ³¨è§£å®šä¹‰å°±æ˜¯é€šè¿‡@Beanå®šä¹‰ï¼Œä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å¯ä»¥ä¸ºbeanè¿›è¡Œå±æ€§ç»‘å®šï¼Œé‚£åœ¨ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œå“ªäº›beané€šè¿‡æ³¨è§£@ConfigurationPropertieså»ç»‘å®šå±æ€§äº†å‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªæ³¨è§£ä¸ä»…å¯ä»¥å†™åœ¨ç±»ä¸Šï¼Œè¿˜å¯ä»¥å†™åœ¨æ–¹æ³•ä¸Šï¼Œæ‰€ä»¥æ‰¾èµ·æ¥å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œspringç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå…¨æ–°çš„æ³¨è§£ï¼Œä¸“é—¨æ ‡æ³¨ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ç»‘å®šå±æ€§çš„beanæ˜¯å“ªäº›ã€‚è¿™ä¸ªæ³¨è§£å«åš@EnableConfigurationPropertiesã€‚å…·ä½“å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šåœ¨é…ç½®ç±»ä¸Šå¼€å¯@EnableConfigurationPropertiesæ³¨è§£ï¼Œå¹¶æ ‡æ³¨è¦ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ç»‘å®šå±æ€§çš„ç±»</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>@SpringBootApplication
@EnableConfigurationProperties(ServerConfig.class)
public class Springboot13ConfigurationApplication {
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨å¯¹åº”çš„ç±»ä¸Šç›´æ¥ä½¿ç”¨@ConfigurationPropertiesè¿›è¡Œå±æ€§ç»‘å®š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;servers&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ipAddress<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> timeout<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æœ‰äººæ„Ÿè§‰è¿™æ²¡åŒºåˆ«å•Šï¼Ÿæ³¨æ„è§‚å¯Ÿï¼Œç°åœ¨ç»‘å®šå±æ€§çš„ServerConfigç±»å¹¶æ²¡æœ‰å£°æ˜@Componentæ³¨è§£ã€‚å½“ä½¿ç”¨@EnableConfigurationPropertiesæ³¨è§£æ—¶ï¼Œspringä¼šé»˜è®¤å°†å…¶æ ‡æ³¨çš„ç±»å®šä¹‰ä¸ºbeanï¼Œå› æ­¤æ— éœ€å†æ¬¡å£°æ˜@Componentæ³¨è§£äº†ã€‚</p><p>â€‹ æœ€åå†è¯´ä¸€ä¸ªå°æŠ€å·§ï¼Œä½¿ç”¨@ConfigurationPropertiesæ³¨è§£æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªæç¤ºä¿¡æ¯</p><p><img src="/assets/image-20220222145535749.8a405233.png" alt="image-20220222145535749"></p><p>â€‹ å‡ºç°è¿™ä¸ªæç¤ºååªéœ€è¦æ·»åŠ ä¸€ä¸ªåæ ‡æ­¤æé†’å°±æ¶ˆå¤±äº†</p><div class="language-XML ext-XML line-numbers-mode"><pre class="language-XML"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨@ConfigurationPropertieså¯ä»¥ä¸ºä½¿ç”¨@Beanå£°æ˜çš„ç¬¬ä¸‰æ–¹beanç»‘å®šå±æ€§</li><li>å½“ä½¿ç”¨@EnableConfigurationPropertieså£°æ˜è¿›è¡Œå±æ€§ç»‘å®šçš„beanåï¼Œæ— éœ€ä½¿ç”¨@Componentæ³¨è§£å†æ¬¡è¿›è¡Œbeanå£°æ˜</li></ol><h3 id="_2-2-å®½æ¾ç»‘å®š-æ¾æ•£ç»‘å®š" tabindex="-1"><a class="header-anchor" href="#_2-2-å®½æ¾ç»‘å®š-æ¾æ•£ç»‘å®š" aria-hidden="true">#</a> 2-2.å®½æ¾ç»‘å®š/æ¾æ•£ç»‘å®š</h3><p>â€‹ åœ¨è¿›è¡Œå±æ€§ç»‘å®šæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹æƒ…å†µï¼Œä¸ºäº†è¿›è¡Œæ ‡å‡†å‘½åï¼Œå¼€å‘è€…ä¼šå°†å±æ€§åä¸¥æ ¼æŒ‰ç…§é©¼å³°å‘½åæ³•ä¹¦å†™ï¼Œåœ¨ymlé…ç½®æ–‡ä»¶ä¸­å°†datasourceä¿®æ”¹ä¸ºdataSourceï¼Œå¦‚ä¸‹ï¼š</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>dataSource:
  driverClassName: com.mysql.jdbc.Driver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ­¤æ—¶ç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œç„¶ååˆå°†ä»£ç ä¸­çš„å‰ç¼€datasourceä¿®æ”¹ä¸ºdataSourceï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;dataSource&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">DruidDataSource</span> <span class="token function">datasource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">DruidDataSource</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ds<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ­¤æ—¶å°±å‘ç”Ÿäº†ç¼–è¯‘é”™è¯¯ï¼Œè€Œä¸”å¹¶ä¸æ˜¯ideaå·¥å…·å¯¼è‡´çš„ï¼Œè¿è¡Œåä¾ç„¶ä¼šå‡ºç°é—®é¢˜ï¼Œé…ç½®å±æ€§ådataSourceæ˜¯æ— æ•ˆçš„</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>Configuration property name &#39;dataSource&#39; is not valid:

    Invalid characters: &#39;S&#39;
    Bean: datasource
    Reason: Canonical names should be kebab-case (&#39;-&#39; separated), lowercase alpha-numeric characters and must start with a letter

Action:
Modify &#39;dataSource&#39; so that it conforms to the canonical names requirements.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼Œè¿™å°±è¦æ¥è¯´ä¸€è¯´springbootè¿›è¡Œå±æ€§ç»‘å®šæ—¶çš„ä¸€ä¸ªé‡è¦çŸ¥è¯†ç‚¹äº†ï¼Œæœ‰å…³å±æ€§åç§°çš„å®½æ¾ç»‘å®šï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºå®½æ¾ç»‘å®šã€‚</p><p>â€‹ ä»€ä¹ˆæ˜¯å®½æ¾ç»‘å®šï¼Ÿå®é™…ä¸Šæ˜¯springbootè¿›è¡Œç¼–ç¨‹æ—¶äººæ€§åŒ–è®¾è®¡çš„ä¸€ç§ä½“ç°ï¼Œå³é…ç½®æ–‡ä»¶ä¸­çš„å‘½åæ ¼å¼ä¸å˜é‡åçš„å‘½åæ ¼å¼å¯ä»¥è¿›è¡Œæ ¼å¼ä¸Šçš„æœ€å¤§åŒ–å…¼å®¹ã€‚å…¼å®¹åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢ï¼Ÿå‡ ä¹ä¸»æµçš„å‘½åæ ¼å¼éƒ½æ”¯æŒï¼Œä¾‹å¦‚ï¼š</p><p>â€‹ åœ¨ServerConfigä¸­çš„ipAddresså±æ€§å</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;servers&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ipAddress<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¯ä»¥ä¸ä¸‹é¢çš„é…ç½®å±æ€§åè§„åˆ™å…¨å…¼å®¹ï¼Œå½“å…¨éƒ¨å‡ºç°æ—¶ï¼ŒåŒ¹é…çº§åˆ«å¦‚ä¸‹</p><div class="language-YML ext-YML line-numbers-mode"><pre class="language-YML"><code>servers:
 ip-address: 192.168.0.1      # çƒ¤è‚‰ä¸²æ¨¡å¼
# IP_ADDRESS: 192.168.0.2      # å¸¸é‡æ¨¡å¼
# ip_address: 192.168.0.3      # ä¸‹åˆ’çº¿æ¨¡å¼
# ipAddress: 192.168.0.4       # é©¼å³°æ¨¡å¼
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¹Ÿå¯ä»¥è¯´ï¼Œä»¥ä¸Š4ç§æ¨¡å¼æœ€ç»ˆéƒ½å¯ä»¥åŒ¹é…åˆ°ipAddressè¿™ä¸ªå±æ€§åã€‚ä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼ŸåŸå› å°±æ˜¯åœ¨è¿›è¡ŒåŒ¹é…æ—¶ï¼Œé…ç½®ä¸­çš„åç§°è¦å»æ‰ä¸­åˆ’çº¿å’Œä¸‹åˆ’çº¿åï¼Œå¿½ç•¥å¤§å°å†™çš„æƒ…å†µä¸‹å»ä¸javaä»£ç ä¸­çš„å±æ€§åè¿›è¡Œå¿½ç•¥å¤§å°å†™çš„ç­‰å€¼åŒ¹é…ï¼Œä»¥ä¸Š4ç§å‘½åå»æ‰ä¸‹åˆ’çº¿ä¸­åˆ’çº¿å¿½ç•¥å¤§å°å†™åéƒ½æ˜¯ä¸€ä¸ªè¯ipaddressï¼Œjavaä»£ç ä¸­çš„å±æ€§åå¿½ç•¥å¤§å°å†™åä¹Ÿæ˜¯ipaddressï¼Œè¿™æ ·å°±å¯ä»¥è¿›è¡Œç­‰å€¼åŒ¹é…äº†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™4ç§æ ¼å¼éƒ½èƒ½åŒ¹é…æˆåŠŸçš„åŸå› ã€‚ä¸è¿‡<strong>springbootå®˜æ–¹æ¨èä½¿ç”¨çƒ¤è‚‰ä¸²æ¨¡å¼</strong>ï¼Œä¹Ÿå°±æ˜¯ä¸­åˆ’çº¿æ¨¡å¼ã€‚</p><p>â€‹ åˆ°è¿™é‡Œæˆ‘ä»¬æŒæ¡äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯å‘½åçš„è§„èŒƒé—®é¢˜ã€‚å†æ¥çœ‹å¼€å§‹å‡ºç°çš„ç¼–ç¨‹é”™è¯¯ä¿¡æ¯</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>Configuration property name &#39;dataSource&#39; is not valid:

    Invalid characters: &#39;S&#39;
    Bean: datasource
    Reason: Canonical names should be kebab-case (&#39;-&#39; separated), lowercase alpha-numeric characters and must start with a letter

Action:
Modify &#39;dataSource&#39; so that it conforms to the canonical names requirements.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å…¶ä¸­Reasonæè¿°äº†æŠ¥é”™çš„åŸå› ï¼Œè§„èŒƒçš„åç§°åº”è¯¥æ˜¯çƒ¤è‚‰ä¸²(kebab)æ¨¡å¼(case)ï¼Œå³ä½¿ç”¨-åˆ†éš”ï¼Œä½¿ç”¨å°å†™å­—æ¯æ•°å­—ä½œä¸ºæ ‡å‡†å­—ç¬¦ï¼Œä¸”å¿…é¡»ä»¥å­—æ¯å¼€å¤´ã€‚ç„¶åå†çœ‹æˆ‘ä»¬å†™çš„åç§°dataSourceï¼Œå°±ä¸æ»¡è¶³ä¸Šè¿°è¦æ±‚ã€‚é—¹äº†åŠå¤©ï¼Œåœ¨**@ConfigurationProperties**ä¹¦å†™å‰ç¼€æ—¶ï¼Œè¿™ä¸ªè¯ä¸æ˜¯éšæ„æ”¯æŒçš„ï¼Œå¿…é¡»ä½¿ç”¨ä¸Šè¿°æ ‡å‡†ã€‚ç¼–ç¨‹å†™äº†è¿™ä¹ˆä¹…ï¼ŒåŸºæœ¬ä¸Šç¼–ç¨‹ä¹ æƒ¯éƒ½å…»æˆäº†ï¼Œåˆ°è¿™é‡Œåˆè¢«springbootæ•™è‚²äº†ï¼Œæ²¡è¾™ï¼Œè°è®©äººå®¶ä¸œè¥¿å¥½ç”¨å‘¢ï¼ŒæŒ‰ç…§äººå®¶çš„è¦æ±‚å†™å§ã€‚</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202211151441416.png" alt="image-20221115144103285"></p><p>â€‹ æœ€åè¯´ä¸€å¥ï¼Œä»¥ä¸Šè§„åˆ™ä»…é’ˆå¯¹springbootä¸­@ConfigurationPropertiesæ³¨è§£è¿›è¡Œå±æ€§ç»‘å®šæ—¶æœ‰æ•ˆï¼Œå¯¹@Valueæ³¨è§£è¿›è¡Œå±æ€§æ˜ å°„æ— æ•ˆã€‚æœ‰äººå°±è¯´ï¼Œé‚£æˆ‘ä¸ç”¨ä½ ä¸å°±è¡Œäº†ï¼Ÿä¸ç”¨ï¼Œä½ å°çœ‹springbootçš„æ¨å¹¿èƒ½åŠ›äº†ï¼Œåˆ°åŸç†ç¯‡æˆ‘ä»¬çœ‹æºç æ—¶ï¼Œä½ ä¼šå‘ç°å†…éƒ¨å…¨æ˜¯è¿™ç©æ„å„¿ï¼Œç®—äº†ï¼Œæ‹¿äººæ‰‹çŸ­åƒäººå˜´çŸ­ï¼Œè®¤æ€‚å§ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>@ConfigurationPropertiesç»‘å®šå±æ€§æ—¶æ”¯æŒå±æ€§åå®½æ¾ç»‘å®šï¼Œè¿™ä¸ªå®½æ¾ä½“ç°åœ¨å±æ€§åçš„å‘½åè§„åˆ™ä¸Š</li><li>@Valueæ³¨è§£ä¸æ”¯æŒæ¾æ•£ç»‘å®šè§„åˆ™</li><li>ç»‘å®šå‰ç¼€åæ¨èé‡‡ç”¨çƒ¤è‚‰ä¸²å‘½åè§„åˆ™ï¼Œå³ä½¿ç”¨ä¸­åˆ’çº¿åšåˆ†éš”ç¬¦</li></ol><h3 id="_2-3-å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š" tabindex="-1"><a class="header-anchor" href="#_2-3-å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š" aria-hidden="true">#</a> 2-3.å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š</h3><p>â€‹ åœ¨å‰é¢çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä¹¦å†™äº†å¦‚ä¸‹é…ç½®å€¼ï¼Œå…¶ä¸­ç¬¬ä¸‰é¡¹è¶…æ—¶æ—¶é—´timeoutæè¿°äº†æœåŠ¡å™¨æ“ä½œè¶…æ—¶æ—¶é—´ï¼Œå½“å‰å€¼æ˜¯-1è¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚</p><div class="language-YML ext-YML line-numbers-mode"><pre class="language-YML"><code>servers:
  ip-address: 192.168.0.1 
  port: 2345
  timeout: -1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½†æ˜¯æ¯ä¸ªäººéƒ½è¿™ä¸ªå€¼çš„ç†è§£ä¼šäº§ç”Ÿä¸åŒï¼Œæ¯”å¦‚çº¿ä¸ŠæœåŠ¡å™¨å®Œæˆä¸€æ¬¡ä¸»ä»å¤‡ä»½ï¼Œé…ç½®è¶…æ—¶æ—¶é—´240ï¼Œè¿™ä¸ª240å¦‚æœå•ä½æ˜¯ç§’å°±æ˜¯è¶…æ—¶æ—¶é—´4åˆ†é’Ÿï¼Œå¦‚æœå•ä½æ˜¯åˆ†é’Ÿå°±æ˜¯è¶…æ—¶æ—¶é—´4å°æ—¶ã€‚é¢å¯¹ä¸€æ¬¡çº¿ä¸ŠæœåŠ¡å™¨çš„ä¸»ä»å¤‡ä»½ï¼Œè®¾ç½®4åˆ†é’Ÿï¼Œç®€ç›´æ˜¯å¼€ç©ç¬‘ï¼Œåˆ«è¯´æ‹·è´è¿‡ç¨‹ï¼Œå¤‡ä»½ä¹‹å‰çš„å‹ç¼©è¿‡ç¨‹4åˆ†é’Ÿä¹Ÿæä¸å®šï¼Œè¿™ä¸ªæ—¶å€™é—®é¢˜å°±æ¥äº†ï¼Œæ€ä¹ˆè§£å†³è¿™ä¸ªè¯¯ä¼šï¼Ÿ</p><p>â€‹ é™¤äº†åŠ å¼ºçº¦å®šä¹‹å¤–ï¼Œspringbootå……åˆ†åˆ©ç”¨äº†JDK8ä¸­æä¾›çš„å…¨æ–°çš„ç”¨æ¥è¡¨ç¤ºè®¡é‡å•ä½çš„æ–°æ•°æ®ç±»å‹ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä»¥ä¸‹æ¨¡å‹ç±»ä¸­æ·»åŠ äº†ä¸¤ä¸ªJDK8ä¸­æ–°å¢çš„ç±»ï¼Œåˆ†åˆ«æ˜¯Durationå’ŒDataSize</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;servers&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@DurationUnit</span><span class="token punctuation">(</span><span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span><span class="token constant">HOURS</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Duration</span> serverTimeOut<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@DataSizeUnit</span><span class="token punctuation">(</span><span class="token class-name">DataUnit</span><span class="token punctuation">.</span><span class="token constant">MEGABYTES</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">DataSize</span> dataSize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Duration</strong>ï¼šè¡¨ç¤ºæ—¶é—´é—´éš”ï¼Œå¯ä»¥é€šè¿‡@DurationUnitæ³¨è§£æè¿°æ—¶é—´å•ä½ï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­æè¿°çš„å•ä½ä¸ºå°æ—¶ï¼ˆChronoUnit.HOURSï¼‰</p><p><strong>DataSize</strong>ï¼šè¡¨ç¤ºå­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡@DataSizeUnitæ³¨è§£æè¿°å­˜å‚¨ç©ºé—´å•ä½ï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­æè¿°çš„å•ä½ä¸ºMBï¼ˆDataUnit.MEGABYTESï¼‰</p><p>â€‹ ä½¿ç”¨ä¸Šè¿°ä¸¤ä¸ªå•ä½å°±å¯ä»¥æœ‰æ•ˆé¿å…å› æ²Ÿé€šä¸åŒæ­¥æˆ–æ–‡æ¡£ä¸å¥å…¨å¯¼è‡´çš„ä¿¡æ¯ä¸å¯¹ç§°é—®é¢˜ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†é—®é¢˜ï¼Œé¿å…äº§ç”Ÿè¯¯è¯»ã€‚</p><p>Druationå¸¸ç”¨å•ä½å¦‚ä¸‹ï¼š</p><img src="/assets/image-20220222173911102.5a4daaab.png" alt="image-20220222173911102" style="zoom:50%;"><p>DataSizeå¸¸ç”¨å•ä½å¦‚ä¸‹ï¼š</p><img src="/assets/image-20220222174130102.5c387cd7.png" alt="image-20220222174130102" style="zoom:67%;"><h3 id="_2-4-æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#_2-4-æ ¡éªŒ" aria-hidden="true">#</a> 2-4.æ ¡éªŒ</h3><p>â€‹ ç›®å‰æˆ‘ä»¬åœ¨è¿›è¡Œå±æ€§ç»‘å®šæ—¶å¯ä»¥é€šè¿‡æ¾æ•£ç»‘å®šè§„åˆ™åœ¨ä¹¦å†™æ—¶æ”¾é£è‡ªæˆ‘äº†ï¼Œä½†æ˜¯åœ¨ä¹¦å†™æ—¶ç”±äºæ— æ³•æ„ŸçŸ¥æ¨¡å‹ç±»ä¸­çš„æ•°æ®ç±»å‹ï¼Œå°±ä¼šå‡ºç°ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ï¼Œæ¯”å¦‚ä»£ç ä¸­éœ€è¦intç±»å‹ï¼Œé…ç½®ä¸­ç»™äº†éæ³•çš„æ•°å€¼ï¼Œä¾‹å¦‚å†™ä¸€ä¸ªâ€œa&quot;ï¼Œè¿™ç§æ•°æ®è‚¯å®šæ— æ³•æœ‰æ•ˆçš„ç»‘å®šï¼Œè¿˜ä¼šå¼•å‘é”™è¯¯ã€‚ SpringBootç»™å‡ºäº†å¼ºå¤§çš„æ•°æ®æ ¡éªŒåŠŸèƒ½ï¼Œå¯ä»¥æœ‰æ•ˆçš„é¿å…æ­¤ç±»é—®é¢˜çš„å‘ç”Ÿã€‚åœ¨JAVAEEçš„JSR303è§„èŒƒä¸­ç»™å‡ºäº†å…·ä½“çš„æ•°æ®æ ¡éªŒæ ‡å‡†ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©å¯¹åº”çš„æ ¡éªŒæ¡†æ¶ï¼Œæ­¤å¤„ä½¿ç”¨Hibernateæä¾›çš„æ ¡éªŒæ¡†æ¶æ¥ä½œä¸ºå®ç°è¿›è¡Œæ•°æ®æ ¡éªŒã€‚ä¹¦å†™åº”ç”¨æ ¼å¼éå¸¸å›ºå®šï¼Œè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šæ­¥éª¤</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¼€å¯æ ¡éªŒæ¡†æ¶</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--1.å¯¼å…¥JSR303è§„èŒƒ--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>validation-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--ä½¿ç”¨hibernateæ¡†æ¶æä¾›çš„æ ¡éªŒå™¨åšå®ç°--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hibernate.validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨éœ€è¦å¼€å¯æ ¡éªŒåŠŸèƒ½çš„ç±»ä¸Šä½¿ç”¨æ³¨è§£@Validatedå¼€å¯æ ¡éªŒåŠŸèƒ½</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;servers&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//å¼€å¯å¯¹å½“å‰beançš„å±æ€§æ³¨å…¥æ ¡éªŒ</span>
<span class="token annotation punctuation">@Validated</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šå¯¹å…·ä½“çš„å­—æ®µè®¾ç½®æ ¡éªŒè§„åˆ™</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;servers&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//å¼€å¯å¯¹å½“å‰beançš„å±æ€§æ³¨å…¥æ ¡éªŒ</span>
<span class="token annotation punctuation">@Validated</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">//è®¾ç½®å…·ä½“çš„è§„åˆ™</span>
    <span class="token annotation punctuation">@Max</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">8888</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">&quot;æœ€å¤§å€¼ä¸èƒ½è¶…è¿‡8888&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Min</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">202</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">&quot;æœ€å°å€¼ä¸èƒ½ä½äº202&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ é€šè¿‡è®¾ç½®æ•°æ®æ ¼å¼æ ¡éªŒï¼Œå°±å¯ä»¥æœ‰æ•ˆé¿å…éæ³•æ•°æ®åŠ è½½ï¼Œå…¶å®ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æŒºè½»æ¾çš„ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªæ ¼å¼ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>å¼€å¯Beanå±æ€§æ ¡éªŒåŠŸèƒ½ä¸€å…±3æ­¥ï¼šå¯¼å…¥JSR303ä¸Hibernateæ ¡éªŒæ¡†æ¶åæ ‡ã€ä½¿ç”¨@Validatedæ³¨è§£å¯ç”¨æ ¡éªŒåŠŸèƒ½ã€ä½¿ç”¨å…·ä½“æ ¡éªŒè§„åˆ™è§„èŒƒæ•°æ®æ ¡éªŒæ ¼å¼</li></ol><h3 id="_2-5-æ•°æ®ç±»å‹è½¬æ¢" tabindex="-1"><a class="header-anchor" href="#_2-5-æ•°æ®ç±»å‹è½¬æ¢" aria-hidden="true">#</a> 2-5.æ•°æ®ç±»å‹è½¬æ¢</h3><p>â€‹ æœ‰å…³springå±æ€§æ³¨å…¥çš„é—®é¢˜åˆ°è¿™é‡ŒåŸºæœ¬ä¸Šå°±è®²å®Œäº†ï¼Œä½†æ˜¯æœ€è¿‘ä¸€åå¼€å‘è€…å‘æˆ‘å’¨è¯¢äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—éœ€è¦ç»™å„ä½å­¦ä¹ è€…åˆ†äº«ä¸€ä¸‹ã€‚åœ¨å­¦ä¹ é˜¶æ®µå…¶å®æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜å¾€å¾€å¤æ‚åº¦æ¯”è¾ƒä½ï¼Œå•ä¸€æ€§æ¯”è¾ƒå¼ºï¼Œä½†æ˜¯åˆ°äº†çº¿ä¸Šå¼€å‘æ—¶ï¼Œéƒ½æ˜¯ç»¼åˆæ€§çš„é—®é¢˜ï¼Œè€Œè¿™ä¸ªå¼€å‘è€…é‡åˆ°çš„é—®é¢˜å°±æ˜¯ç”±äºbeançš„å±æ€§æ³¨å…¥å¼•å‘çš„ç¾éš¾ã€‚</p><p>â€‹ å…ˆæŠŠé—®é¢˜æè¿°ä¸€ä¸‹ï¼Œè¿™ä½å¼€å‘è€…è¿æ¥æ•°æ®åº“æ­£å¸¸æ“ä½œï¼Œä½†æ˜¯è¿è¡Œç¨‹åºåæ˜¾ç¤ºçš„ä¿¡æ¯æ˜¯å¯†ç é”™è¯¯ã€‚</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ å…¶å®çœ‹åˆ°è¿™ä¸ªæŠ¥é”™ï¼Œå‡ ä¹æ‰€æœ‰çš„å­¦ä¹ è€…éƒ½èƒ½åˆ†è¾¨å‡ºæ¥ï¼Œè¿™æ˜¯ç”¨æˆ·åå’Œå¯†ç ä¸åŒ¹é…ï¼Œå°±å°±æ˜¯å¯†ç è¾“å…¥é”™äº†ï¼Œä½†æ˜¯é—®é¢˜å°±åœ¨äºå¯†ç å¹¶æ²¡æœ‰è¾“å…¥é”™è¯¯ï¼Œè¿™å°±æ¯”è¾ƒè®¨åŒäº†ã€‚ç»™çš„æŠ¥é”™ä¿¡æ¯æ— æ³•å¸®åŠ©ä½ æœ‰æ•ˆçš„åˆ†æé—®é¢˜ï¼Œç”šè‡³ä¼šç»™ä½ å¸¦åˆ°æ²Ÿé‡Œã€‚å¦‚æœæ˜¯åˆå­¦è€…ï¼Œä¼°è®¡è¿™ä¼šå¿ƒæ€å°±å´©äº†ï¼Œæˆ‘å¯†ç æ²¡é”™å•Šï¼Œä½ æ€ä¹ˆèƒ½è¯´æˆ‘æœ‰é”™è¯¯å‘¢ï¼Ÿæ¥çœ‹çœ‹ç”¨æˆ·åå¯†ç çš„é…ç½®æ˜¯å¦‚ä½•å†™çš„ï¼š</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC
    username: root
    password: 0127
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿™åå¼€å‘è€…çš„ç”Ÿæ—¥æ˜¯1æœˆ27æ—¥ï¼Œæ‰€ä»¥å¯†ç å°±ä½¿ç”¨äº†0127ï¼Œå…¶å®é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œäº†ã€‚</p><p>â€‹ ä¹‹å‰åœ¨åŸºç¡€ç¯‡è®²å±æ€§æ³¨å…¥æ—¶ï¼Œæåˆ°è¿‡ç±»å‹ç›¸å…³çš„çŸ¥è¯†ï¼Œåœ¨æ•´æ•°ç›¸å…³çŸ¥è¯†ä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼Œ<strong>æ”¯æŒäºŒè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶</strong></p><img src="/assets/image-20220222225748370.f146b1a5.png" alt="image-20220222225748370" style="zoom:80%;"><p>â€‹ è¿™ä¸ªé—®é¢˜å°±å¤„åœ¨è¿™é‡Œäº†ï¼Œå› ä¸º0127åœ¨å¼€å‘è€…çœ¼ä¸­æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²â€œ0127â€ï¼Œä½†æ˜¯åœ¨springbootçœ‹æ¥ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªå…«è¿›åˆ¶çš„æ•°å­—ã€‚å½“åå°ä½¿ç”¨Stringç±»å‹æ¥æ”¶æ•°æ®æ—¶ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä»–æ˜¯å…ˆå®‰è£…æ•´æ•°è¿›è¡Œå¤„ç†ï¼Œè¯»å–åå†è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚å·§äº†ï¼Œ0127æ’ä¸Šäº†å…«è¿›åˆ¶çš„æ ¼å¼ï¼Œæ‰€ä»¥æœ€ç»ˆä»¥åè¿›åˆ¶æ•°å­—87çš„ç»“æœå­˜åœ¨äº†ã€‚</p><p>â€‹ è¿™é‡Œæä¸¤ä¸ªæ³¨æ„ç‚¹ï¼Œç¬¬ä¸€ï¼Œå­—ç¬¦ä¸²æ ‡å‡†ä¹¦å†™åŠ ä¸Šå¼•å·åŒ…è£¹ï¼Œå…»æˆä¹ æƒ¯ï¼Œç¬¬äºŒï¼Œé‡åˆ°0å¼€å¤´çš„æ•°æ®å¤šæ³¨æ„å§ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>yamlæ–‡ä»¶ä¸­å¯¹äºæ•°å­—çš„å®šä¹‰æ”¯æŒè¿›åˆ¶ä¹¦å†™æ ¼å¼ï¼Œå¦‚éœ€ä½¿ç”¨å­—ç¬¦ä¸²è¯·ä½¿ç”¨å¼•å·æ˜ç¡®æ ‡æ³¨</li></ol><h2 id="_3-æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•" aria-hidden="true">#</a> 3.æµ‹è¯•</h2><p>â€‹ è¯´å®Œbeané…ç½®ç›¸å…³çš„å†…å®¹ï¼Œä¸‹é¢è¦å¯¹å‰é¢è®²è¿‡çš„ä¸€ä¸ªçŸ¥è¯†åšåŠ å¼ºäº†ï¼Œæµ‹è¯•ã€‚æµ‹è¯•æ˜¯ä¿éšœç¨‹åºæ­£ç¡®æ€§çš„å”¯ä¸€å±éšœï¼Œåœ¨ä¼ä¸šçº§å¼€å‘ä¸­æ›´æ˜¯ä¸å¯ç¼ºå°‘ï¼Œä½†æ˜¯ç”±äºæµ‹è¯•ä»£ç å¾€å¾€ä¸äº§ç”Ÿå®é™…æ•ˆç›Šï¼Œæ‰€ä»¥ä¸€äº›å°å‹å…¬å¸å¹¶ä¸æ˜¯å¾ˆå…³æ³¨ï¼Œå¯¼è‡´ä¸€äº›å¼€å‘è€…ä»å°å‹å…¬å¸è¿›å…¥ä¸­å¤§å‹å…¬å¸åï¼Œå¾€å¾€è¿™ä¸€å—æ¯”è¾ƒçŸ­æ¿ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦æ‹¿å‡ºæ¥æŠŠè¿™ä¸€å—çŸ¥è¯†å¥½å¥½è¯´è¯´ï¼Œåšä¸€åä¸“ä¸šçš„å¼€å‘äººå‘˜ã€‚</p><h3 id="_3-1-åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§" tabindex="-1"><a class="header-anchor" href="#_3-1-åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§" aria-hidden="true">#</a> 3-1.åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§</h3><p>â€‹ æµ‹è¯•è¿‡ç¨‹æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æµ‹è¯•æ—¶éœ€è¦æ¨¡æ‹Ÿä¸€äº›çº¿ä¸Šæƒ…å†µï¼Œæˆ–è€…æ¨¡æ‹Ÿä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚å¦‚æœå½“å‰ç¯å¢ƒæŒ‰ç…§çº¿ä¸Šç¯å¢ƒå·²ç»è®¾å®šå¥½äº†ï¼Œä¾‹å¦‚æ˜¯ä¸‹é¢çš„é…ç½®</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>env:
  maxMemory: 32GB
  minMemory: 16GB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½†æ˜¯ä½ ç°åœ¨æƒ³æµ‹è¯•å¯¹åº”çš„å…¼å®¹æ€§ï¼Œéœ€è¦æµ‹è¯•å¦‚ä¸‹é…ç½®</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>env:
  maxMemory: 16GB
  minMemory: 8GB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬èƒ½ä¸èƒ½æ¯æ¬¡æµ‹è¯•çš„æ—¶å€™éƒ½å»ä¿®æ”¹æºç application.ymlä¸­çš„é…ç½®è¿›è¡Œæµ‹è¯•å‘¢ï¼Ÿæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚æ¯æ¬¡æµ‹è¯•å‰æ”¹è¿‡æ¥ï¼Œæ¯æ¬¡æµ‹è¯•åæ”¹å›å»ï¼Œè¿™å¤ªéº»çƒ¦äº†ã€‚äºæ˜¯æˆ‘ä»¬å°±æƒ³ï¼Œéœ€è¦åœ¨æµ‹è¯•ç¯å¢ƒä¸­åˆ›å»ºä¸€ç»„ä¸´æ—¶å±æ€§ï¼Œå»è¦†ç›–æˆ‘ä»¬æºç ä¸­è®¾å®šçš„å±æ€§ï¼Œè¿™æ ·æµ‹è¯•ç”¨ä¾‹å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¯å¢ƒï¼Œèƒ½å¤Ÿç‹¬ç«‹æµ‹è¯•ï¼Œè¿™æ ·å°±æ–¹ä¾¿å¤šäº†ã€‚</p><p><strong>ä¸´æ—¶å±æ€§</strong></p><p>â€‹ springbootå·²ç»ä¸ºæˆ‘ä»¬å¼€å‘è€…æ—©å°±æƒ³å¥½äº†è¿™ç§é—®é¢˜è¯¥å¦‚ä½•è§£å†³ï¼Œå¹¶ä¸”æä¾›äº†å¯¹åº”çš„åŠŸèƒ½å…¥å£ã€‚åœ¨æµ‹è¯•ç”¨ä¾‹ç¨‹åºä¸­ï¼Œå¯ä»¥é€šè¿‡å¯¹æ³¨è§£@SpringBootTestæ·»åŠ å±æ€§æ¥æ¨¡æ‹Ÿä¸´æ—¶å±æ€§ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//propertieså±æ€§å¯ä»¥ä¸ºå½“å‰æµ‹è¯•ç”¨ä¾‹æ·»åŠ ä¸´æ—¶çš„å±æ€§é…ç½®</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>properties <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;test.prop=testValue1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertiesAndArgsTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${test.prop}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨æ³¨è§£@SpringBootTestçš„propertieså±æ€§å°±å¯ä»¥ä¸ºå½“å‰æµ‹è¯•ç”¨ä¾‹æ·»åŠ ä¸´æ—¶çš„å±æ€§ï¼Œè¦†ç›–æºç é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å±æ€§å€¼è¿›è¡Œæµ‹è¯•ã€‚</p><p><strong>ä¸´æ—¶å‚æ•°</strong></p><p>â€‹ é™¤äº†ä¸Šè¿°è¿™ç§æƒ…å†µï¼Œåœ¨å‰é¢è®²è§£ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨springbootç¨‹åºæ—¶è®²è¿‡ï¼Œé€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¹Ÿå¯ä»¥è®¾ç½®å±æ€§å€¼ã€‚è€Œä¸”çº¿ä¸Šå¯åŠ¨ç¨‹åºæ—¶ï¼Œé€šå¸¸éƒ½ä¼šæ·»åŠ ä¸€äº›ä¸“ç”¨çš„é…ç½®ä¿¡æ¯ã€‚ä½œä¸ºè¿ç»´äººå‘˜ä»–ä»¬æ‰ä¸æ‡‚javaï¼Œæ›´ä¸æ‡‚è¿™äº›é…ç½®çš„ä¿¡æ¯å…·ä½“æ ¼å¼è¯¥æ€ä¹ˆå†™ï¼Œé‚£å¦‚æœæˆ‘ä»¬ä½œä¸ºå¼€å‘è€…æä¾›äº†å¯¹åº”çš„ä¹¦å†™å†…å®¹åï¼Œèƒ½å¦æå‰æµ‹è¯•ä¸€ä¸‹è¿™äº›é…ç½®ä¿¡æ¯æ˜¯å¦æœ‰æ•ˆå‘¢ï¼Ÿå½“æ—¶æ˜¯å¯ä»¥çš„ï¼Œè¿˜æ˜¯é€šè¿‡æ³¨è§£@SpringBootTestçš„å¦ä¸€ä¸ªå±æ€§æ¥è¿›è¡Œè®¾å®šã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//argså±æ€§å¯ä»¥ä¸ºå½“å‰æµ‹è¯•ç”¨ä¾‹æ·»åŠ ä¸´æ—¶çš„å‘½ä»¤è¡Œå‚æ•°</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;--test.prop=testValue2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertiesAndArgsTest</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${test.prop}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨æ³¨è§£@SpringBootTestçš„argså±æ€§å°±å¯ä»¥ä¸ºå½“å‰æµ‹è¯•ç”¨ä¾‹æ¨¡æ‹Ÿå‘½ä»¤è¡Œå‚æ•°å¹¶è¿›è¡Œæµ‹è¯•ã€‚</p><p>â€‹ è¯´åˆ°è¿™é‡Œï¼Œå¥½å¥‡å®å®ä»¬è‚¯å®šå°±æœ‰æ–°é—®é¢˜äº†ï¼Œå¦‚æœä¸¤è€…å…±å­˜å‘¢ï¼Ÿå…¶å®å¦‚æœæ€è€ƒä¸€ä¸‹é…ç½®å±æ€§ä¸å‘½ä»¤è¡Œå‚æ•°çš„åŠ è½½ä¼˜å…ˆçº§ï¼Œè¿™ä¸ªç»“æœå°±ä¸è¨€è€Œå–»äº†ã€‚åœ¨å±æ€§åŠ è½½çš„ä¼˜å…ˆçº§è®¾å®šä¸­ï¼Œæœ‰æ˜ç¡®çš„ä¼˜å…ˆçº§è®¾å®šé¡ºåºï¼Œè¿˜è®°å¾—ä¸‹é¢è¿™ä¸ªé¡ºåºå—ï¼Ÿ</p><img src="/assets/image-20211206100859236.ec4f241c.png" alt="image-20211206100859236" style="zoom:67%;"><p>â€‹ åœ¨è¿™ä¸ªå±æ€§åŠ è½½ä¼˜å…ˆçº§çš„é¡ºåºä¸­ï¼Œæ˜ç¡®è§„å®šäº†å‘½ä»¤è¡Œå‚æ•°çš„ä¼˜å…ˆçº§æ’åºæ˜¯11ï¼Œè€Œé…ç½®å±æ€§çš„ä¼˜å…ˆçº§æ˜¯3ï¼Œç»“æœä¸è¨€è€Œå–»äº†ï¼Œargså±æ€§é…ç½®ä¼˜å…ˆäºpropertieså±æ€§é…ç½®åŠ è½½ã€‚</p><p>â€‹ åˆ°è¿™é‡Œæˆ‘ä»¬å°±æŒæ¡äº†å¦‚æœåœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å»æ¨¡æ‹Ÿä¸´æ—¶å±æ€§çš„è®¾å®šã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>åŠ è½½æµ‹è¯•ä¸´æ—¶å±æ€§å¯ä»¥é€šè¿‡æ³¨è§£@SpringBootTestçš„propertieså’Œargså±æ€§è¿›è¡Œè®¾å®šï¼Œæ­¤è®¾å®šåº”ç”¨èŒƒå›´ä»…é€‚ç”¨äºå½“å‰æµ‹è¯•ç”¨ä¾‹</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ åº”ç”¨äºæµ‹è¯•ç¯å¢ƒçš„ä¸´æ—¶å±æ€§è§£å†³äº†ï¼Œå¦‚æœæƒ³åœ¨æµ‹è¯•çš„æ—¶å€™ä¸´æ—¶åŠ è½½ä¸€äº›beanèƒ½ä¸åšå‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´æˆ‘æµ‹è¯•æ—¶ï¼Œæƒ³æä¸€äº›ç‹¬ç«‹çš„beanå‡ºæ¥ï¼Œä¸“é—¨åº”ç”¨äºæµ‹è¯•ç¯å¢ƒï¼Œèƒ½å¦å®ç°å‘¢ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è®²ã€‚</p><h3 id="_3-2-åŠ è½½æµ‹è¯•ä¸“ç”¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-2-åŠ è½½æµ‹è¯•ä¸“ç”¨é…ç½®" aria-hidden="true">#</a> 3-2.åŠ è½½æµ‹è¯•ä¸“ç”¨é…ç½®</h3><p>â€‹ ä¸Šä¸€èŠ‚æå‡ºäº†ä¸´æ—¶é…ç½®ä¸€äº›ä¸“ç”¨äºæµ‹è¯•ç¯å¢ƒçš„beançš„éœ€æ±‚ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬å°±æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>â€‹ å­¦ä¹ è¿‡Springçš„çŸ¥è¯†ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå…¶å®ä¸€ä¸ªspringç¯å¢ƒä¸­å¯ä»¥è®¾ç½®è‹¥å¹²ä¸ªé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±»ï¼Œè‹¥å¹²ä¸ªé…ç½®ä¿¡æ¯å¯ä»¥åŒæ—¶ç”Ÿæ•ˆã€‚ç°åœ¨æˆ‘ä»¬çš„éœ€æ±‚å°±æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­å†æ·»åŠ ä¸€ä¸ªé…ç½®ç±»ï¼Œç„¶åå¯åŠ¨æµ‹è¯•ç¯å¢ƒæ—¶ï¼Œç”Ÿæ•ˆæ­¤é…ç½®å°±è¡Œäº†ã€‚å…¶å®åšæ³•å’Œspringç¯å¢ƒä¸­åŠ è½½å¤šä¸ªé…ç½®ä¿¡æ¯çš„æ–¹å¼å®Œå…¨ä¸€æ ·ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šåœ¨æµ‹è¯•åŒ…testä¸­åˆ›å»ºä¸“ç”¨çš„æµ‹è¯•ç¯å¢ƒé…ç½®ç±»</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;bean msg&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°é…ç½®ä»…ç”¨äºæ¼”ç¤ºå½“å‰å®éªŒæ•ˆæœï¼Œå®é™…å¼€å‘å¯ä¸èƒ½è¿™ä¹ˆæ³¨å…¥Stringç±»å‹çš„æ•°æ®</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨å¯åŠ¨æµ‹è¯•ç¯å¢ƒæ—¶ï¼Œå¯¼å…¥æµ‹è¯•ç¯å¢ƒä¸“ç”¨çš„é…ç½®ç±»ï¼Œä½¿ç”¨@Importæ³¨è§£å³å¯å®ç°</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">MsgConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigurationTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ åˆ°è¿™é‡Œå°±é€šè¿‡@Importå±æ€§å®ç°äº†åŸºäºå¼€å‘ç¯å¢ƒçš„é…ç½®åŸºç¡€ä¸Šï¼Œå¯¹é…ç½®è¿›è¡Œæµ‹è¯•ç¯å¢ƒçš„è¿½åŠ æ“ä½œï¼Œå®ç°äº†1+1çš„é…ç½®ç¯å¢ƒæ•ˆæœã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®ç°æ¯ä¸€ä¸ªä¸åŒçš„æµ‹è¯•ç”¨ä¾‹åŠ è½½ä¸åŒçš„beançš„æ•ˆæœï¼Œä¸°å¯Œæµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™ï¼ŒåŒæ—¶ä¸å½±å“å¼€å‘ç¯å¢ƒçš„é…ç½®ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>å®šä¹‰æµ‹è¯•ç¯å¢ƒä¸“ç”¨çš„é…ç½®ç±»ï¼Œç„¶åé€šè¿‡@Importæ³¨è§£åœ¨å…·ä½“çš„æµ‹è¯•ä¸­å¯¼å…¥ä¸´æ—¶çš„é…ç½®ï¼Œä¾‹å¦‚æµ‹è¯•ç”¨ä¾‹ï¼Œæ–¹ä¾¿æµ‹è¯•è¿‡ç¨‹ï¼Œä¸”ä¸Šè¿°é…ç½®ä¸å½±å“å…¶ä»–çš„æµ‹è¯•ç±»ç¯å¢ƒ</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ å½“å‰æˆ‘ä»¬å·²ç»å¯ä»¥å®ç°ä¸šåŠ¡å±‚å’Œæ•°æ®å±‚çš„æµ‹è¯•ï¼Œå¹¶ä¸”é€šè¿‡ä¸´æ—¶é…ç½®ï¼Œæ§åˆ¶æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åŠ è½½ä¸åŒçš„æµ‹è¯•æ•°æ®ã€‚ä½†æ˜¯å®é™…ä¼ä¸šå¼€å‘ä¸ä»…è¦ä¿éšœä¸šåŠ¡å±‚ä¸æ•°æ®å±‚çš„åŠŸèƒ½å®‰å…¨æœ‰æ•ˆï¼Œä¹Ÿè¦ä¿éšœè¡¨ç°å±‚çš„åŠŸèƒ½æ­£å¸¸ã€‚ä½†æ˜¯æˆ‘ä»¬ç›®çš„å¯¹è¡¨ç°å±‚çš„æµ‹è¯•éƒ½æ˜¯é€šè¿‡postmanæ‰‹å·¥æµ‹è¯•çš„ï¼Œå¹¶æ²¡æœ‰åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ä½“ç°è¡¨ç°å±‚åŠŸèƒ½è¢«æµ‹è¯•é€šè¿‡ã€‚èƒ½å¦åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å¯¹è¡¨ç°å±‚è¿›è¡ŒåŠŸèƒ½æµ‹è¯•å‘¢ï¼Ÿè¿˜çœŸå¯ä»¥ï¼Œå’±ä»¬ä¸‹ä¸€èŠ‚å†è®²ã€‚</p><h3 id="_3-3-webç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-3-webç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•" aria-hidden="true">#</a> 3-3.Webç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•</h3><p>â€‹ åœ¨æµ‹è¯•ä¸­å¯¹è¡¨ç°å±‚åŠŸèƒ½è¿›è¡Œæµ‹è¯•éœ€è¦ä¸€ä¸ªåŸºç¡€å’Œä¸€ä¸ªåŠŸèƒ½ã€‚æ‰€è°“çš„ä¸€ä¸ªåŸºç¡€æ˜¯è¿è¡Œæµ‹è¯•ç¨‹åºæ—¶ï¼Œå¿…é¡»å¯åŠ¨webç¯å¢ƒï¼Œä¸ç„¶æ²¡æ³•æµ‹è¯•webåŠŸèƒ½ã€‚ä¸€ä¸ªåŠŸèƒ½æ˜¯å¿…é¡»åœ¨æµ‹è¯•ç¨‹åºä¸­å…·å¤‡å‘é€webè¯·æ±‚çš„èƒ½åŠ›ï¼Œä¸ç„¶æ— æ³•å®ç°webåŠŸèƒ½çš„æµ‹è¯•ã€‚æ‰€ä»¥åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­æµ‹è¯•è¡¨ç°å±‚æ¥å£è¿™é¡¹å·¥ä½œå°±è½¬æ¢æˆäº†ä¸¤ä»¶äº‹ï¼Œä¸€ï¼Œå¦‚ä½•åœ¨æµ‹è¯•ç±»ä¸­å¯åŠ¨webæµ‹è¯•ï¼ŒäºŒï¼Œå¦‚ä½•åœ¨æµ‹è¯•ç±»ä¸­å‘é€webè¯·æ±‚ã€‚ä¸‹é¢ä¸€ä»¶äº‹ä¸€ä»¶äº‹è¿›è¡Œï¼Œå…ˆè¯´ç¬¬ä¸€ä¸ª</p><p><strong>æµ‹è¯•ç±»ä¸­å¯åŠ¨webç¯å¢ƒ</strong></p><p>â€‹ æ¯ä¸€ä¸ªspringbootçš„æµ‹è¯•ç±»ä¸Šæ–¹éƒ½ä¼šæ ‡å‡†@SpringBootTestæ³¨è§£ï¼Œè€Œæ³¨è§£å¸¦æœ‰ä¸€ä¸ªå±æ€§ï¼Œå«åšwebEnvironmentã€‚é€šè¿‡è¯¥å±æ€§å°±å¯ä»¥è®¾ç½®åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å¯åŠ¨webç¯å¢ƒï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span><span class="token constant">RANDOM_PORT</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebTest</span> <span class="token punctuation">{</span>	
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æµ‹è¯•ç±»ä¸­å¯åŠ¨webç¯å¢ƒæ—¶ï¼Œå¯ä»¥æŒ‡å®šå¯åŠ¨çš„Webç¯å¢ƒå¯¹åº”çš„ç«¯å£ï¼Œspringbootæä¾›äº†4ç§è®¾ç½®å€¼ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><img src="/assets/image-20220223125453317.e7a6f5ad.png" alt="image-20220223125453317" style="zoom:80%;"><ul><li>MOCKï¼šæ ¹æ®å½“å‰è®¾ç½®ç¡®è®¤æ˜¯å¦å¯åŠ¨webç¯å¢ƒï¼Œä¾‹å¦‚ä½¿ç”¨äº†Servletçš„APIå°±å¯åŠ¨webç¯å¢ƒï¼Œå±äºé€‚é…æ€§çš„é…ç½®</li><li>DEFINED_PORTï¼šä½¿ç”¨è‡ªå®šä¹‰çš„ç«¯å£ä½œä¸ºwebæœåŠ¡å™¨ç«¯å£</li><li>RANDOM_PORTï¼šä½¿ç”¨éšæœºç«¯å£ä½œä¸ºwebæœåŠ¡å™¨ç«¯å£</li><li>NONEï¼šä¸å¯åŠ¨webç¯å¢ƒ</li></ul><p>â€‹ é€šè¿‡ä¸Šè¿°é…ç½®ï¼Œç°åœ¨å¯åŠ¨æµ‹è¯•ç¨‹åºæ—¶å°±å¯ä»¥æ­£å¸¸å¯ç”¨webç¯å¢ƒäº†ï¼Œå»ºè®®å¤§å®¶æµ‹è¯•æ—¶ä½¿ç”¨RANDOM_PORTï¼Œé¿å…ä»£ç ä¸­å› ä¸ºå†™æ­»è®¾å®šå¼•å‘çº¿ä¸ŠåŠŸèƒ½æ‰“åŒ…æµ‹è¯•æ—¶ç”±äºç«¯å£å†²çªå¯¼è‡´æ„å¤–ç°è±¡çš„å‡ºç°ã€‚å°±æ˜¯è¯´ä½ ç¨‹åºä¸­å†™äº†ç”¨8080ç«¯å£ï¼Œç»“æœçº¿ä¸Šç¯å¢ƒ8080ç«¯å£è¢«å ç”¨äº†ï¼Œç»“æœä½ ä»£ç ä¸­æ‰€æœ‰å†™çš„ä¸œè¥¿éƒ½è¦æ”¹ï¼Œè¿™å°±æ˜¯å†™æ­»ä»£ç çš„ä»£ä»·ã€‚ç°åœ¨ä½ ç”¨éšæœºç«¯å£å°±å¯ä»¥æµ‹è¯•å‡ºæ¥ä½ æœ‰æ²¡æœ‰è¿™ç§é—®é¢˜çš„éšæ‚£äº†ã€‚</p><p>â€‹ æµ‹è¯•ç¯å¢ƒä¸­çš„webç¯å¢ƒå·²ç»æ­å»ºå¥½äº†ï¼Œä¸‹é¢å°±å¯ä»¥æ¥è§£å†³ç¬¬äºŒä¸ªé—®é¢˜äº†ï¼Œå¦‚ä½•åœ¨ç¨‹åºä»£ç ä¸­å‘é€webè¯·æ±‚ã€‚</p><p><strong>æµ‹è¯•ç±»ä¸­å‘é€è¯·æ±‚</strong></p><p>â€‹ å¯¹äºæµ‹è¯•ç±»ä¸­å‘é€è¯·æ±‚ï¼Œå…¶å®javaçš„APIå°±æä¾›å¯¹åº”çš„åŠŸèƒ½ï¼Œåªä¸è¿‡å¹³æ—¶å„ä½å°ä¼™ä¼´æ¥è§¦çš„æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥è¾ƒä¸ºé™Œç”Ÿã€‚springbootä¸ºäº†ä¾¿äºå¼€å‘è€…è¿›è¡Œå¯¹åº”çš„åŠŸèƒ½å¼€å‘ï¼Œå¯¹å…¶åˆè¿›è¡Œäº†åŒ…è£…ï¼Œç®€åŒ–äº†å¼€å‘æ­¥éª¤ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šåœ¨æµ‹è¯•ç±»ä¸­å¼€å¯webè™šæ‹Ÿè°ƒç”¨åŠŸèƒ½ï¼Œé€šè¿‡æ³¨è§£@AutoConfigureMockMvcå®ç°æ­¤åŠŸèƒ½çš„å¼€å¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span><span class="token constant">RANDOM_PORT</span><span class="token punctuation">)</span>
<span class="token comment">//å¼€å¯è™šæ‹ŸMVCè°ƒç”¨</span>
<span class="token annotation punctuation">@AutoConfigureMockMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebTest</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå®šä¹‰å‘èµ·è™šæ‹Ÿè°ƒç”¨çš„å¯¹è±¡MockMVCï¼Œé€šè¿‡è‡ªåŠ¨è£…é…çš„å½¢å¼åˆå§‹åŒ–å¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span><span class="token constant">RANDOM_PORT</span><span class="token punctuation">)</span>
<span class="token comment">//å¼€å¯è™šæ‹ŸMVCè°ƒç”¨</span>
<span class="token annotation punctuation">@AutoConfigureMockMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testWeb</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">MockMvc</span> mvc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿè¯·æ±‚å¯¹è±¡ï¼Œå°è£…è¯·æ±‚çš„è·¯å¾„ï¼Œå¹¶ä½¿ç”¨MockMVCå¯¹è±¡å‘é€å¯¹åº”è¯·æ±‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span><span class="token constant">RANDOM_PORT</span><span class="token punctuation">)</span>
<span class="token comment">//å¼€å¯è™šæ‹ŸMVCè°ƒç”¨</span>
<span class="token annotation punctuation">@AutoConfigureMockMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testWeb</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">MockMvc</span> mvc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//http://localhost:8080/books</span>
        <span class="token comment">//åˆ›å»ºè™šæ‹Ÿè¯·æ±‚ï¼Œå½“å‰è®¿é—®/books</span>
        <span class="token class-name">MockHttpServletRequestBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">MockMvcRequestBuilders</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ‰§è¡Œå¯¹åº”çš„è¯·æ±‚</span>
        mvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ‰§è¡Œæµ‹è¯•ç¨‹åºï¼Œç°åœ¨å°±å¯ä»¥æ­£å¸¸çš„å‘é€/bookså¯¹åº”çš„è¯·æ±‚äº†ï¼Œæ³¨æ„è®¿é—®è·¯å¾„ä¸è¦å†™http://localhost:8080/booksï¼Œå› ä¸ºå‰é¢çš„æœåŠ¡å™¨IPåœ°å€å’Œç«¯å£ä½¿ç”¨çš„æ˜¯å½“å‰è™šæ‹Ÿçš„webç¯å¢ƒï¼Œæ— éœ€æŒ‡å®šï¼Œä»…æŒ‡å®šè¯·æ±‚çš„å…·ä½“è·¯å¾„å³å¯ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•webå±‚æ¥å£è¦ä¿éšœæµ‹è¯•ç±»å¯åŠ¨æ—¶å¯åŠ¨webå®¹å™¨ï¼Œä½¿ç”¨@SpringBootTestæ³¨è§£çš„webEnvironmentå±æ€§å¯ä»¥è™šæ‹Ÿwebç¯å¢ƒç”¨äºæµ‹è¯•</li><li>ä¸ºæµ‹è¯•æ–¹æ³•æ³¨å…¥MockMvcå¯¹è±¡ï¼Œé€šè¿‡MockMvcå¯¹è±¡å¯ä»¥å‘é€è™šæ‹Ÿè¯·æ±‚ï¼Œæ¨¡æ‹Ÿwebè¯·æ±‚è°ƒç”¨è¿‡ç¨‹</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ ç›®å‰å·²ç»æˆåŠŸçš„å‘é€äº†è¯·æ±‚ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰èµ·åˆ°æµ‹è¯•çš„æ•ˆæœï¼Œæµ‹è¯•è¿‡ç¨‹å¿…é¡»å‡ºç°é¢„è®¡å€¼ä¸çœŸå®å€¼çš„æ¯”å¯¹ç»“æœæ‰èƒ½ç¡®è®¤æµ‹è¯•ç»“æœæ˜¯å¦é€šè¿‡ï¼Œè™šæ‹Ÿè¯·æ±‚ä¸­èƒ½å¯¹å“ªäº›è¯·æ±‚ç»“æœè¿›è¡Œæ¯”å¯¹å‘¢ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è®²ã€‚</p><p><strong>webç¯å¢ƒè¯·æ±‚ç»“æœæ¯”å¯¹</strong></p><p>â€‹ ä¸Šä¸€èŠ‚å·²ç»åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­æˆåŠŸçš„æ¨¡æ‹Ÿå‡ºäº†webç¯å¢ƒï¼Œå¹¶æˆåŠŸçš„å‘é€äº†webè¯·æ±‚ï¼Œæœ¬èŠ‚å°±æ¥è§£å†³å‘é€è¯·æ±‚åå¦‚ä½•æ¯”å¯¹å‘é€ç»“æœçš„é—®é¢˜ã€‚å…¶å®å‘å®Œè¯·æ±‚å¾—åˆ°çš„ä¿¡æ¯åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯å“åº”å¯¹è±¡ã€‚è‡³äºå“åº”å¯¹è±¡ä¸­åŒ…å«ä»€ä¹ˆï¼Œå°±å¯ä»¥æ¯”å¯¹ä»€ä¹ˆã€‚å¸¸è§çš„æ¯”å¯¹å†…å®¹å¦‚ä¸‹ï¼š</p><ul><li><p>å“åº”çŠ¶æ€åŒ¹é…</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testStatus</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">MockMvc</span> mvc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">MockHttpServletRequestBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">MockMvcRequestBuilders</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultActions</span> action <span class="token operator">=</span> mvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è®¾å®šé¢„æœŸå€¼ ä¸çœŸå®å€¼è¿›è¡Œæ¯”è¾ƒï¼ŒæˆåŠŸæµ‹è¯•é€šè¿‡ï¼Œå¤±è´¥æµ‹è¯•å¤±è´¥</span>
    <span class="token comment">//å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼</span>
    <span class="token class-name">StatusResultMatchers</span> status <span class="token operator">=</span> <span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//é¢„è®¡æœ¬æ¬¡è°ƒç”¨æ—¶æˆåŠŸçš„ï¼šçŠ¶æ€200</span>
    <span class="token class-name">ResultMatcher</span> ok <span class="token operator">=</span> status<span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ·»åŠ é¢„è®¡å€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…</span>
    action<span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å“åº”ä½“åŒ¹é…ï¼ˆéjsonæ•°æ®æ ¼å¼ï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testBody</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">MockMvc</span> mvc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">MockHttpServletRequestBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">MockMvcRequestBuilders</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultActions</span> action <span class="token operator">=</span> mvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è®¾å®šé¢„æœŸå€¼ ä¸çœŸå®å€¼è¿›è¡Œæ¯”è¾ƒï¼ŒæˆåŠŸæµ‹è¯•é€šè¿‡ï¼Œå¤±è´¥æµ‹è¯•å¤±è´¥</span>
    <span class="token comment">//å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼</span>
    <span class="token class-name">ContentResultMatchers</span> content <span class="token operator">=</span> <span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultMatcher</span> result <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">&quot;springboot2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ·»åŠ é¢„è®¡å€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…</span>
    action<span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å“åº”ä½“åŒ¹é…ï¼ˆjsonæ•°æ®æ ¼å¼ï¼Œå¼€å‘ä¸­çš„ä¸»æµä½¿ç”¨æ–¹å¼ï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testJson</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">MockMvc</span> mvc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">MockHttpServletRequestBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">MockMvcRequestBuilders</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultActions</span> action <span class="token operator">=</span> mvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è®¾å®šé¢„æœŸå€¼ ä¸çœŸå®å€¼è¿›è¡Œæ¯”è¾ƒï¼ŒæˆåŠŸæµ‹è¯•é€šè¿‡ï¼Œå¤±è´¥æµ‹è¯•å¤±è´¥</span>
    <span class="token comment">//å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼</span>
    <span class="token class-name">ContentResultMatchers</span> content <span class="token operator">=</span> <span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultMatcher</span> result <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token string">&quot;{\&quot;id\&quot;:1,\&quot;name\&quot;:\&quot;springboot2\&quot;,\&quot;type\&quot;:\&quot;springboot\&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ·»åŠ é¢„è®¡å€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…</span>
    action<span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å“åº”å¤´ä¿¡æ¯åŒ¹é…</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testContentType</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">MockMvc</span> mvc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">MockHttpServletRequestBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">MockMvcRequestBuilders</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultActions</span> action <span class="token operator">=</span> mvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è®¾å®šé¢„æœŸå€¼ ä¸çœŸå®å€¼è¿›è¡Œæ¯”è¾ƒï¼ŒæˆåŠŸæµ‹è¯•é€šè¿‡ï¼Œå¤±è´¥æµ‹è¯•å¤±è´¥</span>
    <span class="token comment">//å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼</span>
    <span class="token class-name">HeaderResultMatchers</span> header <span class="token operator">=</span> <span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultMatcher</span> contentType <span class="token operator">=</span> header<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ·»åŠ é¢„è®¡å€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…</span>
    action<span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>â€‹ åŸºæœ¬ä¸Šé½äº†ï¼Œå¤´ä¿¡æ¯ï¼Œæ­£æ–‡ä¿¡æ¯ï¼ŒçŠ¶æ€ä¿¡æ¯éƒ½æœ‰äº†ï¼Œå°±å¯ä»¥ç»„åˆå‡ºä¸€ä¸ªå®Œç¾çš„å“åº”ç»“æœæ¯”å¯¹ç»“æœäº†ã€‚ä»¥ä¸‹èŒƒä¾‹å°±æ˜¯ä¸‰ç§ä¿¡æ¯åŒæ—¶è¿›è¡ŒåŒ¹é…æ ¡éªŒï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¿¡æ¯åŒ¹é…è¿‡ç¨‹ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testGetById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">MockMvc</span> mvc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">MockHttpServletRequestBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">MockMvcRequestBuilders</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultActions</span> action <span class="token operator">=</span> mvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StatusResultMatchers</span> status <span class="token operator">=</span> <span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultMatcher</span> ok <span class="token operator">=</span> status<span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    action<span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">HeaderResultMatchers</span> header <span class="token operator">=</span> <span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultMatcher</span> contentType <span class="token operator">=</span> header<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    action<span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ContentResultMatchers</span> content <span class="token operator">=</span> <span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultMatcher</span> result <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token string">&quot;{\&quot;id\&quot;:1,\&quot;name\&quot;:\&quot;springboot\&quot;,\&quot;type\&quot;:\&quot;springboot\&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    action<span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>webè™šæ‹Ÿè°ƒç”¨å¯ä»¥å¯¹æœ¬åœ°è™šæ‹Ÿè¯·æ±‚çš„è¿”å›å“åº”ä¿¡æ¯è¿›è¡Œæ¯”å¯¹ï¼Œåˆ†ä¸ºå“åº”å¤´ä¿¡æ¯æ¯”å¯¹ã€å“åº”ä½“ä¿¡æ¯æ¯”å¯¹ã€å“åº”çŠ¶æ€ä¿¡æ¯æ¯”å¯¹</li></ol><h3 id="_3-4-æ•°æ®å±‚æµ‹è¯•å›æ»š" tabindex="-1"><a class="header-anchor" href="#_3-4-æ•°æ®å±‚æµ‹è¯•å›æ»š" aria-hidden="true">#</a> 3-4.æ•°æ®å±‚æµ‹è¯•å›æ»š</h3><p>â€‹ å½“å‰æˆ‘ä»¬çš„æµ‹è¯•ç¨‹åºå¯ä»¥å®Œç¾çš„è¿›è¡Œè¡¨ç°å±‚ã€ä¸šåŠ¡å±‚ã€æ•°æ®å±‚æ¥å£å¯¹åº”çš„åŠŸèƒ½æµ‹è¯•äº†ï¼Œä½†æ˜¯æµ‹è¯•ç”¨ä¾‹å¼€å‘å®Œæˆåï¼Œåœ¨æ‰“åŒ…çš„é˜¶æ®µç”±äºtestç”Ÿå‘½å‘¨æœŸå±äºå¿…é¡»è¢«è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚æœè·³è¿‡ä¼šç»™ç³»ç»Ÿå¸¦æ¥æé«˜çš„å®‰å…¨éšæ‚£ï¼Œæ‰€ä»¥æµ‹è¯•ç”¨ä¾‹å¿…é¡»æ‰§è¡Œã€‚ä½†æ˜¯æ–°çš„é—®é¢˜å°±å‘ˆç°äº†ï¼Œæµ‹è¯•ç”¨ä¾‹å¦‚æœæµ‹è¯•æ—¶äº§ç”Ÿäº†äº‹åŠ¡æäº¤å°±ä¼šåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å¯¹æ•°æ®åº“æ•°æ®äº§ç”Ÿå½±å“ï¼Œè¿›è€Œäº§ç”Ÿåƒåœ¾æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›å‘ç”Ÿçš„ï¼Œä½œä¸ºå¼€å‘è€…æµ‹è¯•ç”¨ä¾‹è¯¥è¿è¡Œè¿è¡Œï¼Œä½†æ˜¯è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®ä¸è¦åœ¨æˆ‘çš„ç³»ç»Ÿä¸­ç•™ç—•ï¼Œè¿™æ ·è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p><p>â€‹ springbootæ—©å°±ä¸ºå¼€å‘è€…æƒ³åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”é’ˆå¯¹æ­¤é—®é¢˜ç»™å‡ºäº†æœ€ç®€è§£å†³æ–¹æ¡ˆï¼Œåœ¨åŸå§‹æµ‹è¯•ç”¨ä¾‹ä¸­æ·»åŠ æ³¨è§£@Transactionalå³å¯å®ç°å½“å‰æµ‹è¯•ç”¨ä¾‹çš„äº‹åŠ¡ä¸æäº¤ã€‚å½“ç¨‹åºè¿è¡Œåï¼Œåªè¦æ³¨è§£@Transactionalå‡ºç°çš„ä½ç½®å­˜åœ¨æ³¨è§£@SpringBootTestï¼Œspringbootå°±ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¨‹åºï¼Œæ— éœ€æäº¤äº‹åŠ¡ï¼Œæ‰€ä»¥ä¹Ÿå°±å¯ä»¥é¿å…äº‹åŠ¡çš„æäº¤ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token annotation punctuation">@Rollback</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaoTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookService</span> bookService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;springboot3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        book<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;springboot3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        book<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;springboot3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bookService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¦‚æœå¼€å‘è€…æƒ³æäº¤äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ï¼Œå†æ·»åŠ ä¸€ä¸ª@RollBackçš„æ³¨è§£ï¼Œè®¾ç½®å›æ»šçŠ¶æ€ä¸ºfalseå³å¯æ­£å¸¸æäº¤äº‹åŠ¡ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Ÿspringbootåœ¨è¾…åŠ©å¼€å‘è€…æ—¥å¸¸å·¥ä½œè¿™ä¸€å—å±•ç°å‡ºäº†æƒŠäººçš„èƒ½åŠ›ï¼Œå®åœ¨å¤ªè´´å¿ƒäº†ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>åœ¨springbootçš„æµ‹è¯•ç±»ä¸­é€šè¿‡æ·»åŠ æ³¨è§£@Transactionalæ¥é˜»æ­¢æµ‹è¯•ç”¨ä¾‹æäº¤äº‹åŠ¡</li><li>é€šè¿‡æ³¨è§£@Rollbackæ§åˆ¶springbootæµ‹è¯•ç±»æ‰§è¡Œç»“æœæ˜¯å¦æäº¤äº‹åŠ¡ï¼Œéœ€è¦é…åˆæ³¨è§£@Transactionalä½¿ç”¨</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ å½“å‰æµ‹è¯•ç¨‹åºå·²ç»è¿‘ä¹å®Œç¾äº†ï¼Œä½†æ˜¯ç”±äºæµ‹è¯•ç”¨ä¾‹ä¸­ä¹¦å†™çš„æµ‹è¯•æ•°æ®å±äºå›ºå®šæ•°æ®ï¼Œå¾€å¾€å¤±å»äº†æµ‹è¯•çš„æ„ä¹‰ï¼Œå¼€å‘è€…å¯ä»¥é’ˆå¯¹æµ‹è¯•ç”¨ä¾‹è¿›è¡Œé’ˆå¯¹æ€§å¼€å‘ï¼Œè¿™æ ·å°±æœ‰å¯èƒ½å‡ºç°æµ‹è¯•ç”¨ä¾‹ä¸èƒ½å®Œç¾å‘ˆç°ä¸šåŠ¡é€»è¾‘ä»£ç æ˜¯å¦çœŸå®æœ‰æ•ˆçš„è¾¾æˆä¸šåŠ¡ç›®æ ‡çš„ç°è±¡ï¼Œè§£å†³æ–¹æ¡ˆå…¶å®å¾ˆå®¹æ˜“æƒ³ï¼Œæµ‹è¯•ç”¨ä¾‹çš„æ•°æ®åªè¦éšæœºäº§ç”Ÿå°±å¯ä»¥äº†ï¼Œèƒ½å®ç°å—ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è®²ã€‚</p><h3 id="_3-5-æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š" tabindex="-1"><a class="header-anchor" href="#_3-5-æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š" aria-hidden="true">#</a> 3-5.æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š</h3><p>â€‹ å¯¹äºæµ‹è¯•ç”¨ä¾‹çš„æ•°æ®å›ºå®šä¹¦å†™è‚¯å®šæ˜¯ä¸åˆç†çš„ï¼Œspringbootæä¾›äº†åœ¨é…ç½®ä¸­ä½¿ç”¨éšæœºå€¼çš„æœºåˆ¶ï¼Œç¡®ä¿æ¯æ¬¡è¿è¡Œç¨‹åºåŠ è½½çš„æ•°æ®éƒ½æ˜¯éšæœºçš„ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">testcase</span><span class="token punctuation">:</span>
  <span class="token key atrule">book</span><span class="token punctuation">:</span>
    <span class="token key atrule">id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.int<span class="token punctuation">}</span>
    <span class="token key atrule">id2</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.int(10)<span class="token punctuation">}</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.int<span class="token tag">!5</span><span class="token punctuation">,</span>10<span class="token tag">!</span><span class="token punctuation">}</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.value<span class="token punctuation">}</span>
    <span class="token key atrule">uuid</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.uuid<span class="token punctuation">}</span>
    <span class="token key atrule">publishTime</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.long<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å½“å‰é…ç½®å°±å¯ä»¥åœ¨æ¯æ¬¡è¿è¡Œç¨‹åºæ—¶åˆ›å»ºä¸€ç»„éšæœºæ•°æ®ï¼Œé¿å…æ¯æ¬¡è¿è¡Œæ—¶æ•°æ®éƒ½æ˜¯å›ºå®šå€¼çš„å°´å°¬ç°è±¡å‘ç”Ÿï¼Œæœ‰åŠ©äºæµ‹è¯•åŠŸèƒ½çš„è¿›è¡Œã€‚æ•°æ®çš„åŠ è½½æŒ‰ç…§ä¹‹å‰åŠ è½½æ•°æ®çš„å½¢å¼ï¼Œä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å³å¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;testcase.book&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookCase</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id2<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> type<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> uuid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> publishTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¯¹äºéšæœºå€¼çš„äº§ç”Ÿï¼Œè¿˜æœ‰ä¸€äº›å°çš„é™å®šè§„åˆ™ï¼Œæ¯”å¦‚äº§ç”Ÿçš„æ•°å€¼æ€§æ•°æ®å¯ä»¥è®¾ç½®èŒƒå›´ç­‰ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><img src="/assets/image-20220223135454862.dcadf2fa.png" alt="image-20220223135454862" style="zoom:80%;"><ul><li>${random.int}è¡¨ç¤ºéšæœºæ•´æ•°</li><li>${random.int(10)}è¡¨ç¤º10ä»¥å†…çš„éšæœºæ•°</li><li>${random.int(10,20)}è¡¨ç¤º10åˆ°20çš„éšæœºæ•°</li><li>å…¶ä¸­()å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ï¼Œä¾‹å¦‚[]ï¼Œ!!å‡å¯</li></ul><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨éšæœºæ•°æ®å¯ä»¥æ›¿æ¢æµ‹è¯•ç”¨ä¾‹ä¸­ä¹¦å†™çš„å›ºå®šæ•°æ®ï¼Œæé«˜æµ‹è¯•ç”¨ä¾‹ä¸­çš„æµ‹è¯•æ•°æ®æœ‰æ•ˆæ€§</li></ol><h2 id="_4-æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_4-æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> 4.æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ</h2><p>â€‹ å¼€å‘å®ç”¨ç¯‡å‰ä¸‰ç« åŸºæœ¬ä¸Šæ˜¯å¼€èƒƒèœï¼Œä»ç¬¬å››ç« å¼€å§‹ï¼Œå¼€å‘å®ç”¨ç¯‡è¿›å…¥åˆ°äº†å™©æ¢¦éš¾åº¦äº†ï¼Œä»è¿™é‡Œå¼€å§‹ï¼Œä¸å†æ˜¯å•çº¯çš„åœ¨springbootå†…éƒ¨æäº‹æƒ…äº†ï¼Œè¦æ¶‰åŠåˆ°å¾ˆå¤šç›¸å…³çŸ¥è¯†ã€‚æœ¬ç« èŠ‚ä¸»è¦å†…å®¹éƒ½æ˜¯å’Œæ•°æ®å­˜å‚¨ä¸è¯»å–ç›¸å…³ï¼Œå‰æœŸå­¦ä¹ çš„çŸ¥è¯†ä¸æ•°æ®å±‚æœ‰å…³çš„æŠ€æœ¯åŸºæœ¬ä¸Šéƒ½å›´ç»•åœ¨æ•°æ®åº“è¿™ä¸ªå±‚é¢ä¸Šï¼Œæ‰€ä»¥æœ¬ç« è¦è®²çš„ç¬¬ä¸€ä¸ªå¤§çš„åˆ†æ”¯å°±æ˜¯SQLè§£å†³æ–¹æ¡ˆç›¸å…³çš„å†…å®¹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ•°æ®çš„æ¥æºè¿˜å¯ä»¥æ˜¯éSQLæŠ€æœ¯ç›¸å…³çš„æ•°æ®æ“ä½œï¼Œå› æ­¤ç¬¬äºŒéƒ¨åˆ†å›´ç»•ç€NOSQLè§£å†³æ–¹æ¡ˆè®²è§£ã€‚è‡³äºä»€ä¹ˆæ˜¯NOSQLè§£å†³æ–¹æ¡ˆï¼Œè®²åˆ°äº†å†è¯´å§ã€‚ä¸‹é¢å°±ä»SQLè§£å†³æ–¹æ¡ˆè¯´èµ·ã€‚</p><h3 id="_4-1-sql" tabindex="-1"><a class="header-anchor" href="#_4-1-sql" aria-hidden="true">#</a> 4-1.SQL</h3><p>â€‹ å›å¿†ä¸€ä¸‹ä¹‹å‰åšSSMPæ•´åˆçš„æ—¶å€™æ•°æ®å±‚è§£å†³æ–¹æ¡ˆæ¶‰åŠåˆ°äº†å“ªäº›æŠ€æœ¯ï¼ŸMySQLæ•°æ®åº“ä¸MyBatisPlusæ¡†æ¶ï¼Œåé¢åˆå­¦äº†Druidæ•°æ®æºçš„é…ç½®ï¼Œæ‰€ä»¥ç°åœ¨æ•°æ®å±‚è§£å†³æ–¹æ¡ˆå¯ä»¥è¯´æ˜¯Mysql+Druid+MyBatisPlusã€‚è€Œä¸‰ä¸ªæŠ€æœ¯åˆ†åˆ«å¯¹åº”äº†æ•°æ®å±‚æ“ä½œçš„ä¸‰ä¸ªå±‚é¢ï¼š</p><ul><li>æ•°æ®æºæŠ€æœ¯ï¼šDruid</li><li>æŒä¹…åŒ–æŠ€æœ¯ï¼šMyBatisPlus</li><li>æ•°æ®åº“æŠ€æœ¯ï¼šMySQL</li></ul><p>â€‹ ä¸‹é¢çš„ç ”ç©¶å°±åˆ†ä¸ºä¸‰ä¸ªå±‚é¢è¿›è¡Œç ”ç©¶ï¼Œå¯¹åº”ä¸Šé¢åˆ—å‡ºçš„ä¸‰ä¸ªæ–¹é¢ï¼Œå’±ä»¬å°±ä»ç¬¬ä¸€ä¸ªæ•°æ®æºæŠ€æœ¯å¼€å§‹è¯´èµ·ã€‚</p><h4 id="æ•°æ®æºæŠ€æœ¯" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æºæŠ€æœ¯" aria-hidden="true">#</a> æ•°æ®æºæŠ€æœ¯</h4><p>â€‹ ç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®æºæŠ€æœ¯æ˜¯Druidï¼Œè¿è¡Œæ—¶å¯ä»¥åœ¨æ—¥å¿—ä¸­çœ‹åˆ°å¯¹åº”çš„æ•°æ®æºåˆå§‹åŒ–ä¿¡æ¯ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>INFO 28600 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
INFO 28600 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¦‚æœä¸ä½¿ç”¨Druidæ•°æ®æºï¼Œç¨‹åºè¿è¡Œåæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿæ˜¯ç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥å¯¹è±¡è¿˜æ˜¯æœ‰å…¶ä»–çš„è¿æ¥æ± æŠ€æœ¯æ”¯æŒå‘¢ï¼Ÿå°†DruidæŠ€æœ¯å¯¹åº”çš„starterå»æ‰å†æ¬¡è¿è¡Œç¨‹åºå¯ä»¥åœ¨æ—¥å¿—ä¸­æ‰¾åˆ°å¦‚ä¸‹åˆå§‹åŒ–ä¿¡æ¯ï¼š</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>INFO 31820 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
INFO 31820 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è™½ç„¶æ²¡æœ‰DruidDataSourceç›¸å…³çš„ä¿¡æ¯äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°æ—¥å¿—ä¸­æœ‰HikariDataSourceè¿™ä¸ªä¿¡æ¯ï¼Œå°±ç®—ä¸æ‡‚è¿™æ˜¯ä¸ªä»€ä¹ˆæŠ€æœ¯ï¼Œçœ‹åå­—ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œä»¥DataSourceç»“å°¾çš„åç§°ï¼Œè¿™ä¸€å®šæ˜¯ä¸€ä¸ªæ•°æ®æºæŠ€æœ¯ã€‚æˆ‘ä»¬åˆæ²¡æœ‰æ‰‹å·¥æ·»åŠ è¿™ä¸ªæŠ€æœ¯ï¼Œè¿™ä¸ªæŠ€æœ¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿè¿™å°±æ˜¯è¿™ä¸€èŠ‚è¦è®²çš„çŸ¥è¯†ï¼Œspringbootå†…åµŒæ•°æ®æºã€‚</p><p>â€‹ æ•°æ®å±‚æŠ€æœ¯æ˜¯æ¯ä¸€ä¸ªä¼ä¸šçº§åº”ç”¨ç¨‹åºéƒ½ä¼šç”¨åˆ°çš„ï¼Œè€Œå…¶ä¸­å¿…å®šä¼šè¿›è¡Œæ•°æ®åº“è¿æ¥çš„ç®¡ç†ã€‚springbootæ ¹æ®å¼€å‘è€…çš„ä¹ æƒ¯å‡ºå‘ï¼Œå¼€å‘è€…æä¾›äº†æ•°æ®æºæŠ€æœ¯ï¼Œå°±ç”¨ä½ æä¾›çš„ï¼Œå¼€å‘è€…æ²¡æœ‰æä¾›ï¼Œé‚£æ€»ä¸èƒ½æ‰‹å·¥ç®¡ç†ä¸€ä¸ªä¸€ä¸ªçš„æ•°æ®åº“è¿æ¥å¯¹è±¡å•Šï¼Œæ€ä¹ˆåŠï¼Ÿæˆ‘ç»™ä½ ä¸€ä¸ªé»˜è®¤çš„å°±å¥½äº†ï¼Œè¿™æ ·çœå¿ƒåˆçœäº‹ï¼Œå¤§å®¶éƒ½æ–¹ä¾¿ã€‚</p><p>â€‹ springbootæä¾›äº†3æ¬¾å†…åµŒæ•°æ®æºæŠ€æœ¯ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li>HikariCP</li><li>Tomcatæä¾›DataSource</li><li>Commons</li></ul><p>â€‹ ç¬¬ä¸€ç§ï¼ŒHikartCPï¼Œè¿™æ˜¯springbootå®˜æ–¹æ¨èçš„æ•°æ®æºæŠ€æœ¯ï¼Œä½œä¸ºé»˜è®¤å†…ç½®æ•°æ®æºä½¿ç”¨ã€‚å•¥æ„æ€ï¼Ÿä½ ä¸é…ç½®æ•°æ®æºï¼Œé‚£å°±ç”¨è¿™ä¸ªã€‚</p><p>â€‹ ç¬¬äºŒç§ï¼ŒTomcatæä¾›çš„DataSourceï¼Œå¦‚æœä¸æƒ³ç”¨HikartCPï¼Œå¹¶ä¸”ä½¿ç”¨tomcatä½œä¸ºwebæœåŠ¡å™¨è¿›è¡Œwebç¨‹åºçš„å¼€å‘ï¼Œä½¿ç”¨è¿™ä¸ªã€‚ä¸ºä»€ä¹ˆæ˜¯Tomcatï¼Œä¸æ˜¯å…¶ä»–webæœåŠ¡å™¨å‘¢ï¼Ÿå› ä¸ºwebæŠ€æœ¯å¯¼å…¥starteråï¼Œé»˜è®¤ä½¿ç”¨å†…åµŒtomcatï¼Œæ—¢ç„¶éƒ½æ˜¯é»˜è®¤ä½¿ç”¨çš„æŠ€æœ¯äº†ï¼Œé‚£å°±ä¸€ç”¨åˆ°åº•ï¼Œæ•°æ®æºä¹Ÿç”¨å®ƒçš„ã€‚æœ‰äººå°±æå‡ºæ€ä¹ˆæ‰èƒ½ä¸ä½¿ç”¨HikartCPç”¨tomcatæä¾›çš„é»˜è®¤æ•°æ®æºå¯¹è±¡å‘¢ï¼ŸæŠŠHikartCPæŠ€æœ¯çš„åæ ‡æ’é™¤æ‰å°±OKäº†ã€‚</p><p>â€‹ ç¬¬ä¸‰ç§ï¼ŒDBCPï¼Œè¿™ä¸ªä½¿ç”¨çš„æ¡ä»¶å°±æ›´è‹›åˆ»äº†ï¼Œæ—¢ä¸ä½¿ç”¨HikartCPä¹Ÿä¸ä½¿ç”¨tomcatçš„DataSourceæ—¶ï¼Œé»˜è®¤ç»™ä½ ç”¨è¿™ä¸ªã€‚</p><p>â€‹ springbootè¿™å¿ƒæ“çš„ï¼Œä¹Ÿæ˜¯ç¨€ç¢å•Šï¼Œå°±æ€•ä½ è‡ªå·±ç®¡ä¸å¥½è¿æ¥å¯¹è±¡ï¼Œç»™ä½ ä¸€é¡¿æ¨èï¼ŒçœŸæ˜¯å¼€å‘ç•Œçš„æœ€å¼ºè¾…åŠ©ã€‚æ—¢ç„¶éƒ½ç»™ä½ å¥¶ä¸Šäº†ï¼Œé‚£å°±å—ç”¨å§ï¼Œæ€ä¹ˆé…ç½®ä½¿ç”¨è¿™äº›ä¸œè¥¿å‘¢ï¼Ÿä¹‹å‰æˆ‘ä»¬é…ç½®druidæ—¶ä½¿ç”¨druidçš„starterå¯¹åº”çš„é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>spring:
  datasource:
    druid:	
   	  url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC
      driver-class-name: com.mysql.cj.jdbc.Driver
      username: root
      password: root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ¢æˆæ˜¯é»˜è®¤çš„æ•°æ®æºHikariCPåï¼Œç›´æ¥å§druidåˆ æ‰å°±è¡Œäº†ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å†™ä¸Šæ˜¯å¯¹hikariåšçš„é…ç½®ï¼Œä½†æ˜¯urlåœ°å€è¦å•ç‹¬é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC
    hikari:
      driver-class-name: com.mysql.cj.jdbc.Driver
      username: root
      password: root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿™å°±æ˜¯é…ç½®hikariæ•°æ®æºçš„æ–¹å¼ã€‚å¦‚æœæƒ³å¯¹hikariåšè¿›ä¸€æ­¥çš„é…ç½®ï¼Œå¯ä»¥ç»§ç»­é…ç½®å…¶ç‹¬ç«‹çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/ssm_db<span class="token punctuation">?</span>seC
    <span class="token key atrule">hikari</span><span class="token punctuation">:</span>
      <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
      <span class="token key atrule">username</span><span class="token punctuation">:</span> root
      <span class="token key atrule">password</span><span class="token punctuation">:</span> root
      <span class="token key atrule">maximum-pool-size</span><span class="token punctuation">:</span> <span class="token number">50</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¦‚æœä¸æƒ³ä½¿ç”¨hikariæ•°æ®æºï¼Œä½¿ç”¨tomcatçš„æ•°æ®æºæˆ–è€…DBCPé…ç½®æ ¼å¼ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å­¦ä¹ åˆ°è¿™é‡Œï¼Œä»¥åæˆ‘ä»¬åšæ•°æ®å±‚æ—¶ï¼Œæ•°æ®æºå¯¹è±¡çš„é€‰æ‹©å°±ä¸å†æ˜¯å•ä¸€çš„ä½¿ç”¨druidæ•°æ®æºæŠ€æœ¯äº†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œé€‰æ‹©ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>springbootæŠ€æœ¯æä¾›äº†3ç§å†…ç½®çš„æ•°æ®æºæŠ€æœ¯ï¼Œåˆ†åˆ«æ˜¯Hikariã€tomcatå†…ç½®æ•°æ®æºã€DBCP</li></ol><h4 id="æŒä¹…åŒ–æŠ€æœ¯" tabindex="-1"><a class="header-anchor" href="#æŒä¹…åŒ–æŠ€æœ¯" aria-hidden="true">#</a> æŒä¹…åŒ–æŠ€æœ¯</h4><p>â€‹ è¯´å®Œæ•°æ®æºè§£å†³æ–¹æ¡ˆï¼Œå†æ¥è¯´ä¸€ä¸‹æŒä¹…åŒ–è§£å†³æ–¹æ¡ˆã€‚springbootå……åˆ†å‘æŒ¥å…¶æœ€å¼ºè¾…åŠ©çš„ç‰¹å¾ï¼Œç»™å¼€å‘è€…æä¾›äº†ä¸€å¥—ç°æˆçš„æ•°æ®å±‚æŠ€æœ¯ï¼Œå«åšJdbcTemplateã€‚å…¶å®è¿™ä¸ªæŠ€æœ¯ä¸èƒ½è¯´æ˜¯springbootæä¾›çš„ï¼Œå› ä¸ºä¸ä½¿ç”¨springbootæŠ€æœ¯ï¼Œä¸€æ ·èƒ½ä½¿ç”¨å®ƒï¼Œè°æä¾›çš„å‘¢ï¼ŸspringæŠ€æœ¯æä¾›çš„ï¼Œæ‰€ä»¥åœ¨springbootæŠ€æœ¯èŒƒç•´ä¸­ï¼Œè¿™ä¸ªæŠ€æœ¯ä¹Ÿæ˜¯å­˜åœ¨çš„ï¼Œæ¯•ç«ŸspringbootæŠ€æœ¯æ˜¯åŠ é€Ÿspringç¨‹åºå¼€å‘è€Œåˆ›å»ºçš„ã€‚</p><p>â€‹ è¿™ä¸ªæŠ€æœ¯å…¶å®å°±æ˜¯å›å½’åˆ°jdbcæœ€åŸå§‹çš„ç¼–ç¨‹å½¢å¼æ¥è¿›è¡Œæ•°æ®å±‚çš„å¼€å‘ï¼Œä¸‹é¢ç›´æ¥ä¸Šæ“ä½œæ­¥éª¤ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥jdbcå¯¹åº”çš„åæ ‡ï¼Œè®°å¾—æ˜¯starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
&lt;/dependency
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šè‡ªåŠ¨è£…é…JdbcTemplateå¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot15SqlApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testJdbcTemplate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨JdbcTemplateå®ç°æŸ¥è¯¢æ“ä½œï¼ˆéå®ä½“ç±»å°è£…æ•°æ®çš„æŸ¥è¯¢æ“ä½œï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testJdbcTemplate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from tbl_book&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> maps <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForList</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>maps<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘£</strong>ï¼šä½¿ç”¨JdbcTemplateå®ç°æŸ¥è¯¢æ“ä½œï¼ˆå®ä½“ç±»å°è£…æ•°æ®çš„æŸ¥è¯¢æ“ä½œï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testJdbcTemplate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from tbl_book&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> rm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Book</span> <span class="token function">mapRow</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> rowNum<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
            <span class="token class-name">Book</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            temp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            temp<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            temp<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            temp<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> temp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> rm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¤</strong>ï¼šä½¿ç”¨JdbcTemplateå®ç°å¢åˆ æ”¹æ“ä½œ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testJdbcTemplateSave</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into tbl_book values(3,&#39;springboot1&#39;,&#39;springboot2&#39;,&#39;springboot3&#39;)&quot;</span><span class="token punctuation">;</span>
    jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¦‚æœæƒ³å¯¹JdbcTemplateå¯¹è±¡è¿›è¡Œç›¸å…³é…ç½®ï¼Œå¯ä»¥åœ¨ymlæ–‡ä»¶ä¸­è¿›è¡Œè®¾å®šï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">jdbc</span><span class="token punctuation">:</span>
    template<span class="token punctuation">:</span>z
      <span class="token key atrule">query-timeout</span><span class="token punctuation">:</span> <span class="token number">-1</span>   <span class="token comment"># æŸ¥è¯¢è¶…æ—¶æ—¶é—´</span>
      <span class="token key atrule">max-rows</span><span class="token punctuation">:</span> <span class="token number">500</span>       <span class="token comment"># æœ€å¤§è¡Œæ•°</span>
      <span class="token key atrule">fetch-size</span><span class="token punctuation">:</span> <span class="token number">-1</span>      <span class="token comment"># ç¼“å­˜è¡Œæ•°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>SpringBootå†…ç½®JdbcTemplateæŒä¹…åŒ–è§£å†³æ–¹æ¡ˆ</li><li>ä½¿ç”¨JdbcTemplateéœ€è¦å¯¼å…¥spring-boot-starter-jdbcçš„åæ ‡</li></ol><h4 id="æ•°æ®åº“æŠ€æœ¯" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“æŠ€æœ¯" aria-hidden="true">#</a> æ•°æ®åº“æŠ€æœ¯</h4><p>â€‹ æˆªæ­¢åˆ°ç›®å‰ï¼Œspringbootç»™å¼€å‘è€…æä¾›äº†å†…ç½®çš„æ•°æ®æºè§£å†³æ–¹æ¡ˆå’ŒæŒä¹…åŒ–è§£å†³æ–¹æ¡ˆï¼Œåœ¨æ•°æ®å±‚è§£å†³æ–¹æ¡ˆä¸‰ä»¶å¥—ä¸­è¿˜å‰©ä¸‹ä¸€ä¸ªæ•°æ®åº“ï¼Œè«éspringbootä¹Ÿæä¾›æœ‰å†…ç½®çš„è§£å†³æ–¹æ¡ˆï¼Ÿè¿˜çœŸæœ‰ï¼Œè¿˜ä¸æ˜¯ä¸€ä¸ªï¼Œä¸‰ä¸ªï¼Œè¿™ä¸€èŠ‚å°±æ¥è¯´è¯´å†…ç½®çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆã€‚</p><p>â€‹ springbootæä¾›äº†3æ¬¾å†…ç½®çš„æ•°æ®åº“ï¼Œåˆ†åˆ«æ˜¯</p><ul><li>H2</li><li>HSQL</li><li>Derby</li></ul><p>â€‹ ä»¥ä¸Šä¸‰æ¬¾æ•°æ®åº“é™¤äº†å¯ä»¥ç‹¬ç«‹å®‰è£…ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åƒæ˜¯tomcatæœåŠ¡å™¨ä¸€æ ·ï¼Œé‡‡ç”¨å†…åµŒçš„å½¢å¼è¿è¡Œåœ¨spirngbootå®¹å™¨ä¸­ã€‚å†…åµŒåœ¨å®¹å™¨ä¸­è¿è¡Œï¼Œé‚£å¿…é¡»æ˜¯javaå¯¹è±¡å•Šï¼Œå¯¹ï¼Œè¿™ä¸‰æ¬¾æ•°æ®åº“åº•å±‚éƒ½æ˜¯ä½¿ç”¨javaè¯­è¨€å¼€å‘çš„ã€‚</p><p>â€‹ æˆ‘ä»¬ä¸€ç›´ä½¿ç”¨MySQLæ•°æ®åº“å°±æŒºå¥½çš„ï¼Œä¸ºä»€ä¹ˆæœ‰éœ€æ±‚ç”¨è¿™ä¸ªå‘¢ï¼ŸåŸå› å°±åœ¨äºè¿™ä¸‰ä¸ªæ•°æ®åº“éƒ½å¯ä»¥é‡‡ç”¨å†…åµŒå®¹å™¨çš„å½¢å¼è¿è¡Œï¼Œåœ¨åº”ç”¨ç¨‹åºè¿è¡Œåï¼Œå¦‚æœæˆ‘ä»¬è¿›è¡Œæµ‹è¯•å·¥ä½œï¼Œæ­¤æ—¶æµ‹è¯•çš„æ•°æ®æ— éœ€å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œä½†æ˜¯åˆè¦æµ‹è¯•ä½¿ç”¨ï¼Œå†…åµŒæ•°æ®åº“å°±æ–¹ä¾¿äº†ï¼Œè¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œè¯¥æµ‹è¯•æµ‹è¯•ï¼Œè¯¥è¿è¡Œè¿è¡Œï¼Œç­‰æœåŠ¡å™¨å…³é—­åï¼Œä¸€åˆ‡çƒŸæ¶ˆäº‘æ•£ï¼Œå¤šå¥½ï¼Œçœå¾—ä½ ç»´æŠ¤å¤–éƒ¨æ•°æ®åº“äº†ã€‚è¿™ä¹Ÿæ˜¯å†…åµŒæ•°æ®åº“çš„æœ€å¤§ä¼˜ç‚¹ï¼Œæ–¹ä¾¿è¿›è¡ŒåŠŸèƒ½æµ‹è¯•ã€‚</p><p>â€‹ ä¸‹é¢ä»¥H2æ•°æ®åº“ä¸ºä¾‹è®²è§£å¦‚ä½•ä½¿ç”¨è¿™äº›å†…åµŒæ•°æ®åº“ï¼Œæ“ä½œæ­¥éª¤ä¹Ÿéå¸¸ç®€å•ï¼Œç®€å•æ‰å¥½ç”¨å˜›</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥H2æ•°æ®åº“å¯¹åº”çš„åæ ‡ï¼Œä¸€å…±2ä¸ª</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.h2database<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>h2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-jpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå°†å·¥ç¨‹è®¾ç½®ä¸ºwebå·¥ç¨‹ï¼Œå¯åŠ¨å·¥ç¨‹æ—¶å¯åŠ¨H2æ•°æ®åº“</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šé€šè¿‡é…ç½®å¼€å¯H2æ•°æ®åº“æ§åˆ¶å°è®¿é—®ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„æ•°æ®åº“è¿æ¥è½¯ä»¶æ“ä½œ</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">h2</span><span class="token punctuation">:</span>
    <span class="token key atrule">console</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /h2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ webç«¯è®¿é—®è·¯å¾„/h2ï¼Œè®¿é—®å¯†ç 123456ï¼Œå¦‚æœè®¿é—®å¤±è´¥ï¼Œå…ˆé…ç½®ä¸‹åˆ—æ•°æ®æºï¼Œå¯åŠ¨ç¨‹åºè¿è¡Œåå†æ¬¡è®¿é—®/h2è·¯å¾„å°±å¯ä»¥æ­£å¸¸è®¿é—®äº†</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">datasource</span><span class="token punctuation">:</span>
  <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>h2<span class="token punctuation">:</span>~/test
  <span class="token key atrule">hikari</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> org.h2.Driver
    <span class="token key atrule">username</span><span class="token punctuation">:</span> sa
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘£</strong>ï¼šä½¿ç”¨JdbcTemplateæˆ–MyBatisPlusæŠ€æœ¯æ“ä½œæ•°æ®åº“</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202211251545854.png" alt=""></p><p>H2 è¯­æ³•å’ŒMySQLæœ‰ä¸€ç‚¹çš„å°åŒºåˆ«</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> tbl_book<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">,</span><span class="token keyword">type</span> <span class="token keyword">varchar</span><span class="token punctuation">,</span>description <span class="token keyword">varchar</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> tbl_book <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&#39;SpringBoot&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;SpringBoot&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;SpringBoot&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tbl_book<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ“ä½œçš„è¯ï¼Œå’ŒMySQLæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯é“¾æ¥åº“æœ‰ä¸€ç‚¹çš„åŒºåˆ«</p><p>å¯¼å…¥æ“ä½œæ•°æ®åº“çš„åæ ‡ï¼Œè¿™é‡Œä½¿ç”¨JDBC</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Testæµ‹è¯•ç±»</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoTest</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">h2GetDataTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from tbl_book&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> rm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Book</span> <span class="token function">mapRow</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> rowNum<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
                <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                book<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                book<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                book<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> book<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> rm<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶å®æˆ‘ä»¬åªæ˜¯æ¢äº†ä¸€ä¸ªæ•°æ®åº“è€Œå·²ï¼Œå…¶ä»–çš„ä¸œè¥¿éƒ½ä¸å—å½±å“ã€‚ä¸€ä¸ªé‡è¦æé†’ï¼Œåˆ«å¿˜äº†ï¼Œä¸Šçº¿æ—¶ï¼ŒæŠŠå†…å­˜çº§æ•°æ®åº“å…³é—­ï¼Œé‡‡ç”¨MySQLæ•°æ®åº“ä½œä¸ºæ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆï¼Œå…³é—­æ–¹å¼å°±æ˜¯è®¾ç½®enabledå±æ€§ä¸ºfalseå³å¯ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>H2å†…åµŒå¼æ•°æ®åº“å¯åŠ¨æ–¹å¼ï¼Œæ·»åŠ åæ ‡ï¼Œæ·»åŠ é…ç½®</li><li>H2æ•°æ®åº“çº¿ä¸Šè¿è¡Œæ—¶è¯·åŠ¡å¿…å…³é—­</li></ol><p>â€‹ åˆ°è¿™é‡ŒSQLç›¸å…³çš„æ•°æ®å±‚è§£å†³æ–¹æ¡ˆå°±è®²å®Œäº†ï¼Œç°åœ¨çš„å¯é€‰æŠ€æœ¯å°±ä¸°å¯Œçš„å¤šäº†ã€‚</p><ul><li>æ•°æ®æºæŠ€æœ¯ï¼šDruidã€Hikariã€tomcat DataSourceã€DBCP</li><li>æŒä¹…åŒ–æŠ€æœ¯ï¼šMyBatisPlusã€MyBatisã€JdbcTemplate</li><li>æ•°æ®åº“æŠ€æœ¯ï¼šMySQLã€H2ã€HSQLã€Derby</li></ul><p>â€‹ ç°åœ¨å¼€å‘ç¨‹åºæ—¶å°±å¯ä»¥åœ¨ä»¥ä¸ŠæŠ€æœ¯ä¸­ä»»é€‰ä¸€ç§ç»„ç»‡æˆä¸€å¥—æ•°æ®åº“è§£å†³æ–¹æ¡ˆäº†ã€‚</p><h3 id="_4-2-nosql" tabindex="-1"><a class="header-anchor" href="#_4-2-nosql" aria-hidden="true">#</a> 4-2.NoSQL</h3><p>â€‹ SQLæ•°æ®å±‚è§£å†³æ–¹æ¡ˆè¯´å®Œäº†ï¼Œä¸‹é¢æ¥è¯´è¯´NoSQLæ•°æ®å±‚è§£å†³æ–¹æ¡ˆã€‚è¿™ä¸ªNoSQLæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä»å­—é¢æ¥çœ‹ï¼ŒNoè¡¨ç¤ºå¦å®šï¼ŒNoSQLå°±æ˜¯éå…³ç³»å‹æ•°æ®åº“è§£å†³æ–¹æ¡ˆï¼Œæ„æ€å°±æ˜¯æ•°æ®è¯¥å­˜å­˜è¯¥å–å–ï¼Œåªæ˜¯è¿™äº›æ•°æ®ä¸æ”¾åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­äº†ï¼Œé‚£æ”¾åœ¨å“ªé‡Œï¼Ÿè‡ªç„¶æ˜¯ä¸€äº›èƒ½å¤Ÿå­˜å‚¨æ•°æ®çš„å…¶ä»–ç›¸å…³æŠ€æœ¯ä¸­äº†ï¼Œæ¯”å¦‚Redisç­‰ã€‚æœ¬èŠ‚è®²è§£çš„å†…å®¹å°±æ˜¯springbootå¦‚ä½•æ•´åˆè¿™äº›æŠ€æœ¯ï¼Œåœ¨springbootå®˜æ–¹æ–‡æ¡£ä¸­æä¾›äº†10ç§ç›¸å…³æŠ€æœ¯çš„æ•´åˆæ–¹æ¡ˆï¼Œæˆ‘ä»¬å°†è®²è§£å›½å†…å¸‚åœºä¸Šæœ€æµè¡Œçš„å‡ æ¬¾NoSQLæ•°æ®åº“æ•´åˆæ–¹æ¡ˆï¼Œåˆ†åˆ«æ˜¯Redisã€MongoDBã€ESã€‚</p><p>â€‹ å› ä¸ºæ¯ä¸ªå°ä¼™ä¼´å­¦ä¹ è¿™é—¨è¯¾ç¨‹çš„æ—¶å€™èµ·ç‚¹ä¸åŒï¼Œä¸ºäº†ä¾¿äºå„ä½å­¦ä¹ è€…æ›´å¥½çš„å­¦ä¹ ï¼Œæ¯ç§æŠ€æœ¯åœ¨è®²è§£æ•´åˆå‰éƒ½ä¼šå…ˆè®²ä¸€ä¸‹å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨ï¼Œç„¶åå†è®²æ•´åˆã€‚å¦‚æœå¯¹æŸä¸ªæŠ€æœ¯æ¯”è¾ƒç†Ÿæ‚‰çš„å°ä¼™ä¼´å¯ä»¥ç›´æ¥è·³è¿‡å®‰è£…çš„å­¦ä¹ è¿‡ç¨‹ï¼Œç›´æ¥çœ‹æ•´åˆæ–¹æ¡ˆå³å¯ã€‚æ­¤å¤–ä¸Šè¿°è¿™äº›æŠ€æœ¯æœ€ä½³ä½¿ç”¨æ–¹æ¡ˆéƒ½æ˜¯åœ¨LinuxæœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œä½†æ˜¯è€ƒè™‘åˆ°å„ä½å°ä¼™ä¼´çš„å­¦ä¹ èµ·ç‚¹å·®å¼‚è¿‡å¤§ï¼Œæ‰€ä»¥ä¸‹é¢çš„è¯¾ç¨‹éƒ½æ˜¯ä»¥Windowså¹³å°ä½œä¸ºå®‰è£…åŸºç¡€è®²è§£ï¼Œå¦‚æœæƒ³çœ‹Linuxç‰ˆè½¯ä»¶å®‰è£…ï¼Œå¯ä»¥å†æ‰¾åˆ°å¯¹åº”æŠ€æœ¯çš„å­¦ä¹ æ–‡æ¡£æŸ¥é˜…å­¦ä¹ ã€‚</p><h4 id="springbootæ•´åˆredis" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆredis" aria-hidden="true">#</a> SpringBootæ•´åˆRedis</h4><p>â€‹ Redisæ˜¯ä¸€æ¬¾é‡‡ç”¨key-valueæ•°æ®å­˜å‚¨æ ¼å¼çš„å†…å­˜çº§NoSQLæ•°æ®åº“ï¼Œé‡ç‚¹å…³æ³¨æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œæ˜¯key-valueæ ¼å¼ï¼Œä¹Ÿå°±æ˜¯é”®å€¼å¯¹çš„å­˜å‚¨å½¢å¼ã€‚ä¸MySQLæ•°æ®åº“ä¸åŒï¼ŒMySQLæ•°æ®åº“æœ‰è¡¨ã€æœ‰å­—æ®µã€æœ‰è®°å½•ï¼ŒRedisæ²¡æœ‰è¿™äº›ä¸œè¥¿ï¼Œå°±æ˜¯ä¸€ä¸ªåç§°å¯¹åº”ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”æ•°æ®ä»¥å­˜å‚¨åœ¨å†…å­˜ä¸­ä½¿ç”¨ä¸ºä¸»ã€‚ä»€ä¹ˆå«ä»¥å­˜å‚¨åœ¨å†…å­˜ä¸­ä¸ºä¸»ï¼Ÿå…¶å®Redisæœ‰å®ƒçš„æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆï¼Œåˆ†åˆ«æ˜¯RDBå’ŒAOFï¼Œä½†æ˜¯Redisè‡ªèº«å¹¶ä¸æ˜¯ä¸ºäº†æ•°æ®æŒä¹…åŒ–è€Œç”Ÿçš„ï¼Œä¸»è¦æ˜¯åœ¨å†…å­˜ä¸­ä¿å­˜æ•°æ®ï¼ŒåŠ é€Ÿæ•°æ®è®¿é—®çš„ï¼Œæ‰€ä»¥è¯´æ˜¯ä¸€æ¬¾å†…å­˜çº§æ•°æ®åº“ã€‚</p><p>â€‹ Redisæ”¯æŒå¤šç§æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œæ¯”å¦‚å¯ä»¥ç›´æ¥å­˜å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥å­˜ä¸€ä¸ªmapé›†åˆï¼Œlisté›†åˆï¼Œåé¢ä¼šæ¶‰åŠåˆ°ä¸€äº›ä¸åŒæ ¼å¼çš„æ•°æ®æ“ä½œï¼Œè¿™ä¸ªéœ€è¦å…ˆå­¦ä¹ ä¸€ä¸‹æ‰èƒ½è¿›è¡Œæ•´åˆï¼Œæ‰€ä»¥åœ¨åŸºæœ¬æ“ä½œä¸­ä¼šä»‹ç»ä¸€äº›ç›¸å…³æ“ä½œã€‚ä¸‹é¢å°±å…ˆå®‰è£…ï¼Œå†æ“ä½œï¼Œæœ€åè¯´æ•´åˆ</p><h5 id="å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…" aria-hidden="true">#</a> å®‰è£…</h5><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼šhttps://github.com/tporadowski/redis/releases</p><p>â€‹ ä¸‹è½½çš„å®‰è£…åŒ…æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯ä¸€é”®å®‰è£…çš„msiæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯è§£å‹ç¼©å°±èƒ½ä½¿ç”¨çš„zipæ–‡ä»¶ï¼Œå“ªç§å½¢å¼éƒ½è¡Œï¼Œè¿™é‡Œå°±ä¸ä»‹ç»å®‰è£…è¿‡ç¨‹äº†ï¼Œæœ¬è¯¾ç¨‹é‡‡ç”¨çš„æ˜¯msiä¸€é”®å®‰è£…çš„msiæ–‡ä»¶è¿›è¡Œå®‰è£…çš„ã€‚</p><p>â€‹ å•¥æ˜¯msiï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å®‰è£…åŒ…ï¼Œä¸ä»…å®‰è£…è½¯ä»¶ï¼Œè¿˜å¸®ä½ æŠŠå®‰è£…è½¯ä»¶æ—¶éœ€è¦çš„åŠŸèƒ½å…³è”åœ¨ä¸€èµ·ï¼Œæ‰“åŒ…æ“ä½œã€‚æ¯”å¦‚å¦‚å®‰è£…åºåˆ—ã€åˆ›å»ºå’Œè®¾ç½®å®‰è£…è·¯å¾„ã€è®¾ç½®ç³»ç»Ÿä¾èµ–é¡¹ã€é»˜è®¤è®¾å®šå®‰è£…é€‰é¡¹å’Œæ§åˆ¶å®‰è£…è¿‡ç¨‹çš„å±æ€§ã€‚è¯´ç®€å•ç‚¹å°±æ˜¯ä¸€ç«™å¼æœåŠ¡ï¼Œå®‰è£…è¿‡ç¨‹ä¸€æ¡é¾™æ“ä½œä¸€æ°”å‘µæˆï¼Œå°±æ˜¯ä¸ºå°ç™½ç”¨æˆ·æä¾›çš„è½¯ä»¶å®‰è£…ç¨‹åºã€‚</p><p>â€‹ å®‰è£…å®Œæ¯•åä¼šå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªæ–‡ä»¶å¯¹åº”ä¸¤ä¸ªå‘½ä»¤ï¼Œæ˜¯å¯åŠ¨Redisçš„æ ¸å¿ƒå‘½ä»¤ï¼Œéœ€è¦å†CMDå‘½ä»¤è¡Œæ¨¡å¼æ‰§è¡Œã€‚</p><img src="/assets/image-20220224091709173.a3a73359.png" alt="image-20220224091709173" style="zoom:80%;"><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong></p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>redis-server.exe redis.windows.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ åˆå­¦è€…æ— éœ€è°ƒæ•´æœåŠ¡å™¨å¯¹å¤–æœåŠ¡ç«¯å£ï¼Œé»˜è®¤6379ã€‚</p><p><strong>å¯åŠ¨å®¢æˆ·ç«¯</strong></p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>redis-cli.exe
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ å¦‚æœå¯åŠ¨redisæœåŠ¡å™¨å¤±è´¥ï¼Œå¯ä»¥å…ˆå¯åŠ¨å®¢æˆ·ç«¯ï¼Œç„¶åæ‰§è¡Œshutdownæ“ä½œåé€€å‡ºï¼Œæ­¤æ—¶redisæœåŠ¡å™¨å°±å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†ã€‚</p><h5 id="åŸºæœ¬æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œ" aria-hidden="true">#</a> åŸºæœ¬æ“ä½œ</h5><p>â€‹ æœåŠ¡å™¨å¯åŠ¨åï¼Œä½¿ç”¨å®¢æˆ·ç«¯å°±å¯ä»¥è¿æ¥æœåŠ¡å™¨ï¼Œç±»ä¼¼äºå¯åŠ¨å®ŒMySQLæ•°æ®åº“ï¼Œç„¶åå¯åŠ¨SQLå‘½ä»¤è¡Œæ“ä½œæ•°æ®åº“ã€‚</p><p>â€‹ æ”¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®åˆ°redisä¸­ï¼Œå…ˆä¸ºæ•°æ®å®šä¹‰ä¸€ä¸ªåç§°ï¼Œæ¯”å¦‚name,ageç­‰ï¼Œç„¶åä½¿ç”¨å‘½ä»¤setè®¾ç½®æ•°æ®åˆ°redisæœåŠ¡å™¨ä¸­å³å¯</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>set name itheima
set age 12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä»redisä¸­å–å‡ºå·²ç»æ”¾å…¥çš„æ•°æ®ï¼Œæ ¹æ®åç§°å–ï¼Œå°±å¯ä»¥å¾—åˆ°å¯¹åº”æ•°æ®ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”æ•°æ®å°±ä¼šå¾—åˆ°(nil)</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>get name
get age
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä»¥ä¸Šä½¿ç”¨çš„æ•°æ®å­˜å‚¨æ˜¯ä¸€ä¸ªåç§°å¯¹åº”ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¦ç»´æŠ¤çš„æ•°æ®è¿‡å¤šï¼Œå¯ä»¥ä½¿ç”¨åˆ«çš„æ•°æ®å­˜å‚¨ç»“æ„ã€‚ä¾‹å¦‚hashï¼Œå®ƒæ˜¯ä¸€ç§ä¸€ä¸ªåç§°ä¸‹å¯ä»¥å­˜å‚¨å¤šä¸ªæ•°æ®çš„å­˜å‚¨æ¨¡å‹ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°æ®ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„äºŒçº§å­˜å‚¨åç§°ã€‚å‘hashç»“æ„ä¸­å­˜å‚¨æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>hset a a1 aa1		#å¯¹å¤–keyåç§°æ˜¯aï¼Œåœ¨åç§°ä¸ºaçš„å­˜å‚¨æ¨¡å‹ä¸­ï¼Œa1è¿™ä¸ªkeyä¸­ä¿å­˜äº†æ•°æ®aa1
hset a a2 aa2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è·å–hashç»“æ„ä¸­çš„æ•°æ®å‘½ä»¤å¦‚ä¸‹</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>hget a a1			#å¾—åˆ°aa1
hget a a2			#å¾—åˆ°aa2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æœ‰å…³redisçš„åŸºç¡€æ“ä½œå°±æ™®åŠåˆ°è¿™é‡Œï¼Œéœ€è¦å…¨é¢æŒæ¡redisæŠ€æœ¯ï¼Œè¯·å‚çœ‹ç›¸å…³æ•™ç¨‹å­¦ä¹ ã€‚</p><h5 id="æ•´åˆ" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ" aria-hidden="true">#</a> æ•´åˆ</h5><p>â€‹ åœ¨è¿›è¡Œæ•´åˆä¹‹å‰å…ˆæ¢³ç†ä¸€ä¸‹æ•´åˆçš„æ€æƒ³ï¼Œspringbootæ•´åˆä»»ä½•æŠ€æœ¯å…¶å®å°±æ˜¯åœ¨springbootä¸­ä½¿ç”¨å¯¹åº”æŠ€æœ¯çš„APIã€‚å¦‚æœä¸¤ä¸ªæŠ€æœ¯æ²¡æœ‰äº¤é›†ï¼Œå°±ä¸å­˜åœ¨æ•´åˆçš„æ¦‚å¿µäº†ã€‚æ‰€è°“æ•´åˆå…¶å®å°±æ˜¯ä½¿ç”¨springbootæŠ€æœ¯å»ç®¡ç†å…¶ä»–æŠ€æœ¯ï¼Œå‡ ä¸ªé—®é¢˜æ˜¯èº²ä¸æ‰çš„ã€‚</p><p>â€‹ ç¬¬ä¸€ï¼Œéœ€è¦å…ˆå¯¼å…¥å¯¹åº”æŠ€æœ¯çš„åæ ‡ï¼Œè€Œæ•´åˆä¹‹åï¼Œè¿™äº›åæ ‡éƒ½æœ‰äº†ä¸€äº›å˜åŒ–</p><p>â€‹ ç¬¬äºŒï¼Œä»»ä½•æŠ€æœ¯é€šå¸¸éƒ½ä¼šæœ‰ä¸€äº›ç›¸å…³çš„è®¾ç½®ä¿¡æ¯ï¼Œæ•´åˆä¹‹åï¼Œè¿™äº›ä¿¡æ¯å¦‚ä½•å†™ï¼Œå†™åœ¨å“ªæ˜¯ä¸€ä¸ªé—®é¢˜</p><p>â€‹ ç¬¬ä¸‰ï¼Œæ²¡æœ‰æ•´åˆä¹‹å‰æ“ä½œå¦‚æœæ˜¯æ¨¡å¼Açš„è¯ï¼Œæ•´åˆä¹‹åå¦‚æœæ²¡æœ‰ç»™å¼€å‘è€…å¸¦æ¥ä¸€äº›ä¾¿æ·æ“ä½œï¼Œé‚£æ•´åˆå°†æ¯«æ— æ„ä¹‰ï¼Œæ‰€ä»¥æ•´åˆåæ“ä½œè‚¯å®šè¦ç®€åŒ–ä¸€äº›ï¼Œé‚£å¯¹åº”çš„æ“ä½œæ–¹å¼è‡ªç„¶ä¹Ÿæœ‰æ‰€ä¸åŒ</p><p>â€‹ æŒ‰ç…§ä¸Šé¢çš„ä¸‰ä¸ªé—®é¢˜å»æ€è€ƒspringbootæ•´åˆæ‰€æœ‰æŠ€æœ¯æ˜¯ä¸€ç§é€šç”¨æ€æƒ³ï¼Œåœ¨æ•´åˆçš„è¿‡ç¨‹ä¸­ä¼šé€æ­¥æ‘¸ç´¢å‡ºæ•´åˆçš„å¥—è·¯ï¼Œè€Œä¸”é€‚ç”¨æ€§éå¸¸å¼ºï¼Œç»è¿‡è‹¥å¹²ç§æŠ€æœ¯çš„æ•´åˆååŸºæœ¬ä¸Šå¯ä»¥æ€»ç»“å‡ºä¸€å¥—å›ºå®šæ€ç»´ã€‚</p><p>â€‹ ä¸‹é¢å°±å¼€å§‹springbootæ•´åˆredisï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆredisçš„starteråæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°åæ ‡å¯ä»¥åœ¨åˆ›å»ºæ¨¡å—çš„æ—¶å€™é€šè¿‡å‹¾é€‰çš„å½¢å¼è¿›è¡Œé€‰æ‹©ï¼Œå½’å±NoSQLåˆ†ç±»ä¸­</p><img src="/assets/image-20220224101142220.9b9a9af6.png" alt="image-20220224101142220" style="zoom:50%;"><p><strong>æ­¥éª¤â‘¡</strong>ï¼šè¿›è¡ŒåŸºç¡€é…ç½®</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ“ä½œredisï¼Œæœ€åŸºæœ¬çš„ä¿¡æ¯å°±æ˜¯æ“ä½œå“ªä¸€å°redisæœåŠ¡å™¨ï¼Œæ‰€ä»¥æœåŠ¡å™¨åœ°å€å±äºåŸºç¡€é…ç½®ä¿¡æ¯ï¼Œä¸å¯ç¼ºå°‘ã€‚ä½†æ˜¯å³ä¾¿ä½ ä¸é…ç½®ï¼Œç›®å‰ä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ã€‚å› ä¸ºä»¥ä¸Šä¸¤ç»„ä¿¡æ¯éƒ½æœ‰é»˜è®¤é…ç½®ï¼Œåˆšå¥½å°±æ˜¯ä¸Šè¿°é…ç½®å€¼ã€‚</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨springbootæ•´åˆredisçš„ä¸“ç”¨å®¢æˆ·ç«¯æ¥å£æ“ä½œï¼Œæ­¤å¤„ä½¿ç”¨çš„æ˜¯RedisTemplate</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot16RedisApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ValueOperations</span> ops <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ops<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token number">41</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ValueOperations</span> ops <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> age <span class="token operator">=</span> ops<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">hset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">HashOperations</span> ops <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ops<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">hget</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">HashOperations</span> ops <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> val <span class="token operator">=</span> ops<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ åœ¨æ“ä½œredisæ—¶ï¼Œéœ€è¦å…ˆç¡®è®¤æ“ä½œä½•ç§æ•°æ®ï¼Œæ ¹æ®æ•°æ®ç§ç±»å¾—åˆ°æ“ä½œæ¥å£ã€‚ä¾‹å¦‚ä½¿ç”¨opsForValue()è·å–stringç±»å‹çš„æ•°æ®æ“ä½œæ¥å£ï¼Œä½¿ç”¨opsForHash()è·å–hashç±»å‹çš„æ•°æ®æ“ä½œæ¥å£ï¼Œå‰©ä¸‹çš„å°±æ˜¯è°ƒç”¨å¯¹åº”apiæ“ä½œäº†ã€‚å„ç§ç±»å‹çš„æ•°æ®æ“ä½œæ¥å£å¦‚ä¸‹ï¼š</p><img src="/assets/image-20220224103104908.22f9de3d.png" alt="image-20220224103104908" style="zoom:80%;"><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆredisæ­¥éª¤ <ol><li>å¯¼å…¥springbootæ•´åˆredisçš„starteråæ ‡</li><li>è¿›è¡ŒåŸºç¡€é…ç½®</li><li>ä½¿ç”¨springbootæ•´åˆredisçš„ä¸“ç”¨å®¢æˆ·ç«¯æ¥å£RedisTemplateæ“ä½œ</li></ol></li></ol><p><strong>StringRedisTemplate</strong></p><p>â€‹ ç”±äºrediså†…éƒ¨ä¸æä¾›javaå¯¹è±¡çš„å­˜å‚¨æ ¼å¼ï¼Œå› æ­¤å½“æ“ä½œçš„æ•°æ®ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨æ—¶ï¼Œä¼šè¿›è¡Œè½¬ç ï¼Œè½¬æ¢æˆå­—ç¬¦ä¸²æ ¼å¼åè¿›è¡Œæ“ä½œã€‚ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨åŸºäºå­—ç¬¦ä¸²ä¸ºæ•°æ®çš„æ“ä½œï¼Œspringbootæ•´åˆredisæ—¶æä¾›äº†ä¸“ç”¨çš„APIæ¥å£StringRedisTemplateï¼Œä½ å¯ä»¥ç†è§£ä¸ºè¿™æ˜¯RedisTemplateçš„ä¸€ç§æŒ‡å®šæ•°æ®æ³›å‹çš„æ“ä½œAPIã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringRedisTemplateTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">StringRedisTemplate</span> stringRedisTemplate<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ValueOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ops <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> ops<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>rediså®¢æˆ·ç«¯é€‰æ‹©</strong></p><pre><code>	springbootæ•´åˆredisæŠ€æœ¯æä¾›äº†å¤šç§å®¢æˆ·ç«¯å…¼å®¹æ¨¡å¼ï¼Œé»˜è®¤æä¾›çš„æ˜¯lettucså®¢æˆ·ç«¯æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦åˆ‡æ¢æˆæŒ‡å®šå®¢æˆ·ç«¯æŠ€æœ¯ï¼Œä¾‹å¦‚jediså®¢æˆ·ç«¯æŠ€æœ¯ï¼Œåˆ‡æ¢æˆjediså®¢æˆ·ç«¯æŠ€æœ¯æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š
</code></pre><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥jedisåæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ jedisåæ ‡å—springbootç®¡ç†ï¼Œæ— éœ€æä¾›ç‰ˆæœ¬å·</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®å®¢æˆ·ç«¯æŠ€æœ¯ç±»å‹ï¼Œè®¾ç½®ä¸ºjedis</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">client-type</span><span class="token punctuation">:</span> jedis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šæ ¹æ®éœ€è¦è®¾ç½®å¯¹åº”çš„é…ç½®</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">client-type</span><span class="token punctuation">:</span> jedis
    <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">16</span>
    <span class="token key atrule">jedis</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">16</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>lettcusä¸jedisåŒºåˆ«</strong></p><ul><li>jedisè¿æ¥RedisæœåŠ¡å™¨æ˜¯ç›´è¿æ¨¡å¼ï¼Œå½“å¤šçº¿ç¨‹æ¨¡å¼ä¸‹ä½¿ç”¨jedisä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆå¯ä»¥é€šè¿‡é…ç½®è¿æ¥æ± ä½¿æ¯ä¸ªè¿æ¥ä¸“ç”¨ï¼Œè¿™æ ·æ•´ä½“æ€§èƒ½å°±å¤§å—å½±å“</li><li>lettcusåŸºäºNettyæ¡†æ¶è¿›è¡Œä¸RedisæœåŠ¡å™¨è¿æ¥ï¼Œåº•å±‚è®¾è®¡ä¸­é‡‡ç”¨StatefulRedisConnectionã€‚ StatefulRedisConnectionè‡ªèº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥ä¿éšœå¹¶å‘è®¿é—®å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥ä¸€ä¸ªè¿æ¥å¯ä»¥è¢«å¤šçº¿ç¨‹å¤ç”¨ã€‚å½“ç„¶lettcusä¹Ÿæ”¯æŒå¤šè¿æ¥å®ä¾‹ä¸€èµ·å·¥ä½œ</li></ul><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆredisæä¾›äº†StringRedisTemplateå¯¹è±¡ï¼Œä»¥å­—ç¬¦ä¸²çš„æ•°æ®æ ¼å¼æ“ä½œredis</li><li>å¦‚æœéœ€è¦åˆ‡æ¢rediså®¢æˆ·ç«¯å®ç°æŠ€æœ¯ï¼Œå¯ä»¥é€šè¿‡é…ç½®çš„å½¢å¼è¿›è¡Œ</li></ol><h4 id="springbootæ•´åˆmongodb" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆmongodb" aria-hidden="true">#</a> SpringBootæ•´åˆMongoDB</h4><p>â€‹ ä½¿ç”¨RedisæŠ€æœ¯å¯ä»¥æœ‰æ•ˆçš„æé«˜æ•°æ®è®¿é—®é€Ÿåº¦ï¼Œä½†æ˜¯ç”±äºRedisçš„æ•°æ®æ ¼å¼å•ä¸€æ€§ï¼Œæ— æ³•æ“ä½œç»“æ„åŒ–æ•°æ®ï¼Œå½“æ“ä½œå¯¹è±¡å‹çš„æ•°æ®æ—¶ï¼ŒRediså°±æ˜¾å¾—æ‰è¥Ÿè§è‚˜ã€‚åœ¨ä¿éšœè®¿é—®é€Ÿåº¦çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæƒ³æ“ä½œç»“æ„åŒ–æ•°æ®ï¼Œçœ‹æ¥Redisæ— æ³•æ»¡è¶³è¦æ±‚äº†ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨å…¨æ–°çš„æ•°æ®å­˜å‚¨ç»“æŸæ¥è§£å†³æ­¤é—®é¢˜ï¼Œæœ¬èŠ‚è®²è§£springbootå¦‚ä½•æ•´åˆMongoDBæŠ€æœ¯ã€‚</p><p>â€‹ MongoDBæ˜¯ä¸€ä¸ªå¼€æºã€é«˜æ€§èƒ½ã€æ— æ¨¡å¼çš„æ–‡æ¡£å‹æ•°æ®åº“ï¼Œå®ƒæ˜¯NoSQLæ•°æ®åº“äº§å“ä¸­çš„ä¸€ç§ï¼Œæ˜¯æœ€åƒå…³ç³»å‹æ•°æ®åº“çš„éå…³ç³»å‹æ•°æ®åº“ã€‚</p><p>â€‹ ä¸Šè¿°æè¿°ä¸­å‡ ä¸ªè¯ï¼Œå…¶ä¸­å¯¹äºæˆ‘ä»¬æœ€é™Œç”Ÿçš„è¯æ˜¯æ— æ¨¡å¼çš„ã€‚ä»€ä¹ˆå«æ— æ¨¡å¼å‘¢ï¼Ÿç®€å•è¯´å°±æ˜¯ä½œä¸ºä¸€æ¬¾æ•°æ®åº“ï¼Œæ²¡æœ‰å›ºå®šçš„æ•°æ®å­˜å‚¨ç»“æ„ï¼Œç¬¬ä¸€æ¡æ•°æ®å¯èƒ½æœ‰Aã€Bã€Cä¸€å…±3ä¸ªå­—æ®µï¼Œç¬¬äºŒæ¡æ•°æ®å¯èƒ½æœ‰Dã€Eã€Fä¹Ÿæ˜¯3ä¸ªå­—æ®µï¼Œç¬¬ä¸‰æ¡æ•°æ®å¯èƒ½æ˜¯Aã€Cã€E3ä¸ªå­—æ®µï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®çš„ç»“æ„ä¸å›ºå®šï¼Œè¿™å°±æ˜¯æ— æ¨¡å¼ã€‚æœ‰äººä¼šè¯´è¿™æœ‰ä»€ä¹ˆç”¨å•Šï¼Ÿçµæ´»ï¼Œéšæ—¶å˜æ›´ï¼Œä¸å—çº¦æŸã€‚åŸºäºä¸Šè¿°ç‰¹ç‚¹ï¼ŒMongoDBçš„åº”ç”¨é¢ä¹Ÿä¼šäº§ç”Ÿä¸€äº›å˜åŒ–ã€‚ä»¥ä¸‹åˆ—å‡ºäº†ä¸€äº›å¯ä»¥ä½¿ç”¨MongoDBä½œä¸ºæ•°æ®å­˜å‚¨çš„åœºæ™¯ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å¿…é¡»ä½¿ç”¨MongoDBçš„åœºæ™¯ï¼š</p><ul><li>æ·˜å®ç”¨æˆ·æ•°æ® <ul><li>å­˜å‚¨ä½ç½®ï¼šæ•°æ®åº“</li><li>ç‰¹å¾ï¼šæ°¸ä¹…æ€§å­˜å‚¨ï¼Œä¿®æ”¹é¢‘åº¦æä½</li></ul></li><li>æ¸¸æˆè£…å¤‡æ•°æ®ã€æ¸¸æˆé“å…·æ•°æ® <ul><li>å­˜å‚¨ä½ç½®ï¼šæ•°æ®åº“ã€Mongodb</li><li>ç‰¹å¾ï¼šæ°¸ä¹…æ€§å­˜å‚¨ä¸ä¸´æ—¶å­˜å‚¨ç›¸ç»“åˆã€ä¿®æ”¹é¢‘åº¦è¾ƒé«˜</li></ul></li><li>ç›´æ’­æ•°æ®ã€æ‰“èµæ•°æ®ã€ç²‰ä¸æ•°æ® <ul><li>å­˜å‚¨ä½ç½®ï¼šæ•°æ®åº“ã€Mongodb</li><li>ç‰¹å¾ï¼šæ°¸ä¹…æ€§å­˜å‚¨ä¸ä¸´æ—¶å­˜å‚¨ç›¸ç»“åˆï¼Œä¿®æ”¹é¢‘åº¦æé«˜</li></ul></li><li>ç‰©è”ç½‘æ•°æ® <ul><li>å­˜å‚¨ä½ç½®ï¼šMongodb</li><li>ç‰¹å¾ï¼šä¸´æ—¶å­˜å‚¨ï¼Œä¿®æ”¹é¢‘åº¦é£é€Ÿ</li></ul></li></ul><p>â€‹ å¿«é€Ÿäº†è§£ä¸€ä¸‹MongoDBï¼Œä¸‹é¢ç›´æ¥å¼€å§‹æˆ‘ä»¬çš„å­¦ä¹ ï¼Œè€è§„çŸ©ï¼Œå…ˆå®‰è£…ï¼Œå†æ“ä½œï¼Œæœ€åè¯´æ•´åˆ</p><h5 id="å®‰è£…-1" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-1" aria-hidden="true">#</a> å®‰è£…</h5><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼šhttps://www.mongodb.com/try/download</p><p>â€‹ ä¸‹è½½çš„å®‰è£…åŒ…ä¹Ÿæœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯ä¸€é”®å®‰è£…çš„msiæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯è§£å‹ç¼©å°±èƒ½ä½¿ç”¨çš„zipæ–‡ä»¶ï¼Œå“ªç§å½¢å¼éƒ½è¡Œï¼Œæœ¬è¯¾ç¨‹é‡‡ç”¨è§£å‹ç¼©zipæ–‡ä»¶è¿›è¡Œå®‰è£…ã€‚</p><p>â€‹ è§£å‹ç¼©å®Œæ¯•åä¼šå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼Œå…¶ä¸­binç›®å½•åŒ…å«äº†æ‰€æœ‰mongodbçš„å¯æ‰§è¡Œå‘½ä»¤</p><p><img src="/assets/image-20220224111306933.e12c0a8b.png" alt="image-20220224111306933"></p><p>â€‹ mongodbåœ¨è¿è¡Œæ—¶éœ€è¦æŒ‡å®šä¸€ä¸ªæ•°æ®å­˜å‚¨çš„ç›®å½•ï¼Œæ‰€ä»¥åˆ›å»ºä¸€ä¸ªæ•°æ®å­˜å‚¨ç›®å½•ï¼Œé€šå¸¸æ”¾ç½®åœ¨å®‰è£…ç›®å½•ä¸­ï¼Œæ­¤å¤„åˆ›å»ºdataçš„ç›®å½•ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œå…·ä½“å¦‚ä¸‹</p><p><img src="/assets/image-20220224111053408.9a02eca2.png" alt="image-20220224111053408"></p><p>â€‹ å¦‚æœåœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¦‚ä¸‹è­¦å‘Šä¿¡æ¯ï¼Œå°±æ˜¯å‘Šè¯‰ä½ ï¼Œä½ å½“å‰çš„æ“ä½œç³»ç»Ÿç¼ºå°‘äº†ä¸€äº›ç³»ç»Ÿæ–‡ä»¶ï¼Œè¿™ä¸ªä¸ç”¨æ‹…å¿ƒã€‚</p><img src="/assets/image-20220224113956882.4107db9a.png" alt="image-20220224113956882" style="zoom:50%;"><p>â€‹ æ ¹æ®ä¸‹åˆ—æ–¹æ¡ˆå³å¯è§£å†³ï¼Œåœ¨æµè§ˆå™¨ä¸­æœç´¢æç¤ºç¼ºå°‘çš„åç§°å¯¹åº”çš„æ–‡ä»¶ï¼Œå¹¶ä¸‹è½½ï¼Œå°†ä¸‹è½½çš„æ–‡ä»¶æ‹·è´åˆ°windowså®‰è£…ç›®å½•çš„system32ç›®å½•ä¸‹ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œregsvr32å‘½ä»¤æ³¨å†Œæ­¤æ–‡ä»¶ã€‚æ ¹æ®ä¸‹è½½çš„æ–‡ä»¶åä¸åŒï¼Œæ‰§è¡Œå‘½ä»¤å‰æ›´æ”¹å¯¹åº”åç§°ã€‚</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>regsvr32 vcruntime140_1.dll
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong></p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>mongod --dbpath=..\data\db
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ å¯åŠ¨æœåŠ¡å™¨æ—¶éœ€è¦æŒ‡å®šæ•°æ®å­˜å‚¨ä½ç½®ï¼Œé€šè¿‡å‚æ•°--dbpathè¿›è¡Œè®¾ç½®ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œè®¾ç½®æ•°æ®å­˜å‚¨è·¯å¾„ã€‚é»˜è®¤æœåŠ¡ç«¯å£27017ã€‚</p><p><strong>å¯åŠ¨å®¢æˆ·ç«¯</strong></p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>mongo --host=127.0.0.1 --port=27017
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="åŸºæœ¬æ“ä½œ-1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œ-1" aria-hidden="true">#</a> åŸºæœ¬æ“ä½œ</h5><p>â€‹ MongoDBè™½ç„¶æ˜¯ä¸€æ¬¾æ•°æ®åº“ï¼Œä½†æ˜¯å®ƒçš„æ“ä½œå¹¶ä¸æ˜¯ä½¿ç”¨SQLè¯­å¥è¿›è¡Œçš„ï¼Œå› æ­¤æ“ä½œæ–¹å¼å„ä½å°ä¼™ä¼´å¯èƒ½æ¯”è¾ƒé™Œç”Ÿï¼Œå¥½åœ¨æœ‰ä¸€äº›ç±»ä¼¼äºNavicatçš„æ•°æ®åº“å®¢æˆ·ç«¯è½¯ä»¶ï¼Œèƒ½å¤Ÿä¾¿æ·çš„æ“ä½œMongoDBï¼Œå…ˆå®‰è£…ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå†æ¥æ“ä½œMongoDBã€‚</p><p>â€‹ åŒç±»å‹çš„è½¯ä»¶è¾ƒå¤šï¼Œæœ¬æ¬¡å®‰è£…çš„è½¯ä»¶æ—¶Robo3tï¼ŒRobot3tæ˜¯ä¸€æ¬¾ç»¿è‰²è½¯ä»¶ï¼Œæ— éœ€å®‰è£…ï¼Œè§£å‹ç¼©å³å¯ã€‚è§£å‹ç¼©å®Œæ¯•åè¿›å…¥å®‰è£…ç›®å½•åŒå‡»robot3t.exeå³å¯ä½¿ç”¨ã€‚</p><img src="/assets/image-20220224114911573.c45ad7ef.png" alt="image-20220224114911573" style="zoom:33%;"><p>â€‹ æ‰“å¼€è½¯ä»¶é¦–å…ˆè¦è¿æ¥MongoDBæœåŠ¡å™¨ï¼Œé€‰æ‹©ã€Fileã€‘èœå•ï¼Œé€‰æ‹©ã€Connect...ã€‘</p><p><img src="/assets/image-20220224115202422.567767e4.png" alt="image-20220224115202422"></p><p>â€‹ è¿›å…¥è¿æ¥ç®¡ç†ç•Œé¢åï¼Œé€‰æ‹©å·¦ä¸Šè§’çš„ã€Createã€‘é“¾æ¥ï¼Œåˆ›å»ºæ–°çš„è¿æ¥è®¾ç½®</p><img src="/assets/image-20220224115254200.4c91a27b.png" alt="image-20220224115254200" style="zoom:80%;"><p>â€‹ å¦‚æœè¾“å…¥è®¾ç½®å€¼å³å¯è¿æ¥ï¼ˆé»˜è®¤ä¸ä¿®æ”¹å³å¯è¿æ¥æœ¬æœº27017ç«¯å£ï¼‰</p><p><img src="/assets/image-20220224115300266.aa18654f.png" alt="image-20220224115300266"></p><p>â€‹ è¿æ¥æˆåŠŸååœ¨å‘½ä»¤è¾“å…¥åŒºåŸŸè¾“å…¥å‘½ä»¤å³å¯æ“ä½œMongoDBã€‚</p><p>â€‹ åˆ›å»ºæ•°æ®åº“ï¼šåœ¨å·¦ä¾§èœå•ä¸­ä½¿ç”¨å³é”®åˆ›å»ºï¼Œè¾“å…¥æ•°æ®åº“åç§°å³å¯</p><p>â€‹ åˆ›å»ºé›†åˆï¼šåœ¨Collectionsä¸Šä½¿ç”¨å³é”®åˆ›å»ºï¼Œè¾“å…¥é›†åˆåç§°å³å¯ï¼Œé›†åˆç­‰åŒäºæ•°æ®åº“ä¸­çš„è¡¨çš„ä½œç”¨</p><p>â€‹ æ–°å¢æ–‡æ¡£ï¼šï¼ˆæ–‡æ¡£æ˜¯ä¸€ç§ç±»ä¼¼jsonæ ¼å¼çš„æ•°æ®ï¼Œåˆå­¦è€…å¯ä»¥å…ˆæŠŠæ•°æ®ç†è§£ä¸ºå°±æ˜¯jsonæ•°æ®ï¼‰</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>db.é›†åˆåç§°.insert/save/insertOne(æ–‡æ¡£)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ åˆ é™¤æ–‡æ¡£ï¼š</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>db.é›†åˆåç§°.remove(æ¡ä»¶)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ ä¿®æ”¹æ–‡æ¡£ï¼š</p><div class="language-cmd ext-cmd line-numbers-mode"><pre class="language-cmd"><code>db.é›†åˆåç§°.update(æ¡ä»¶ï¼Œ{æ“ä½œç§ç±»:{æ–‡æ¡£}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ æŸ¥è¯¢æ–‡æ¡£ï¼š</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>åŸºç¡€æŸ¥è¯¢
æŸ¥è¯¢å…¨éƒ¨ï¼š		   db.é›†åˆ.find();
æŸ¥ç¬¬ä¸€æ¡ï¼š		   db.é›†åˆ.findOne()
æŸ¥è¯¢æŒ‡å®šæ•°é‡æ–‡æ¡£ï¼š	db.é›†åˆ.find().limit(10)					//æŸ¥10æ¡æ–‡æ¡£
è·³è¿‡æŒ‡å®šæ•°é‡æ–‡æ¡£ï¼š	db.é›†åˆ.find().skip(20)					//è·³è¿‡20æ¡æ–‡æ¡£
ç»Ÿè®¡ï¼š			  	db.é›†åˆ.count()
æ’åºï¼š				db.é›†åˆ.sort({age:1})						//æŒ‰ageå‡åºæ’åº
æŠ•å½±ï¼š				db.é›†åˆåç§°.find(æ¡ä»¶,{name:1,age:1})		 //ä»…ä¿ç•™nameä¸ageåŸŸ

æ¡ä»¶æŸ¥è¯¢
åŸºæœ¬æ ¼å¼ï¼š			db.é›†åˆ.find({æ¡ä»¶})
æ¨¡ç³ŠæŸ¥è¯¢ï¼š			db.é›†åˆ.find({åŸŸå:/æ­£åˆ™è¡¨è¾¾å¼/})		  //ç­‰åŒSQLä¸­çš„likeï¼Œæ¯”likeå¼ºå¤§ï¼Œå¯ä»¥æ‰§è¡Œæ­£åˆ™æ‰€æœ‰è§„åˆ™
æ¡ä»¶æ¯”è¾ƒè¿ç®—ï¼š		   db.é›†åˆ.find({åŸŸå:{$gt:å€¼}})				//ç­‰åŒSQLä¸­çš„æ•°å€¼æ¯”è¾ƒæ“ä½œï¼Œä¾‹å¦‚ï¼šname&gt;18
åŒ…å«æŸ¥è¯¢ï¼š			db.é›†åˆ.find({åŸŸå:{$in:[å€¼1ï¼Œå€¼2]}})		//ç­‰åŒäºSQLä¸­çš„in
æ¡ä»¶è¿æ¥æŸ¥è¯¢ï¼š		   db.é›†åˆ.find({$and:[{æ¡ä»¶1},{æ¡ä»¶2}]})	   //ç­‰åŒäºSQLä¸­çš„andã€or
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æœ‰å…³MongoDBçš„åŸºç¡€æ“ä½œå°±æ™®åŠåˆ°è¿™é‡Œï¼Œéœ€è¦å…¨é¢æŒæ¡MongoDBæŠ€æœ¯ï¼Œè¯·å‚çœ‹ç›¸å…³æ•™ç¨‹å­¦ä¹ ã€‚</p><h5 id="æ•´åˆ-1" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ-1" aria-hidden="true">#</a> æ•´åˆ</h5><p>â€‹ ä½¿ç”¨springbootæ•´åˆMongDBè¯¥å¦‚ä½•è¿›è¡Œå‘¢ï¼Ÿå…¶å®springbootä¸ºä»€ä¹ˆä½¿ç”¨çš„å¼€å‘è€…è¿™ä¹ˆå¤šï¼Œå°±æ˜¯å› ä¸ºä»–çš„å¥—è·¯å‡ ä¹å®Œå…¨ä¸€æ ·ã€‚å¯¼å…¥åæ ‡ï¼Œåšé…ç½®ï¼Œä½¿ç”¨APIæ¥å£æ“ä½œã€‚æ•´åˆRediså¦‚æ­¤ï¼Œæ•´åˆMongoDBåŒæ ·å¦‚æ­¤ã€‚</p><p>â€‹ ç¬¬ä¸€ï¼Œå…ˆå¯¼å…¥å¯¹åº”æŠ€æœ¯çš„æ•´åˆstarteråæ ‡</p><p>â€‹ ç¬¬äºŒï¼Œé…ç½®å¿…è¦ä¿¡æ¯</p><p>â€‹ ç¬¬ä¸‰ï¼Œä½¿ç”¨æä¾›çš„APIæ“ä½œå³å¯</p><p>â€‹ ä¸‹é¢å°±å¼€å§‹springbootæ•´åˆMongoDBï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆMongoDBçš„starteråæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-mongodb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°åæ ‡ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºæ¨¡å—çš„æ—¶å€™é€šè¿‡å‹¾é€‰çš„å½¢å¼è¿›è¡Œé€‰æ‹©ï¼ŒåŒæ ·å½’å±NoSQLåˆ†ç±»ä¸­</p><img src="/assets/image-20220224120721626.c46be5f4.png" alt="image-20220224120721626" style="zoom:67%;"><p><strong>æ­¥éª¤â‘¡</strong>ï¼šè¿›è¡ŒåŸºç¡€é…ç½®</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">data</span><span class="token punctuation">:</span>
    <span class="token key atrule">mongodb</span><span class="token punctuation">:</span>
      <span class="token key atrule">uri</span><span class="token punctuation">:</span> mongodb<span class="token punctuation">:</span>//localhost/itheima
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ“ä½œMongoDBéœ€è¦çš„é…ç½®ä¸æ“ä½œredisä¸€æ ·ï¼Œæœ€åŸºæœ¬çš„ä¿¡æ¯éƒ½æ˜¯æ“ä½œå“ªä¸€å°æœåŠ¡å™¨ï¼ŒåŒºåˆ«å°±æ˜¯è¿æ¥çš„æœåŠ¡å™¨IPåœ°å€å’Œç«¯å£ä¸åŒï¼Œä¹¦å†™æ ¼å¼ä¸åŒè€Œå·²ã€‚</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨springbootæ•´åˆMongoDBçš„ä¸“ç”¨å®¢æˆ·ç«¯æ¥å£MongoTemplateæ¥è¿›è¡Œæ“ä½œ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot17MongodbApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MongoTemplate</span> mongoTemplate<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        book<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;springboot2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        book<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;springboot2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        book<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;springboot2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mongoTemplate<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> mongoTemplate<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ•´åˆå·¥ä½œåˆ°è¿™é‡Œå°±åšå®Œäº†ï¼Œæ„Ÿè§‰æ—¢ç†Ÿæ‚‰ä¹Ÿé™Œç”Ÿã€‚ç†Ÿæ‚‰çš„æ˜¯è¿™ä¸ªå¥—è·¯ï¼Œä¸‰æ¿æ–§ï¼Œå°±è¿™ä¸‰æ‹›ï¼Œå¯¼åæ ‡åšé…ç½®ç”¨APIæ“ä½œï¼Œé™Œç”Ÿçš„æ˜¯è¿™ä¸ªæŠ€æœ¯ï¼Œé‡Œé¢å…·ä½“çš„æ“ä½œAPIå¯èƒ½ä¼šä¸ç†Ÿæ‚‰ï¼Œæœ‰å…³springbootæ•´åˆMongoDBæˆ‘ä»¬å°±è®²åˆ°è¿™é‡Œã€‚æœ‰å…´è¶£å¯ä»¥ç»§ç»­å­¦ä¹ MongoDBçš„æ“ä½œï¼Œç„¶åå†æ¥è¿™é‡Œé€šè¿‡ç¼–ç¨‹çš„å½¢å¼æ“ä½œMongoDBã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆMongoDBæ­¥éª¤ <ol><li>å¯¼å…¥springbootæ•´åˆMongoDBçš„starteråæ ‡</li><li>è¿›è¡ŒåŸºç¡€é…ç½®</li><li>ä½¿ç”¨springbootæ•´åˆMongoDBçš„ä¸“ç”¨å®¢æˆ·ç«¯æ¥å£MongoTemplateæ“ä½œ</li></ol></li></ol><h4 id="springbootæ•´åˆes" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆes" aria-hidden="true">#</a> SpringBootæ•´åˆES</h4><p>â€‹ NoSQLè§£å†³æ–¹æ¡ˆå·²ç»è®²å®Œäº†ä¸¤ç§æŠ€æœ¯çš„æ•´åˆäº†ï¼ŒRediså¯ä»¥ä½¿ç”¨å†…å­˜åŠ è½½æ•°æ®å¹¶å®ç°æ•°æ®å¿«é€Ÿè®¿é—®ï¼ŒMongoDBå¯ä»¥åœ¨å†…å­˜ä¸­å­˜å‚¨ç±»ä¼¼å¯¹è±¡çš„æ•°æ®å¹¶å®ç°æ•°æ®çš„å¿«é€Ÿè®¿é—®ï¼Œåœ¨ä¼ä¸šçº§å¼€å‘ä¸­å¯¹äºé€Ÿåº¦çš„è¿½æ±‚æ˜¯æ°¸æ— æ­¢å¢ƒçš„ã€‚ä¸‹é¢è¦è®²çš„å†…å®¹ä¹Ÿæ˜¯ä¸€æ¬¾NoSQLè§£å†³æ–¹æ¡ˆï¼Œåªä¸è¿‡ä»–çš„ä½œç”¨ä¸æ˜¯ä¸ºäº†ç›´æ¥åŠ é€Ÿæ•°æ®çš„è¯»å†™ï¼Œè€Œæ˜¯åŠ é€Ÿæ•°æ®çš„æŸ¥è¯¢çš„ï¼Œå«åšESæŠ€æœ¯ã€‚</p><p>â€‹ ESï¼ˆElasticsearchï¼‰æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å…¨æ–‡æœç´¢å¼•æ“ï¼Œé‡ç‚¹æ˜¯å…¨æ–‡æœç´¢ã€‚</p><p>â€‹ é‚£ä»€ä¹ˆæ˜¯å…¨æ–‡æœç´¢å‘¢ï¼Ÿæ¯”å¦‚ç”¨æˆ·è¦ä¹°ä¸€æœ¬ä¹¦ï¼Œä»¥Javaä¸ºå…³é”®å­—è¿›è¡Œæœç´¢ï¼Œä¸ç®¡æ˜¯ä¹¦åä¸­è¿˜æ˜¯ä¹¦çš„ä»‹ç»ä¸­ï¼Œç”šè‡³æ˜¯ä¹¦çš„ä½œè€…åå­—ï¼Œåªè¦åŒ…å«javaå°±ä½œä¸ºæŸ¥è¯¢ç»“æœè¿”å›ç»™ç”¨æˆ·æŸ¥çœ‹ï¼Œä¸Šè¿°è¿‡ç¨‹å°±ä½¿ç”¨äº†å…¨æ–‡æœç´¢æŠ€æœ¯ã€‚æœç´¢çš„æ¡ä»¶ä¸å†æ˜¯ä»…ç”¨äºå¯¹æŸä¸€ä¸ªå­—æ®µè¿›è¡Œæ¯”å¯¹ï¼Œè€Œæ˜¯åœ¨ä¸€æ¡æ•°æ®ä¸­ä½¿ç”¨æœç´¢æ¡ä»¶å»æ¯”å¯¹æ›´å¤šçš„å­—æ®µï¼Œåªè¦èƒ½åŒ¹é…ä¸Šå°±åˆ—å…¥æŸ¥è¯¢ç»“æœï¼Œè¿™å°±æ˜¯å…¨æ–‡æœç´¢çš„ç›®çš„ã€‚è€ŒESæŠ€æœ¯å°±æ˜¯ä¸€ç§å¯ä»¥å®ç°ä¸Šè¿°æ•ˆæœçš„æŠ€æœ¯ã€‚</p><p>â€‹ è¦å®ç°å…¨æ–‡æœç´¢çš„æ•ˆæœï¼Œä¸å¯èƒ½ä½¿ç”¨æ•°æ®åº“ä¸­likeæ“ä½œå»è¿›è¡Œæ¯”å¯¹ï¼Œè¿™ç§æ•ˆç‡å¤ªä½äº†ã€‚ESè®¾è®¡äº†ä¸€ç§å…¨æ–°çš„æ€æƒ³ï¼Œæ¥å®ç°å…¨æ–‡æœç´¢ã€‚å…·ä½“æ“ä½œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>å°†è¢«æŸ¥è¯¢çš„å­—æ®µçš„æ•°æ®å…¨éƒ¨æ–‡æœ¬ä¿¡æ¯è¿›è¡ŒæŸ¥åˆ†ï¼Œåˆ†æˆè‹¥å¹²ä¸ªè¯</p><ul><li>ä¾‹å¦‚â€œä¸­åäººæ°‘å…±å’Œå›½â€å°±ä¼šè¢«æ‹†åˆ†æˆä¸‰ä¸ªè¯ï¼Œåˆ†åˆ«æ˜¯â€œä¸­åâ€ã€â€œäººæ°‘â€ã€â€œå…±å’Œå›½â€ï¼Œæ­¤è¿‡ç¨‹æœ‰ä¸“ä¸šæœ¯è¯­å«åšåˆ†è¯ã€‚åˆ†è¯çš„ç­–ç•¥ä¸åŒï¼Œåˆ†å‡ºçš„æ•ˆæœä¸ä¸€æ ·ï¼Œä¸åŒçš„åˆ†è¯ç­–ç•¥ç§°ä¸ºåˆ†è¯å™¨ã€‚</li></ul></li><li><p>å°†åˆ†è¯å¾—åˆ°çš„ç»“æœå­˜å‚¨èµ·æ¥ï¼Œå¯¹åº”æ¯æ¡æ•°æ®çš„id</p><ul><li><p>ä¾‹å¦‚idä¸º1çš„æ•°æ®ä¸­åç§°è¿™ä¸€é¡¹çš„å€¼æ˜¯â€œä¸­åäººæ°‘å…±å’Œå›½â€ï¼Œé‚£ä¹ˆåˆ†è¯ç»“æŸåï¼Œå°±ä¼šå‡ºç°â€œä¸­åâ€å¯¹åº”idä¸º1ï¼Œâ€œäººæ°‘â€å¯¹åº”idä¸º1ï¼Œâ€œå…±å’Œå›½â€å¯¹åº”idä¸º1</p></li><li><p>ä¾‹å¦‚idä¸º2çš„æ•°æ®ä¸­åç§°è¿™ä¸€é¡¹çš„å€¼æ˜¯â€œäººæ°‘ä»£è¡¨å¤§ä¼šâ€œï¼Œé‚£ä¹ˆåˆ†è¯ç»“æŸåï¼Œå°±ä¼šå‡ºç°â€œäººæ°‘â€å¯¹åº”idä¸º2ï¼Œâ€œä»£è¡¨â€å¯¹åº”idä¸º2ï¼Œâ€œå¤§ä¼šâ€å¯¹åº”idä¸º2</p></li><li><p>æ­¤æ—¶å°±ä¼šå‡ºç°å¦‚ä¸‹å¯¹åº”ç»“æœï¼ŒæŒ‰ç…§ä¸Šè¿°å½¢å¼å¯ä»¥å¯¹æ‰€æœ‰æ–‡æ¡£è¿›è¡Œåˆ†è¯ã€‚éœ€è¦æ³¨æ„åˆ†è¯çš„è¿‡ç¨‹ä¸æ˜¯ä»…å¯¹ä¸€ä¸ªå­—æ®µè¿›è¡Œï¼Œè€Œæ˜¯å¯¹æ¯ä¸€ä¸ªå‚ä¸æŸ¥è¯¢çš„å­—æ®µéƒ½æ‰§è¡Œï¼Œæœ€ç»ˆç»“æœæ±‡æ€»åˆ°ä¸€ä¸ªè¡¨æ ¼ä¸­</p><table><thead><tr><th>åˆ†è¯ç»“æœå…³é”®å­—</th><th>å¯¹åº”id</th></tr></thead><tbody><tr><td>ä¸­å</td><td>1</td></tr><tr><td>äººæ°‘</td><td>1,2</td></tr><tr><td>å…±å’Œå›½</td><td>1</td></tr><tr><td>ä»£è¡¨</td><td>2</td></tr><tr><td>å¤§ä¼š</td><td>2</td></tr></tbody></table></li></ul></li><li><p>å½“è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¦‚æœè¾“å…¥â€œäººæ°‘â€ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸Šè¿°è¡¨æ ¼æ•°æ®è¿›è¡Œæ¯”å¯¹ï¼Œå¾—åˆ°idå€¼1,2ï¼Œç„¶åæ ¹æ®idå€¼å°±å¯ä»¥å¾—åˆ°æŸ¥è¯¢çš„ç»“æœæ•°æ®äº†ã€‚</p></li></ol><p>â€‹ ä¸Šè¿°è¿‡ç¨‹ä¸­åˆ†è¯ç»“æœå…³é”®å­—å†…å®¹æ¯ä¸€ä¸ªéƒ½ä¸ç›¸åŒï¼Œä½œç”¨æœ‰ç‚¹ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„ç´¢å¼•ï¼Œæ˜¯ç”¨æ¥åŠ é€Ÿæ•°æ®æŸ¥è¯¢çš„ã€‚ä½†æ˜¯æ•°æ®åº“ä¸­çš„ç´¢å¼•æ˜¯å¯¹æŸä¸€ä¸ªå­—æ®µè¿›è¡Œæ·»åŠ ç´¢å¼•ï¼Œè€Œè¿™é‡Œçš„åˆ†è¯ç»“æœå…³é”®å­—ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å­—æ®µå€¼ï¼Œåªæ˜¯ä¸€ä¸ªå­—æ®µä¸­çš„å…¶ä¸­çš„ä¸€éƒ¨åˆ†å†…å®¹ã€‚å¹¶ä¸”ç´¢å¼•ä½¿ç”¨æ—¶æ˜¯æ ¹æ®ç´¢å¼•å†…å®¹æŸ¥æ‰¾æ•´æ¡æ•°æ®ï¼Œå…¨æ–‡æœç´¢ä¸­çš„åˆ†è¯ç»“æœå…³é”®å­—æŸ¥è¯¢åå¾—åˆ°çš„å¹¶ä¸æ˜¯æ•´æ¡çš„æ•°æ®ï¼Œè€Œæ˜¯æ•°æ®çš„idï¼Œè¦æƒ³è·å¾—å…·ä½“æ•°æ®è¿˜è¦å†æ¬¡æŸ¥è¯¢ï¼Œå› æ­¤è¿™é‡Œä¸ºè¿™ç§åˆ†è¯ç»“æœå…³é”®å­—èµ·äº†ä¸€ä¸ªå…¨æ–°çš„åç§°ï¼Œå«åš<strong>å€’æ’ç´¢å¼•</strong>ã€‚</p><p>â€‹ é€šè¿‡ä¸Šè¿°å†…å®¹çš„å­¦ä¹ ï¼Œå‘ç°ä½¿ç”¨ESå…¶å®å‡†å¤‡å·¥ä½œè¿˜æ˜¯æŒºå¤šçš„ï¼Œå¿…é¡»å…ˆå»ºç«‹æ–‡æ¡£çš„å€’æ’ç´¢å¼•ï¼Œç„¶åæ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚å¿«é€Ÿäº†è§£ä¸€ä¸‹ESçš„å·¥ä½œåŸç†ï¼Œä¸‹é¢ç›´æ¥å¼€å§‹æˆ‘ä»¬çš„å­¦ä¹ ï¼Œè€è§„çŸ©ï¼Œå…ˆå®‰è£…ï¼Œå†æ“ä½œï¼Œæœ€åè¯´æ•´åˆã€‚</p><h5 id="å®‰è£…-2" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-2" aria-hidden="true">#</a> å®‰è£…</h5><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">https://<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">www.elastic.co/cn/downloads/elasticsearch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>â€‹ ä¸‹è½½çš„å®‰è£…åŒ…æ˜¯è§£å‹ç¼©å°±èƒ½ä½¿ç”¨çš„zipæ–‡ä»¶ï¼Œè§£å‹ç¼©å®Œæ¯•åä¼šå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶</p><p><img src="/assets/image-20220225132756400.ed4eafc7.png" alt="image-20220225132756400"></p><ul><li>binç›®å½•ï¼šåŒ…å«æ‰€æœ‰çš„å¯æ‰§è¡Œå‘½ä»¤</li><li>configç›®å½•ï¼šåŒ…å«ESæœåŠ¡å™¨ä½¿ç”¨çš„é…ç½®æ–‡ä»¶</li><li>jdkç›®å½•ï¼šæ­¤ç›®å½•ä¸­åŒ…å«äº†ä¸€ä¸ªå®Œæ•´çš„jdkå·¥å…·åŒ…ï¼Œç‰ˆæœ¬17ï¼Œå½“ESå‡çº§æ—¶ï¼Œä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„jdkç¡®ä¿ä¸ä¼šå‡ºç°ç‰ˆæœ¬æ”¯æŒæ€§ä¸è¶³çš„é—®é¢˜</li><li>libç›®å½•ï¼šåŒ…å«ESè¿è¡Œçš„ä¾èµ–jaræ–‡ä»¶</li><li>logsç›®å½•ï¼šåŒ…å«ESè¿è¡Œåäº§ç”Ÿçš„æ‰€æœ‰æ—¥å¿—æ–‡ä»¶</li><li>modulesç›®å½•ï¼šåŒ…å«ESè½¯ä»¶ä¸­æ‰€æœ‰çš„åŠŸèƒ½æ¨¡å—ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸€ä¸ªçš„jaråŒ…ã€‚å’Œjarç›®å½•ä¸åŒï¼Œjarç›®å½•æ˜¯ESè¿è¡ŒæœŸé—´ä¾èµ–çš„jaråŒ…ï¼Œmodulesæ˜¯ESè½¯ä»¶è‡ªå·±çš„åŠŸèƒ½jaråŒ…</li><li>pluginsç›®å½•ï¼šåŒ…å«ESè½¯ä»¶å®‰è£…çš„æ’ä»¶ï¼Œé»˜è®¤ä¸ºç©º</li></ul><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong></p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>elasticsearch.bat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ åŒå‡»elasticsearch.batæ–‡ä»¶å³å¯å¯åŠ¨ESæœåŠ¡å™¨ï¼Œé»˜è®¤æœåŠ¡ç«¯å£9200ã€‚é€šè¿‡æµè§ˆå™¨è®¿é—®http://localhost:9200çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯è§†ä¸ºESæœåŠ¡å™¨æ­£å¸¸å¯åŠ¨</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>{
  &quot;name&quot; : &quot;CZBK-**********&quot;,
  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,
  &quot;cluster_uuid&quot; : &quot;j137DSswTPG8U4Yb-0T1Mg&quot;,
  &quot;version&quot; : {
    &quot;number&quot; : &quot;7.16.2&quot;,
    &quot;build_flavor&quot; : &quot;default&quot;,
    &quot;build_type&quot; : &quot;zip&quot;,
    &quot;build_hash&quot; : &quot;2b937c44140b6559905130a8650c64dbd0879cfb&quot;,
    &quot;build_date&quot; : &quot;2021-12-18T19:42:46.604893745Z&quot;,
    &quot;build_snapshot&quot; : false,
    &quot;lucene_version&quot; : &quot;8.10.1&quot;,
    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,
    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;
  },
  &quot;tagline&quot; : &quot;You Know, for Search&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="åŸºæœ¬æ“ä½œ-2" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œ-2" aria-hidden="true">#</a> åŸºæœ¬æ“ä½œ</h5><p>â€‹ ESä¸­ä¿å­˜æœ‰æˆ‘ä»¬è¦æŸ¥è¯¢çš„æ•°æ®ï¼Œåªä¸è¿‡æ ¼å¼å’Œæ•°æ®åº“å­˜å‚¨æ•°æ®æ ¼å¼ä¸åŒè€Œå·²ã€‚åœ¨ESä¸­æˆ‘ä»¬è¦å…ˆåˆ›å»ºå€’æ’ç´¢å¼•ï¼Œè¿™ä¸ªç´¢å¼•çš„åŠŸèƒ½åˆç‚¹ç±»ä¼¼äºæ•°æ®åº“çš„è¡¨ï¼Œç„¶åå°†æ•°æ®æ·»åŠ åˆ°å€’æ’ç´¢å¼•ä¸­ï¼Œæ·»åŠ çš„æ•°æ®ç§°ä¸ºæ–‡æ¡£ã€‚æ‰€ä»¥è¦è¿›è¡ŒESçš„æ“ä½œè¦å…ˆåˆ›å»ºç´¢å¼•ï¼Œå†æ·»åŠ æ–‡æ¡£ï¼Œè¿™æ ·æ‰èƒ½è¿›è¡Œåç»­çš„æŸ¥è¯¢æ“ä½œã€‚</p><p>â€‹ è¦æ“ä½œESå¯ä»¥é€šè¿‡Resté£æ ¼çš„è¯·æ±‚æ¥è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´å‘é€ä¸€ä¸ªè¯·æ±‚å°±å¯ä»¥æ‰§è¡Œä¸€ä¸ªæ“ä½œã€‚æ¯”å¦‚æ–°å»ºç´¢å¼•ï¼Œåˆ é™¤ç´¢å¼•è¿™äº›æ“ä½œéƒ½å¯ä»¥ä½¿ç”¨å‘é€è¯·æ±‚çš„å½¢å¼æ¥è¿›è¡Œã€‚</p><ul><li><p>åˆ›å»ºç´¢å¼•ï¼Œbooksæ˜¯ç´¢å¼•åç§°ï¼Œä¸‹åŒ</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>PUTè¯·æ±‚		http://localhost:9200/books
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‘é€è¯·æ±‚åï¼Œçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯å³ç´¢å¼•åˆ›å»ºæˆåŠŸ</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;acknowledged&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;shards_acknowledged&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;books&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡å¤åˆ›å»ºå·²ç»å­˜åœ¨çš„ç´¢å¼•ä¼šå‡ºç°é”™è¯¯ä¿¡æ¯ï¼Œreasonå±æ€§ä¸­æè¿°é”™è¯¯åŸå› </p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;root_cause&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;resource_already_exists_exception&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index [books/VgC_XMVAQmedaiBNSgO2-w] already exists&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;index_uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VgC_XMVAQmedaiBNSgO2-w&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;books&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;resource_already_exists_exception&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index [books/VgC_XMVAQmedaiBNSgO2-w] already exists&quot;</span><span class="token punctuation">,</span>	# booksç´¢å¼•å·²ç»å­˜åœ¨
        <span class="token property">&quot;index_uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VgC_XMVAQmedaiBNSgO2-w&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">400</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æŸ¥è¯¢ç´¢å¼•</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>GETè¯·æ±‚		http://localhost:9200/books
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥è¯¢ç´¢å¼•å¾—åˆ°ç´¢å¼•ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ä¸‹</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;book&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;aliases&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;routing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;allocation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token property">&quot;_tier_preference&quot;</span><span class="token operator">:</span> <span class="token string">&quot;data_content&quot;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;provided_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;creation_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1645768584849&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VgC_XMVAQmedaiBNSgO2-w&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;created&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7160299&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæŸ¥è¯¢äº†ä¸å­˜åœ¨çš„ç´¢å¼•ï¼Œä¼šè¿”å›é”™è¯¯ä¿¡æ¯ï¼Œä¾‹å¦‚æŸ¥è¯¢åç§°ä¸ºbookçš„ç´¢å¼•åä¿¡æ¯å¦‚ä¸‹</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;root_cause&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index_not_found_exception&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;no such index [book]&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;resource.type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index_or_alias&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;resource.id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;index_uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_na_&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index_not_found_exception&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;no such index [book]&quot;</span><span class="token punctuation">,</span>		# æ²¡æœ‰bookç´¢å¼•
        <span class="token property">&quot;resource.type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index_or_alias&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;resource.id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index_uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_na_&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">404</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åˆ é™¤ç´¢å¼•</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>DELETEè¯·æ±‚	http://localhost:9200/books
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ é™¤æ‰€æœ‰åï¼Œç»™å‡ºåˆ é™¤ç»“æœ</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;acknowledged&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœé‡å¤åˆ é™¤ï¼Œä¼šç»™å‡ºé”™è¯¯ä¿¡æ¯ï¼ŒåŒæ ·åœ¨reasonå±æ€§ä¸­æè¿°å…·ä½“çš„é”™è¯¯åŸå› </p><div class="language-JSON ext-JSON line-numbers-mode"><pre class="language-JSON"><code>{
    &quot;error&quot;: {
        &quot;root_cause&quot;: [
            {
                &quot;type&quot;: &quot;index_not_found_exception&quot;,
                &quot;reason&quot;: &quot;no such index [books]&quot;,
                &quot;resource.type&quot;: &quot;index_or_alias&quot;,
                &quot;resource.id&quot;: &quot;book&quot;,
                &quot;index_uuid&quot;: &quot;_na_&quot;,
                &quot;index&quot;: &quot;book&quot;
            }
        ],
        &quot;type&quot;: &quot;index_not_found_exception&quot;,
        &quot;reason&quot;: &quot;no such index [books]&quot;,		# æ²¡æœ‰booksç´¢å¼•
        &quot;resource.type&quot;: &quot;index_or_alias&quot;,
        &quot;resource.id&quot;: &quot;book&quot;,
        &quot;index_uuid&quot;: &quot;_na_&quot;,
        &quot;index&quot;: &quot;book&quot;
    },
    &quot;status&quot;: 404
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åˆ›å»ºç´¢å¼•å¹¶æŒ‡å®šåˆ†è¯å™¨</p><p>â€‹ å‰é¢åˆ›å»ºçš„ç´¢å¼•æ˜¯æœªæŒ‡å®šåˆ†è¯å™¨çš„ï¼Œå¯ä»¥åœ¨åˆ›å»ºç´¢å¼•æ—¶æ·»åŠ è¯·æ±‚å‚æ•°ï¼Œè®¾ç½®åˆ†è¯å™¨ã€‚ç›®å‰å›½å†…è¾ƒä¸ºæµè¡Œçš„åˆ†è¯å™¨æ˜¯IKåˆ†è¯å™¨ï¼Œä½¿ç”¨å‰å…ˆåœ¨ä¸‹å¯¹åº”çš„åˆ†è¯å™¨ï¼Œç„¶åä½¿ç”¨ã€‚IKåˆ†è¯å™¨ä¸‹è½½åœ°å€ï¼šhttps://github.com/medcl/elasticsearch-analysis-ik/releases</p><p>â€‹ åˆ†è¯å™¨ä¸‹è½½åè§£å‹åˆ°ESå®‰è£…ç›®å½•çš„pluginsç›®å½•ä¸­å³å¯ï¼Œå®‰è£…åˆ†è¯å™¨åéœ€è¦é‡æ–°å¯åŠ¨ESæœåŠ¡å™¨ã€‚ä½¿ç”¨IKåˆ†è¯å™¨åˆ›å»ºç´¢å¼•æ ¼å¼ï¼š</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUTè¯·æ±‚		http<span class="token operator">:</span><span class="token comment">//localhost:9200/books</span>

è¯·æ±‚å‚æ•°å¦‚ä¸‹ï¼ˆæ³¨æ„æ˜¯jsonæ ¼å¼çš„å‚æ•°ï¼‰
<span class="token punctuation">{</span>
    <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>							#å®šä¹‰mappingså±æ€§ï¼Œæ›¿æ¢åˆ›å»ºç´¢å¼•æ—¶å¯¹åº”çš„mappingså±æ€§		
        <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>						#å®šä¹‰ç´¢å¼•ä¸­åŒ…å«çš„å±æ€§è®¾ç½®
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>							#è®¾ç½®ç´¢å¼•ä¸­åŒ…å«idå±æ€§
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span>			#å½“å‰å±æ€§å¯ä»¥è¢«ç›´æ¥æœç´¢
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>						#è®¾ç½®ç´¢å¼•ä¸­åŒ…å«nameå±æ€§
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>              #å½“å‰å±æ€§æ˜¯æ–‡æœ¬ä¿¡æ¯ï¼Œå‚ä¸åˆ†è¯  
                <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">,</span>   #ä½¿ç”¨IKåˆ†è¯å™¨è¿›è¡Œåˆ†è¯             
                <span class="token property">&quot;copy_to&quot;</span><span class="token operator">:</span><span class="token string">&quot;all&quot;</span>				#åˆ†è¯ç»“æœæ‹·è´åˆ°allå±æ€§ä¸­
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>	                
                <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">,</span>                
                <span class="token property">&quot;copy_to&quot;</span><span class="token operator">:</span><span class="token string">&quot;all&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;all&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>							#å®šä¹‰å±æ€§ï¼Œç”¨æ¥æè¿°å¤šä¸ªå­—æ®µçš„åˆ†è¯ç»“æœé›†åˆï¼Œå½“å‰å±æ€§å¯ä»¥å‚ä¸æŸ¥è¯¢
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>	                
                <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ åˆ›å»ºå®Œæ¯•åè¿”å›ç»“æœå’Œä¸ä½¿ç”¨åˆ†è¯å™¨åˆ›å»ºç´¢å¼•çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯è§‚å¯Ÿåˆ°æ·»åŠ çš„è¯·æ±‚å‚æ•°mappingså·²ç»è¿›å…¥åˆ°äº†ç´¢å¼•å±æ€§ä¸­</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;books&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;aliases&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>						#mappingså±æ€§å·²ç»è¢«æ›¿æ¢
            <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;all&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;copy_to&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token string">&quot;all&quot;</span>
                    <span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;copy_to&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token string">&quot;all&quot;</span>
                    <span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;routing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;allocation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token property">&quot;_tier_preference&quot;</span><span class="token operator">:</span> <span class="token string">&quot;data_content&quot;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;provided_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;creation_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1645769809521&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DohYKvr_SZO4KRGmbZYmTQ&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;created&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7160299&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>ç›®å‰æˆ‘ä»¬å·²ç»æœ‰äº†ç´¢å¼•äº†ï¼Œä½†æ˜¯ç´¢å¼•ä¸­è¿˜æ²¡æœ‰æ•°æ®ï¼Œæ‰€ä»¥è¦å…ˆæ·»åŠ æ•°æ®ï¼ŒESä¸­ç§°æ•°æ®ä¸ºæ–‡æ¡£ï¼Œä¸‹é¢è¿›è¡Œæ–‡æ¡£æ“ä½œã€‚</p><ul><li><p>æ·»åŠ æ–‡æ¡£ï¼Œæœ‰ä¸‰ç§æ–¹å¼</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POSTè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_doc		#ä½¿ç”¨ç³»ç»Ÿç”Ÿæˆid</span>
POSTè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_create/1	#ä½¿ç”¨æŒ‡å®šid</span>
POSTè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_doc/1		#ä½¿ç”¨æŒ‡å®šidï¼Œä¸å­˜åœ¨åˆ›å»ºï¼Œå­˜åœ¨æ›´æ–°ï¼ˆç‰ˆæœ¬é€’å¢ï¼‰</span>

æ–‡æ¡£é€šè¿‡è¯·æ±‚å‚æ•°ä¼ é€’ï¼Œæ•°æ®æ ¼å¼json
<span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;springboot&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;springboot&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;springboot&quot;</span>
<span class="token punctuation">}</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æŸ¥è¯¢æ–‡æ¡£</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GETè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_doc/1		 #æŸ¥è¯¢å•ä¸ªæ–‡æ¡£ 		</span>
GETè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_search		 #æŸ¥è¯¢å…¨éƒ¨æ–‡æ¡£</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ¡ä»¶æŸ¥è¯¢</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GETè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_search?q=name:springboot	# q=æŸ¥è¯¢å±æ€§å:æŸ¥è¯¢å±æ€§å€¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>åˆ é™¤æ–‡æ¡£</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>DELETEè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_doc/1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>ä¿®æ”¹æ–‡æ¡£ï¼ˆå…¨é‡æ›´æ–°ï¼‰</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUTè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_doc/1</span>

æ–‡æ¡£é€šè¿‡è¯·æ±‚å‚æ•°ä¼ é€’ï¼Œæ•°æ®æ ¼å¼json
<span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;springboot&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;springboot&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;springboot&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ä¿®æ”¹æ–‡æ¡£ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POSTè¯·æ±‚	http<span class="token operator">:</span><span class="token comment">//localhost:9200/books/_update/1</span>

æ–‡æ¡£é€šè¿‡è¯·æ±‚å‚æ•°ä¼ é€’ï¼Œæ•°æ®æ ¼å¼json
<span class="token punctuation">{</span>			
    <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>						#éƒ¨åˆ†æ›´æ–°å¹¶ä¸æ˜¯å¯¹åŸå§‹æ–‡æ¡£è¿›è¡Œæ›´æ–°ï¼Œè€Œæ˜¯å¯¹åŸå§‹æ–‡æ¡£å¯¹è±¡ä¸­çš„docå±æ€§ä¸­çš„æŒ‡å®šå±æ€§æ›´æ–°
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;springboot&quot;</span>		#ä»…æ›´æ–°æä¾›çš„å±æ€§å€¼ï¼Œæœªæä¾›çš„å±æ€§å€¼ä¸å‚ä¸æ›´æ–°æ“ä½œ
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h5 id="æ•´åˆ-2" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ-2" aria-hidden="true">#</a> æ•´åˆ</h5><p>â€‹ ä½¿ç”¨springbootæ•´åˆESè¯¥å¦‚ä½•è¿›è¡Œå‘¢ï¼Ÿè€è§„çŸ©ï¼Œå¯¼å…¥åæ ‡ï¼Œåšé…ç½®ï¼Œä½¿ç”¨APIæ¥å£æ“ä½œã€‚æ•´åˆRediså¦‚æ­¤ï¼Œæ•´åˆMongoDBå¦‚æ­¤ï¼Œæ•´åˆESä¾ç„¶å¦‚æ­¤ã€‚å¤ªæ²¡æœ‰æ–°æ„äº†ï¼Œå…¶å®ä¸æ˜¯æ²¡æœ‰æ–°æ„ï¼Œè¿™å°±æ˜¯springbootçš„å¼ºå¤§ä¹‹å¤„ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½åšæˆç›¸åŒè§„åˆ™ï¼Œå¯¹å¼€å‘è€…æ¥è¯´éå¸¸å‹å¥½ã€‚</p><p>â€‹ ä¸‹é¢å°±å¼€å§‹springbootæ•´åˆESï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆESçš„starteråæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šè¿›è¡ŒåŸºç¡€é…ç½®</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span>
    <span class="token key atrule">rest</span><span class="token punctuation">:</span>
      <span class="token key atrule">uris</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9200</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ é…ç½®ESæœåŠ¡å™¨åœ°å€ï¼Œç«¯å£9200</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨springbootæ•´åˆESçš„ä¸“ç”¨å®¢æˆ·ç«¯æ¥å£ElasticsearchRestTemplateæ¥è¿›è¡Œæ“ä½œ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot18EsApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ElasticsearchRestTemplate</span> template<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°æ“ä½œå½¢å¼æ˜¯ESæ—©æœŸçš„æ“ä½œæ–¹å¼ï¼Œä½¿ç”¨çš„å®¢æˆ·ç«¯è¢«ç§°ä¸ºLow Level Clientï¼Œè¿™ç§å®¢æˆ·ç«¯æ“ä½œæ–¹å¼æ€§èƒ½æ–¹é¢ç•¥æ˜¾ä¸è¶³ï¼Œäºæ˜¯ESå¼€å‘äº†å…¨æ–°çš„å®¢æˆ·ç«¯æ“ä½œæ–¹å¼ï¼Œç§°ä¸ºHigh Level Clientã€‚é«˜çº§åˆ«å®¢æˆ·ç«¯ä¸ESç‰ˆæœ¬åŒæ­¥æ›´æ–°ï¼Œä½†æ˜¯springbootæœ€åˆæ•´åˆESçš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ä½çº§åˆ«å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ä¼ä¸šå¼€å‘éœ€è¦æ›´æ¢æˆé«˜çº§åˆ«çš„å®¢æˆ·ç«¯æ¨¡å¼ã€‚</p><p>â€‹ ä¸‹é¢ä½¿ç”¨é«˜çº§åˆ«å®¢æˆ·ç«¯æ–¹å¼è¿›è¡Œspringbootæ•´åˆESï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆESé«˜çº§åˆ«å®¢æˆ·ç«¯çš„åæ ‡ï¼Œæ­¤ç§å½¢å¼ç›®å‰æ²¡æœ‰å¯¹åº”çš„starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch-rest-high-level-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šä½¿ç”¨ç¼–ç¨‹çš„å½¢å¼è®¾ç½®è¿æ¥çš„ESæœåŠ¡å™¨ï¼Œå¹¶è·å–å®¢æˆ·ç«¯å¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot18EsApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RestHighLevelClient</span> client<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@Test</span>
      <span class="token keyword">void</span> <span class="token function">testCreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
          <span class="token class-name">HttpHost</span> host <span class="token operator">=</span> <span class="token class-name">HttpHost</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">RestClientBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span>
          client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestHighLevelClient</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
          client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ é…ç½®ESæœåŠ¡å™¨åœ°å€ä¸ç«¯å£9200ï¼Œè®°å¾—å®¢æˆ·ç«¯ä½¿ç”¨å®Œæ¯•éœ€è¦æ‰‹å·¥å…³é—­ã€‚ç”±äºå½“å‰å®¢æˆ·ç«¯æ˜¯æ‰‹å·¥ç»´æŠ¤çš„ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡è‡ªåŠ¨è£…é…çš„å½¢å¼åŠ è½½å¯¹è±¡ã€‚</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨å®¢æˆ·ç«¯å¯¹è±¡æ“ä½œESï¼Œä¾‹å¦‚åˆ›å»ºç´¢å¼•</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot18EsApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RestHighLevelClient</span> client<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@Test</span>
      <span class="token keyword">void</span> <span class="token function">testCreateIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
          <span class="token class-name">HttpHost</span> host <span class="token operator">=</span> <span class="token class-name">HttpHost</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">RestClientBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span>
          client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestHighLevelClient</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
          
          <span class="token class-name">CreateIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateIndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          client<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
          
          client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ é«˜çº§åˆ«å®¢æˆ·ç«¯æ“ä½œæ˜¯é€šè¿‡å‘é€è¯·æ±‚çš„æ–¹å¼å®Œæˆæ‰€æœ‰æ“ä½œçš„ï¼ŒESé’ˆå¯¹å„ç§ä¸åŒçš„æ“ä½œï¼Œè®¾å®šäº†å„å¼å„æ ·çš„è¯·æ±‚å¯¹è±¡ï¼Œä¸Šä¾‹ä¸­åˆ›å»ºç´¢å¼•çš„å¯¹è±¡æ˜¯CreateIndexRequestï¼Œå…¶ä»–æ“ä½œä¹Ÿä¼šæœ‰è‡ªå·±ä¸“ç”¨çš„Requestå¯¹è±¡ã€‚</p><p>â€‹ å½“å‰æ“ä½œæˆ‘ä»¬å‘ç°ï¼Œæ— è®ºè¿›è¡ŒESä½•ç§æ“ä½œï¼Œç¬¬ä¸€æ­¥æ°¸è¿œæ˜¯è·å–RestHighLevelClientå¯¹è±¡ï¼Œæœ€åä¸€æ­¥æ°¸è¿œæ˜¯å…³é—­è¯¥å¯¹è±¡çš„è¿æ¥ã€‚åœ¨æµ‹è¯•ä¸­å¯ä»¥ä½¿ç”¨æµ‹è¯•ç±»çš„ç‰¹æ€§å»å¸®åŠ©å¼€å‘è€…ä¸€æ¬¡æ€§çš„å®Œæˆä¸Šè¿°æ“ä½œï¼Œä½†æ˜¯åœ¨ä¸šåŠ¡ä¹¦å†™æ—¶ï¼Œè¿˜éœ€è¦è‡ªè¡Œç®¡ç†ã€‚å°†ä¸Šè¿°ä»£ç æ ¼å¼è½¬æ¢æˆä½¿ç”¨æµ‹è¯•ç±»çš„åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•è¿›è¡Œå®¢æˆ·ç«¯å¯¹è±¡çš„ç»´æŠ¤ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Springboot18EsApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@BeforeEach</span>		<span class="token comment">//åœ¨æµ‹è¯•ç±»ä¸­æ¯ä¸ªæ“ä½œè¿è¡Œå‰è¿è¡Œçš„æ–¹æ³•</span>
    <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">HttpHost</span> host <span class="token operator">=</span> <span class="token class-name">HttpHost</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RestClientBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span>
        client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestHighLevelClient</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@AfterEach</span>		<span class="token comment">//åœ¨æµ‹è¯•ç±»ä¸­æ¯ä¸ªæ“ä½œè¿è¡Œåè¿è¡Œçš„æ–¹æ³•</span>
    <span class="token keyword">void</span> <span class="token function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">RestHighLevelClient</span> client<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testCreateIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">CreateIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateIndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        client<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ç°åœ¨çš„ä¹¦å†™ç®€åŒ–äº†å¾ˆå¤šï¼Œä¹Ÿæ›´åˆç†ã€‚ä¸‹é¢ä½¿ç”¨ä¸Šè¿°æ¨¡å¼å°†æ‰€æœ‰çš„ESæ“ä½œæ‰§è¡Œä¸€éï¼Œæµ‹è¯•ç»“æœ</p><p><strong>åˆ›å»ºç´¢å¼•ï¼ˆIKåˆ†è¯å™¨ï¼‰</strong>ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testCreateIndexByIK</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">CreateIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateIndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">&quot;{\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;    \&quot;mappings\&quot;:{\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;        \&quot;properties\&quot;:{\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            \&quot;id\&quot;:{\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;type\&quot;:\&quot;keyword\&quot;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            },\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            \&quot;name\&quot;:{\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;type\&quot;:\&quot;text\&quot;,\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;analyzer\&quot;:\&quot;ik_max_word\&quot;,\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;copy_to\&quot;:\&quot;all\&quot;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            },\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            \&quot;type\&quot;:{\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;type\&quot;:\&quot;keyword\&quot;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            },\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            \&quot;description\&quot;:{\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;type\&quot;:\&quot;text\&quot;,\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;analyzer\&quot;:\&quot;ik_max_word\&quot;,\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;copy_to\&quot;:\&quot;all\&quot;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            },\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            \&quot;all\&quot;:{\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;type\&quot;:\&quot;text\&quot;,\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;                \&quot;analyzer\&quot;:\&quot;ik_max_word\&quot;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;            }\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;        }\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;    }\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;}&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//è®¾ç½®è¯·æ±‚ä¸­çš„å‚æ•°</span>
    request<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ IKåˆ†è¯å™¨æ˜¯é€šè¿‡è¯·æ±‚å‚æ•°çš„å½¢å¼è¿›è¡Œè®¾ç½®çš„ï¼Œè®¾ç½®è¯·æ±‚å‚æ•°ä½¿ç”¨requestå¯¹è±¡ä¸­çš„sourceæ–¹æ³•è¿›è¡Œè®¾ç½®ï¼Œè‡³äºå‚æ•°æ˜¯ä»€ä¹ˆï¼Œå–å†³äºä½ çš„æ“ä½œç§ç±»ã€‚å½“è¯·æ±‚ä¸­éœ€è¦å‚æ•°æ—¶ï¼Œå‡å¯ä½¿ç”¨å½“å‰å½¢å¼è¿›è¡Œå‚æ•°è®¾ç½®ã€‚</p><p><strong>æ·»åŠ æ–‡æ¡£</strong>ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token comment">//æ·»åŠ æ–‡æ¡£</span>
<span class="token keyword">void</span> <span class="token function">testCreateDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> bookDao<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span><span class="token class-name">XContentType</span><span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ·»åŠ æ–‡æ¡£ä½¿ç”¨çš„è¯·æ±‚å¯¹è±¡æ˜¯IndexRequestï¼Œä¸åˆ›å»ºç´¢å¼•ä½¿ç”¨çš„è¯·æ±‚å¯¹è±¡ä¸åŒã€‚</p><p><strong>æ‰¹é‡æ·»åŠ æ–‡æ¡£</strong>ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token comment">//æ‰¹é‡æ·»åŠ æ–‡æ¡£</span>
<span class="token keyword">void</span> <span class="token function">testCreateDocAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> bookList <span class="token operator">=</span> bookDao<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BulkRequest</span> bulk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BulkRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Book</span> book <span class="token operator">:</span> bookList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">IndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
        request<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span><span class="token class-name">XContentType</span><span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bulk<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    client<span class="token punctuation">.</span><span class="token function">bulk</span><span class="token punctuation">(</span>bulk<span class="token punctuation">,</span><span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ‰¹é‡åšæ—¶ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªBulkRequestçš„å¯¹è±¡ï¼Œå¯ä»¥å°†è¯¥å¯¹è±¡ç†è§£ä¸ºæ˜¯ä¸€ä¸ªä¿å­˜requestå¯¹è±¡çš„å®¹å™¨ï¼Œå°†æ‰€æœ‰çš„è¯·æ±‚éƒ½åˆå§‹åŒ–å¥½åï¼Œæ·»åŠ åˆ°BulkRequestå¯¹è±¡ä¸­ï¼Œå†ä½¿ç”¨BulkRequestå¯¹è±¡çš„bulkæ–¹æ³•ï¼Œä¸€æ¬¡æ€§æ‰§è¡Œå®Œæ¯•ã€‚</p><p><strong>æŒ‰idæŸ¥è¯¢æ–‡æ¡£</strong>ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token comment">//æŒ‰idæŸ¥è¯¢</span>
<span class="token keyword">void</span> <span class="token function">testGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">GetRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetRequest</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">GetResponse</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ ¹æ®idæŸ¥è¯¢æ–‡æ¡£ä½¿ç”¨çš„è¯·æ±‚å¯¹è±¡æ˜¯GetRequestã€‚</p><p><strong>æŒ‰æ¡ä»¶æŸ¥è¯¢æ–‡æ¡£</strong>ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token comment">//æŒ‰æ¡ä»¶æŸ¥è¯¢</span>
<span class="token keyword">void</span> <span class="token function">testSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">SearchRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">SearchSourceBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    builder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;spring&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">SearchResponse</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SearchHits</span> hits <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> source <span class="token operator">=</span> hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//System.out.println(source);</span>
        <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æŒ‰æ¡ä»¶æŸ¥è¯¢æ–‡æ¡£ä½¿ç”¨çš„è¯·æ±‚å¯¹è±¡æ˜¯SearchRequestï¼ŒæŸ¥è¯¢æ—¶è°ƒç”¨SearchRequestå¯¹è±¡çš„termQueryæ–¹æ³•ï¼Œéœ€è¦ç»™å‡ºæŸ¥è¯¢å±æ€§åï¼Œæ­¤å¤„æ”¯æŒä½¿ç”¨åˆå¹¶å­—æ®µï¼Œä¹Ÿå°±æ˜¯å‰é¢å®šä¹‰ç´¢å¼•å±æ€§æ—¶æ·»åŠ çš„allå±æ€§ã€‚</p><p>â€‹ springbootæ•´åˆESçš„æ“ä½œåˆ°è¿™é‡Œå°±è¯´å®Œäº†ï¼Œä¸å‰æœŸè¿›è¡Œspringbootæ•´åˆrediså’Œmongodbçš„å·®åˆ«è¿˜æ˜¯è›®å¤§çš„ï¼Œä¸»è¦åŸå§‹å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨springbootæ•´åˆESçš„å®¢æˆ·ç«¯å¯¹è±¡ã€‚è‡³äºæ“ä½œï¼Œç”±äºESæ“ä½œç§ç±»è¿‡å¤šï¼Œæ‰€ä»¥æ˜¾å¾—æ“ä½œç•¥å¾®æœ‰ç‚¹å¤æ‚ã€‚æœ‰å…³springbootæ•´åˆESå°±å…ˆå­¦ä¹ åˆ°è¿™é‡Œå§ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆESæ­¥éª¤ <ol><li>å¯¼å…¥springbootæ•´åˆESçš„High Level Clientåæ ‡</li><li>æ‰‹å·¥ç®¡ç†å®¢æˆ·ç«¯å¯¹è±¡ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–å’Œå…³é—­æ“ä½œ</li><li>ä½¿ç”¨High Level Clientæ ¹æ®æ“ä½œçš„ç§ç±»ä¸åŒï¼Œé€‰æ‹©ä¸åŒçš„Requestå¯¹è±¡å®Œæˆå¯¹åº”æ“ä½œ</li></ol></li></ol><h2 id="_5-æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯" tabindex="-1"><a class="header-anchor" href="#_5-æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯" aria-hidden="true">#</a> 5.æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯</h2><p>â€‹ é€šè¿‡ç¬¬å››ç« çš„å­¦ä¹ ï¼Œæˆ‘ä»¬é¢†ç•¥åˆ°äº†springbootåœ¨æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯æ—¶å¼ºå¤§çš„ä¸€è‡´æ€§ï¼Œåœ¨ç¬¬äº”ç« ä¸­æˆ‘ä»¬è¦ä½¿ç”¨springbootç»§ç»­æ•´åˆå„ç§å„æ ·çš„ç¬¬ä¸‰æ–¹æŠ€æœ¯ï¼Œé€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œå¯ä»¥å°†ä¹‹å‰å­¦ä¹ çš„springbootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯çš„æ€æƒ³è´¯å½»åˆ°åº•ï¼Œè¿˜æ˜¯é‚£ä¸‰æ¿æ–§ã€‚å¯¼åæ ‡ã€åšé…ç½®ã€è°ƒAPIã€‚</p><p>â€‹ springbootèƒ½å¤Ÿæ•´åˆçš„æŠ€æœ¯å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œå¯ä»¥è¯´æ˜¯ä¸‡ç‰©çš†å¯æ•´ã€‚æœ¬ç« å°†ä»ä¼ä¸šçº§å¼€å‘ä¸­å¸¸ç”¨çš„ä¸€äº›æŠ€æœ¯ä½œä¸ºå‡ºå‘ç‚¹ï¼Œå¯¹å„ç§å„æ ·çš„æŠ€æœ¯è¿›è¡Œæ•´åˆã€‚</p><h3 id="_5-1-ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_5-1-ç¼“å­˜" aria-hidden="true">#</a> 5-1.ç¼“å­˜</h3><p>â€‹ ä¼ä¸šçº§åº”ç”¨ä¸»è¦ä½œç”¨æ˜¯ä¿¡æ¯å¤„ç†ï¼Œå½“éœ€è¦è¯»å–æ•°æ®æ—¶ï¼Œç”±äºå—é™äºæ•°æ®åº“çš„è®¿é—®æ•ˆç‡ï¼Œå¯¼è‡´æ•´ä½“ç³»ç»Ÿæ€§èƒ½åä½ã€‚</p><img src="/assets/image-20220226154148303.cff15db9.png" alt="image-20220226154148303" style="zoom:67%;"><p>â€‹ åº”ç”¨ç¨‹åºç›´æ¥ä¸æ•°æ®åº“æ‰“äº¤é“ï¼Œè®¿é—®æ•ˆç‡ä½</p><p>â€‹ ä¸ºäº†æ”¹å–„ä¸Šè¿°ç°è±¡ï¼Œå¼€å‘è€…é€šå¸¸ä¼šåœ¨åº”ç”¨ç¨‹åºä¸æ•°æ®åº“ä¹‹é—´å»ºç«‹ä¸€ç§ä¸´æ—¶çš„æ•°æ®å­˜å‚¨æœºåˆ¶ï¼Œè¯¥åŒºåŸŸä¸­çš„æ•°æ®åœ¨å†…å­˜ä¸­ä¿å­˜ï¼Œè¯»å†™é€Ÿåº¦è¾ƒå¿«ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³æ•°æ®åº“è®¿é—®æ•ˆç‡ä½ä¸‹çš„é—®é¢˜ã€‚è¿™ä¸€å—ä¸´æ—¶å­˜å‚¨æ•°æ®çš„åŒºåŸŸå°±æ˜¯ç¼“å­˜ã€‚</p><img src="/assets/image-20220226154233010.7948c368.png" alt="image-20220226154233010" style="zoom:67%;"><p><strong>ä½¿ç”¨ç¼“å­˜åï¼Œåº”ç”¨ç¨‹åºä¸ç¼“å­˜æ‰“äº¤é“ï¼Œç¼“å­˜ä¸æ•°æ®åº“æ‰“äº¤é“ï¼Œæ•°æ®è®¿é—®æ•ˆç‡æé«˜</strong></p><p>â€‹ ç¼“å­˜æ˜¯ä»€ä¹ˆï¼Ÿç¼“å­˜æ˜¯ä¸€ç§ä»‹äºæ•°æ®æ°¸ä¹…å­˜å‚¨ä»‹è´¨ä¸åº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®ä¸´æ—¶å­˜å‚¨ä»‹è´¨ï¼Œä½¿ç”¨ç¼“å­˜å¯ä»¥æœ‰æ•ˆçš„å‡å°‘ä½é€Ÿæ•°æ®è¯»å–è¿‡ç¨‹çš„æ¬¡æ•°ï¼ˆä¾‹å¦‚ç£ç›˜IOï¼‰ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚æ­¤å¤–ç¼“å­˜ä¸ä»…å¯ä»¥ç”¨äºæé«˜æ°¸ä¹…æ€§å­˜å‚¨ä»‹è´¨çš„æ•°æ®è¯»å–æ•ˆç‡ï¼Œè¿˜å¯ä»¥æä¾›ä¸´æ—¶çš„æ•°æ®å­˜å‚¨ç©ºé—´ã€‚è€Œspringbootæä¾›äº†å¯¹å¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰çš„ç¼“å­˜æŠ€æœ¯è¿›è¡Œæ•´åˆçš„æ–¹æ¡ˆï¼Œä¸‹é¢å°±ä¸€èµ·å¼€å¯springbootæ•´åˆç¼“å­˜ä¹‹æ—…ã€‚</p><h4 id="springbootå†…ç½®ç¼“å­˜è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#springbootå†…ç½®ç¼“å­˜è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> SpringBootå†…ç½®ç¼“å­˜è§£å†³æ–¹æ¡ˆ</h4><p>â€‹ springbootæŠ€æœ¯æä¾›æœ‰å†…ç½®çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå¼€å¯ç¼“å­˜æŠ€æœ¯ï¼Œå¹¶ä½¿ç”¨ç¼“å­˜æŠ€æœ¯è¿›è¡Œæ•°æ®çš„å¿«é€Ÿæ“ä½œï¼Œä¾‹å¦‚è¯»å–ç¼“å­˜æ•°æ®å’Œå†™å…¥æ•°æ®åˆ°ç¼“å­˜ã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæä¾›çš„ç¼“å­˜æŠ€æœ¯å¯¹åº”çš„starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå¯ç”¨ç¼“å­˜ï¼Œåœ¨å¼•å¯¼ç±»ä¸Šæ–¹æ ‡æ³¨æ³¨è§£@EnableCachingé…ç½®springbootç¨‹åºä¸­å¯ä»¥ä½¿ç”¨ç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token comment">//å¼€å¯ç¼“å­˜åŠŸèƒ½</span>
<span class="token annotation punctuation">@EnableCaching</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot19CacheApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Springboot19CacheApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šè®¾ç½®æ“ä½œçš„æ•°æ®æ˜¯å¦ä½¿ç”¨ç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookDao</span> bookDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;cacheSpace&quot;</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">&quot;#id&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Book</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookDao<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ åœ¨ä¸šåŠ¡æ–¹æ³•ä¸Šé¢ä½¿ç”¨æ³¨è§£@Cacheableå£°æ˜å½“å‰æ–¹æ³•çš„è¿”å›å€¼æ”¾å…¥ç¼“å­˜ä¸­ï¼Œå…¶ä¸­è¦æŒ‡å®šç¼“å­˜çš„å­˜å‚¨ä½ç½®ï¼Œä»¥åŠç¼“å­˜ä¸­ä¿å­˜å½“å‰æ–¹æ³•è¿”å›å€¼å¯¹åº”çš„åç§°ã€‚ä¸Šä¾‹ä¸­valueå±æ€§æè¿°ç¼“å­˜çš„å­˜å‚¨ä½ç½®ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå­˜å‚¨ç©ºé—´åï¼Œkeyå±æ€§æè¿°äº†ç¼“å­˜ä¸­ä¿å­˜æ•°æ®çš„åç§°ï¼Œä½¿ç”¨#idè¯»å–å½¢å‚ä¸­çš„idå€¼ä½œä¸ºç¼“å­˜åç§°ã€‚</p><p>â€‹ ä½¿ç”¨@Cacheableæ³¨è§£åï¼Œæ‰§è¡Œå½“å‰æ“ä½œï¼Œå¦‚æœå‘ç°å¯¹åº”åç§°åœ¨ç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œå°±æ­£å¸¸è¯»å–æ•°æ®ï¼Œç„¶åæ”¾å…¥ç¼“å­˜ï¼›å¦‚æœå¯¹åº”åç§°åœ¨ç¼“å­˜ä¸­æœ‰æ•°æ®ï¼Œå°±ç»ˆæ­¢å½“å‰ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œï¼Œç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„æ•°æ®ã€‚</p><h4 id="æ‰‹æœºéªŒè¯ç æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ‰‹æœºéªŒè¯ç æ¡ˆä¾‹" aria-hidden="true">#</a> æ‰‹æœºéªŒè¯ç æ¡ˆä¾‹</h4><p>â€‹ ä¸ºäº†ä¾¿äºä¸‹é¢æ¼”ç¤ºå„ç§å„æ ·çš„ç¼“å­˜æŠ€æœ¯ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ‰‹æœºéªŒè¯ç çš„æ¡ˆä¾‹ç¯å¢ƒï¼Œæ¨¡æ‹Ÿä½¿ç”¨ç¼“å­˜ä¿å­˜æ‰‹æœºéªŒè¯ç çš„è¿‡ç¨‹ã€‚</p><p>â€‹ æ‰‹æœºéªŒè¯ç æ¡ˆä¾‹éœ€æ±‚å¦‚ä¸‹ï¼š</p><ul><li>è¾“å…¥æ‰‹æœºå·è·å–éªŒè¯ç ï¼Œç»„ç»‡æ–‡æ¡£ä»¥çŸ­ä¿¡å½¢å¼å‘é€ç»™ç”¨æˆ·ï¼ˆé¡µé¢æ¨¡æ‹Ÿï¼‰</li><li>è¾“å…¥æ‰‹æœºå·å’ŒéªŒè¯ç éªŒè¯ç»“æœ</li></ul><p>â€‹ ä¸ºäº†æè¿°ä¸Šè¿°æ“ä½œï¼Œæˆ‘ä»¬åˆ¶ä½œä¸¤ä¸ªè¡¨ç°å±‚æ¥å£ï¼Œä¸€ä¸ªç”¨æ¥æ¨¡æ‹Ÿå‘é€çŸ­ä¿¡çš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯æ ¹æ®ç”¨æˆ·æä¾›çš„æ‰‹æœºå·ç”Ÿæˆä¸€ä¸ªéªŒè¯ç ï¼Œç„¶åæ”¾å…¥ç¼“å­˜ï¼Œå¦ä¸€ä¸ªç”¨æ¥æ¨¡æ‹ŸéªŒè¯ç æ ¡éªŒçš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨ä¼ å…¥çš„æ‰‹æœºå·å’ŒéªŒè¯ç è¿›è¡ŒåŒ¹é…ï¼Œå¹¶è¿”å›æœ€ç»ˆåŒ¹é…ç»“æœã€‚ä¸‹é¢ç›´æ¥åˆ¶ä½œæœ¬æ¡ˆä¾‹çš„æ¨¡æ‹Ÿä»£ç ï¼Œå…ˆä»¥ä¸Šä¾‹ä¸­springbootæä¾›çš„å†…ç½®ç¼“å­˜æŠ€æœ¯æ¥å®Œæˆå½“å‰æ¡ˆä¾‹çš„åˆ¶ä½œã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæä¾›çš„ç¼“å­˜æŠ€æœ¯å¯¹åº”çš„starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå¯ç”¨ç¼“å­˜ï¼Œåœ¨å¼•å¯¼ç±»ä¸Šæ–¹æ ‡æ³¨æ³¨è§£@EnableCachingé…ç½®springbootç¨‹åºä¸­å¯ä»¥ä½¿ç”¨ç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token comment">//å¼€å¯ç¼“å­˜åŠŸèƒ½</span>
<span class="token annotation punctuation">@EnableCaching</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot19CacheApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Springboot19CacheApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šå®šä¹‰éªŒè¯ç å¯¹åº”çš„å®ä½“ç±»ï¼Œå°è£…æ‰‹æœºå·ä¸éªŒè¯ç ä¸¤ä¸ªå±æ€§</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCode</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tele<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> code<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘£</strong>ï¼šå®šä¹‰éªŒè¯ç åŠŸèƒ½çš„ä¸šåŠ¡å±‚æ¥å£ä¸å®ç°ç±»</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SMSCodeService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token class-name">SMSCode</span> smsCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCodeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SMSCodeService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CodeUtils</span> codeUtils<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@CachePut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;smsCode&quot;</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">&quot;#tele&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> codeUtils<span class="token punctuation">.</span><span class="token function">generator</span><span class="token punctuation">(</span>tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token class-name">SMSCode</span> smsCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å–å‡ºå†…å­˜ä¸­çš„éªŒè¯ç ä¸ä¼ é€’è¿‡æ¥çš„éªŒè¯ç æ¯”å¯¹ï¼Œå¦‚æœç›¸åŒï¼Œè¿”å›true</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> smsCode<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> cacheCode <span class="token operator">=</span> codeUtils<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>smsCode<span class="token punctuation">.</span><span class="token function">getTele</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> code<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>cacheCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è·å–éªŒè¯ç åï¼Œå½“éªŒè¯ç å¤±æ•ˆæ—¶å¿…é¡»é‡æ–°è·å–éªŒè¯ç ï¼Œå› æ­¤åœ¨è·å–éªŒè¯ç çš„åŠŸèƒ½ä¸Šä¸èƒ½ä½¿ç”¨@Cacheableæ³¨è§£ï¼Œ@Cacheableæ³¨è§£æ˜¯ç¼“å­˜ä¸­æ²¡æœ‰å€¼åˆ™æ”¾å…¥å€¼ï¼Œç¼“å­˜ä¸­æœ‰å€¼åˆ™å–å€¼ã€‚æ­¤å¤„çš„åŠŸèƒ½ä»…ä»…æ˜¯ç”ŸæˆéªŒè¯ç å¹¶æ”¾å…¥ç¼“å­˜ï¼Œå¹¶ä¸å…·æœ‰ä»ç¼“å­˜ä¸­å–å€¼çš„åŠŸèƒ½ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨@Cacheableæ³¨è§£ï¼Œåº”è¯¥ä½¿ç”¨ä»…å…·æœ‰å‘ç¼“å­˜ä¸­ä¿å­˜æ•°æ®çš„åŠŸèƒ½ï¼Œä½¿ç”¨@CachePutæ³¨è§£å³å¯ã€‚</p><p>â€‹ å¯¹äºæ ¡éªŒéªŒè¯ç çš„åŠŸèƒ½å»ºè®®æ”¾å…¥å·¥å…·ç±»ä¸­è¿›è¡Œã€‚</p><p><strong>æ­¥éª¤â‘¤</strong>ï¼šå®šä¹‰éªŒè¯ç çš„ç”Ÿæˆç­–ç•¥ä¸æ ¹æ®æ‰‹æœºå·è¯»å–éªŒè¯ç çš„åŠŸèƒ½</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CodeUtils</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> patch <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;000000&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;00000&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0000&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;000&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;00&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> hash <span class="token operator">=</span> tele<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> encryption <span class="token operator">=</span> <span class="token number">20206666</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> result <span class="token operator">=</span> hash <span class="token operator">^</span> encryption<span class="token punctuation">;</span>
        <span class="token keyword">long</span> nowTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result <span class="token operator">=</span> result <span class="token operator">^</span> nowTime<span class="token punctuation">;</span>
        <span class="token keyword">long</span> code <span class="token operator">=</span> result <span class="token operator">%</span> <span class="token number">1000000</span><span class="token punctuation">;</span>
        code <span class="token operator">=</span> code <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token operator">-</span>code <span class="token operator">:</span> code<span class="token punctuation">;</span>
        <span class="token class-name">String</span> codeStr <span class="token operator">=</span> code <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> codeStr<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> patch<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">+</span> codeStr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;smsCode&quot;</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">&quot;#tele&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¥</strong>ï¼šå®šä¹‰éªŒè¯ç åŠŸèƒ½çš„webå±‚æ¥å£ï¼Œä¸€ä¸ªæ–¹æ³•ç”¨äºæä¾›æ‰‹æœºå·è·å–éªŒè¯ç ï¼Œä¸€ä¸ªæ–¹æ³•ç”¨äºæä¾›æ‰‹æœºå·å’ŒéªŒè¯ç è¿›è¡Œæ ¡éªŒ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/sms&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCodeController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">SMSCodeService</span> smsCodeService<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@GetMapping</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> smsCodeService<span class="token punctuation">.</span><span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span>tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@PostMapping</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token class-name">SMSCode</span> smsCode<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> smsCodeService<span class="token punctuation">.</span><span class="token function">checkCode</span><span class="token punctuation">(</span>smsCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="springbootæ•´åˆehcacheç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆehcacheç¼“å­˜" aria-hidden="true">#</a> SpringBootæ•´åˆEhcacheç¼“å­˜</h4><p>â€‹ æ‰‹æœºéªŒè¯ç çš„æ¡ˆä¾‹å·²ç»å®Œæˆäº†ï¼Œä¸‹é¢å°±å¼€å§‹springbootæ•´åˆå„ç§å„æ ·çš„ç¼“å­˜æŠ€æœ¯ï¼Œç¬¬ä¸€ä¸ªæ•´åˆEhcacheæŠ€æœ¯ã€‚Ehcacheæ˜¯ä¸€ç§ç¼“å­˜æŠ€æœ¯ï¼Œä½¿ç”¨springbootæ•´åˆEhcacheå…¶å®å°±æ˜¯å˜æ›´ä¸€ä¸‹ç¼“å­˜æŠ€æœ¯çš„å®ç°æ–¹å¼ï¼Œè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€æ•´</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥Ehcacheçš„åæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.sf.ehcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ehcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ­¤å¤„ä¸ºä»€ä¹ˆä¸æ˜¯å¯¼å…¥Ehcacheçš„starterï¼Œè€Œæ˜¯å¯¼å…¥æŠ€æœ¯åæ ‡å‘¢ï¼Ÿå…¶å®springbootæ•´åˆç¼“å­˜æŠ€æœ¯åšçš„æ˜¯é€šç”¨æ ¼å¼ï¼Œä¸ç®¡ä½ æ•´åˆå“ªç§ç¼“å­˜æŠ€æœ¯ï¼Œåªæ˜¯å®ç°å˜åŒ–äº†ï¼Œæ“ä½œæ–¹å¼ä¸€æ ·ã€‚è¿™ä¹Ÿä½“ç°å‡ºspringbootæŠ€æœ¯çš„ä¼˜ç‚¹ï¼Œç»Ÿä¸€åŒç±»æŠ€æœ¯çš„æ•´åˆæ–¹å¼ã€‚</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®ç¼“å­˜æŠ€æœ¯å®ç°ä½¿ç”¨Ehcache</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> ehcache
    <span class="token key atrule">ehcache</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>ehcache.xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ é…ç½®ç¼“å­˜çš„ç±»å‹typeä¸ºehcacheï¼Œæ­¤å¤„éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œå½“å‰springbootå¯ä»¥æ•´åˆçš„ç¼“å­˜æŠ€æœ¯ä¸­åŒ…å«æœ‰ehcachï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·ä¹¦å†™ã€‚å…¶å®è¿™ä¸ªtypeä¸å¯ä»¥éšä¾¿å†™çš„ï¼Œä¸æ˜¯éšä¾¿å†™ä¸€ä¸ªåç§°å°±å¯ä»¥æ•´åˆçš„ã€‚</p><p>â€‹ <strong>ç”±äºehcacheçš„é…ç½®æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œå› æ­¤è¿˜éœ€è¦æŒ‡å®šehcacheçš„é…ç½®æ–‡ä»¶ï¼Œä»¥ä¾¿äºè¯»å–ç›¸åº”é…ç½®</strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ehcache</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>noNamespaceSchemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://ehcache.org/ehcache.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">updateCheck</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>diskStore</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>D:\ehcache<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--é»˜è®¤ç¼“å­˜ç­–ç•¥ --&gt;</span>
    <span class="token comment">&lt;!-- externalï¼šæ˜¯å¦æ°¸ä¹…å­˜åœ¨ï¼Œè®¾ç½®ä¸ºtrueåˆ™ä¸ä¼šè¢«æ¸…é™¤ï¼Œæ­¤æ—¶ä¸timeoutå†²çªï¼Œé€šå¸¸è®¾ç½®ä¸ºfalse--&gt;</span>
    <span class="token comment">&lt;!-- diskPersistentï¼šæ˜¯å¦å¯ç”¨ç£ç›˜æŒä¹…åŒ–--&gt;</span>
    <span class="token comment">&lt;!-- maxElementsInMemoryï¼šæœ€å¤§ç¼“å­˜æ•°é‡--&gt;</span>
    <span class="token comment">&lt;!-- overflowToDiskï¼šè¶…è¿‡æœ€å¤§ç¼“å­˜æ•°é‡æ˜¯å¦æŒä¹…åŒ–åˆ°ç£ç›˜--&gt;</span>
    <span class="token comment">&lt;!-- timeToIdleSecondsï¼šæœ€å¤§ä¸æ´»åŠ¨é—´éš”ï¼Œè®¾ç½®è¿‡é•¿ç¼“å­˜å®¹æ˜“æº¢å‡ºï¼Œè®¾ç½®è¿‡çŸ­æ— æ•ˆæœï¼Œå¯ç”¨äºè®°å½•æ—¶æ•ˆæ€§æ•°æ®ï¼Œä¾‹å¦‚éªŒè¯ç --&gt;</span>
    <span class="token comment">&lt;!-- timeToLiveSecondsï¼šæœ€å¤§å­˜æ´»æ—¶é—´--&gt;</span>
    <span class="token comment">&lt;!-- memoryStoreEvictionPolicyï¼šç¼“å­˜æ¸…é™¤ç­–ç•¥--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defaultCache</span>
        <span class="token attr-name">eternal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">diskPersistent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">maxElementsInMemory</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1000<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">overflowToDisk</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">timeToIdleSeconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">timeToLiveSeconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">memoryStoreEvictionPolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LRU<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span>
        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>smsCode<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">eternal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">diskPersistent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">maxElementsInMemory</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1000<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">overflowToDisk</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">timeToIdleSeconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">timeToLiveSeconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">memoryStoreEvictionPolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LRU<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ehcache</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ³¨æ„å‰é¢çš„æ¡ˆä¾‹ä¸­ï¼Œè®¾ç½®äº†æ•°æ®ä¿å­˜çš„ä½ç½®æ˜¯smsCode</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@CachePut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;smsCode&quot;</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">&quot;#tele&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> code <span class="token operator">=</span> codeUtils<span class="token punctuation">.</span><span class="token function">generator</span><span class="token punctuation">(</span>tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> code<span class="token punctuation">;</span>
<span class="token punctuation">}</span>	
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿™ä¸ªè®¾å®šéœ€è¦ä¿éšœehcacheä¸­æœ‰ä¸€ä¸ªç¼“å­˜ç©ºé—´åç§°å«åšsmsCodeçš„é…ç½®ï¼Œå‰åè¦ç»Ÿä¸€ã€‚åœ¨ä¼ä¸šå¼€å‘è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡è®¾ç½®ä¸åŒåç§°çš„cacheæ¥è®¾å®šä¸åŒçš„ç¼“å­˜ç­–ç•¥ï¼Œåº”ç”¨äºä¸åŒçš„ç¼“å­˜æ•°æ®ã€‚</p><p>â€‹ åˆ°è¿™é‡Œspringbootæ•´åˆEhcacheå°±åšå®Œäº†ï¼Œå¯ä»¥å‘ç°ä¸€ç‚¹ï¼ŒåŸå§‹ä»£ç æ²¡æœ‰ä»»ä½•ä¿®æ”¹ï¼Œä»…ä»…æ˜¯åŠ äº†ä¸€ç»„é…ç½®å°±å¯ä»¥å˜æ›´ç¼“å­˜ä¾›åº”å•†äº†ï¼Œè¿™ä¹Ÿæ˜¯springbootæä¾›äº†ç»Ÿä¸€çš„ç¼“å­˜æ“ä½œæ¥å£çš„ä¼˜åŠ¿ï¼Œå˜æ›´å®ç°å¹¶ä¸å½±å“åŸå§‹ä»£ç çš„ä¹¦å†™ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>springbootä½¿ç”¨Ehcacheä½œä¸ºç¼“å­˜å®ç°éœ€è¦å¯¼å…¥Ehcacheçš„åæ ‡</li><li>ä¿®æ”¹è®¾ç½®ï¼Œé…ç½®ç¼“å­˜ä¾›åº”å•†ä¸ºehcacheï¼Œå¹¶æä¾›å¯¹åº”çš„ç¼“å­˜é…ç½®æ–‡ä»¶</li></ol><p>â€‹</p><h4 id="springbootæ•´åˆredisç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆredisç¼“å­˜" aria-hidden="true">#</a> SpringBootæ•´åˆRedisç¼“å­˜</h4><p>â€‹ ä¸ŠèŠ‚ä½¿ç”¨Ehcacheæ›¿æ¢äº†springbootå†…ç½®çš„ç¼“å­˜æŠ€æœ¯ï¼Œå…¶å®springbootæ”¯æŒçš„ç¼“å­˜æŠ€æœ¯è¿˜å¾ˆå¤šï¼Œä¸‹é¢ä½¿ç”¨redisæŠ€æœ¯ä½œä¸ºç¼“å­˜è§£å†³æ–¹æ¡ˆæ¥å®ç°æ‰‹æœºéªŒè¯ç æ¡ˆä¾‹ã€‚</p><p>â€‹ æ¯”å¯¹ä½¿ç”¨Ehcacheçš„è¿‡ç¨‹ï¼ŒåŠ åæ ‡ï¼Œæ”¹ç¼“å­˜å®ç°ç±»å‹ä¸ºehcacheï¼ŒåšEhcacheçš„é…ç½®ã€‚å¦‚æœè¿˜æˆredisåšç¼“å­˜å‘¢ï¼Ÿä¸€æ¨¡ä¸€æ ·ï¼ŒåŠ åæ ‡ï¼Œæ”¹ç¼“å­˜å®ç°ç±»å‹ä¸ºredisï¼Œåšredisçš„é…ç½®ã€‚å·®åˆ«ä¹‹å¤„åªæœ‰ä¸€ç‚¹ï¼Œredisçš„é…ç½®å¯ä»¥åœ¨ymlæ–‡ä»¶ä¸­ç›´æ¥è¿›è¡Œé…ç½®ï¼Œæ— éœ€åˆ¶ä½œç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥redisçš„åæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®ç¼“å­˜æŠ€æœ¯å®ç°ä½¿ç”¨redis</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¦‚æœéœ€è¦å¯¹redisä½œä¸ºç¼“å­˜è¿›è¡Œé…ç½®ï¼Œæ³¨æ„ä¸æ˜¯å¯¹åŸå§‹çš„redisè¿›è¡Œé…ç½®ï¼Œè€Œæ˜¯é…ç½®redisä½œä¸ºç¼“å­˜ä½¿ç”¨ç›¸å…³çš„é…ç½®ï¼Œéš¶å±äºspring.cache.redisèŠ‚ç‚¹ä¸‹ï¼Œæ³¨æ„ä¸è¦å†™é”™ä½ç½®äº†ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
      <span class="token key atrule">use-key-prefix</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">key-prefix</span><span class="token punctuation">:</span> sms_
      <span class="token key atrule">cache-null-values</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">time-to-live</span><span class="token punctuation">:</span> 10s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>springbootä½¿ç”¨redisä½œä¸ºç¼“å­˜å®ç°éœ€è¦å¯¼å…¥redisçš„åæ ‡</li><li>ä¿®æ”¹è®¾ç½®ï¼Œé…ç½®ç¼“å­˜ä¾›åº”å•†ä¸ºredisï¼Œå¹¶æä¾›å¯¹åº”çš„ç¼“å­˜é…ç½®</li></ol><h4 id="springbootæ•´åˆmemcachedç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆmemcachedç¼“å­˜" aria-hidden="true">#</a> SpringBootæ•´åˆMemcachedç¼“å­˜</h4><p>â€‹ ç›®å‰æˆ‘ä»¬å·²ç»æŒæ¡äº†3ç§ç¼“å­˜è§£å†³æ–¹æ¡ˆçš„é…ç½®å½¢å¼ï¼Œåˆ†åˆ«æ˜¯springbootå†…ç½®ç¼“å­˜ï¼Œehcacheå’Œredisï¼Œæœ¬èŠ‚ç ”ç©¶ä¸€ä¸‹å›½å†…æ¯”è¾ƒæµè¡Œçš„ä¸€æ¬¾ç¼“å­˜memcachedã€‚</p><p>â€‹ æŒ‰ç…§ä¹‹å‰çš„å¥—è·¯ï¼Œå…¶å®å˜æ›´ç¼“å­˜å¹¶ä¸ç¹çï¼Œä½†æ˜¯springbootå¹¶æ²¡æœ‰æ”¯æŒä½¿ç”¨memcachedä½œä¸ºå…¶ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨typeå±æ€§ä¸­æ²¡æœ‰memcachedçš„é…ç½®é€‰é¡¹ï¼Œè¿™é‡Œå°±éœ€è¦æ›´å˜ä¸€ä¸‹å¤„ç†æ–¹å¼äº†ã€‚åœ¨æ•´åˆä¹‹å‰å…ˆå®‰è£…memcachedã€‚</p><p><strong>å®‰è£…</strong></p><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼šhttps://www.runoob.com/memcached/window-install-memcached.html</p><p>â€‹ ä¸‹è½½çš„å®‰è£…åŒ…æ˜¯è§£å‹ç¼©å°±èƒ½ä½¿ç”¨çš„zipæ–‡ä»¶ï¼Œè§£å‹ç¼©å®Œæ¯•åä¼šå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARYAAABsCAYAAACvg51cAAAPRUlEQVR4nO3df2zT953H8adbuMEqmLZCQahTO5qwjgaKKn5o9jborVKJaaSoMKq0naLwhz10pbbactoODlUo3K7XXWUDo4r/icI0GFG6WQLsjeuObCgpqdpO/LhsYF/X9dqsHWyalt3CAfl+7o+v7diOndjw/SYhfT2kL+DvL39s6fvm83l/P35/PRcuXDCIiDjIY4xRYBERR9022Q0QkelHgUVEHKfAIiKOU2AREccpsIiI4xRYRMRxt125cmWy2yC3oMHBQV588UUGBwcnuykyyQYGBkatU49FqjY4OEgwGGTRokU8//zzCi4yigKLVCUbVJqamggEArzwwgsKLjKKAotULD+oNDQ0ALBkyRIFFxnFMzQ0ZGbNmjXZ7ZBbwODgIG+//Tbr1q0bte3ixYuAHWjkk2VgYIBFixYVrFNgEZGbUiqwaCgkIo5TYBERx7kYWPp5pWUvXR9VsOtH3YRadtDQcoQ+oC+2g1feca9lIuKuGe6ctp9XWn7ISYDv7KCjaOvijWGij83ng2N72frax8BydrbvYQ3YQeaN5TwZcKdlIuI+xwNLNlg8vG0PRx8q2vhRN6EDsP2x+QDc/dizHH3sEl27/jOzwyW6DvwH7wKtLWcLDs0GIxGZ+hwNLB8c28vWN5fzavs6PoztpWvRs2xamNn4zhEa4gt4dfc67gbgEl27InT8T2Z7LpAsZ2f7E3bvJaMvtoOeRQoqIrcKF28328Mhtu3B99YOWnmKo4GlZfY7h6/9CdbQT9ex+WzKDJNeponoyv+yezm5gCQiU0mp280u5VgAlrJ54wK27tsBpYZFWe+c4yRnOdnyMc3ffZZNjxVtX7iO6G73WikiznMlsPTFdtD6xsjrk/t22IncjJF8ySW63oKHP78c3+5l9Ozq5oPGj9n61jJeXQTZ4dL7jXt4rlxgEpEpx9HAkg0oiz+/gMUbm0onW985QijzK+sPjh3m1KJH+OoH54ClPLcbXmn5mJ3tS+HY68B8Nu1+yr5t/d28fI2ITGmOzmNZE9jD0fY9bF9d2f4fDizgyVzwuUTXrh/CtsLELSzluW0L6DjQ7WRTRcRFruVY3n0tQsNrpbct3vj3AKwJPAFcwr4xNJ9Nu/eUPuChJ8rnaERkynEtsJSdd5I3FCrpnSM07LNvPT+8TbeYRW5F+nWziNwU/bpZRCaEAouIOE6BRUQcp8AiIo5TYBERxymwiIjjFFhExHGaxyIijlOPRUQcp8AiIo5TYBERxymwiIjjFFhExHEKLCLiOAUWEXGca4WeDh06hGUMxrIwxmBZBmOs3DrLGD49ezbr169n3rx5bjVDRCaBa4HFMoYnm5pyr03uD1tn5xFWrFjB8USCDX6/govINOLaUMhYFgDDlsXwsMXw8DDDw8NczywA8+bNY9XKlRw9esytZojIJHAvsJhM98SAye+qZFcCBw8eJJlM8pe/Do5xpiRBT5AkQDqKz+MjmgZIE/V5CCYdb/rEKvhM5T6rw5JBPL4o9qnz3rPg3yI3zr2hkGUHj2xQ6TvdR1/faVavWcOaNWt4/PGNGGDG7bez//vfd6sZnwBJgh4/5yMpekI1k90YEcDVHouV66d0HPwBc+9aiP8bTcyat5ADbbGCPoxlrMpOWhOix/Qwra6fcp9p3M9q99g8njgEXG6jSJVcCyyWMWDg7JmzeL+2lvsX38OZ3l+y7L57+fLXH+Xc2bNkh0TGKh4qyfhqCPUYjGmjcbKbIlLE9eRtd/dJ7pg9mx93ddHU1ET8tS4+M2cO3d3d5NIwpsLAko7iG5UDSBL0ePBklsKcS/42H9Fofm5h9LG+XEKj3PpSTfLl9vOMk58ouW/JzzTG+htS+Hk8/pgjZxUpx90eC7B23TqGhobYuGkThw8fZkNDA+/97n2uz5rLz0/1cuXKFSyrwqFQCTF/nEZjMMZgEgFi/vxEpB8SmW2mAzrzL6iR3ITJHG/nKMqtLyEdpTlcRyL7/qaN+nINrWZfRxV/D4aEhk7iMhd7LAYwLF+2nJ5TvyD93vus+spafvWbd7l8xz1s2bKFy5/7Im+eOVd5j6WEQCLvAq3fTsQbI54EknFi3gjbcxtrCO3Mu6Iy2zuKg0a59aXULKGOGP5K7t5Us+8oRT2vao4f9T1AfaMii7jLxR6Lnbw1wNNPPc3l3w/wkx8d4o3TfTy65E5e/+0g9ffP58M//Kny5O2UU09btjfUPN5FX82+5Y41mOmWvJZpaQLmsRgwhlWrV/PMtm2serCOExf/yCNfmMNPL1xm5YMP3FTyNhYfyUKko82EewM01gP1jQR6w7yc25wm2po3FBq1PUk0mi6/vpR0lGgS7ERqioi3l/5UmYZWs+/Nyp8DM973IOIC93oslslMjiuYyc9DdV/is5f7OfGzEzww88/cfdeduXzMjQgQzyUla8N1JHK5i3raUhHO+7NDiGbYnD8EKN4eZ0moZoz1JdSEWBLP7ldLuC5BW7nESTX7OqqetkSAWNnvQcQFQ0NDxg179+0z165dN38bumIvfxsy/1tiuXrtmtnd2upKG0ZJBAzeiElNzLtVJhUxXgImUel6kVuAq3eFDIYZM263l5kzmFligZFZus5KE/Xl365NEvTH8G7ewFRKUaSPd9LrXUpthetFbgWuTek3lmHf/v0Yy2TKJmTKJxgLYxk78BgrU07BjcBSQ6hjKT6PB39mjfeGp73bt2yLMxOBhCkxnKlw32QwM58kQMKERoJdufUitxA9V0hEHKcKciLiOAUWEXGcAouIOE6BRUQcp8AiIo5TYBERxzk+j+Vf/u3fb+r4f/rH5x1qiYhMlknvsXzV5y34e/pJEnSqKHayuFCVyNTkyszblm8+WdX+NYvvBeBUT68bzRGRCebalP4sPYhM5JPH9cAC8He7/rvg9dXd99He3l6wrqWlZSKaIiITYMJyLHM/dRufmuHJvW5paSlYysvkKJJRfPkFs5PBMsWuxyqQ7cB50iPHj128u+h8x0fex1Nw0FiFu6spgl36PHYB75FfeSeD+e9fedFwkWpMWGD5v2HD1eGRXzG3t7cXLGPrJdwKHbmC2R488Ua7VGMqAuGX8wpot7I0lS3jmGJzZ23exV/NeUoV1E4TfTlzfJni3aWLcPcS7h95H2+sNe/Jh+XaW00R7PLnqQn1kAjEaI2mIRnEfz5Cqq2+gu9K5CY4Xehpz0vfMwMDA7nl6tWrhm//2ni+82vDt+3l6tWrJZc9L32vxBkTJoDXRFIVvE4EsgXrChavvbG684xRECoV8eadP1OMqewxxe+TMhFvBe0tdb5y7zHm5862AUN+O8Y9RuTGTUiOBaC45Ep+L8XR/Io3QqqnVB0TBwrMpqP4asMQSWFMTeZ1/82ds1x7q+05lP3cDh8jUoFJm8dSWX6lSqMKR0MyeAMP/SpXUDvVT2/eo0HSxzvpHe+YG23veEWwxyyYXfi5k0F7iJaKQLg5Mw/Gqe9KpIQJ6bFc3X3fRLwN2ULYvloP2TRxIGFou+nzBEiYNmA7kdZaaj1hALyBAN5xjxmrpzRWe+0i2B6/J1ONzkskEoDO6s6TDHoyeZUaaugg0llLbXAJps2p70pkNMcryGlKv4ioNKWIOG7SfyskItOPAouIOE6BRUQcp8AiIo5TYBERxymwiIjjXJsgd+jQIfsxqtlHq1qZR6pm1lnG8OnZs1m/fr1qtohMM64FFssYnmxqyr02uT9snZ1HWLFiBccTCTb4/QouItOIa0MhY1kADFsWw8MWw8PDDA8Pcz2zgF1dbtXKlRw9esytZojIJHAvsGR/zmzAYIq3AnDw4EGSySR/+eugg+/sYPHqqt96ChW7LmhLkqAnv26Mfmwo7nItsFiWHTyyQaXvdB9790bp6zsNwOOPb+QfntlGKBTGWMWBZzpJE/XlVYEreVEXVYoLFvzkOO/YSQqYIlVyscdi5fopHQd/wNy7FuL/RhOz5i3kQFusoA9jGesm3sm+cKdk5bN0FJ+nlv6dI1XgjGkknt+rSQbxFFWKM43xTJnIJMHWpaRyFevqCNeqtyFTn3s9FmPAwNkzZ/F+bS33L76HM72/ZNl99/Llrz/KubNnyQ6JpmePJU20OUxdwtBWn7++nrZccaUkQX/MLleQv099W6asZf6+2DVUOM9F9VpkinM9edvdfZI7Zs/mx11dNDU1EX+ti8/MmUN3d3euqpwpLi9XINsjKRwujNSFrSXci12/Nr8nULJ4ddG5CnIQZYpKV1E8u6DYdfo4nUTYXhBUiiTjxLzj7FO8P3UsKVnyrZrC2yLucrfHAqxdt46hoSE2btrE4cOH2dDQwHu/e5/rs+by81O9XLlyBcsafygU88dpHFXEup42kyLitYsUmdz/7uWKVxedqydEzZhFpccvnl222HWqn4LHrxUEqBsYzqSj+PwxAok2Rsehagpvi7jPxR6LXZ95+bLl9Jz6Ben33mfVV9byq9+8y+U77mHLli1c/twXefPMuXF6LLaCC6p+OxFvjHjZq9NLJNsNqNnA5qKntxacKxknRi/h2uxFb/eAzl9MAzWE2kIQ9Y3uBZTobdQ3jnE114ToMQZjElR7zaejPjy1nWxOFQ+rbrAtIi5zscdi5Uq/P/3U01z+/QA/+dEh3jjdx6NL7uT13w5Sf/98PvzDn24yeesAb2QkQZr/6I5ML6OZjpHeT6XnrG8k0NvJ8bHyIRXskwx6qO3fiTE9hFT1Wm4REzCPxYAxrFq9mme2bWPVg3WcuPhHHvnCHH564TIrH3ygouRtLK97ko42E+4N0FhpbmIsYxWVrqp4dlGxa+rZHoFw7Vi3iMvskwzaeZ50lNZYgESpbsqYxbSL2yIysdydx2JGHliT9VDdl/js5X5O/OwED8z8M3ffdWcuHzOWAPFcYrI2XEfCZIczNWzY7B2dvK2YXVT6vH8k8RlvzJy7fjsRwtRm1jf31xUWz84+9MzjweNphs2Fw4+aUA8mtZnO2rykqsfP+cj23FCsJtSTuY2ct0+80e4xpfrpJYY/Pyk7KoFcWVtEJpJrNW/37d/P1m9t5dr16/YKM3r+LcDMmTP415de4p937ChzpjRRnz0XpGR+QUSmHFd/hGgwzJhx+/j7Tst5LCKfXK4FFmMZ9u3fj7FMpmxCpnyCsTCWsQOPsTLlFBRYRKYTPf5DRBynCnIi4jgFFhFxnAKLiDhOgUVEHKfAIiKOU2AREcf9P/gtt3CW5hgoAAAAAElFTkSuQmCC" alt="image-20220226174957040"></p><p>â€‹ å¯æ‰§è¡Œæ–‡ä»¶åªæœ‰ä¸€ä¸ªmemcached.exeï¼Œä½¿ç”¨è¯¥æ–‡ä»¶å¯ä»¥å°†memcachedä½œä¸ºç³»ç»ŸæœåŠ¡å¯åŠ¨ï¼Œæ‰§è¡Œæ­¤æ–‡ä»¶æ—¶ä¼šå‡ºç°æŠ¥é”™ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><img src="/assets/image-20220226175141986.03482c5a.png" alt="image-20220226175141986" style="zoom:80%;"><p>â€‹ æ­¤å¤„å‡ºç°é—®é¢˜çš„åŸå› æ˜¯æ³¨å†Œç³»ç»ŸæœåŠ¡æ—¶éœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æƒé™ï¼Œå½“å‰è´¦å·æƒé™ä¸è¶³å¯¼è‡´å®‰è£…æœåŠ¡å¤±è´¥ï¼Œåˆ‡æ¢ç®¡ç†å‘˜è´¦å·æƒé™å¯åŠ¨å‘½ä»¤è¡Œ</p><img src="/assets/image-20220226175302903.b6df5ce8.png" alt="image-20220226175302903" style="zoom:80%;"><p>â€‹ ç„¶åå†æ¬¡æ‰§è¡Œå®‰è£…æœåŠ¡çš„å‘½ä»¤å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>memcached.exe -d install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ æœåŠ¡å®‰è£…å®Œæ¯•åå¯ä»¥ä½¿ç”¨å‘½ä»¤å¯åŠ¨å’Œåœæ­¢æœåŠ¡ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-cmd ext-cmd line-numbers-mode"><pre class="language-cmd"><code>memcached.exe -d start		# å¯åŠ¨æœåŠ¡
memcached.exe -d stop		# åœæ­¢æœåŠ¡
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¹Ÿå¯ä»¥åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­è¿›è¡ŒæœåŠ¡çŠ¶æ€çš„åˆ‡æ¢</p><img src="/assets/image-20220226175441675.6568c5e9.png" alt="image-20220226175441675" style="zoom:67%;"><p><strong>å˜æ›´ç¼“å­˜ä¸ºMemcached</strong></p><p>â€‹ ç”±äºmemcachedæœªè¢«springbootæ”¶å½•ä¸ºç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤ä½¿ç”¨memcachedéœ€è¦é€šè¿‡æ‰‹å·¥ç¡¬ç¼–ç çš„æ–¹å¼æ¥ä½¿ç”¨ï¼Œäºæ˜¯å‰é¢çš„å¥—è·¯éƒ½ä¸é€‚ç”¨äº†ï¼Œéœ€è¦è‡ªå·±å†™äº†ã€‚</p><p>â€‹ memcachedç›®å‰æä¾›æœ‰ä¸‰ç§å®¢æˆ·ç«¯æŠ€æœ¯ï¼Œåˆ†åˆ«æ˜¯Memcached Client for Javaã€SpyMemcachedå’ŒXmemcachedï¼Œå…¶ä¸­æ€§èƒ½æŒ‡æ ‡å„æ–¹é¢æœ€å¥½çš„å®¢æˆ·ç«¯æ˜¯Xmemcachedï¼Œæœ¬æ¬¡æ•´åˆå°±ä½¿ç”¨è¿™ä¸ªä½œä¸ºå®¢æˆ·ç«¯å®ç°æŠ€æœ¯äº†ã€‚ä¸‹é¢å¼€å§‹ä½¿ç”¨Xmemcached</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥xmemcachedçš„åæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.googlecode.xmemcached<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>xmemcached<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.4.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®memcachedï¼Œåˆ¶ä½œmemcachedçš„é…ç½®ç±»</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XMemcachedConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MemcachedClient</span> <span class="token function">getMemcachedClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">MemcachedClientBuilder</span> memcachedClientBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMemcachedClientBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:11211&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MemcachedClient</span> memcachedClient <span class="token operator">=</span> memcachedClientBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> memcachedClient<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ memcachedé»˜è®¤å¯¹å¤–æœåŠ¡ç«¯å£11211ã€‚</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨xmemcachedå®¢æˆ·ç«¯æ“ä½œç¼“å­˜ï¼Œæ³¨å…¥MemcachedClientå¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCodeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SMSCodeService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CodeUtils</span> codeUtils<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MemcachedClient</span> memcachedClient<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> codeUtils<span class="token punctuation">.</span><span class="token function">generator</span><span class="token punctuation">(</span>tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            memcachedClient<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>tele<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token class-name">SMSCode</span> smsCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            code <span class="token operator">=</span> memcachedClient<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>smsCode<span class="token punctuation">.</span><span class="token function">getTele</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> smsCode<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è®¾ç½®å€¼åˆ°ç¼“å­˜ä¸­ä½¿ç”¨setæ“ä½œï¼Œå–å€¼ä½¿ç”¨getæ“ä½œï¼Œå…¶å®æ›´ç¬¦åˆæˆ‘ä»¬å¼€å‘è€…çš„ä¹ æƒ¯ã€‚</p><p>â€‹ ä¸Šè¿°ä»£ç ä¸­å¯¹äºæœåŠ¡å™¨çš„é…ç½®ä½¿ç”¨ç¡¬ç¼–ç å†™æ­»åˆ°äº†ä»£ç ä¸­ï¼Œå°†æ­¤æ•°æ®æå–å‡ºæ¥ï¼Œåšæˆç‹¬ç«‹çš„é…ç½®å±æ€§ã€‚</p><p><strong>å®šä¹‰é…ç½®å±æ€§</strong></p><p>â€‹ ä»¥ä¸‹è¿‡ç¨‹é‡‡ç”¨å‰æœŸå­¦ä¹ çš„å±æ€§é…ç½®æ–¹å¼è¿›è¡Œï¼Œå½“å‰æ“ä½œæœ‰åŠ©äºç†è§£åŸç†ç¯‡ä¸­çš„å¾ˆå¤šçŸ¥è¯†ã€‚</p><ul><li><p>å®šä¹‰é…ç½®ç±»ï¼ŒåŠ è½½å¿…è¦çš„é…ç½®å±æ€§ï¼Œè¯»å–é…ç½®æ–‡ä»¶ä¸­memcachedèŠ‚ç‚¹ä¿¡æ¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;memcached&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XMemcachedProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> servers<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> poolSize<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> opTimeout<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å®šä¹‰memcachedèŠ‚ç‚¹ä¿¡æ¯</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">memcached</span><span class="token punctuation">:</span>
  <span class="token key atrule">servers</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">11211</span>
  <span class="token key atrule">poolSize</span><span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token key atrule">opTimeout</span><span class="token punctuation">:</span> <span class="token number">3000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åœ¨memcachedé…ç½®ç±»ä¸­åŠ è½½ä¿¡æ¯</p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XMemcachedConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">XMemcachedProperties</span> props<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MemcachedClient</span> <span class="token function">getMemcachedClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">MemcachedClientBuilder</span> memcachedClientBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMemcachedClientBuilder</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token function">getServers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memcachedClientBuilder<span class="token punctuation">.</span><span class="token function">setConnectionPoolSize</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token function">getPoolSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memcachedClientBuilder<span class="token punctuation">.</span><span class="token function">setOpTimeout</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token function">getOpTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MemcachedClient</span> memcachedClient <span class="token operator">=</span> memcachedClientBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> memcachedClient<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>memcachedå®‰è£…åéœ€è¦å¯åŠ¨å¯¹åº”æœåŠ¡æ‰å¯ä»¥å¯¹å¤–æä¾›ç¼“å­˜åŠŸèƒ½ï¼Œå®‰è£…memcachedæœåŠ¡éœ€è¦åŸºäºwindowsç³»ç»Ÿç®¡ç†å‘˜æƒé™</li><li>ç”±äºspringbootæ²¡æœ‰æä¾›å¯¹memcachedçš„ç¼“å­˜æ•´åˆæ–¹æ¡ˆï¼Œéœ€è¦é‡‡ç”¨æ‰‹å·¥ç¼–ç çš„å½¢å¼åˆ›å»ºxmemcachedå®¢æˆ·ç«¯æ“ä½œç¼“å­˜</li><li>å¯¼å…¥xmemcachedåæ ‡åï¼Œåˆ›å»ºmemcachedé…ç½®ç±»ï¼Œæ³¨å†ŒMemcachedClientå¯¹åº”çš„beanï¼Œç”¨äºæ“ä½œç¼“å­˜</li><li>åˆå§‹åŒ–MemcachedClientå¯¹è±¡æ‰€éœ€è¦ä½¿ç”¨çš„å±æ€§å¯ä»¥é€šè¿‡è‡ªå®šä¹‰é…ç½®å±æ€§ç±»çš„å½¢å¼åŠ è½½</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ åˆ°è¿™é‡Œå·²ç»å®Œæˆäº†ä¸‰ç§ç¼“å­˜çš„æ•´åˆï¼Œå…¶ä¸­rediså’Œmongodbéœ€è¦å®‰è£…ç‹¬ç«‹çš„æœåŠ¡å™¨ï¼Œè¿æ¥æ—¶éœ€è¦è¾“å…¥å¯¹åº”çš„æœåŠ¡å™¨åœ°å€ï¼Œè¿™ç§æ˜¯è¿œç¨‹ç¼“å­˜ï¼ŒEhcacheæ˜¯ä¸€ä¸ªå…¸å‹çš„å†…å­˜çº§ç¼“å­˜ï¼Œå› ä¸ºå®ƒä»€ä¹ˆä¹Ÿä¸ç”¨å®‰è£…ï¼Œå¯åŠ¨åå¯¼å…¥jaråŒ…å°±æœ‰ç¼“å­˜åŠŸèƒ½äº†ã€‚è¿™ä¸ªæ—¶å€™å°±è¦é—®äº†ï¼Œèƒ½ä¸èƒ½è¿™ä¸¤ç§ç¼“å­˜ä¸€èµ·ç”¨å‘¢ï¼Ÿå’±ä»¬ä¸‹èŠ‚å†è¯´ã€‚</p><h4 id="springbootæ•´åˆjetcacheç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆjetcacheç¼“å­˜" aria-hidden="true">#</a> SpringBootæ•´åˆjetcacheç¼“å­˜</h4><p>â€‹ ç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„ç¼“å­˜éƒ½æ˜¯è¦ä¹ˆAè¦ä¹ˆBï¼Œèƒ½ä¸èƒ½ABä¸€èµ·ç”¨å‘¢ï¼Ÿè¿™ä¸€èŠ‚å°±è§£å†³è¿™ä¸ªé—®é¢˜ã€‚springbooté’ˆå¯¹ç¼“å­˜çš„æ•´åˆä»…ä»…åœç•™åœ¨ç”¨ç¼“å­˜ä¸Šé¢ï¼Œå¦‚æœç¼“å­˜è‡ªèº«ä¸æ”¯æŒåŒæ—¶æ”¯æŒABä¸€èµ·ç”¨ï¼Œspringbootä¹Ÿæ²¡åŠæ³•ï¼Œæ‰€ä»¥è¦æƒ³è§£å†³ABç¼“å­˜ä¸€èµ·ç”¨çš„é—®é¢˜ï¼Œå°±å¿…é¡»æ‰¾ä¸€æ¬¾ç¼“å­˜èƒ½å¤Ÿæ”¯æŒABä¸¤ç§ç¼“å­˜ä¸€èµ·ç”¨ï¼Œæœ‰è¿™ç§ç¼“å­˜å—ï¼Ÿè¿˜çœŸæœ‰ï¼Œé˜¿é‡Œå‡ºå“ï¼Œjetcacheã€‚</p><p>â€‹ jetcacheä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œåªèƒ½è¯´ä»–ç®—æ˜¯ä¸€ä¸ªç¼“å­˜æ¡†æ¶ï¼Œç„¶åæŠŠåˆ«çš„ç¼“å­˜æ”¾åˆ°jetcacheä¸­ç®¡ç†ï¼Œè¿™æ ·å°±å¯ä»¥æ”¯æŒABç¼“å­˜ä¸€èµ·ç”¨äº†ã€‚å¹¶ä¸”jetcacheå‚è€ƒäº†springbootæ•´åˆç¼“å­˜çš„æ€æƒ³ï¼Œæ•´ä½“æŠ€æœ¯ä½¿ç”¨æ–¹å¼å’Œspringbootçš„ç¼“å­˜è§£å†³æ–¹æ¡ˆæ€æƒ³éå¸¸ç±»ä¼¼ã€‚ä¸‹é¢å’±ä»¬å°±å…ˆæŠŠjetcacheç”¨èµ·æ¥ï¼Œç„¶åå†è¯´å®ƒé‡Œé¢çš„ä¸€äº›å°çš„åŠŸèƒ½ã€‚</p><p>â€‹ åšä¹‹å‰è¦å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œjetcacheå¹¶ä¸æ˜¯éšä¾¿æ‹¿ä¸¤ä¸ªç¼“å­˜éƒ½èƒ½æ‹¼åˆ°ä¸€èµ·å»çš„ã€‚ç›®å‰jetcacheæ”¯æŒçš„ç¼“å­˜æ–¹æ¡ˆæœ¬åœ°ç¼“å­˜æ”¯æŒä¸¤ç§ï¼Œè¿œç¨‹ç¼“å­˜æ”¯æŒä¸¤ç§ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li>æœ¬åœ°ç¼“å­˜ï¼ˆLocalï¼‰ <ul><li>LinkedHashMap</li><li>Caffeine</li></ul></li><li>è¿œç¨‹ç¼“å­˜ï¼ˆRemoteï¼‰ <ul><li>Redis</li><li>Tair</li></ul></li></ul><p>â€‹ å…¶å®ä¹Ÿæœ‰äººé—®æˆ‘ï¼Œä¸ºä»€ä¹ˆjetcacheåªæ”¯æŒ2+2è¿™ä¹ˆ4æ¬¾ç¼“å­˜å‘¢ï¼Ÿé˜¿é‡Œç ”å‘è¿™ä¸ªæŠ€æœ¯å…¶å®ä¸»è¦æ˜¯ä¸ºäº†æ»¡è¶³è‡ªèº«çš„ä½¿ç”¨éœ€è¦ã€‚æœ€åˆè‚¯å®šåªæœ‰1+1ç§ï¼Œé€æ­¥å˜åŒ–æˆ2+2ç§ã€‚ä¸‹é¢å°±ä»¥LinkedHashMap+Redisçš„æ–¹æ¡ˆå®ç°æœ¬åœ°ä¸è¿œç¨‹ç¼“å­˜æ–¹æ¡ˆåŒæ—¶ä½¿ç”¨ã€‚</p><h5 id="çº¯è¿œç¨‹æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#çº¯è¿œç¨‹æ–¹æ¡ˆ" aria-hidden="true">#</a> çº¯è¿œç¨‹æ–¹æ¡ˆ</h5><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆjetcacheå¯¹åº”çš„åæ ‡starterï¼Œå½“å‰åæ ‡é»˜è®¤ä½¿ç”¨çš„è¿œç¨‹æ–¹æ¡ˆæ˜¯redis</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alicp.jetcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jetcache-starter-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šè¿œç¨‹æ–¹æ¡ˆåŸºæœ¬é…ç½®</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">jetcache</span><span class="token punctuation">:</span>
  <span class="token key atrule">remote</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">poolConfig</span><span class="token punctuation">:</span>
        <span class="token key atrule">maxTotal</span><span class="token punctuation">:</span> <span class="token number">50</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å…¶ä¸­poolConfigæ˜¯å¿…é…é¡¹ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šå¯ç”¨ç¼“å­˜ï¼Œåœ¨å¼•å¯¼ç±»ä¸Šæ–¹æ ‡æ³¨æ³¨è§£@EnableCreateCacheAnnotationé…ç½®springbootç¨‹åºä¸­å¯ä»¥ä½¿ç”¨æ³¨è§£çš„å½¢å¼åˆ›å»ºç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token comment">//jetcacheå¯ç”¨ç¼“å­˜çš„ä¸»å¼€å…³</span>
<span class="token annotation punctuation">@EnableCreateCacheAnnotation</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot20JetCacheApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Springboot20JetCacheApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘£</strong>ï¼šåˆ›å»ºç¼“å­˜å¯¹è±¡Cacheï¼Œå¹¶ä½¿ç”¨æ³¨è§£@CreateCacheæ ‡è®°å½“å‰ç¼“å­˜çš„ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨Cacheå¯¹è±¡çš„APIæ“ä½œç¼“å­˜ï¼Œputå†™ç¼“å­˜ï¼Œgetè¯»ç¼“å­˜ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCodeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SMSCodeService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CodeUtils</span> codeUtils<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@CreateCache</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;jetCache_&quot;</span><span class="token punctuation">,</span>expire <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>timeUnit <span class="token operator">=</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Cache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span> <span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> jetCache<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> codeUtils<span class="token punctuation">.</span><span class="token function">generator</span><span class="token punctuation">(</span>tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        jetCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>tele<span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token class-name">SMSCode</span> smsCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> jetCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>smsCode<span class="token punctuation">.</span><span class="token function">getTele</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> smsCode<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ é€šè¿‡ä¸Šè¿°jetcacheä½¿ç”¨è¿œç¨‹æ–¹æ¡ˆè¿æ¥rediså¯ä»¥çœ‹å‡ºï¼Œjetcacheæ“ä½œç¼“å­˜æ—¶çš„æ¥å£æ“ä½œæ›´ç¬¦åˆå¼€å‘è€…ä¹ æƒ¯ï¼Œä½¿ç”¨ç¼“å­˜å°±å…ˆè·å–ç¼“å­˜å¯¹è±¡Cacheï¼Œæ”¾æ•°æ®è¿›å»å°±æ˜¯putï¼Œå–æ•°æ®å‡ºæ¥å°±æ˜¯getï¼Œæ›´åŠ ç®€å•æ˜“æ‡‚ã€‚å¹¶ä¸”jetcacheæ“ä½œç¼“å­˜æ—¶ï¼Œå¯ä»¥ä¸ºæŸä¸ªç¼“å­˜å¯¹è±¡è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå°†åŒç±»å‹çš„æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­ï¼Œæ–¹ä¾¿æœ‰æ•ˆå‘¨æœŸçš„ç®¡ç†ã€‚</p><p>â€‹ ä¸Šè¿°æ–¹æ¡ˆä¸­ä½¿ç”¨çš„æ˜¯é…ç½®ä¸­å®šä¹‰çš„defaultç¼“å­˜ï¼Œå…¶å®è¿™ä¸ªdefaultæ˜¯ä¸ªåå­—ï¼Œå¯ä»¥éšä¾¿å†™ï¼Œä¹Ÿå¯ä»¥éšä¾¿åŠ ã€‚ä¾‹å¦‚å†æ·»åŠ ä¸€ç§ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œå‚ç…§å¦‚ä¸‹é…ç½®è¿›è¡Œï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">jetcache</span><span class="token punctuation">:</span>
  <span class="token key atrule">remote</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">poolConfig</span><span class="token punctuation">:</span>
        <span class="token key atrule">maxTotal</span><span class="token punctuation">:</span> <span class="token number">50</span>
    <span class="token key atrule">sms</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">poolConfig</span><span class="token punctuation">:</span>
        <span class="token key atrule">maxTotal</span><span class="token punctuation">:</span> <span class="token number">50</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¦‚æœæƒ³ä½¿ç”¨åç§°æ˜¯smsçš„ç¼“å­˜ï¼Œéœ€è¦å†åˆ›å»ºç¼“å­˜æ—¶æŒ‡å®šå‚æ•°areaï¼Œå£°æ˜ä½¿ç”¨å¯¹åº”ç¼“å­˜å³å¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCodeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SMSCodeService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CodeUtils</span> codeUtils<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@CreateCache</span><span class="token punctuation">(</span>area<span class="token operator">=</span><span class="token string">&quot;sms&quot;</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;jetCache_&quot;</span><span class="token punctuation">,</span>expire <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>timeUnit <span class="token operator">=</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Cache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span> <span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> jetCache<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> codeUtils<span class="token punctuation">.</span><span class="token function">generator</span><span class="token punctuation">(</span>tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        jetCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>tele<span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token class-name">SMSCode</span> smsCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> jetCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>smsCode<span class="token punctuation">.</span><span class="token function">getTele</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> smsCode<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="çº¯æœ¬åœ°æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#çº¯æœ¬åœ°æ–¹æ¡ˆ" aria-hidden="true">#</a> çº¯æœ¬åœ°æ–¹æ¡ˆ</h5><p>â€‹ è¿œç¨‹æ–¹æ¡ˆä¸­ï¼Œé…ç½®ä¸­ä½¿ç”¨remoteè¡¨ç¤ºè¿œç¨‹ï¼Œæ¢æˆlocalå°±æ˜¯æœ¬åœ°ï¼Œåªä¸è¿‡ç±»å‹ä¸ä¸€æ ·è€Œå·²ã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆjetcacheå¯¹åº”çš„åæ ‡starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alicp.jetcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jetcache-starter-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šæœ¬åœ°ç¼“å­˜åŸºæœ¬é…ç½®</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">jetcache</span><span class="token punctuation">:</span>
  <span class="token key atrule">local</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> linkedhashmap
      <span class="token key atrule">keyConvertor</span><span class="token punctuation">:</span> fastjson
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸ºäº†åŠ é€Ÿæ•°æ®è·å–æ—¶keyçš„åŒ¹é…é€Ÿåº¦ï¼Œjetcacheè¦æ±‚æŒ‡å®škeyçš„ç±»å‹è½¬æ¢å™¨ã€‚ç®€å•è¯´å°±æ˜¯ï¼Œå¦‚æœä½ ç»™äº†ä¸€ä¸ªObjectä½œä¸ºkeyçš„è¯ï¼Œæˆ‘å…ˆç”¨keyçš„ç±»å‹è½¬æ¢å™¨ç»™è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶åå†ä¿å­˜ã€‚ç­‰åˆ°è·å–æ•°æ®æ—¶ï¼Œä»ç„¶æ˜¯å…ˆä½¿ç”¨ç»™å®šçš„Objectè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶åæ ¹æ®å­—ç¬¦ä¸²åŒ¹é…ã€‚ç”±äºjetcacheæ˜¯é˜¿é‡Œçš„æŠ€æœ¯ï¼Œè¿™é‡Œæ¨èkeyçš„ç±»å‹è½¬æ¢å™¨ä½¿ç”¨é˜¿é‡Œçš„fastjsonã€‚</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šå¯ç”¨ç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token comment">//jetcacheå¯ç”¨ç¼“å­˜çš„ä¸»å¼€å…³</span>
<span class="token annotation punctuation">@EnableCreateCacheAnnotation</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot20JetCacheApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Springboot20JetCacheApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘£</strong>ï¼šåˆ›å»ºç¼“å­˜å¯¹è±¡Cacheæ—¶ï¼Œæ ‡æ³¨å½“å‰ä½¿ç”¨æœ¬åœ°ç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCodeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SMSCodeService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@CreateCache</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;jetCache_&quot;</span><span class="token punctuation">,</span>expire <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span>timeUnit <span class="token operator">=</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span>cacheType <span class="token operator">=</span> <span class="token class-name">CacheType</span><span class="token punctuation">.</span><span class="token constant">LOCAL</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Cache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span> <span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> jetCache<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> codeUtils<span class="token punctuation">.</span><span class="token function">generator</span><span class="token punctuation">(</span>tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        jetCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>tele<span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token class-name">SMSCode</span> smsCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> jetCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>smsCode<span class="token punctuation">.</span><span class="token function">getTele</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> smsCode<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ cacheTypeæ§åˆ¶å½“å‰ç¼“å­˜ä½¿ç”¨æœ¬åœ°ç¼“å­˜è¿˜æ˜¯è¿œç¨‹ç¼“å­˜ï¼Œé…ç½®cacheType=CacheType.LOCALå³ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚</p><h5 id="æœ¬åœ°-è¿œç¨‹æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#æœ¬åœ°-è¿œç¨‹æ–¹æ¡ˆ" aria-hidden="true">#</a> æœ¬åœ°+è¿œç¨‹æ–¹æ¡ˆ</h5><p>â€‹ æœ¬åœ°å’Œè¿œç¨‹æ–¹æ³•éƒ½æœ‰äº†ï¼Œä¸¤ç§æ–¹æ¡ˆä¸€èµ·ä½¿ç”¨å¦‚ä½•é…ç½®å‘¢ï¼Ÿå…¶å®å°±æ˜¯å°†ä¸¤ç§é…ç½®åˆå¹¶åˆ°ä¸€èµ·å°±å¯ä»¥äº†ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">jetcache</span><span class="token punctuation">:</span>
  <span class="token key atrule">local</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> linkedhashmap
      <span class="token key atrule">keyConvertor</span><span class="token punctuation">:</span> fastjson
  <span class="token key atrule">remote</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">poolConfig</span><span class="token punctuation">:</span>
        <span class="token key atrule">maxTotal</span><span class="token punctuation">:</span> <span class="token number">50</span>
    <span class="token key atrule">sms</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">poolConfig</span><span class="token punctuation">:</span>
        <span class="token key atrule">maxTotal</span><span class="token punctuation">:</span> <span class="token number">50</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ åœ¨åˆ›å»ºç¼“å­˜çš„æ—¶å€™ï¼Œé…ç½®cacheTypeä¸ºBOTHå³åˆ™æœ¬åœ°ç¼“å­˜ä¸è¿œç¨‹ç¼“å­˜åŒæ—¶ä½¿ç”¨ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCodeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SMSCodeService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@CreateCache</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;jetCache_&quot;</span><span class="token punctuation">,</span>expire <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span>timeUnit <span class="token operator">=</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span>cacheType <span class="token operator">=</span> <span class="token class-name">CacheType</span><span class="token punctuation">.</span><span class="token constant">BOTH</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Cache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span> <span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> jetCache<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ cacheTypeå¦‚æœä¸è¿›è¡Œé…ç½®ï¼Œé»˜è®¤å€¼æ˜¯REMOTEï¼Œå³ä»…ä½¿ç”¨è¿œç¨‹ç¼“å­˜æ–¹æ¡ˆã€‚å…³äºjetcacheçš„é…ç½®ï¼Œå‚è€ƒä»¥ä¸‹ä¿¡æ¯</p><table><thead><tr><th>å±æ€§</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>jetcache.statIntervalMinutes</td><td>0</td><td>ç»Ÿè®¡é—´éš”ï¼Œ0è¡¨ç¤ºä¸ç»Ÿè®¡</td></tr><tr><td>jetcache.hiddenPackages</td><td>æ— </td><td>è‡ªåŠ¨ç”Ÿæˆnameæ—¶ï¼Œéšè—æŒ‡å®šçš„åŒ…åå‰ç¼€</td></tr><tr><td>jetcache.[local|remote].${area}.type</td><td>æ— </td><td>ç¼“å­˜ç±»å‹ï¼Œæœ¬åœ°æ”¯æŒlinkedhashmapã€caffeineï¼Œè¿œç¨‹æ”¯æŒredisã€tair</td></tr><tr><td>jetcache.[local|remote].${area}.keyConvertor</td><td>æ— </td><td>keyè½¬æ¢å™¨ï¼Œå½“å‰ä»…æ”¯æŒfastjson</td></tr><tr><td>jetcache.[local|remote].${area}.valueEncoder</td><td>java</td><td>ä»…remoteç±»å‹çš„ç¼“å­˜éœ€è¦æŒ‡å®šï¼Œå¯é€‰javaå’Œkryo</td></tr><tr><td>jetcache.[local|remote].${area}.valueDecoder</td><td>java</td><td>ä»…remoteç±»å‹çš„ç¼“å­˜éœ€è¦æŒ‡å®šï¼Œå¯é€‰javaå’Œkryo</td></tr><tr><td>jetcache.[local|remote].${area}.limit</td><td>100</td><td>ä»…localç±»å‹çš„ç¼“å­˜éœ€è¦æŒ‡å®šï¼Œç¼“å­˜å®ä¾‹æœ€å¤§å…ƒç´ æ•°</td></tr><tr><td>jetcache.[local|remote].${area}.expireAfterWriteInMillis</td><td>æ— ç©·å¤§</td><td>é»˜è®¤è¿‡æœŸæ—¶é—´ï¼Œæ¯«ç§’å•ä½</td></tr><tr><td>jetcache.local.${area}.expireAfterAccessInMillis</td><td>0</td><td>ä»…localç±»å‹çš„ç¼“å­˜æœ‰æ•ˆï¼Œæ¯«ç§’å•ä½ï¼Œæœ€å¤§ä¸æ´»åŠ¨é—´éš”</td></tr></tbody></table><p>â€‹ ä»¥ä¸Šæ–¹æ¡ˆä»…æ”¯æŒæ‰‹å·¥æ§åˆ¶ç¼“å­˜ï¼Œä½†æ˜¯springcacheæ–¹æ¡ˆä¸­çš„æ–¹æ³•ç¼“å­˜ç‰¹åˆ«å¥½ç”¨ï¼Œç»™ä¸€ä¸ªæ–¹æ³•æ·»åŠ ä¸€ä¸ªæ³¨è§£ï¼Œæ–¹æ³•å°±ä¼šè‡ªåŠ¨ä½¿ç”¨ç¼“å­˜ã€‚jetcacheä¹Ÿæä¾›äº†å¯¹åº”çš„åŠŸèƒ½ï¼Œå³æ–¹æ³•ç¼“å­˜ã€‚</p><p><strong>æ–¹æ³•ç¼“å­˜</strong></p><p>â€‹ jetcacheæä¾›äº†æ–¹æ³•ç¼“å­˜æ–¹æ¡ˆï¼Œåªä¸è¿‡åç§°å˜æ›´äº†è€Œå·²ã€‚åœ¨å¯¹åº”çš„æ“ä½œæ¥å£ä¸Šæ–¹ä½¿ç”¨æ³¨è§£@Cachedå³å¯</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆjetcacheå¯¹åº”çš„åæ ‡starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alicp.jetcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jetcache-starter-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®ç¼“å­˜</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">jetcache</span><span class="token punctuation">:</span>
  <span class="token key atrule">local</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> linkedhashmap
      <span class="token key atrule">keyConvertor</span><span class="token punctuation">:</span> fastjson
  <span class="token key atrule">remote</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">keyConvertor</span><span class="token punctuation">:</span> fastjson
      <span class="token key atrule">valueEncode</span><span class="token punctuation">:</span> java
      <span class="token key atrule">valueDecode</span><span class="token punctuation">:</span> java
      <span class="token key atrule">poolConfig</span><span class="token punctuation">:</span>
        <span class="token key atrule">maxTotal</span><span class="token punctuation">:</span> <span class="token number">50</span>
    <span class="token key atrule">sms</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">poolConfig</span><span class="token punctuation">:</span>
        <span class="token key atrule">maxTotal</span><span class="token punctuation">:</span> <span class="token number">50</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ç”±äºredisç¼“å­˜ä¸­ä¸æ”¯æŒä¿å­˜å¯¹è±¡ï¼Œå› æ­¤éœ€è¦å¯¹redisè®¾ç½®å½“Objectç±»å‹æ•°æ®è¿›å…¥åˆ°redisä¸­æ—¶å¦‚ä½•è¿›è¡Œç±»å‹è½¬æ¢ã€‚éœ€è¦é…ç½®keyConvertorè¡¨ç¤ºkeyçš„ç±»å‹è½¬æ¢æ–¹å¼ï¼ŒåŒæ—¶æ ‡æ³¨valueçš„è½¬æ¢ç±»å‹æ–¹å¼ï¼Œå€¼è¿›å…¥redisæ—¶æ˜¯javaç±»å‹ï¼Œæ ‡æ³¨valueEncodeä¸ºjavaï¼Œå€¼ä»redisä¸­è¯»å–æ—¶è½¬æ¢æˆjavaï¼Œæ ‡æ³¨valueDecodeä¸ºjavaã€‚</p><p>â€‹ æ³¨æ„ï¼Œä¸ºäº†å®ç°Objectç±»å‹çš„å€¼è¿›å‡ºredisï¼Œéœ€è¦ä¿éšœè¿›å‡ºredisçš„Objectç±»å‹çš„æ•°æ®å¿…é¡»å®ç°åºåˆ—åŒ–æ¥å£ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šå¯ç”¨ç¼“å­˜æ—¶å¼€å¯æ–¹æ³•ç¼“å­˜åŠŸèƒ½ï¼Œå¹¶é…ç½®basePackagesï¼Œè¯´æ˜åœ¨å“ªäº›åŒ…ä¸­å¼€å¯æ–¹æ³•ç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token comment">//jetcacheå¯ç”¨ç¼“å­˜çš„ä¸»å¼€å…³</span>
<span class="token annotation punctuation">@EnableCreateCacheAnnotation</span>
<span class="token comment">//å¼€å¯æ–¹æ³•æ³¨è§£ç¼“å­˜</span>
<span class="token annotation punctuation">@EnableMethodCache</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.itheima&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot20JetCacheApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Springboot20JetCacheApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘£</strong>ï¼šä½¿ç”¨æ³¨è§£@Cachedæ ‡æ³¨å½“å‰æ–¹æ³•ä½¿ç”¨ç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookDao</span> bookDao<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@Cached</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;book_&quot;</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">&quot;#id&quot;</span><span class="token punctuation">,</span>expire <span class="token operator">=</span> <span class="token number">3600</span><span class="token punctuation">,</span>cacheType <span class="token operator">=</span> <span class="token class-name">CacheType</span><span class="token punctuation">.</span><span class="token constant">REMOTE</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Book</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookDao<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="è¿œç¨‹æ–¹æ¡ˆçš„æ•°æ®åŒæ­¥" tabindex="-1"><a class="header-anchor" href="#è¿œç¨‹æ–¹æ¡ˆçš„æ•°æ®åŒæ­¥" aria-hidden="true">#</a> è¿œç¨‹æ–¹æ¡ˆçš„æ•°æ®åŒæ­¥</h5><p>â€‹ ç”±äºè¿œç¨‹æ–¹æ¡ˆä¸­redisä¿å­˜çš„æ•°æ®å¯ä»¥è¢«å¤šä¸ªå®¢æˆ·ç«¯å…±äº«ï¼Œè¿™å°±å­˜åœ¨äº†æ•°æ®åŒæ­¥é—®é¢˜ã€‚jetcacheæä¾›äº†3ä¸ªæ³¨è§£è§£å†³æ­¤é—®é¢˜ï¼Œåˆ†åˆ«åœ¨æ›´æ–°ã€åˆ é™¤æ“ä½œæ—¶åŒæ­¥ç¼“å­˜æ•°æ®ï¼Œå’Œè¯»å–ç¼“å­˜æ—¶å®šæ—¶åˆ·æ–°æ•°æ®</p><p><strong>æ›´æ–°ç¼“å­˜</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@CacheUpdate</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;book_&quot;</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">&quot;#book.id&quot;</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token string">&quot;#book&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> bookDao<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åˆ é™¤ç¼“å­˜</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@CacheInvalidate</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;book_&quot;</span><span class="token punctuation">,</span>key <span class="token operator">=</span> <span class="token string">&quot;#id&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> bookDao<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å®šæ—¶åˆ·æ–°ç¼“å­˜</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Cached</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;book_&quot;</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">&quot;#id&quot;</span><span class="token punctuation">,</span>expire <span class="token operator">=</span> <span class="token number">3600</span><span class="token punctuation">,</span>cacheType <span class="token operator">=</span> <span class="token class-name">CacheType</span><span class="token punctuation">.</span><span class="token constant">REMOTE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@CacheRefresh</span><span class="token punctuation">(</span>refresh <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Book</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> bookDao<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ•°æ®æŠ¥è¡¨" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æŠ¥è¡¨" aria-hidden="true">#</a> æ•°æ®æŠ¥è¡¨</h5><p>â€‹ jetcacheè¿˜æä¾›æœ‰ç®€å•çš„æ•°æ®æŠ¥è¡¨åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€ŸæŸ¥çœ‹ç¼“å­˜å‘½ä¸­ä¿¡æ¯ï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªé…ç½®å³å¯</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">jetcache</span><span class="token punctuation">:</span>
  <span class="token key atrule">statIntervalMinutes</span><span class="token punctuation">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è®¾ç½®åï¼Œæ¯1åˆ†é’Ÿåœ¨æ§åˆ¶å°è¾“å‡ºç¼“å­˜æ•°æ®å‘½ä¸­ä¿¡æ¯</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>[DefaultExecutor] c.alicp.jetcache.support.StatInfoLogger  : jetcache stat from 2022-02-28 09:32:15,892 to 2022-02-28 09:33:00,003
cache    |    qps|   rate|   get|    hit|   fail|   expire|   avgLoadTime|   maxLoadTime
---------+-------+-------+------+-------+-------+---------+--------------+--------------
book_    |   0.66| 75.86%|    29|     22|      0|        0|          28.0|           188
---------+-------+-------+------+-------+-------+---------+--------------+--------------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>jetcacheæ˜¯ä¸€ä¸ªç±»ä¼¼äºspringcacheçš„ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œè‡ªèº«ä¸å…·æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œå®ƒæä¾›æœ‰æœ¬åœ°ç¼“å­˜ä¸è¿œç¨‹ç¼“å­˜å¤šçº§å…±åŒä½¿ç”¨çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆ</li><li>jetcacheæä¾›çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆå—é™äºç›®å‰æ”¯æŒçš„æ–¹æ¡ˆï¼Œæœ¬åœ°ç¼“å­˜æ”¯æŒä¸¤ç§ï¼Œè¿œç¨‹ç¼“å­˜æ”¯æŒä¸¤ç§</li><li>æ³¨æ„æ•°æ®è¿›å…¥è¿œç¨‹ç¼“å­˜æ—¶çš„ç±»å‹è½¬æ¢é—®é¢˜</li><li>jetcacheæä¾›æ–¹æ³•ç¼“å­˜ï¼Œå¹¶æä¾›äº†å¯¹åº”çš„ç¼“å­˜æ›´æ–°ä¸åˆ·æ–°åŠŸèƒ½</li><li>jetcacheæä¾›æœ‰ç®€å•çš„ç¼“å­˜ä¿¡æ¯å‘½ä¸­æŠ¥è¡¨æ–¹ä¾¿å¼€å‘è€…å³æ—¶ç›‘æ§ç¼“å­˜æ•°æ®å‘½ä¸­æƒ…å†µ</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ jetcacheè§£å†³äº†å‰æœŸä½¿ç”¨ç¼“å­˜æ–¹æ¡ˆå•ä¸€çš„é—®é¢˜ï¼Œä½†æ˜¯ä»ç„¶ä¸èƒ½çµæ´»çš„é€‰æ‹©ç¼“å­˜è¿›è¡Œæ­é…ä½¿ç”¨ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ç§æŠ€æœ¯å¯ä»¥çµæ´»çš„æ­é…å„ç§å„æ ·çš„ç¼“å­˜ä½¿ç”¨å‘¢ï¼Ÿæœ‰ï¼Œå’±ä»¬ä¸‹ä¸€èŠ‚å†è®²ã€‚</p><h4 id="springbootæ•´åˆj2cacheç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆj2cacheç¼“å­˜" aria-hidden="true">#</a> SpringBootæ•´åˆj2cacheç¼“å­˜</h4><p>â€‹ jetcacheå¯ä»¥åœ¨é™å®šèŒƒå›´å†…æ„å»ºå¤šçº§ç¼“å­˜ï¼Œä½†æ˜¯çµæ´»æ€§ä¸è¶³ï¼Œä¸èƒ½éšæ„æ­é…ç¼“å­˜ï¼Œæœ¬èŠ‚ä»‹ç»ä¸€ç§å¯ä»¥éšæ„æ­é…ç¼“å­˜è§£å†³æ–¹æ¡ˆçš„ç¼“å­˜æ•´åˆæ¡†æ¶ï¼Œj2cacheã€‚ä¸‹é¢å°±æ¥è®²è§£å¦‚ä½•ä½¿ç”¨è¿™ç§ç¼“å­˜æ¡†æ¶ï¼Œä»¥Ehcacheä¸redisæ•´åˆä¸ºä¾‹ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥j2cacheã€redisã€ehcacheåæ ‡</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.oschina.j2cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>j2cache-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.8.4-release<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.oschina.j2cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>j2cache-spring-boot2-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.8.0-release<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.sf.ehcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ehcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ <strong>j2cacheçš„starterä¸­é»˜è®¤åŒ…å«äº†redisåæ ‡ï¼Œå®˜æ–¹æ¨èä½¿ç”¨redisä½œä¸ºäºŒçº§ç¼“å­˜ï¼Œå› æ­¤æ­¤å¤„æ— éœ€å¯¼å…¥redisåæ ‡</strong></p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®ä¸€çº§ä¸äºŒçº§ç¼“å­˜ï¼Œå¹¶é…ç½®ä¸€äºŒçº§ç¼“å­˜é—´æ•°æ®ä¼ é€’æ–¹å¼ï¼Œé…ç½®ä¹¦å†™åœ¨åç§°ä¸ºj2cache.propertiesçš„æ–‡ä»¶ä¸­ã€‚å¦‚æœä½¿ç”¨ehcacheè¿˜éœ€è¦å•ç‹¬æ·»åŠ ehcacheçš„é…ç½®æ–‡ä»¶</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 1çº§ç¼“å­˜</span>
j2cache.L1.provider_class = ehcache
ehcache.configXml = ehcache.xml

<span class="token comment"># 2çº§ç¼“å­˜</span>
j2cache.L2.provider_class = net.oschina.j2cache.cache.support.redis.SpringRedisProvider
j2cache.L2.config_section = redis
redis.hosts = localhost<span class="token punctuation">:</span><span class="token number">6379</span>

<span class="token comment"># 1çº§ç¼“å­˜ä¸­çš„æ•°æ®å¦‚ä½•åˆ°è¾¾äºŒçº§ç¼“å­˜</span>
j2cache.broadcast = net.oschina.j2cache.cache.support.redis.SpringRedisPubSubPolicy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ­¤å¤„é…ç½®ä¸èƒ½ä¹±é…ç½®ï¼Œéœ€è¦å‚ç…§å®˜æ–¹ç»™å‡ºçš„é…ç½®è¯´æ˜è¿›è¡Œã€‚ä¾‹å¦‚1çº§ä¾›åº”å•†é€‰æ‹©ehcacheï¼Œä¾›åº”å•†åç§°ä»…ä»…æ˜¯ä¸€ä¸ªehcacheï¼Œä½†æ˜¯2çº§ä¾›åº”å•†é€‰æ‹©redisæ—¶è¦å†™ä¸“ç”¨çš„Springæ•´åˆRedisçš„ä¾›åº”å•†ç±»åSpringRedisProviderï¼Œè€Œä¸”è¿™ä¸ªåç§°å¹¶ä¸æ˜¯æ‰€æœ‰çš„redisåŒ…ä¸­èƒ½æä¾›çš„ï¼Œä¹Ÿä¸æ˜¯springåŒ…ä¸­æä¾›çš„ã€‚å› æ­¤é…ç½®j2cacheå¿…é¡»å‚ç…§å®˜æ–¹æ–‡æ¡£é…ç½®ï¼Œè€Œä¸”è¿˜è¦å»æ‰¾ä¸“ç”¨çš„æ•´åˆåŒ…ï¼Œå¯¼å…¥å¯¹åº”åæ ‡æ‰å¯ä»¥ä½¿ç”¨ã€‚</p><p>â€‹ ä¸€çº§ä¸äºŒçº§ç¼“å­˜æœ€é‡è¦çš„ä¸€ä¸ªé…ç½®å°±æ˜¯ä¸¤è€…ä¹‹é—´çš„æ•°æ®æ²Ÿé€šæ–¹å¼ï¼Œæ­¤ç±»é…ç½®ä¹Ÿä¸æ˜¯éšæ„é…ç½®çš„ï¼Œå¹¶ä¸”ä¸åŒçš„ç¼“å­˜è§£å†³æ–¹æ¡ˆæä¾›çš„æ•°æ®æ²Ÿé€šæ–¹å¼å·®å¼‚åŒ–å¾ˆå¤§ï¼Œéœ€è¦æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£è¿›è¡Œè®¾ç½®ã€‚</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨ç¼“å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSCodeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SMSCodeService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CodeUtils</span> codeUtils<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CacheChannel</span> cacheChannel<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendCodeToSMS</span><span class="token punctuation">(</span><span class="token class-name">String</span> tele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> codeUtils<span class="token punctuation">.</span><span class="token function">generator</span><span class="token punctuation">(</span>tele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cacheChannel<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;sms&quot;</span><span class="token punctuation">,</span>tele<span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token class-name">SMSCode</span> smsCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> cacheChannel<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;sms&quot;</span><span class="token punctuation">,</span>smsCode<span class="token punctuation">.</span><span class="token function">getTele</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> smsCode<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ j2cacheçš„ä½¿ç”¨å’Œjetcacheæ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ˜¯æ— éœ€å¼€å¯ä½¿ç”¨çš„å¼€å…³ï¼Œç›´æ¥å®šä¹‰ç¼“å­˜å¯¹è±¡å³å¯ä½¿ç”¨ï¼Œç¼“å­˜å¯¹è±¡åCacheChannelã€‚</p><p>â€‹ j2cacheçš„ä½¿ç”¨ä¸å¤æ‚ï¼Œé…ç½®æ˜¯j2cacheçš„æ ¸å¿ƒï¼Œæ¯•ç«Ÿæ˜¯ä¸€ä¸ªæ•´åˆå‹çš„ç¼“å­˜æ¡†æ¶ã€‚ç¼“å­˜ç›¸å…³çš„é…ç½®è¿‡å¤šï¼Œå¯ä»¥æŸ¥é˜…j2cache-coreæ ¸å¿ƒåŒ…ä¸­çš„j2cache.propertiesæ–‡ä»¶ä¸­çš„è¯´æ˜ã€‚å¦‚ä¸‹ï¼š</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#J2Cache configuration</span>
<span class="token comment">#########################################</span>
<span class="token comment"># Cache Broadcast Method</span>
<span class="token comment"># values:</span>
<span class="token comment"># jgroups -&gt; use jgroups&#39;s multicast</span>
<span class="token comment"># redis -&gt; use redis publish/subscribe mechanism (using jedis)</span>
<span class="token comment"># lettuce -&gt; use redis publish/subscribe mechanism (using lettuce, Recommend)</span>
<span class="token comment"># rabbitmq -&gt; use RabbitMQ publisher/consumer mechanism</span>
<span class="token comment"># rocketmq -&gt; use RocketMQ publisher/consumer mechanism</span>
<span class="token comment"># none -&gt; don&#39;t notify the other nodes in cluster</span>
<span class="token comment"># xx.xxxx.xxxx.Xxxxx your own cache broadcast policy classname that implement net.oschina.j2cache.cluster.ClusterPolicy</span>
<span class="token comment">#########################################</span>
<span class="token key attr-name">j2cache.broadcast</span> <span class="token punctuation">=</span> <span class="token value attr-value">redis</span>

<span class="token comment"># jgroups properties</span>
<span class="token key attr-name">jgroups.channel.name</span> <span class="token punctuation">=</span> <span class="token value attr-value">j2cache</span>
<span class="token key attr-name">jgroups.configXml</span> <span class="token punctuation">=</span> <span class="token value attr-value">/network.xml</span>

<span class="token comment"># RabbitMQ properties</span>
<span class="token key attr-name">rabbitmq.exchange</span> <span class="token punctuation">=</span> <span class="token value attr-value">j2cache</span>
<span class="token key attr-name">rabbitmq.host</span> <span class="token punctuation">=</span> <span class="token value attr-value">localhost</span>
<span class="token key attr-name">rabbitmq.port</span> <span class="token punctuation">=</span> <span class="token value attr-value">5672</span>
<span class="token key attr-name">rabbitmq.username</span> <span class="token punctuation">=</span> <span class="token value attr-value">guest</span>
<span class="token key attr-name">rabbitmq.password</span> <span class="token punctuation">=</span> <span class="token value attr-value">guest</span>

<span class="token comment"># RocketMQ properties</span>
<span class="token key attr-name">rocketmq.name</span> <span class="token punctuation">=</span> <span class="token value attr-value">j2cache</span>
<span class="token key attr-name">rocketmq.topic</span> <span class="token punctuation">=</span> <span class="token value attr-value">j2cache</span>
<span class="token comment"># use ; to split multi hosts</span>
<span class="token key attr-name">rocketmq.hosts</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1:9876</span>

<span class="token comment">#########################################</span>
<span class="token comment"># Level 1&amp;2 provider</span>
<span class="token comment"># values:</span>
<span class="token comment"># none -&gt; disable this level cache</span>
<span class="token comment"># ehcache -&gt; use ehcache2 as level 1 cache</span>
<span class="token comment"># ehcache3 -&gt; use ehcache3 as level 1 cache</span>
<span class="token comment"># caffeine -&gt; use caffeine as level 1 cache(only in memory)</span>
<span class="token comment"># redis -&gt; use redis as level 2 cache (using jedis)</span>
<span class="token comment"># lettuce -&gt; use redis as level 2 cache (using lettuce)</span>
<span class="token comment"># readonly-redis -&gt; use redis as level 2 cache ,but never write data to it. if use this provider, you must uncomment `j2cache.L2.config_section` to make the redis configurations available.</span>
<span class="token comment"># memcached -&gt; use memcached as level 2 cache (xmemcached),</span>
<span class="token comment"># [classname] -&gt; use custom provider</span>
<span class="token comment">#########################################</span>

<span class="token key attr-name">j2cache.L1.provider_class</span> <span class="token punctuation">=</span> <span class="token value attr-value">caffeine</span>
<span class="token key attr-name">j2cache.L2.provider_class</span> <span class="token punctuation">=</span> <span class="token value attr-value">redis</span>

<span class="token comment"># When L2 provider isn&#39;t `redis`, using `L2.config_section = redis` to read redis configurations</span>
<span class="token comment"># j2cache.L2.config_section = redis</span>

<span class="token comment"># Enable/Disable ttl in redis cache data (if disabled, the object in redis will never expire, default:true)</span>
<span class="token comment"># NOTICE: redis hash mode (redis.storage = hash) do not support this feature)</span>
<span class="token key attr-name">j2cache.sync_ttl_to_redis</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>

<span class="token comment"># Whether to cache null objects by default (default false)</span>
<span class="token key attr-name">j2cache.default_cache_null_object</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>

<span class="token comment">#########################################</span>
<span class="token comment"># Cache Serialization Provider</span>
<span class="token comment"># values:</span>
<span class="token comment"># fst -&gt; using fast-serialization (recommend)</span>
<span class="token comment"># kryo -&gt; using kryo serialization</span>
<span class="token comment"># json -&gt; using fst&#39;s json serialization (testing)</span>
<span class="token comment"># fastjson -&gt; using fastjson serialization (embed non-static class not support)</span>
<span class="token comment"># java -&gt; java standard</span>
<span class="token comment"># fse -&gt; using fse serialization</span>
<span class="token comment"># [classname implements Serializer]</span>
<span class="token comment">#########################################</span>

<span class="token key attr-name">j2cache.serialization</span> <span class="token punctuation">=</span> <span class="token value attr-value">json</span>
<span class="token comment">#json.map.person = net.oschina.j2cache.demo.Person</span>

<span class="token comment">#########################################</span>
<span class="token comment"># Ehcache configuration</span>
<span class="token comment">#########################################</span>

<span class="token comment"># ehcache.configXml = /ehcache.xml</span>

<span class="token comment"># ehcache3.configXml = /ehcache3.xml</span>
<span class="token comment"># ehcache3.defaultHeapSize = 1000</span>

<span class="token comment">#########################################</span>
<span class="token comment"># Caffeine configuration</span>
<span class="token comment"># caffeine.region.[name] = size, xxxx[s|m|h|d]</span>
<span class="token comment">#</span>
<span class="token comment">#########################################</span>
<span class="token key attr-name">caffeine.properties</span> <span class="token punctuation">=</span> <span class="token value attr-value">/caffeine.properties</span>

<span class="token comment">#########################################</span>
<span class="token comment"># Redis connection configuration</span>
<span class="token comment">#########################################</span>

<span class="token comment">#########################################</span>
<span class="token comment"># Redis Cluster Mode</span>
<span class="token comment">#</span>
<span class="token comment"># single -&gt; single redis server</span>
<span class="token comment"># sentinel -&gt; master-slaves servers</span>
<span class="token comment"># cluster -&gt; cluster servers (æ•°æ®åº“é…ç½®æ— æ•ˆï¼Œä½¿ç”¨ database = 0ï¼‰</span>
<span class="token comment"># sharded -&gt; sharded servers  (å¯†ç ã€æ•°æ®åº“å¿…é¡»åœ¨ hosts ä¸­æŒ‡å®šï¼Œä¸”è¿æ¥æ± é…ç½®æ— æ•ˆ ; redis://user:password@127.0.0.1:6379/0ï¼‰</span>
<span class="token comment">#</span>
<span class="token comment">#########################################</span>

<span class="token key attr-name">redis.mode</span> <span class="token punctuation">=</span> <span class="token value attr-value">single</span>

<span class="token comment">#redis storage mode (generic|hash)</span>
<span class="token key attr-name">redis.storage</span> <span class="token punctuation">=</span> <span class="token value attr-value">generic</span>

<span class="token comment">## redis pub/sub channel name</span>
<span class="token key attr-name">redis.channel</span> <span class="token punctuation">=</span> <span class="token value attr-value">j2cache</span>
<span class="token comment">## redis pub/sub server (using redis.hosts when empty)</span>
<span class="token key attr-name">redis.channel.host</span> <span class="token value attr-value">=</span>

<span class="token comment">#cluster name just for sharded</span>
<span class="token key attr-name">redis.cluster_name</span> <span class="token punctuation">=</span> <span class="token value attr-value">j2cache</span>

<span class="token comment">## redis cache namespace optional, default[empty]</span>
<span class="token key attr-name">redis.namespace</span> <span class="token value attr-value">=</span>

<span class="token comment">## redis command scan parameter count, default[1000]</span>
<span class="token comment">#redis.scanCount = 1000</span>

<span class="token comment">## connection</span>
<span class="token comment"># Separate multiple redis nodes with commas, such as 192.168.0.10:6379,192.168.0.11:6379,192.168.0.12:6379</span>

<span class="token key attr-name">redis.hosts</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1:6379</span>
<span class="token key attr-name">redis.timeout</span> <span class="token punctuation">=</span> <span class="token value attr-value">2000</span>
<span class="token key attr-name">redis.password</span> <span class="token value attr-value">=</span>
<span class="token key attr-name">redis.database</span> <span class="token punctuation">=</span> <span class="token value attr-value">0</span>
<span class="token key attr-name">redis.ssl</span> <span class="token punctuation">=</span> <span class="token value attr-value">false</span>

<span class="token comment">## redis pool properties</span>
<span class="token key attr-name">redis.maxTotal</span> <span class="token punctuation">=</span> <span class="token value attr-value">100</span>
<span class="token key attr-name">redis.maxIdle</span> <span class="token punctuation">=</span> <span class="token value attr-value">10</span>
<span class="token key attr-name">redis.maxWaitMillis</span> <span class="token punctuation">=</span> <span class="token value attr-value">5000</span>
<span class="token key attr-name">redis.minEvictableIdleTimeMillis</span> <span class="token punctuation">=</span> <span class="token value attr-value">60000</span>
<span class="token key attr-name">redis.minIdle</span> <span class="token punctuation">=</span> <span class="token value attr-value">1</span>
<span class="token key attr-name">redis.numTestsPerEvictionRun</span> <span class="token punctuation">=</span> <span class="token value attr-value">10</span>
<span class="token key attr-name">redis.lifo</span> <span class="token punctuation">=</span> <span class="token value attr-value">false</span>
<span class="token key attr-name">redis.softMinEvictableIdleTimeMillis</span> <span class="token punctuation">=</span> <span class="token value attr-value">10</span>
<span class="token key attr-name">redis.testOnBorrow</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">redis.testOnReturn</span> <span class="token punctuation">=</span> <span class="token value attr-value">false</span>
<span class="token key attr-name">redis.testWhileIdle</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">redis.timeBetweenEvictionRunsMillis</span> <span class="token punctuation">=</span> <span class="token value attr-value">300000</span>
<span class="token key attr-name">redis.blockWhenExhausted</span> <span class="token punctuation">=</span> <span class="token value attr-value">false</span>
<span class="token key attr-name">redis.jmxEnabled</span> <span class="token punctuation">=</span> <span class="token value attr-value">false</span>

<span class="token comment">#########################################</span>
<span class="token comment"># Lettuce scheme</span>
<span class="token comment">#</span>
<span class="token comment"># redis -&gt; single redis server</span>
<span class="token comment"># rediss -&gt; single redis server with ssl</span>
<span class="token comment"># redis-sentinel -&gt; redis sentinel</span>
<span class="token comment"># redis-cluster -&gt; cluster servers</span>
<span class="token comment">#</span>
<span class="token comment">#########################################</span>

<span class="token comment">#########################################</span>
<span class="token comment"># Lettuce Mode</span>
<span class="token comment">#</span>
<span class="token comment"># single -&gt; single redis server</span>
<span class="token comment"># sentinel -&gt; master-slaves servers</span>
<span class="token comment"># cluster -&gt; cluster servers (æ•°æ®åº“é…ç½®æ— æ•ˆï¼Œä½¿ç”¨ database = 0ï¼‰</span>
<span class="token comment"># sharded -&gt; sharded servers  (å¯†ç ã€æ•°æ®åº“å¿…é¡»åœ¨ hosts ä¸­æŒ‡å®šï¼Œä¸”è¿æ¥æ± é…ç½®æ— æ•ˆ ; redis://user:password@127.0.0.1:6379/0ï¼‰</span>
<span class="token comment">#</span>
<span class="token comment">#########################################</span>

<span class="token comment">## redis command scan parameter count, default[1000]</span>
<span class="token comment">#lettuce.scanCount = 1000</span>
<span class="token key attr-name">lettuce.mode</span> <span class="token punctuation">=</span> <span class="token value attr-value">single</span>
<span class="token key attr-name">lettuce.namespace</span> <span class="token value attr-value">=</span>
<span class="token key attr-name">lettuce.storage</span> <span class="token punctuation">=</span> <span class="token value attr-value">hash</span>
<span class="token key attr-name">lettuce.channel</span> <span class="token punctuation">=</span> <span class="token value attr-value">j2cache</span>
<span class="token key attr-name">lettuce.scheme</span> <span class="token punctuation">=</span> <span class="token value attr-value">redis</span>
<span class="token key attr-name">lettuce.hosts</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1:6379</span>
<span class="token key attr-name">lettuce.password</span> <span class="token value attr-value">=</span>
<span class="token key attr-name">lettuce.database</span> <span class="token punctuation">=</span> <span class="token value attr-value">0</span>
<span class="token key attr-name">lettuce.sentinelMasterId</span> <span class="token value attr-value">=</span>
<span class="token key attr-name">lettuce.maxTotal</span> <span class="token punctuation">=</span> <span class="token value attr-value">100</span>
<span class="token key attr-name">lettuce.maxIdle</span> <span class="token punctuation">=</span> <span class="token value attr-value">10</span>
<span class="token key attr-name">lettuce.minIdle</span> <span class="token punctuation">=</span> <span class="token value attr-value">10</span>
<span class="token comment"># timeout in milliseconds</span>
<span class="token key attr-name">lettuce.timeout</span> <span class="token punctuation">=</span> <span class="token value attr-value">10000</span>
<span class="token comment"># redis cluster topology refresh interval in milliseconds</span>
<span class="token key attr-name">lettuce.clusterTopologyRefresh</span> <span class="token punctuation">=</span> <span class="token value attr-value">3000</span>

<span class="token comment">#########################################</span>
<span class="token comment"># memcached server configurations</span>
<span class="token comment"># refer to https://gitee.com/mirrors/XMemcached</span>
<span class="token comment">#########################################</span>

<span class="token key attr-name">memcached.servers</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1:11211</span>
<span class="token key attr-name">memcached.username</span> <span class="token value attr-value">=</span>
<span class="token key attr-name">memcached.password</span> <span class="token value attr-value">=</span>
<span class="token key attr-name">memcached.connectionPoolSize</span> <span class="token punctuation">=</span> <span class="token value attr-value">10</span>
<span class="token key attr-name">memcached.connectTimeout</span> <span class="token punctuation">=</span> <span class="token value attr-value">1000</span>
<span class="token key attr-name">memcached.failureMode</span> <span class="token punctuation">=</span> <span class="token value attr-value">false</span>
<span class="token key attr-name">memcached.healSessionInterval</span> <span class="token punctuation">=</span> <span class="token value attr-value">1000</span>
<span class="token key attr-name">memcached.maxQueuedNoReplyOperations</span> <span class="token punctuation">=</span> <span class="token value attr-value">100</span>
<span class="token key attr-name">memcached.opTimeout</span> <span class="token punctuation">=</span> <span class="token value attr-value">100</span>
<span class="token key attr-name">memcached.sanitizeKeys</span> <span class="token punctuation">=</span> <span class="token value attr-value">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>j2cacheæ˜¯ä¸€ä¸ªç¼“å­˜æ¡†æ¶ï¼Œè‡ªèº«ä¸å…·æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œå®ƒæä¾›å¤šç§ç¼“å­˜æ•´åˆåœ¨ä¸€èµ·ä½¿ç”¨çš„æ–¹æ¡ˆ</li><li>j2cacheéœ€è¦é€šè¿‡å¤æ‚çš„é…ç½®è®¾ç½®å„çº§ç¼“å­˜ï¼Œä»¥åŠç¼“å­˜ä¹‹é—´æ•°æ®äº¤æ¢çš„æ–¹å¼</li><li>j2cacheæ“ä½œæ¥å£é€šè¿‡CacheChannelå®ç°</li></ol><h3 id="_5-2-ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#_5-2-ä»»åŠ¡" aria-hidden="true">#</a> 5-2.ä»»åŠ¡</h3><p>â€‹ springbootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯ç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬æ¥è¯´è¯´ä»»åŠ¡ç³»ç»Ÿï¼Œå…¶å®è¿™é‡Œè¯´çš„ä»»åŠ¡ç³»ç»ŸæŒ‡çš„æ˜¯å®šæ—¶ä»»åŠ¡ã€‚å®šæ—¶ä»»åŠ¡æ˜¯ä¼ä¸šçº§å¼€å‘ä¸­å¿…ä¸å¯å°‘çš„ç»„æˆéƒ¨åˆ†ï¼Œè¯¸å¦‚é•¿å‘¨æœŸä¸šåŠ¡æ•°æ®çš„è®¡ç®—ï¼Œä¾‹å¦‚å¹´åº¦æŠ¥è¡¨ï¼Œè¯¸å¦‚ç³»ç»Ÿè„æ•°æ®çš„å¤„ç†ï¼Œå†æ¯”å¦‚ç³»ç»Ÿæ€§èƒ½ç›‘æ§æŠ¥å‘Šï¼Œè¿˜æœ‰æŠ¢è´­ç±»æ´»åŠ¨çš„å•†å“ä¸Šæ¶ï¼Œè¿™äº›éƒ½ç¦»ä¸å¼€å®šæ—¶ä»»åŠ¡ã€‚æœ¬èŠ‚å°†ä»‹ç»ä¸¤ç§ä¸åŒçš„å®šæ—¶ä»»åŠ¡æŠ€æœ¯ã€‚</p><h4 id="quartz" tabindex="-1"><a class="header-anchor" href="#quartz" aria-hidden="true">#</a> Quartz</h4><p>â€‹ QuartzæŠ€æœ¯æ˜¯ä¸€ä¸ªæ¯”è¾ƒæˆç†Ÿçš„å®šæ—¶ä»»åŠ¡æ¡†æ¶ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Ÿæœ‰ç‚¹ç¹çï¼Œç”¨è¿‡çš„éƒ½çŸ¥é“ï¼Œé…ç½®ç•¥å¾®å¤æ‚ã€‚springbootå¯¹å…¶è¿›è¡Œæ•´åˆåï¼Œç®€åŒ–äº†ä¸€ç³»åˆ—çš„é…ç½®ï¼Œå°†å¾ˆå¤šé…ç½®é‡‡ç”¨é»˜è®¤è®¾ç½®ï¼Œè¿™æ ·å¼€å‘é˜¶æ®µå°±ç®€åŒ–äº†å¾ˆå¤šã€‚åœ¨å­¦ä¹ springbootæ•´åˆQuartzå‰å…ˆæ™®åŠå‡ ä¸ªQuartzçš„æ¦‚å¿µã€‚</p><ul><li>å·¥ä½œï¼ˆJobï¼‰ï¼šç”¨äºå®šä¹‰å…·ä½“æ‰§è¡Œçš„å·¥ä½œ</li><li>å·¥ä½œæ˜ç»†ï¼ˆJobDetailï¼‰ï¼šç”¨äºæè¿°å®šæ—¶å·¥ä½œç›¸å…³çš„ä¿¡æ¯</li><li>è§¦å‘å™¨ï¼ˆTriggerï¼‰ï¼šæè¿°äº†å·¥ä½œæ˜ç»†ä¸è°ƒåº¦å™¨çš„å¯¹åº”å…³ç³»</li><li>è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ï¼šç”¨äºæè¿°è§¦å‘å·¥ä½œçš„æ‰§è¡Œè§„åˆ™ï¼Œé€šå¸¸ä½¿ç”¨cronè¡¨è¾¾å¼å®šä¹‰è§„åˆ™</li></ul><p>â€‹ ç®€å•è¯´å°±æ˜¯ä½ å®šæ—¶å¹²ä»€ä¹ˆäº‹æƒ…ï¼Œè¿™å°±æ˜¯å·¥ä½œï¼Œå·¥ä½œä¸å¯èƒ½å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œè¿˜è¦è®¾ç½®ä¸€äº›æ˜ç»†ä¿¡æ¯ã€‚å·¥ä½œå•¥æ—¶å€™æ‰§è¡Œï¼Œè®¾ç½®ä¸€ä¸ªè°ƒåº¦å™¨ï¼Œå¯ä»¥ç®€å•ç†è§£æˆè®¾ç½®ä¸€ä¸ªå·¥ä½œæ‰§è¡Œçš„æ—¶é—´ã€‚å·¥ä½œå’Œè°ƒåº¦éƒ½æ˜¯ç‹¬ç«‹å®šä¹‰çš„ï¼Œå®ƒä»¬ä¸¤ä¸ªæ€ä¹ˆé…åˆåˆ°ä¸€èµ·å‘¢ï¼Ÿç”¨è§¦å‘å™¨ã€‚å®Œäº†ï¼Œå°±è¿™ä¹ˆå¤šã€‚ä¸‹é¢å¼€å§‹springbootæ•´åˆQuartzã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆQuartzçš„starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-quartz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå®šä¹‰ä»»åŠ¡Beanï¼ŒæŒ‰ç…§Quartzçš„å¼€å‘è§„èŒƒåˆ¶ä½œï¼Œç»§æ‰¿QuartzJobBean</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyQuartz</span> <span class="token keyword">extends</span> <span class="token class-name">QuartzJobBean</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">executeInternal</span><span class="token punctuation">(</span><span class="token class-name">JobExecutionContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JobExecutionException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;quartz task run...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šåˆ›å»ºQuartzé…ç½®ç±»ï¼Œå®šä¹‰å·¥ä½œæ˜ç»†ï¼ˆJobDetailï¼‰ä¸è§¦å‘å™¨çš„ï¼ˆTriggerï¼‰bean</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QuartzConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">JobDetail</span> <span class="token function">printJobDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//ç»‘å®šå…·ä½“çš„å·¥ä½œ</span>
        <span class="token keyword">return</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">MyQuartz</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">storeDurably</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Trigger</span> <span class="token function">printJobTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ScheduleBuilder</span> schedBuilder <span class="token operator">=</span> <span class="token class-name">CronScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">cronSchedule</span><span class="token punctuation">(</span><span class="token string">&quot;0/5 * * * * ?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç»‘å®šå¯¹åº”çš„å·¥ä½œæ˜ç»†</span>
        <span class="token keyword">return</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forJob</span><span class="token punctuation">(</span><span class="token function">printJobDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span>schedBuilder<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å·¥ä½œæ˜ç»†ä¸­è¦è®¾ç½®å¯¹åº”çš„å…·ä½“å·¥ä½œï¼Œä½¿ç”¨newJob()æ“ä½œä¼ å…¥å¯¹åº”çš„å·¥ä½œä»»åŠ¡ç±»å‹å³å¯ã€‚</p><p>â€‹ è§¦å‘å™¨éœ€è¦ç»‘å®šä»»åŠ¡ï¼Œä½¿ç”¨forJob()æ“ä½œä¼ å…¥ç»‘å®šçš„å·¥ä½œæ˜ç»†å¯¹è±¡ã€‚æ­¤å¤„å¯ä»¥ä¸ºå·¥ä½œæ˜ç»†è®¾ç½®åç§°ç„¶åä½¿ç”¨åç§°ç»‘å®šï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨å¯¹åº”æ–¹æ³•ç»‘å®šã€‚è§¦å‘å™¨ä¸­æœ€æ ¸å¿ƒçš„è§„åˆ™æ˜¯æ‰§è¡Œæ—¶é—´ï¼Œæ­¤å¤„ä½¿ç”¨è°ƒåº¦å™¨å®šä¹‰æ‰§è¡Œæ—¶é—´ï¼Œæ‰§è¡Œæ—¶é—´æè¿°æ–¹å¼ä½¿ç”¨çš„æ˜¯cronè¡¨è¾¾å¼ã€‚æœ‰å…³cronè¡¨è¾¾å¼çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€äº›cronè¡¨è¾¾å¼åœ¨çº¿ç”Ÿæˆå™¨æ¥æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚ç”Ÿæˆè¡¨è¾¾å¼å³å¯ã€‚</p><p><a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer">cronè¡¨è¾¾å¼åœ¨çº¿ç”Ÿæˆå™¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆQuartzå°±æ˜¯å°†Quartzå¯¹åº”çš„æ ¸å¿ƒå¯¹è±¡äº¤ç»™springå®¹å™¨ç®¡ç†ï¼ŒåŒ…å«ä¸¤ä¸ªå¯¹è±¡ï¼ŒJobDetailå’ŒTriggerå¯¹è±¡</li><li>JobDetailå¯¹è±¡æè¿°çš„æ˜¯å·¥ä½œçš„æ‰§è¡Œä¿¡æ¯ï¼Œéœ€è¦ç»‘å®šä¸€ä¸ªQuartzJobBeanç±»å‹çš„å¯¹è±¡</li><li>Triggerå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªè§¦å‘å™¨ï¼Œéœ€è¦ä¸ºå…¶æŒ‡å®šç»‘å®šçš„JobDetailæ˜¯å“ªä¸ªï¼ŒåŒæ—¶è¦è®¾ç½®æ‰§è¡Œå‘¨æœŸè°ƒåº¦å™¨</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ ä¸Šé¢çš„æ“ä½œçœ‹ä¸Šå»ä¸å¤šï¼Œä½†æ˜¯Quartzå°†å…¶ä¸­çš„å¯¹è±¡åˆ’åˆ†ç²’åº¦è¿‡ç»†ï¼Œå¯¼è‡´å¼€å‘çš„æ—¶å€™æœ‰ç‚¹ç¹çï¼Œspringé’ˆå¯¹ä¸Šè¿°è§„åˆ™è¿›è¡Œäº†ç®€åŒ–ï¼Œå¼€å‘äº†è‡ªå·±çš„ä»»åŠ¡ç®¡ç†ç»„ä»¶â€”â€”Taskï¼Œå¦‚ä½•ç”¨å‘¢ï¼Ÿå’±ä»¬ä¸‹èŠ‚å†è¯´ã€‚</p><h4 id="task" tabindex="-1"><a class="header-anchor" href="#task" aria-hidden="true">#</a> Task</h4><p>â€‹ springæ ¹æ®å®šæ—¶ä»»åŠ¡çš„ç‰¹å¾ï¼Œå°†å®šæ—¶ä»»åŠ¡çš„å¼€å‘ç®€åŒ–åˆ°äº†æè‡´ã€‚æ€ä¹ˆè¯´å‘¢ï¼Ÿè¦åšå®šæ—¶ä»»åŠ¡æ€»è¦å‘Šè¯‰å®¹å™¨æœ‰è¿™åŠŸèƒ½å§ï¼Œç„¶åå®šæ—¶æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ç›´æ¥å‘Šè¯‰å¯¹åº”çš„beanä»€ä¹ˆæ—¶é—´æ‰§è¡Œå°±è¡Œäº†ï¼Œå°±è¿™ä¹ˆç®€å•ï¼Œä¸€èµ·æ¥çœ‹æ€ä¹ˆåš</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½ï¼Œåœ¨å¼•å¯¼ç±»ä¸Šå¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½çš„å¼€å…³ï¼Œä½¿ç”¨æ³¨è§£@EnableScheduling</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token comment">//å¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½</span>
<span class="token annotation punctuation">@EnableScheduling</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot22TaskApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Springboot22TaskApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå®šä¹‰Beanï¼Œåœ¨å¯¹åº”è¦å®šæ—¶æ‰§è¡Œçš„æ“ä½œä¸Šæ–¹ï¼Œä½¿ç”¨æ³¨è§£@Scheduledå®šä¹‰æ‰§è¡Œçš„æ—¶é—´ï¼Œæ‰§è¡Œæ—¶é—´çš„æè¿°æ–¹å¼è¿˜æ˜¯cronè¡¨è¾¾å¼</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBean</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>cron <span class="token operator">=</span> <span class="token string">&quot;0/1 * * * * ?&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; :spring task run...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å®Œäº‹ï¼Œè¿™å°±å®Œæˆäº†å®šæ—¶ä»»åŠ¡çš„é…ç½®ã€‚æ€»ä½“æ„Ÿè§‰å…¶å®ä»€ä¹ˆä¸œè¥¿éƒ½æ²¡å°‘ï¼Œåªä¸è¿‡æ²¡æœ‰å°†æ‰€æœ‰çš„ä¿¡æ¯éƒ½æŠ½å–æˆbeanï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨æ³¨è§£ç»‘å®šå®šæ—¶æ‰§è¡Œä»»åŠ¡çš„äº‹æƒ…è€Œå·²ã€‚</p><p>â€‹ å¦‚ä½•æƒ³å¯¹å®šæ—¶ä»»åŠ¡è¿›è¡Œç›¸å…³é…ç½®ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œ</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">task</span><span class="token punctuation">:</span>
    <span class="token key atrule">scheduling</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token key atrule">size</span><span class="token punctuation">:</span> <span class="token number">1</span>							<span class="token comment"># ä»»åŠ¡è°ƒåº¦çº¿ç¨‹æ± å¤§å° é»˜è®¤ 1</span>
      <span class="token key atrule">thread-name-prefix</span><span class="token punctuation">:</span> ssm_          <span class="token comment"># è°ƒåº¦çº¿ç¨‹åç§°å‰ç¼€ é»˜è®¤ scheduling-</span>
      <span class="token key atrule">shutdown</span><span class="token punctuation">:</span>
        <span class="token key atrule">await-termination</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>        <span class="token comment"># çº¿ç¨‹æ± å…³é—­æ—¶ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
        <span class="token key atrule">await-termination-period</span><span class="token punctuation">:</span> 10s    <span class="token comment"># è°ƒåº¦çº¿ç¨‹å…³é—­å‰æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œç¡®ä¿æœ€åä¸€å®šå…³é—­</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li><p>spring taskéœ€è¦ä½¿ç”¨æ³¨è§£@EnableSchedulingå¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½</p></li><li><p>ä¸ºå®šæ—¶æ‰§è¡Œçš„çš„ä»»åŠ¡è®¾ç½®æ‰§è¡Œå‘¨æœŸï¼Œæè¿°æ–¹å¼cronè¡¨è¾¾å¼</p></li></ol><h3 id="_5-3-é‚®ä»¶" tabindex="-1"><a class="header-anchor" href="#_5-3-é‚®ä»¶" aria-hidden="true">#</a> 5-3.é‚®ä»¶</h3><p>â€‹ springbootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯ç¬¬ä¸‰éƒ¨åˆ†æˆ‘ä»¬æ¥è¯´è¯´é‚®ä»¶ç³»ç»Ÿï¼Œå‘é‚®ä»¶æ˜¯javaç¨‹åºçš„åŸºæœ¬æ“ä½œï¼Œspringbootæ•´åˆjavamailå…¶å®å°±æ˜¯ç®€åŒ–å¼€å‘ã€‚ä¸ç†Ÿæ‚‰é‚®ä»¶çš„å°ä¼™ä¼´å¯ä»¥å…ˆå­¦ä¹ å®Œjavamailçš„åŸºç¡€æ“ä½œï¼Œå†æ¥çœ‹è¿™ä¸€éƒ¨åˆ†å†…å®¹æ‰èƒ½æ„Ÿè§¦åˆ°springbootæ•´åˆjavamailç©¶ç«Ÿç®€åŒ–äº†å“ªäº›æ“ä½œã€‚ç®€åŒ–çš„å¤šå—ï¼Ÿå…¶å®ä¸å¤šï¼Œå·®åˆ«ä¸å¤§ï¼Œåªæ˜¯æ¢ä¸ªæ ¼å¼è€Œå·²ã€‚</p><p>â€‹ å­¦ä¹ é‚®ä»¶å‘é€ä¹‹å‰å…ˆäº†è§£3ä¸ªæ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µè§„èŒƒäº†é‚®ä»¶æ“ä½œè¿‡ç¨‹ä¸­çš„æ ‡å‡†ã€‚</p><ul><li>SMTPï¼ˆSimple Mail Transfer Protocolï¼‰ï¼šç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼Œç”¨äº<strong>å‘é€</strong>ç”µå­é‚®ä»¶çš„ä¼ è¾“åè®®</li><li>POP3ï¼ˆPost Office Protocol - Version 3ï¼‰ï¼šç”¨äº<strong>æ¥æ”¶</strong>ç”µå­é‚®ä»¶çš„æ ‡å‡†åè®®</li><li>IMAPï¼ˆInternet Mail Access Protocolï¼‰ï¼šäº’è”ç½‘æ¶ˆæ¯åè®®ï¼Œæ˜¯POP3çš„æ›¿ä»£åè®®</li></ul><p>â€‹ ç®€å•è¯´å°±æ˜¯SMPTæ˜¯å‘é‚®ä»¶çš„æ ‡å‡†ï¼ŒPOP3æ˜¯æ”¶é‚®ä»¶çš„æ ‡å‡†ï¼ŒIMAPæ˜¯å¯¹POP3çš„å‡çº§ã€‚æˆ‘ä»¬åˆ¶ä½œç¨‹åºä¸­æ“ä½œé‚®ä»¶ï¼Œé€šå¸¸æ˜¯å‘é‚®ä»¶ï¼Œæ‰€ä»¥SMTPæ˜¯ä½¿ç”¨çš„é‡ç‚¹ï¼Œæ”¶é‚®ä»¶å¤§éƒ¨åˆ†éƒ½æ˜¯é€šè¿‡é‚®ä»¶å®¢æˆ·ç«¯å®Œæˆï¼Œæ‰€ä»¥å¼€å‘æ”¶é‚®ä»¶çš„ä»£ç æå°‘ã€‚é™¤éä½ è¦è¯»å–é‚®ä»¶å†…å®¹ï¼Œç„¶åè§£æï¼Œåšé‚®ä»¶åŠŸèƒ½çš„ç»Ÿä¸€å¤„ç†ã€‚ä¾‹å¦‚HRçš„é‚®ç®±æ”¶åˆ°æ±‚èŒè€…çš„ç®€å†ï¼Œå¯ä»¥è¯»å–åç»Ÿä¸€å¤„ç†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆä¸åˆ¶ä½œç‹¬ç«‹çš„æŠ•é€’ç®€å†çš„ç³»ç»Ÿå‘¢ï¼Ÿæ‰€ä»¥è¯´ï¼Œå¥½å¥‡æ€ªçš„éœ€æ±‚ï¼Œå› ä¸ºè¦æƒ³æ”¶é‚®ä»¶å°±è¦è§„èŒƒå‘é‚®ä»¶çš„äººçš„ä¹¦å†™æ ¼å¼ï¼Œè¿™ä¸ªæœªå…æœ‰ç‚¹å¼ºäººæ‰€éš¾ï¼Œå¹¶ä¸”ææ˜“æ”¶åˆ°å¤–éƒ¨æ”»å‡»ï¼Œä½ ä¸å¯èƒ½ä½¿ç”¨ç™½åå•æ¥æ”¶é‚®ä»¶ã€‚å¦‚æœèƒ½ä½¿ç”¨ç™½åå•æ¥æ”¶é‚®ä»¶ç„¶åè§£æé‚®ä»¶ï¼Œè¿˜ä¸å¦‚å¼€å‘ä¸ªç³»ç»Ÿç»™ç™½åå•ä¸­çš„äººä¸“ç”¨å‘¢ï¼Œæ›´å®‰å…¨ï¼Œæ€»ä¹‹å°±æ˜¯é¸¡è‚‹äº†ã€‚ä¸‹é¢å°±å¼€å§‹å­¦ä¹ springbootå¦‚ä½•æ•´åˆjavamailå‘é€é‚®ä»¶ã€‚</p><h4 id="å‘é€ç®€å•é‚®ä»¶" tabindex="-1"><a class="header-anchor" href="#å‘é€ç®€å•é‚®ä»¶" aria-hidden="true">#</a> å‘é€ç®€å•é‚®ä»¶</h4><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆjavamailçš„starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®é‚®ç®±çš„ç™»å½•ä¿¡æ¯</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mail</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> smtp.126.com
    <span class="token key atrule">username</span><span class="token punctuation">:</span> test@126.com
    <span class="token key atrule">password</span><span class="token punctuation">:</span> test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ javaç¨‹åºä»…ç”¨äºå‘é€é‚®ä»¶ï¼Œé‚®ä»¶çš„åŠŸèƒ½è¿˜æ˜¯é‚®ä»¶ä¾›åº”å•†æä¾›çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ç”¨åˆ«äººçš„é‚®ä»¶æœåŠ¡ï¼Œè¦é…ç½®å¯¹åº”ä¿¡æ¯ã€‚</p><p>â€‹ hosté…ç½®çš„æ˜¯æä¾›é‚®ä»¶æœåŠ¡çš„ä¸»æœºåè®®ï¼Œå½“å‰ç¨‹åºä»…ç”¨äºå‘é€é‚®ä»¶ï¼Œå› æ­¤é…ç½®çš„æ˜¯smtpçš„åè®®ã€‚</p><p>â€‹ passwordå¹¶ä¸æ˜¯é‚®ç®±è´¦å·çš„ç™»å½•å¯†ç ï¼Œæ˜¯é‚®ä»¶ä¾›åº”å•†æä¾›çš„ä¸€ä¸ªåŠ å¯†åçš„å¯†ç ï¼Œä¹Ÿæ˜¯ä¸ºäº†ä¿éšœç³»ç»Ÿå®‰å…¨æ€§ã€‚ä¸ç„¶å¤–éƒ¨äººå‘˜é€šè¿‡åœ°å€è®¿é—®ä¸‹è½½äº†é…ç½®æ–‡ä»¶ï¼Œç›´æ¥è·å–åˆ°äº†é‚®ä»¶å¯†ç å°±ä¼šæœ‰æå¤§çš„å®‰å…¨éšæ‚£ã€‚æœ‰å…³è¯¥å¯†ç çš„è·å–æ¯ä¸ªé‚®ä»¶ä¾›åº”å•†æä¾›çš„æ–¹å¼éƒ½ä¸ä¸€æ ·ï¼Œæ­¤å¤„ç•¥è¿‡ã€‚å¯ä»¥åˆ°é‚®ä»¶ä¾›åº”å•†çš„è®¾ç½®é¡µé¢æ‰¾POP3æˆ–IMAPè¿™äº›å…³é”®è¯æ‰¾åˆ°å¯¹åº”çš„è·å–ä½ç½®ã€‚ä¸‹ä¾‹ä»…ä¾›å‚è€ƒï¼š</p><p><img src="/assets/image-20220228111251036.19b23fcf.png" alt="image-20220228111251036"></p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨JavaMailSenderæ¥å£å‘é€é‚®ä»¶</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendMailServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SendMailService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JavaMailSender</span> javaMailSender<span class="token punctuation">;</span>

    <span class="token comment">//å‘é€äºº</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> from <span class="token operator">=</span> <span class="token string">&quot;test@qq.com&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ¥æ”¶äºº</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token keyword">to</span> <span class="token operator">=</span> <span class="token string">&quot;test@126.com&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ ‡é¢˜</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> subject <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•é‚®ä»¶&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ­£æ–‡</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> context <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•é‚®ä»¶æ­£æ–‡å†…å®¹&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SimpleMailMessage</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMailMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span>from<span class="token operator">+</span><span class="token string">&quot;(å°ç”œç”œ)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å°†å‘é€é‚®ä»¶çš„å¿…è¦ä¿¡æ¯ï¼ˆå‘ä»¶äººã€æ”¶ä»¶äººã€æ ‡é¢˜ã€æ­£æ–‡ï¼‰å°è£…åˆ°SimpleMailMessageå¯¹è±¡ä¸­ï¼Œå¯ä»¥æ ¹æ®è§„åˆ™è®¾ç½®å‘é€äººæ˜µç§°ç­‰ã€‚</p><h4 id="å‘é€å¤šç»„ä»¶é‚®ä»¶-é™„ä»¶ã€å¤æ‚æ­£æ–‡" tabindex="-1"><a class="header-anchor" href="#å‘é€å¤šç»„ä»¶é‚®ä»¶-é™„ä»¶ã€å¤æ‚æ­£æ–‡" aria-hidden="true">#</a> å‘é€å¤šç»„ä»¶é‚®ä»¶ï¼ˆé™„ä»¶ã€å¤æ‚æ­£æ–‡ï¼‰</h4><p>â€‹ å‘é€ç®€å•é‚®ä»¶ä»…éœ€è¦æä¾›å¯¹åº”çš„4ä¸ªåŸºæœ¬ä¿¡æ¯å°±å¯ä»¥äº†ï¼Œå¦‚æœæƒ³å‘é€å¤æ‚çš„é‚®ä»¶ï¼Œéœ€è¦æ›´æ¢é‚®ä»¶å¯¹è±¡ã€‚ä½¿ç”¨MimeMessageå¯ä»¥å‘é€ç‰¹æ®Šçš„é‚®ä»¶ã€‚</p><p><strong>å‘é€ç½‘é¡µæ­£æ–‡é‚®ä»¶</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendMailServiceImpl2</span> <span class="token keyword">implements</span> <span class="token class-name">SendMailService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JavaMailSender</span> javaMailSender<span class="token punctuation">;</span>

    <span class="token comment">//å‘é€äºº</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> from <span class="token operator">=</span> <span class="token string">&quot;test@qq.com&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ¥æ”¶äºº</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token keyword">to</span> <span class="token operator">=</span> <span class="token string">&quot;test@126.com&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ ‡é¢˜</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> subject <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•é‚®ä»¶&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ­£æ–‡</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> context <span class="token operator">=</span> <span class="token string">&quot;&lt;img src=&#39;ABC.JPG&#39;/&gt;&lt;a href=&#39;https://www.itcast.cn&#39;&gt;ç‚¹å¼€æœ‰æƒŠå–œ&lt;/a&gt;&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">MimeMessage</span> message <span class="token operator">=</span> javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token operator">+</span><span class="token string">&quot;(å°ç”œç”œ)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//æ­¤å¤„è®¾ç½®æ­£æ–‡æ”¯æŒhtmlè§£æ</span>

            javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å‘é€å¸¦æœ‰é™„ä»¶çš„é‚®ä»¶</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendMailServiceImpl2</span> <span class="token keyword">implements</span> <span class="token class-name">SendMailService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JavaMailSender</span> javaMailSender<span class="token punctuation">;</span>

    <span class="token comment">//å‘é€äºº</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> from <span class="token operator">=</span> <span class="token string">&quot;test@qq.com&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ¥æ”¶äºº</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token keyword">to</span> <span class="token operator">=</span> <span class="token string">&quot;test@126.com&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ ‡é¢˜</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> subject <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•é‚®ä»¶&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//æ­£æ–‡</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> context <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•é‚®ä»¶æ­£æ–‡&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">MimeMessage</span> message <span class="token operator">=</span> javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//æ­¤å¤„è®¾ç½®æ”¯æŒé™„ä»¶</span>
            helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token operator">+</span><span class="token string">&quot;(å°ç”œç”œ)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//æ·»åŠ é™„ä»¶</span>
            <span class="token class-name">File</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;springboot_23_mail-0.0.1-SNAPSHOT.jar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">File</span> f2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;resources\\logo.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            helper<span class="token punctuation">.</span><span class="token function">addAttachment</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>f1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            helper<span class="token punctuation">.</span><span class="token function">addAttachment</span><span class="token punctuation">(</span><span class="token string">&quot;æœ€é è°±çš„åŸ¹è®­ç»“æ„.png&quot;</span><span class="token punctuation">,</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span>

            javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆjavamailå…¶å®å°±æ˜¯ç®€åŒ–äº†å‘é€é‚®ä»¶çš„å®¢æˆ·ç«¯å¯¹è±¡JavaMailSenderçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œé€šè¿‡é…ç½®çš„å½¢å¼åŠ è½½ä¿¡æ¯ç®€åŒ–å¼€å‘è¿‡ç¨‹</li></ol><h3 id="_5-4-æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_5-4-æ¶ˆæ¯" aria-hidden="true">#</a> 5-4.æ¶ˆæ¯</h3><p>â€‹ springbootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯æœ€åä¸€éƒ¨åˆ†æˆ‘ä»¬æ¥è¯´è¯´æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œé¦–å…ˆå…ˆä»‹ç»ä¸€ä¸‹æ¶ˆæ¯çš„åº”ç”¨ã€‚</p><h4 id="æ¶ˆæ¯çš„æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯çš„æ¦‚å¿µ" aria-hidden="true">#</a> æ¶ˆæ¯çš„æ¦‚å¿µ</h4><p>â€‹ ä»å¹¿ä¹‰è§’åº¦æ¥è¯´ï¼Œæ¶ˆæ¯å…¶å®å°±æ˜¯ä¿¡æ¯ï¼Œä½†æ˜¯å’Œä¿¡æ¯åˆæœ‰æ‰€ä¸åŒã€‚ä¿¡æ¯é€šå¸¸è¢«å®šä¹‰ä¸ºä¸€ç»„æ•°æ®ï¼Œè€Œæ¶ˆæ¯é™¤äº†å…·æœ‰æ•°æ®çš„ç‰¹å¾ä¹‹å¤–ï¼Œè¿˜æœ‰æ¶ˆæ¯çš„æ¥æºä¸æ¥æ”¶çš„æ¦‚å¿µã€‚é€šå¸¸å‘é€æ¶ˆæ¯çš„ä¸€æ–¹ç§°ä¸ºæ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼Œæ¥æ”¶æ¶ˆæ¯çš„ä¸€æ–¹ç§°ä¸ºæ¶ˆæ¯çš„æ¶ˆè´¹è€…ã€‚è¿™æ ·æ¯”è¾ƒåï¼Œå‘ç°å…¶å®æ¶ˆæ¯å’Œä¿¡æ¯å·®åˆ«è¿˜æ˜¯å¾ˆå¤§çš„ã€‚</p><p>â€‹ ä¸ºä»€ä¹ˆè¦è®¾ç½®ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å‘¢ï¼Ÿè¿™å°±æ˜¯è¦è¯´åˆ°æ¶ˆæ¯çš„æ„ä¹‰äº†ã€‚ä¿¡æ¯é€šå¸¸å°±æ˜¯ä¸€ç»„æ•°æ®ï¼Œä½†æ˜¯æ¶ˆæ¯ç”±äºæœ‰äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œå°±å‡ºç°äº†æ¶ˆæ¯ä¸­æ‰€åŒ…å«çš„ä¿¡æ¯å¯ä»¥è¢«äºŒæ¬¡è§£è¯»ï¼Œç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼Œå¯ä»¥ç†è§£ä¸ºç”Ÿäº§è€…å‘é€äº†ä¸€ä¸ªä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºç”Ÿäº§è€…å‘é€äº†ä¸€ä¸ªå‘½ä»¤ï¼›æ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯ï¼Œå¯ä»¥ç†è§£ä¸ºæ¶ˆè´¹è€…å¾—åˆ°äº†ä¸€ä¸ªä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ¶ˆè´¹è€…å¾—åˆ°äº†ä¸€ä¸ªå‘½ä»¤ã€‚å¯¹æ¯”ä¸€ä¸‹æˆ‘ä»¬ä¼šå‘ç°ä¿¡æ¯æ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ï¼Œè€Œå‘½ä»¤åˆ™å¯ä»¥å…³è”ä¸‹ä¸€ä¸ªè¡Œä¸ºåŠ¨ä½œï¼Œè¿™æ ·å°±å¯ä»¥ç†è§£ä¸ºåŸºäºæ¥æ”¶çš„æ¶ˆæ¯ç›¸å½“äºå¾—åˆ°äº†ä¸€ä¸ªè¡Œä¸ºåŠ¨ä½œï¼Œä½¿ç”¨è¿™äº›è¡Œä¸ºåŠ¨ä½œå°±å¯ä»¥ç»„ç»‡æˆä¸€ä¸ªä¸šåŠ¡é€»è¾‘ï¼Œè¿›è¡Œè¿›ä¸€æ­¥çš„æ“ä½œã€‚æ€»çš„æ¥è¯´ï¼Œæ¶ˆæ¯å…¶å®ä¹Ÿæ˜¯ä¸€ç»„ä¿¡æ¯ï¼Œåªæ˜¯ä¸ºå…¶èµ‹äºˆäº†å…¨æ–°çš„å«ä¹‰ï¼Œå› ä¸ºæœ‰äº†æ¶ˆæ¯çš„æµåŠ¨ï¼Œå¹¶ä¸”æ˜¯æœ‰æ–¹å‘æ€§çš„æµåŠ¨ï¼Œå¸¦æ¥äº†åŸºäºæµåŠ¨çš„è¡Œä¸ºäº§ç”Ÿçš„å…¨æ–°è§£è¯»ã€‚å¼€å‘è€…å°±å¯ä»¥åŸºäºæ¶ˆæ¯çš„è¿™ç§ç‰¹æ®Šç†è§£ï¼Œå°†å…¶æ¢æˆä»£ç ä¸­çš„æŒ‡ä»¤ã€‚</p><p>â€‹ å¯¹äºæ¶ˆæ¯çš„ç†è§£ï¼Œåˆå­¦è€…æ€»è®¤ä¸ºæ¶ˆæ¯å†…éƒ¨çš„æ•°æ®éå¸¸å¤æ‚ï¼Œè¿™æ˜¯ä¸€ä¸ªè¯¯åŒºã€‚æ¯”å¦‚æˆ‘å‘é€äº†ä¸€ä¸ªæ¶ˆæ¯ï¼Œè¦æ±‚æ¥å—è€…ç¿»è¯‘å‘é€è¿‡å»çš„å†…å®¹ã€‚åˆå­¦è€…ä¼šè®¤ä¸ºæ¶ˆæ¯ä¸­ä¼šåŒ…å«è¢«ç¿»è¯‘çš„æ–‡å­—ï¼Œä»¥åŠæœ¬æ¬¡æ“ä½œè¦æ‰§è¡Œç¿»è¯‘æ“ä½œè€Œä¸æ˜¯æ‰“å°æ“ä½œã€‚å…¶å®è¿™ç§ç°è±¡æœ‰ç‚¹è¿‡åº¦è§£è¯»äº†ï¼Œå‘é€çš„æ¶ˆæ¯ä¸­ä»…ä»…åŒ…å«è¢«ç¿»è¯‘çš„æ–‡å­—ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ§åˆ¶ä¸åŒçš„äººæ¥æ”¶æ­¤æ¶ˆæ¯æ¥ç¡®è®¤è¦åšçš„äº‹æƒ…ã€‚ä¾‹å¦‚å‘é€è¢«ç¿»è¯‘çš„æ–‡å­—ä»…åˆ°Aç¨‹åºï¼Œè€ŒAç¨‹åºåªèƒ½è¿›è¡Œç¿»è¯‘æ“ä½œï¼Œè¿™æ ·å°±å¯ä»¥å‘é€ç®€å•çš„ä¿¡æ¯å®Œæˆå¤æ‚çš„ä¸šåŠ¡äº†ï¼Œæ˜¯é€šè¿‡æ¥æ”¶æ¶ˆæ¯çš„ä¸»ä½“ä¸åŒï¼Œè¿›è€Œæ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œ<strong>è€Œä¸ä¼šåœ¨æ¶ˆæ¯å†…éƒ¨å®šä¹‰æ•°æ®çš„æ“ä½œè¡Œä¸º</strong>ï¼Œå½“ç„¶å¦‚æœå¼€å‘è€…å¸Œæœ›æ¶ˆæ¯ä¸­åŒ…å«æ“ä½œç§ç±»ä¿¡æ¯ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯æå‡ºæ¶ˆæ¯çš„å†…å®¹å¯ä»¥æ›´ç®€å•ï¼Œæ›´å•ä¸€ã€‚</p><p>â€‹ å¯¹äºæ¶ˆæ¯çš„ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çš„å·¥ä½œæ¨¡å¼ï¼Œè¿˜å¯ä»¥å°†æ¶ˆæ¯åˆ’åˆ†æˆä¸¤ç§æ¨¡å¼ï¼ŒåŒæ­¥æ¶ˆè´¹ä¸å¼‚æ­¥æ¶ˆæ¯ã€‚</p><p>â€‹ æ‰€è°“åŒæ­¥æ¶ˆæ¯å°±æ˜¯ç”Ÿäº§è€…å‘é€å®Œæ¶ˆæ¯ï¼Œç­‰å¾…æ¶ˆè´¹è€…å¤„ç†ï¼Œæ¶ˆè´¹è€…å¤„ç†å®Œå°†ç»“æœå‘ŠçŸ¥ç”Ÿäº§è€…ï¼Œç„¶åç”Ÿäº§è€…ç»§ç»­å‘ä¸‹æ‰§è¡Œä¸šåŠ¡ã€‚è¿™ç§æ¨¡å¼è¿‡äºå¡ç”Ÿäº§è€…çš„ä¸šåŠ¡æ‰§è¡Œè¿ç»­æ€§ï¼Œåœ¨ç°åœ¨çš„ä¼ä¸šçº§å¼€å‘ä¸­ï¼Œä¸Šè¿°è¿™ç§ä¸šåŠ¡åœºæ™¯é€šå¸¸ä¸ä¼šé‡‡ç”¨æ¶ˆæ¯çš„å½¢å¼è¿›è¡Œå¤„ç†ã€‚</p><p>â€‹ æ‰€è°“å¼‚æ­¥æ¶ˆæ¯å°±æ˜¯ç”Ÿäº§è€…å‘é€å®Œæ¶ˆæ¯ï¼Œæ— éœ€ç­‰å¾…æ¶ˆè´¹è€…å¤„ç†å®Œæ¯•ï¼Œç”Ÿäº§è€…ç»§ç»­å‘ä¸‹æ‰§è¡Œå…¶ä»–åŠ¨ä½œã€‚æ¯”å¦‚ç”Ÿäº§è€…å‘é€äº†ä¸€ä¸ªæ—¥å¿—ä¿¡æ¯ç»™æ—¥å¿—ç³»ç»Ÿï¼Œå‘é€è¿‡å»ä»¥åç”Ÿäº§è€…å°±å‘ä¸‹åšå…¶ä»–äº‹æƒ…äº†ï¼Œæ— éœ€å…³æ³¨æ—¥å¿—ç³»ç»Ÿçš„æ‰§è¡Œç»“æœã€‚æ—¥å¿—ç³»ç»Ÿæ ¹æ®æ¥æ”¶åˆ°çš„æ—¥å¿—ä¿¡æ¯ç»§ç»­è¿›è¡Œä¸šåŠ¡æ‰§è¡Œï¼Œæ˜¯å•çº¯çš„è®°å½•æ—¥å¿—ï¼Œè¿˜æ˜¯è®°å½•æ—¥å¿—å¹¶æŠ¥è­¦ï¼Œè¿™äº›å’Œç”Ÿäº§è€…æ— å…³ï¼Œè¿™æ ·ç”Ÿäº§è€…çš„ä¸šåŠ¡æ‰§è¡Œæ•ˆç‡å°±ä¼šå¤§å¹…åº¦æå‡ã€‚å¹¶ä¸”å¯ä»¥é€šè¿‡æ·»åŠ å¤šä¸ªæ¶ˆè´¹è€…æ¥å¤„ç†åŒä¸€ä¸ªç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯æ¥æé«˜ç³»ç»Ÿçš„é«˜å¹¶å‘æ€§ï¼Œæ”¹å–„ç³»ç»Ÿå·¥ä½œæ•ˆç‡ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚ä¸€æ—¦æŸä¸€ä¸ªæ¶ˆè´¹è€…ç”±äºå„ç§é—®é¢˜å®•æœºäº†ï¼Œä¹Ÿä¸ä¼šå¯¹ä¸šåŠ¡äº§ç”Ÿå½±å“ï¼Œæé«˜äº†ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ã€‚</p><p>â€‹ ä»¥ä¸Šç®€å•çš„ä»‹ç»äº†ä¸€ä¸‹æ¶ˆæ¯è¿™ç§å·¥ä½œæ¨¡å¼å­˜åœ¨çš„æ„ä¹‰ï¼Œå¸Œæœ›å¯¹å„ä½å­¦ä¹ è€…æœ‰æ‰€å¸®åŠ©ã€‚</p><h4 id="javaå¤„ç†æ¶ˆæ¯çš„æ ‡å‡†è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#javaå¤„ç†æ¶ˆæ¯çš„æ ‡å‡†è§„èŒƒ" aria-hidden="true">#</a> Javaå¤„ç†æ¶ˆæ¯çš„æ ‡å‡†è§„èŒƒ</h4><p>â€‹ ç›®å‰ä¼ä¸šçº§å¼€å‘ä¸­å¹¿æ³›ä½¿ç”¨çš„æ¶ˆæ¯å¤„ç†æŠ€æœ¯å…±ä¸‰å¤§ç±»ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li>JMS</li><li>AMQP</li><li>MQTT</li></ul><p>â€‹ ä¸ºä»€ä¹ˆæ˜¯ä¸‰å¤§ç±»ï¼Œè€Œä¸æ˜¯ä¸‰ä¸ªæŠ€æœ¯å‘¢ï¼Ÿå› ä¸ºè¿™äº›éƒ½æ˜¯è§„èŒƒï¼Œå°±æƒ³JDBCæŠ€æœ¯ï¼Œæ˜¯ä¸ªè§„èŒƒï¼Œå¼€å‘é’ˆå¯¹è§„èŒƒå¼€å‘ï¼Œè¿è¡Œè¿˜è¦é å®ç°ç±»ï¼Œä¾‹å¦‚MySQLæä¾›äº†JDBCçš„å®ç°ï¼Œæœ€ç»ˆè¿è¡Œé çš„è¿˜æ˜¯å®ç°ã€‚å¹¶ä¸”è¿™ä¸‰ç±»è§„èŒƒéƒ½æ˜¯é’ˆå¯¹å¼‚æ­¥æ¶ˆæ¯è¿›è¡Œå¤„ç†çš„ï¼Œä¹Ÿç¬¦åˆæ¶ˆæ¯çš„è®¾è®¡æœ¬è´¨ï¼Œå¤„ç†å¼‚æ­¥çš„ä¸šåŠ¡ã€‚å¯¹ä»¥ä¸Šä¸‰ç§æ¶ˆæ¯è§„èŒƒåšä¸€ä¸‹æ™®åŠ</p><h5 id="jms" tabindex="-1"><a class="header-anchor" href="#jms" aria-hidden="true">#</a> JMS</h5><p>â€‹ JMSï¼ˆJava Message Serviceï¼‰,è¿™æ˜¯ä¸€ä¸ªè§„èŒƒï¼Œä½œç”¨ç­‰åŒäºJDBCè§„èŒƒï¼Œæä¾›äº†ä¸æ¶ˆæ¯æœåŠ¡ç›¸å…³çš„APIæ¥å£ã€‚</p><p><strong>JMSæ¶ˆæ¯æ¨¡å‹</strong></p><p>â€‹ JMSè§„èŒƒä¸­è§„èŒƒäº†æ¶ˆæ¯æœ‰ä¸¤ç§æ¨¡å‹ã€‚åˆ†åˆ«æ˜¯<strong>ç‚¹å¯¹ç‚¹æ¨¡å‹</strong>å’Œ<strong>å‘å¸ƒè®¢é˜…æ¨¡å‹</strong>ã€‚</p><p>â€‹ <strong>ç‚¹å¯¹ç‚¹æ¨¡å‹</strong>ï¼špeer-2-peerï¼Œç”Ÿäº§è€…ä¼šå°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªä¿å­˜æ¶ˆæ¯çš„å®¹å™¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨é˜Ÿåˆ—æ¨¡å‹ï¼Œä½¿ç”¨é˜Ÿåˆ—ä¿å­˜æ¶ˆæ¯ã€‚ä¸€ä¸ªé˜Ÿåˆ—çš„æ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œæˆ–æœªè¢«åŠæ—¶æ¶ˆè´¹å¯¼è‡´è¶…æ—¶ã€‚è¿™ç§æ¨¡å‹ä¸‹ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ˜¯ä¸€å¯¹ä¸€ç»‘å®šçš„ã€‚</p><p>â€‹ <strong>å‘å¸ƒè®¢é˜…æ¨¡å‹</strong>ï¼špublish-subscribeï¼Œç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªä¿å­˜æ¶ˆæ¯çš„å®¹å™¨ä¸­ï¼Œä¹Ÿæ˜¯ä½¿ç”¨é˜Ÿåˆ—æ¨¡å‹æ¥ä¿å­˜ã€‚ä½†æ˜¯æ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å®Œå…¨ç‹¬ç«‹ï¼Œç›¸äº’ä¸éœ€è¦æ„ŸçŸ¥å¯¹æ–¹çš„å­˜åœ¨ã€‚</p><p>â€‹ ä»¥ä¸Šè¿™ç§åˆ†ç±»æ˜¯ä»æ¶ˆæ¯çš„ç”Ÿäº§å’Œæ¶ˆè´¹è¿‡ç¨‹æ¥è¿›è¡ŒåŒºåˆ†ï¼Œé’ˆå¯¹æ¶ˆæ¯æ‰€åŒ…å«çš„ä¿¡æ¯ä¸åŒï¼Œè¿˜å¯ä»¥è¿›è¡Œä¸åŒç±»åˆ«çš„åˆ’åˆ†ã€‚</p><p><strong>JMSæ¶ˆæ¯ç§ç±»</strong></p><p>â€‹ æ ¹æ®æ¶ˆæ¯ä¸­åŒ…å«çš„æ•°æ®ç§ç±»åˆ’åˆ†ï¼Œå¯ä»¥å°†æ¶ˆæ¯åˆ’åˆ†æˆ6ç§æ¶ˆæ¯ã€‚</p><ul><li>TextMessage</li><li>MapMessage</li><li>BytesMessage</li><li>StreamMessage</li><li>ObjectMessage</li><li>Message ï¼ˆåªæœ‰æ¶ˆæ¯å¤´å’Œå±æ€§ï¼‰</li></ul><p>â€‹ JMSä¸»å¼ ä¸åŒç§ç±»çš„æ¶ˆæ¯ï¼Œæ¶ˆè´¹æ–¹å¼ä¸åŒï¼Œå¯ä»¥æ ¹æ®ä½¿ç”¨éœ€è¦é€‰æ‹©ä¸åŒç§ç±»çš„æ¶ˆæ¯ã€‚ä½†æ˜¯è¿™ä¸€ç‚¹ä¹Ÿæˆä¸ºå…¶è¯Ÿç—…ä¹‹å¤„ï¼Œåé¢å†è¯´ã€‚æ•´ä½“ä¸Šæ¥è¯´ï¼ŒJMSå°±æ˜¯å…¸å‹çš„ä¿å®ˆæ´¾ï¼Œä»€ä¹ˆéƒ½æŒ‰ç…§J2EEçš„è§„èŒƒæ¥ï¼Œåšä¸€å¥—è§„èŒƒï¼Œå®šä¹‰è‹¥å¹²ä¸ªæ ‡å‡†ï¼Œæ¯ä¸ªæ ‡å‡†ä¸‹åˆæä¾›ä¸€å¤§æ‰¹APIã€‚ç›®å‰å¯¹JMSè§„èŒƒå®ç°çš„æ¶ˆæ¯ä¸­é—´ä»¶æŠ€æœ¯è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ¯•ç«Ÿæ˜¯çš‡å®¶å¾¡ç”¨ï¼Œè‚¯å®šæœ‰äººèˆ”ï¼Œä¾‹å¦‚ActiveMQã€Redisã€HornetMQã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä¸å¤ªè§„èŒƒçš„å®ç°ï¼Œå‚è€ƒJMSçš„æ ‡å‡†è®¾è®¡ï¼Œä½†æ˜¯åˆä¸å®Œå…¨æ»¡è¶³å…¶è§„èŒƒï¼Œä¾‹å¦‚ï¼šRabbitMQã€RocketMQã€‚</p><h5 id="amqp" tabindex="-1"><a class="header-anchor" href="#amqp" aria-hidden="true">#</a> AMQP</h5><p>â€‹ JMSçš„é—®ä¸–ä¸ºæ¶ˆæ¯ä¸­é—´ä»¶æä¾›äº†å¾ˆå¼ºå¤§çš„è§„èŒƒæ€§æ”¯æ’‘ï¼Œä½†æ˜¯ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å°±å¼€å§‹è¢«äººè¯Ÿç—…ï¼Œæ¯”å¦‚JMSè®¾ç½®çš„æå…¶å¤æ‚çš„å¤šç§ç±»æ¶ˆæ¯å¤„ç†æœºåˆ¶ã€‚æœ¬æ¥åˆ†é—¨åˆ«ç±»å¤„ç†æŒºå¥½çš„ï¼Œä¸ºä»€ä¹ˆä¼šè¢«è¯Ÿç—…å‘¢ï¼ŸåŸå› å°±åœ¨äºJMSçš„è®¾è®¡æ˜¯J2EEè§„èŒƒï¼Œç«™åœ¨Javaå¼€å‘çš„è§’åº¦æ€è€ƒé—®é¢˜ã€‚ä½†æ˜¯ç°å®å¾€å¾€æ˜¯å¤æ‚åº¦å¾ˆé«˜çš„ã€‚æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ª.NETå¼€å‘çš„ç³»ç»ŸAï¼Œæœ‰ä¸€ä¸ªJavaå¼€å‘çš„ç³»ç»ŸBï¼Œç°åœ¨è¦ä»Aç³»ç»Ÿç»™Bç³»ç»Ÿå‘ä¸šåŠ¡æ¶ˆæ¯ï¼Œç»“æœä¸¤è¾¹æ•°æ®æ ¼å¼ä¸ç»Ÿä¸€ï¼Œæ²¡æ³•æ“ä½œã€‚JMSä¸æ˜¯å¯ä»¥ç»Ÿä¸€æ•°æ®æ ¼å¼å—ï¼Ÿæä¾›äº†6ç§æ•°æ®ç§ç±»ï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ å•Šã€‚NOï¼Œä¸€ä¸ªéƒ½ä¸èƒ½ç”¨ã€‚å› ä¸ºAç³»ç»Ÿçš„åº•å±‚è¯­è¨€ä¸æ˜¯Javaè¯­è¨€å¼€å‘çš„ï¼Œæ ¹æœ¬ä¸æ”¯æŒé‚£äº›å¯¹è±¡ã€‚è¿™å°±æ„å‘³ç€å¦‚æœæƒ³ä½¿ç”¨ç°æœ‰çš„ä¸šåŠ¡ç³»ç»ŸAç»§ç»­å¼€å‘å·²ç»ä¸å¯èƒ½äº†ï¼Œå¿…é¡»æ¨ç¿»é‡æ–°åšä½¿ç”¨Javaè¯­è¨€å¼€å‘çš„Aç³»ç»Ÿã€‚</p><p>â€‹ è¿™æ—¶å€™æœ‰äººå°±æå‡ºè¯´ï¼Œä½ æé‚£ä¹ˆå¤æ‚ï¼Œæ•´é‚£ä¹ˆå¤šç§ç±»å¹²ä»€ä¹ˆï¼Ÿæ‰¾ä¸€ç§å¤§å®¶éƒ½æ”¯æŒçš„æ¶ˆæ¯æ•°æ®ç±»å‹ä¸å°±è§£å†³è¿™ä¸ªè·¨å¹³å°çš„é—®é¢˜äº†å—ï¼Ÿå¤§å®¶ä¸€æƒ³ï¼Œå¯¹å•Šï¼Œäºæ˜¯AMQPå­•è‚²è€Œç”Ÿã€‚</p><p>â€‹ å•ä»ä¸Šé¢çš„è¯´æ˜ä¸­å…¶å®å¯ä»¥æ˜ç¡®æ„ŸçŸ¥åˆ°ï¼ŒAMQPçš„å‡ºç°è§£å†³çš„æ˜¯æ¶ˆæ¯ä¼ é€’æ—¶ä½¿ç”¨çš„æ¶ˆæ¯ç§ç±»çš„é—®é¢˜ï¼ŒåŒ–ç¹ä¸ºç®€ï¼Œä½†æ˜¯å…¶å¹¶æ²¡æœ‰å®Œå…¨æ¨ç¿»JMSçš„æ“ä½œAPIï¼Œæ‰€ä»¥è¯´AMQPä»…ä»…æ˜¯ä¸€ç§åè®®ï¼Œè§„èŒƒäº†æ•°æ®ä¼ è¾“çš„æ ¼å¼è€Œå·²ã€‚</p><p>â€‹ AMQPï¼ˆadvanced message queuing protocolï¼‰ï¼šä¸€ç§åè®®ï¼ˆé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œä¹Ÿæ˜¯æ¶ˆæ¯ä»£ç†è§„èŒƒï¼‰ï¼Œè§„èŒƒäº†ç½‘ç»œäº¤æ¢çš„æ•°æ®æ ¼å¼ï¼Œå…¼å®¹JMSæ“ä½œã€‚</p><p>**ä¼˜ç‚¹ï¼š**å…·æœ‰è·¨å¹³å°æ€§ï¼ŒæœåŠ¡å™¨ä¾›åº”å•†ï¼Œç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€æ¥å®ç°</p><p>**AMQPæ¶ˆæ¯ç§ç±»ï¼š**byte[]</p><p>â€‹ AMQPåœ¨JMSçš„æ¶ˆæ¯æ¨¡å‹åŸºç¡€ä¸Šåˆè¿›è¡Œäº†è¿›ä¸€æ­¥çš„æ‰©å±•ï¼Œé™¤äº†ç‚¹å¯¹ç‚¹å’Œå‘å¸ƒè®¢é˜…çš„æ¨¡å‹ï¼Œå¼€å‘äº†å‡ ç§å…¨æ–°çš„æ¶ˆæ¯æ¨¡å‹ï¼Œé€‚åº”å„ç§å„æ ·çš„æ¶ˆæ¯å‘é€ã€‚</p><p><strong>AMQPæ¶ˆæ¯æ¨¡å‹</strong></p><ul><li>direct exchange</li><li>fanout exchange</li><li>topic exchange</li><li>headers exchange</li><li>system exchange</li></ul><p>â€‹ ç›®å‰å®ç°äº†AMQPåè®®çš„æ¶ˆæ¯ä¸­é—´ä»¶æŠ€æœ¯ä¹Ÿå¾ˆå¤šï¼Œè€Œä¸”éƒ½æ˜¯è¾ƒä¸ºæµè¡Œçš„æŠ€æœ¯ï¼Œä¾‹å¦‚ï¼šRabbitMQã€StormMQã€RocketMQ</p><h5 id="mqtt" tabindex="-1"><a class="header-anchor" href="#mqtt" aria-hidden="true">#</a> MQTT</h5><p>â€‹ MQTTï¼ˆMessage Queueing Telemetry Transportï¼‰æ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼Œä¸“ä¸ºå°è®¾å¤‡è®¾è®¡ï¼Œæ˜¯ç‰©è”ç½‘ï¼ˆIOTï¼‰ç”Ÿæ€ç³»ç»Ÿä¸­ä¸»è¦æˆåˆ†ä¹‹ä¸€ã€‚ç”±äºä¸JavaEEä¼ä¸šçº§å¼€å‘æ²¡æœ‰äº¤é›†ï¼Œæ­¤å¤„ä¸ä½œè¿‡å¤šçš„è¯´æ˜ã€‚</p><p>â€‹ é™¤äº†ä¸Šè¿°3ç§J2EEä¼ä¸šçº§åº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨çš„ä¸‰ç§å¼‚æ­¥æ¶ˆæ¯ä¼ é€’æŠ€æœ¯ï¼Œè¿˜æœ‰ä¸€ç§æŠ€æœ¯ä¹Ÿä¸èƒ½å¿½ç•¥ï¼ŒKafkaã€‚</p><h5 id="kafka" tabindex="-1"><a class="header-anchor" href="#kafka" aria-hidden="true">#</a> KafKa</h5><p>â€‹ Kafkaï¼Œä¸€ç§é«˜ååé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œæä¾›å®æ—¶æ¶ˆæ¯åŠŸèƒ½ã€‚KafkaæŠ€æœ¯å¹¶ä¸æ˜¯ä½œä¸ºæ¶ˆæ¯ä¸­é—´ä»¶ä¸ºä¸»è¦åŠŸèƒ½çš„äº§å“ï¼Œä½†æ˜¯å…¶æ‹¥æœ‰å‘å¸ƒè®¢é˜…çš„å·¥ä½œæ¨¡å¼ï¼Œä¹Ÿå¯ä»¥å……å½“æ¶ˆæ¯ä¸­é—´ä»¶æ¥ä½¿ç”¨ï¼Œè€Œä¸”ç›®å‰ä¼ä¸šçº§å¼€å‘ä¸­å…¶èº«å½±ä¹Ÿä¸å°‘è§ã€‚</p><p>â€‹ æœ¬èŠ‚å†…å®¹å°†å›´ç»•ç€ä¸Šè¿°å†…å®¹ä¸­çš„å‡ ç§å®ç°æ–¹æ¡ˆè®²è§£springbootæ•´åˆå„ç§å„æ ·çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚ç”±äºå„ç§æ¶ˆæ¯ä¸­é—´ä»¶å¿…é¡»å…ˆå®‰è£…å†ä½¿ç”¨ï¼Œä¸‹é¢çš„å†…å®¹é‡‡ç”¨Windowsç³»ç»Ÿå®‰è£…ï¼Œé™ä½å„ä½å­¦ä¹ è€…çš„å­¦ä¹ éš¾åº¦ï¼ŒåŸºæœ¬å¥—è·¯å’Œä¹‹å‰å­¦ä¹ NoSQLè§£å†³æ–¹æ¡ˆä¸€æ ·ï¼Œå…ˆå®‰è£…å†æ•´åˆã€‚</p><h4 id="è´­ç‰©è®¢å•å‘é€æ‰‹æœºçŸ­ä¿¡æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#è´­ç‰©è®¢å•å‘é€æ‰‹æœºçŸ­ä¿¡æ¡ˆä¾‹" aria-hidden="true">#</a> è´­ç‰©è®¢å•å‘é€æ‰‹æœºçŸ­ä¿¡æ¡ˆä¾‹</h4><p>â€‹ ä¸ºäº†ä¾¿äºä¸‹é¢æ¼”ç¤ºå„ç§å„æ ·çš„æ¶ˆæ¯ä¸­é—´ä»¶æŠ€æœ¯ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè´­ç‰©è¿‡ç¨‹ç”Ÿæˆè®¢å•æ—¶ä¸ºç”¨æˆ·å‘é€çŸ­ä¿¡çš„æ¡ˆä¾‹ç¯å¢ƒï¼Œæ¨¡æ‹Ÿä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶å®ç°å‘é€æ‰‹æœºçŸ­ä¿¡çš„è¿‡ç¨‹ã€‚</p><p>â€‹ æ‰‹æœºéªŒè¯ç æ¡ˆä¾‹éœ€æ±‚å¦‚ä¸‹ï¼š</p><ul><li><p>æ‰§è¡Œä¸‹å•ä¸šåŠ¡æ—¶ï¼ˆæ¨¡æ‹Ÿæ­¤è¿‡ç¨‹ï¼‰ï¼Œè°ƒç”¨æ¶ˆæ¯æœåŠ¡ï¼Œå°†è¦å‘é€çŸ­ä¿¡çš„è®¢å•idä¼ é€’ç»™æ¶ˆæ¯ä¸­é—´ä»¶</p></li><li><p>æ¶ˆæ¯å¤„ç†æœåŠ¡æ¥æ”¶åˆ°è¦å‘é€çš„è®¢å•idåè¾“å‡ºè®¢å•idï¼ˆæ¨¡æ‹Ÿå‘çŸ­ä¿¡ï¼‰</p><p>ç”±äºä¸æ¶‰åŠæ•°æ®è¯»å†™ï¼Œä»…å¼€å‘ä¸šåŠ¡å±‚ä¸è¡¨ç°å±‚ï¼Œå…¶ä¸­çŸ­ä¿¡å¤„ç†çš„ä¸šåŠ¡ä»£ç ç‹¬ç«‹å¼€å‘ï¼Œä»£ç å¦‚ä¸‹ï¼š</p></li></ul><p><strong>è®¢å•ä¸šåŠ¡</strong></p><p>â€‹ <strong>ä¸šåŠ¡å±‚æ¥å£</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">order</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ¨¡æ‹Ÿä¼ å…¥è®¢å•idï¼Œæ‰§è¡Œä¸‹è®¢å•ä¸šåŠ¡ï¼Œå‚æ•°ä¸ºè™šæ‹Ÿè®¾å®šï¼Œå®é™…åº”ä¸ºè®¢å•å¯¹åº”çš„å®ä½“ç±»</p><p>â€‹ <strong>ä¸šåŠ¡å±‚å®ç°</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MessageService</span> messageService<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">order</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ä¸€ç³»åˆ—æ“ä½œï¼ŒåŒ…å«å„ç§æœåŠ¡è°ƒç”¨ï¼Œå¤„ç†å„ç§ä¸šåŠ¡</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è®¢å•å¤„ç†å¼€å§‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//çŸ­ä¿¡æ¶ˆæ¯å¤„ç†</span>
        messageService<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è®¢å•å¤„ç†ç»“æŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸šåŠ¡å±‚è½¬è°ƒçŸ­ä¿¡å¤„ç†çš„æœåŠ¡MessageService</p><p>â€‹ <strong>è¡¨ç°å±‚æœåŠ¡</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/orders&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">OrderService</span> orderService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">order</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        orderService<span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¡¨ç°å±‚å¯¹å¤–å¼€å‘æ¥å£ï¼Œä¼ å…¥è®¢å•idå³å¯ï¼ˆæ¨¡æ‹Ÿï¼‰</p><p><strong>çŸ­ä¿¡å¤„ç†ä¸šåŠ¡</strong></p><p>â€‹ <strong>ä¸šåŠ¡å±‚æ¥å£</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MessageService</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">doMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ çŸ­ä¿¡å¤„ç†ä¸šåŠ¡å±‚æ¥å£æä¾›ä¸¤ä¸ªæ“ä½œï¼Œå‘é€è¦å¤„ç†çš„è®¢å•idåˆ°æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå¦ä¸€ä¸ªæ“ä½œç›®å‰æš‚ä¸”è®¾è®¡æˆå¤„ç†æ¶ˆæ¯ï¼Œå®é™…æ¶ˆæ¯çš„å¤„ç†è¿‡ç¨‹ä¸åº”è¯¥æ˜¯æ‰‹åŠ¨æ‰§è¡Œï¼Œåº”è¯¥æ˜¯è‡ªåŠ¨æ‰§è¡Œï¼Œåˆ°å…·ä½“å®ç°æ—¶å†è¿›è¡Œè®¾è®¡</p><p>â€‹ <strong>ä¸šåŠ¡å±‚å®ç°</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MessageService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> msgList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        msgList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">doMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> msgList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ çŸ­ä¿¡å¤„ç†ä¸šåŠ¡å±‚å®ç°ä¸­ä½¿ç”¨é›†åˆå…ˆæ¨¡æ‹Ÿæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè§‚å¯Ÿæ•ˆæœ</p><p>â€‹ <strong>è¡¨ç°å±‚æœåŠ¡</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/msgs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MessageService</span> messageService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">doMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> messageService<span class="token punctuation">.</span><span class="token function">doMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ çŸ­ä¿¡å¤„ç†è¡¨ç°å±‚æ¥å£æš‚ä¸”å¼€å‘å‡ºä¸€ä¸ªå¤„ç†æ¶ˆæ¯çš„å…¥å£ï¼Œä½†æ˜¯æ­¤ä¸šåŠ¡æ˜¯å¯¹åº”ä¸šåŠ¡å±‚ä¸­è®¾è®¡çš„æ¨¡æ‹Ÿæ¥å£ï¼Œå®é™…ä¸šåŠ¡ä¸éœ€è¦è®¾è®¡æ­¤æ¥å£ã€‚</p><p>â€‹ ä¸‹é¢å¼€å¯springbootæ•´åˆå„ç§å„æ ·çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä»ä¸¥æ ¼æ»¡è¶³JMSè§„èŒƒçš„ActiveMQå¼€å§‹</p><h4 id="springbootæ•´åˆactivemq" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆactivemq" aria-hidden="true">#</a> SpringBootæ•´åˆActiveMQ</h4><p>â€‹ ActiveMQæ˜¯MQäº§å“ä¸­çš„å…ƒè€çº§äº§å“ï¼Œæ—©æœŸæ ‡å‡†MQäº§å“ä¹‹ä¸€ï¼Œåœ¨AMQPåè®®æ²¡æœ‰å‡ºç°ä¹‹å‰ï¼Œå æ®äº†æ¶ˆæ¯ä¸­é—´ä»¶å¸‚åœºçš„ç»å¤§éƒ¨åˆ†ä»½é¢ï¼ŒåæœŸå› ä¸ºAMQPç³»åˆ—äº§å“çš„å‡ºç°ï¼Œè¿…é€Ÿèµ°å¼±ï¼Œç›®å‰ä»…åœ¨ä¸€äº›çº¿ä¸Šè¿è¡Œçš„äº§å“ä¸­å‡ºç°ï¼Œæ–°äº§å“å¼€å‘è¾ƒå°‘é‡‡ç”¨ã€‚</p><h5 id="å®‰è£…-3" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-3" aria-hidden="true">#</a> å®‰è£…</h5><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<a href="https://activemq.apache.org/components/classic/download/" target="_blank" rel="noopener noreferrer">https://activemq.apache.org/components/classic/download<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://activemq.apache.org/components/classic/download/" target="_blank" rel="noopener noreferrer">/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>â€‹ ä¸‹è½½çš„å®‰è£…åŒ…æ˜¯è§£å‹ç¼©å°±èƒ½ä½¿ç”¨çš„zipæ–‡ä»¶ï¼Œè§£å‹ç¼©å®Œæ¯•åä¼šå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶</p><p><img src="/assets/image-20220228160001620.fbb28ea1.png" alt="image-20220228160001620"></p><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>activemq.bat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ è¿è¡Œbinç›®å½•ä¸‹çš„win32æˆ–win64ç›®å½•ä¸‹çš„activemq.batå‘½ä»¤å³å¯ï¼Œæ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿé€‰æ‹©å³å¯ï¼Œé»˜è®¤å¯¹å¤–æœåŠ¡ç«¯å£61616ã€‚</p><p><strong>è®¿é—®webç®¡ç†æœåŠ¡</strong></p><p>â€‹ ActiveMQå¯åŠ¨åä¼šå¯åŠ¨ä¸€ä¸ªWebæ§åˆ¶å°æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡è¯¥æœåŠ¡ç®¡ç†ActiveMQã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http://127.0.0.1:8161/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ webç®¡ç†æœåŠ¡é»˜è®¤ç«¯å£8161ï¼Œè®¿é—®åå¯ä»¥æ‰“å¼€ActiveMQçš„ç®¡ç†ç•Œé¢ï¼Œå¦‚ä¸‹ï¼š</p><img src="/assets/image-20220228160844972.2d44f424.png" alt="image-20220228160844972" style="zoom:67%;"><p>â€‹ é¦–å…ˆè¾“å…¥è®¿é—®ç”¨æˆ·åå’Œå¯†ç ï¼Œåˆå§‹åŒ–ç”¨æˆ·åå’Œå¯†ç ç›¸åŒï¼Œå‡ä¸ºï¼šadminï¼ŒæˆåŠŸç™»å½•åè¿›å…¥ç®¡ç†åå°ç•Œé¢ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20220228161010401.4014bcc8.png" alt="image-20220228161010401"></p><p>â€‹ çœ‹åˆ°ä¸Šè¿°ç•Œé¢è§†ä¸ºå¯åŠ¨ActiveMQæœåŠ¡æˆåŠŸã€‚</p><p><strong>å¯åŠ¨å¤±è´¥</strong></p><p>â€‹ åœ¨ActiveMQå¯åŠ¨æ—¶è¦å ç”¨å¤šä¸ªç«¯å£ï¼Œä»¥ä¸‹ä¸ºæ­£å¸¸å¯åŠ¨ä¿¡æ¯ï¼š</p><div class="language-basic ext-basic line-numbers-mode"><pre class="language-basic"><code>wrapper  | <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span> Wrapper Started <span class="token keyword">as</span> Console
wrapper  | Launching a JVM...
jvm <span class="token number">1</span>    | Wrapper <span class="token punctuation">(</span>Version <span class="token number">3.2</span><span class="token number">.3</span><span class="token punctuation">)</span> http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>wrapper.tanukisoftware.org
jvm <span class="token number">1</span>    |   Copyright <span class="token number">1999</span><span class="token operator">-</span><span class="token number">2006</span> Tanuki Software<span class="token punctuation">,</span> Inc.  All Rights Reserved.
jvm <span class="token number">1</span>    |
jvm <span class="token number">1</span>    | Java Runtime<span class="token punctuation">:</span> Oracle Corporation <span class="token number">1.8</span><span class="token number">.0</span>_172 D<span class="token punctuation">:</span>\soft\jdk1.<span class="token number">8.0</span>_172\jre
jvm <span class="token number">1</span>    |   Heap sizes<span class="token punctuation">:</span> current<span class="token operator">=</span><span class="token number">249344</span>k  free<span class="token operator">=</span><span class="token number">235037</span>k  <span class="token function">max</span><span class="token operator">=</span><span class="token number">932352</span>k
jvm <span class="token number">1</span>    |     JVM args<span class="token punctuation">:</span> <span class="token operator">-</span>Dactivemq.home<span class="token operator">=</span>..<span class="token operator">/</span>.. <span class="token operator">-</span>Dactivemq.<span class="token function">base</span><span class="token operator">=</span>..<span class="token operator">/</span>.. <span class="token operator">-</span>Djavax.net.ssl.keyStorePassword<span class="token operator">=</span>password <span class="token operator">-</span>Djavax.net.ssl.trustStorePassword<span class="token operator">=</span>password <span class="token operator">-</span>Djavax.net.ssl.keyStore<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>conf<span class="token operator">/</span>broker.ks <span class="token operator">-</span>Djavax.net.ssl.trustStore<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>conf<span class="token operator">/</span>broker.ts <span class="token operator">-</span>Dcom.sun.management.jmxremote <span class="token operator">-</span>Dorg.apache.activemq.UseDedicatedTaskRunner<span class="token operator">=</span>true <span class="token operator">-</span>Djava.util.logging.config.file<span class="token operator">=</span>logging.properties <span class="token operator">-</span>Dactivemq.conf<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>conf <span class="token operator">-</span>Dactivemq.<span class="token keyword">data</span><span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span><span class="token keyword">data</span> <span class="token operator">-</span>Djava.security.auth.login.config<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>conf<span class="token operator">/</span>login.config <span class="token operator">-</span>Xmx1024m <span class="token operator">-</span>Djava.library.path<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>bin<span class="token operator">/</span>win64 <span class="token operator">-</span>Dwrapper.<span class="token keyword">key</span><span class="token operator">=</span><span class="token number">7</span>ySrCD75XhLCpLjd <span class="token operator">-</span>Dwrapper.port<span class="token operator">=</span><span class="token number">32000</span> <span class="token operator">-</span>Dwrapper.jvm.port.<span class="token function">min</span><span class="token operator">=</span><span class="token number">31000</span> <span class="token operator">-</span>Dwrapper.jvm.port.<span class="token function">max</span><span class="token operator">=</span><span class="token number">31999</span> <span class="token operator">-</span>Dwrapper.pid<span class="token operator">=</span><span class="token number">9364</span> <span class="token operator">-</span>Dwrapper.version<span class="token operator">=</span><span class="token number">3.2</span><span class="token number">.3</span> <span class="token operator">-</span>Dwrapper.native_library<span class="token operator">=</span>wrapper <span class="token operator">-</span>Dwrapper.cpu.<span class="token function">timeout</span><span class="token operator">=</span><span class="token number">10</span> <span class="token operator">-</span>Dwrapper.jvmid<span class="token operator">=</span><span class="token number">1</span>
jvm <span class="token number">1</span>    | Extensions classpath<span class="token punctuation">:</span>
jvm <span class="token number">1</span>    |   [..\..\lib<span class="token punctuation">,</span>..\..\lib\camel<span class="token punctuation">,</span>..\..\lib\optional<span class="token punctuation">,</span>..\..\lib\web<span class="token punctuation">,</span>..\..\lib\extra]
jvm <span class="token number">1</span>    | ACTIVEMQ_HOME<span class="token punctuation">:</span> ..\..
jvm <span class="token number">1</span>    | ACTIVEMQ_BASE<span class="token punctuation">:</span> ..\..
jvm <span class="token number">1</span>    | ACTIVEMQ_CONF<span class="token punctuation">:</span> ..\..\conf
jvm <span class="token number">1</span>    | ACTIVEMQ_DATA<span class="token punctuation">:</span> ..\..\<span class="token keyword">data</span>
jvm <span class="token number">1</span>    | Loading message broker from<span class="token punctuation">:</span> xbean<span class="token punctuation">:</span>activemq.xml
jvm <span class="token number">1</span>    |  INFO | Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$<span class="token number">1</span>@<span class="token number">5</span>f3ebfe0<span class="token punctuation">:</span> startup <span class="token function">date</span> [Mon Feb <span class="token number">28</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">07</span><span class="token punctuation">:</span><span class="token number">48</span> CST <span class="token number">2022</span>]<span class="token punctuation">;</span> root <span class="token function">of</span> context hierarchy
jvm <span class="token number">1</span>    |  INFO | <span class="token keyword">Using</span> Persistence Adapter<span class="token punctuation">:</span> KahaDBPersistenceAdapter[D<span class="token punctuation">:</span>\soft\activemq\bin\win64\..\..\<span class="token keyword">data</span>\kahadb]
jvm <span class="token number">1</span>    |  INFO | KahaDB <span class="token function">is</span> version <span class="token number">7</span>
jvm <span class="token number">1</span>    |  INFO | PListStore<span class="token punctuation">:</span>[D<span class="token punctuation">:</span>\soft\activemq\bin\win64\..\..\<span class="token keyword">data</span>\localhost\tmp_storage] started
jvm <span class="token number">1</span>    |  INFO | Apache ActiveMQ <span class="token number">5.16</span><span class="token number">.3</span> <span class="token punctuation">(</span>localhost<span class="token punctuation">,</span> ID<span class="token punctuation">:</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token operator">-</span><span class="token number">10434</span><span class="token operator">-</span><span class="token number">1646035669595</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">is</span> starting
jvm <span class="token number">1</span>    |  INFO | Listening <span class="token keyword">for</span> connections <span class="token function">at</span><span class="token punctuation">:</span> tcp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token punctuation">:</span><span class="token number">61616</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span>
jvm <span class="token number">1</span>    |  INFO | Connector openwire started
jvm <span class="token number">1</span>    |  INFO | Listening <span class="token keyword">for</span> connections <span class="token function">at</span><span class="token punctuation">:</span> amqp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token punctuation">:</span><span class="token number">5672</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span>
jvm <span class="token number">1</span>    |  INFO | Connector amqp started
jvm <span class="token number">1</span>    |  INFO | Listening <span class="token keyword">for</span> connections <span class="token function">at</span><span class="token punctuation">:</span> stomp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token punctuation">:</span><span class="token number">61613</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span>
jvm <span class="token number">1</span>    |  INFO | Connector stomp started
jvm <span class="token number">1</span>    |  INFO | Listening <span class="token keyword">for</span> connections <span class="token function">at</span><span class="token punctuation">:</span> mqtt<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token punctuation">:</span><span class="token number">1883</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span>
jvm <span class="token number">1</span>    |  INFO | Connector mqtt started
jvm <span class="token number">1</span>    |  INFO | Starting Jetty server
jvm <span class="token number">1</span>    |  INFO | Creating Jetty connector
jvm <span class="token number">1</span>    |  WARN | ServletContext@o.e.j.s.ServletContextHandler@<span class="token number">7350746</span>f{<span class="token operator">/</span><span class="token punctuation">,</span>null<span class="token punctuation">,</span>STARTING} has uncovered http methods <span class="token keyword">for</span> path<span class="token punctuation">:</span> <span class="token operator">/</span>
jvm <span class="token number">1</span>    |  INFO | Listening <span class="token keyword">for</span> connections <span class="token function">at</span> ws<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token punctuation">:</span><span class="token number">61614</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span>
jvm <span class="token number">1</span>    |  INFO | Connector ws started
jvm <span class="token number">1</span>    |  INFO | Apache ActiveMQ <span class="token number">5.16</span><span class="token number">.3</span> <span class="token punctuation">(</span>localhost<span class="token punctuation">,</span> ID<span class="token punctuation">:</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token operator">-</span><span class="token number">10434</span><span class="token operator">-</span><span class="token number">1646035669595</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span> started
jvm <span class="token number">1</span>    |  INFO | <span class="token keyword">For</span> help <span class="token operator">or</span> more information please see<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>activemq.apache.org
jvm <span class="token number">1</span>    |  WARN | Store limit <span class="token function">is</span> <span class="token number">102400</span> mb <span class="token punctuation">(</span>current store usage <span class="token function">is</span> <span class="token number">0</span> mb<span class="token punctuation">)</span>. The <span class="token keyword">data</span> directory<span class="token punctuation">:</span> D<span class="token punctuation">:</span>\soft\activemq\bin\win64\..\..\<span class="token keyword">data</span>\kahadb only has <span class="token number">68936</span> mb <span class="token function">of</span> usable space. <span class="token operator">-</span> resetting <span class="token keyword">to</span> maximum available disk space<span class="token punctuation">:</span> <span class="token number">68936</span> mb
jvm <span class="token number">1</span>    |  INFO | ActiveMQ WebConsole available <span class="token function">at</span> http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8161</span><span class="token operator">/</span>
jvm <span class="token number">1</span>    |  INFO | ActiveMQ Jolokia <span class="token function">REST</span> API available <span class="token function">at</span> http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8161</span><span class="token operator">/</span>api<span class="token operator">/</span>jolokia<span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å…¶ä¸­å ç”¨çš„ç«¯å£æœ‰ï¼š61616ã€5672ã€61613ã€1883ã€61614ï¼Œå¦‚æœå¯åŠ¨å¤±è´¥ï¼Œè¯·å…ˆç®¡ç†å¯¹åº”ç«¯å£å³å¯ã€‚ä»¥ä¸‹å°±æ˜¯æŸä¸ªç«¯å£å ç”¨çš„æŠ¥é”™ä¿¡æ¯ï¼Œå¯ä»¥ä»æŠ›å‡ºå¼‚å¸¸çš„ä½ç½®çœ‹å‡ºï¼Œå¯åŠ¨5672ç«¯å£æ—¶ç«¯å£è¢«å ç”¨ï¼Œæ˜¾ç¤ºjava.net.BindException: Address already in use: JVM_Bindã€‚Windowsç³»ç»Ÿä¸­ç»ˆæ­¢ç«¯å£è¿è¡Œçš„æ“ä½œå‚çœ‹<a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%90%AF%E5%8A%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">ã€å‘½ä»¤è¡Œå¯åŠ¨å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆã€‘</a></p><div class="language-basic ext-basic line-numbers-mode"><pre class="language-basic"><code>wrapper  | <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span> Wrapper Started <span class="token keyword">as</span> Console
wrapper  | Launching a JVM...
jvm <span class="token number">1</span>    | Wrapper <span class="token punctuation">(</span>Version <span class="token number">3.2</span><span class="token number">.3</span><span class="token punctuation">)</span> http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>wrapper.tanukisoftware.org
jvm <span class="token number">1</span>    |   Copyright <span class="token number">1999</span><span class="token operator">-</span><span class="token number">2006</span> Tanuki Software<span class="token punctuation">,</span> Inc.  All Rights Reserved.
jvm <span class="token number">1</span>    |
jvm <span class="token number">1</span>    | Java Runtime<span class="token punctuation">:</span> Oracle Corporation <span class="token number">1.8</span><span class="token number">.0</span>_172 D<span class="token punctuation">:</span>\soft\jdk1.<span class="token number">8.0</span>_172\jre
jvm <span class="token number">1</span>    |   Heap sizes<span class="token punctuation">:</span> current<span class="token operator">=</span><span class="token number">249344</span>k  free<span class="token operator">=</span><span class="token number">235038</span>k  <span class="token function">max</span><span class="token operator">=</span><span class="token number">932352</span>k
jvm <span class="token number">1</span>    |     JVM args<span class="token punctuation">:</span> <span class="token operator">-</span>Dactivemq.home<span class="token operator">=</span>..<span class="token operator">/</span>.. <span class="token operator">-</span>Dactivemq.<span class="token function">base</span><span class="token operator">=</span>..<span class="token operator">/</span>.. <span class="token operator">-</span>Djavax.net.ssl.keyStorePassword<span class="token operator">=</span>password <span class="token operator">-</span>Djavax.net.ssl.trustStorePassword<span class="token operator">=</span>password <span class="token operator">-</span>Djavax.net.ssl.keyStore<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>conf<span class="token operator">/</span>broker.ks <span class="token operator">-</span>Djavax.net.ssl.trustStore<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>conf<span class="token operator">/</span>broker.ts <span class="token operator">-</span>Dcom.sun.management.jmxremote <span class="token operator">-</span>Dorg.apache.activemq.UseDedicatedTaskRunner<span class="token operator">=</span>true <span class="token operator">-</span>Djava.util.logging.config.file<span class="token operator">=</span>logging.properties <span class="token operator">-</span>Dactivemq.conf<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>conf <span class="token operator">-</span>Dactivemq.<span class="token keyword">data</span><span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span><span class="token keyword">data</span> <span class="token operator">-</span>Djava.security.auth.login.config<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>conf<span class="token operator">/</span>login.config <span class="token operator">-</span>Xmx1024m <span class="token operator">-</span>Djava.library.path<span class="token operator">=</span>..<span class="token operator">/</span>..<span class="token operator">/</span>bin<span class="token operator">/</span>win64 <span class="token operator">-</span>Dwrapper.<span class="token keyword">key</span><span class="token operator">=</span>QPJoy9ZoXeWmmwTS <span class="token operator">-</span>Dwrapper.port<span class="token operator">=</span><span class="token number">32000</span> <span class="token operator">-</span>Dwrapper.jvm.port.<span class="token function">min</span><span class="token operator">=</span><span class="token number">31000</span> <span class="token operator">-</span>Dwrapper.jvm.port.<span class="token function">max</span><span class="token operator">=</span><span class="token number">31999</span> <span class="token operator">-</span>Dwrapper.pid<span class="token operator">=</span><span class="token number">14836</span> <span class="token operator">-</span>Dwrapper.version<span class="token operator">=</span><span class="token number">3.2</span><span class="token number">.3</span> <span class="token operator">-</span>Dwrapper.native_library<span class="token operator">=</span>wrapper <span class="token operator">-</span>Dwrapper.cpu.<span class="token function">timeout</span><span class="token operator">=</span><span class="token number">10</span> <span class="token operator">-</span>Dwrapper.jvmid<span class="token operator">=</span><span class="token number">1</span>
jvm <span class="token number">1</span>    | Extensions classpath<span class="token punctuation">:</span>
jvm <span class="token number">1</span>    |   [..\..\lib<span class="token punctuation">,</span>..\..\lib\camel<span class="token punctuation">,</span>..\..\lib\optional<span class="token punctuation">,</span>..\..\lib\web<span class="token punctuation">,</span>..\..\lib\extra]
jvm <span class="token number">1</span>    | ACTIVEMQ_HOME<span class="token punctuation">:</span> ..\..
jvm <span class="token number">1</span>    | ACTIVEMQ_BASE<span class="token punctuation">:</span> ..\..
jvm <span class="token number">1</span>    | ACTIVEMQ_CONF<span class="token punctuation">:</span> ..\..\conf
jvm <span class="token number">1</span>    | ACTIVEMQ_DATA<span class="token punctuation">:</span> ..\..\<span class="token keyword">data</span>
jvm <span class="token number">1</span>    | Loading message broker from<span class="token punctuation">:</span> xbean<span class="token punctuation">:</span>activemq.xml
jvm <span class="token number">1</span>    |  INFO | Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$<span class="token number">1</span>@<span class="token number">2</span>c9392f5<span class="token punctuation">:</span> startup <span class="token function">date</span> [Mon Feb <span class="token number">28</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">06</span><span class="token punctuation">:</span><span class="token number">16</span> CST <span class="token number">2022</span>]<span class="token punctuation">;</span> root <span class="token function">of</span> context hierarchy
jvm <span class="token number">1</span>    |  INFO | <span class="token keyword">Using</span> Persistence Adapter<span class="token punctuation">:</span> KahaDBPersistenceAdapter[D<span class="token punctuation">:</span>\soft\activemq\bin\win64\..\..\<span class="token keyword">data</span>\kahadb]
jvm <span class="token number">1</span>    |  INFO | KahaDB <span class="token function">is</span> version <span class="token number">7</span>
jvm <span class="token number">1</span>    |  INFO | PListStore<span class="token punctuation">:</span>[D<span class="token punctuation">:</span>\soft\activemq\bin\win64\..\..\<span class="token keyword">data</span>\localhost\tmp_storage] started
jvm <span class="token number">1</span>    |  INFO | Apache ActiveMQ <span class="token number">5.16</span><span class="token number">.3</span> <span class="token punctuation">(</span>localhost<span class="token punctuation">,</span> ID<span class="token punctuation">:</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token operator">-</span><span class="token number">10257</span><span class="token operator">-</span><span class="token number">1646035577620</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">is</span> starting
jvm <span class="token number">1</span>    |  INFO | Listening <span class="token keyword">for</span> connections <span class="token function">at</span><span class="token punctuation">:</span> tcp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token punctuation">:</span><span class="token number">61616</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span>
jvm <span class="token number">1</span>    |  INFO | Connector openwire started
jvm <span class="token number">1</span>    | <span class="token keyword">ERROR</span> | Failed <span class="token keyword">to</span> start Apache ActiveMQ <span class="token punctuation">(</span>localhost<span class="token punctuation">,</span> ID<span class="token punctuation">:</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token operator">-</span><span class="token number">10257</span><span class="token operator">-</span><span class="token number">1646035577620</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    | java.io.IOException<span class="token punctuation">:</span> Transport Connector could <span class="token operator">not</span> be registered <span class="token function">in</span> JMX<span class="token punctuation">:</span> java.io.IOException<span class="token punctuation">:</span> Failed <span class="token keyword">to</span> bind <span class="token keyword">to</span> server socket<span class="token punctuation">:</span> amqp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">:</span><span class="token number">5672</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span> due <span class="token keyword">to</span><span class="token punctuation">:</span> java.net.BindException<span class="token punctuation">:</span> Address already <span class="token function">in</span> <span class="token function">use</span><span class="token punctuation">:</span> JVM_Bind
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.util.IOExceptionSupport.create<span class="token punctuation">(</span>IOExceptionSupport.java<span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerService.registerConnectorMBean<span class="token punctuation">(</span>BrokerService.java<span class="token punctuation">:</span><span class="token number">2288</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerService.startTransportConnector<span class="token punctuation">(</span>BrokerService.java<span class="token punctuation">:</span><span class="token number">2769</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerService.startAllConnectors<span class="token punctuation">(</span>BrokerService.java<span class="token punctuation">:</span><span class="token number">2665</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerService.doStartBroker<span class="token punctuation">(</span>BrokerService.java<span class="token punctuation">:</span><span class="token number">780</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerService.startBroker<span class="token punctuation">(</span>BrokerService.java<span class="token punctuation">:</span><span class="token number">742</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerService.start<span class="token punctuation">(</span>BrokerService.java<span class="token punctuation">:</span><span class="token number">645</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet<span class="token punctuation">(</span>XBeanBrokerService.java<span class="token punctuation">:</span><span class="token number">73</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span><span class="token function">Native</span> Method<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">62</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java<span class="token punctuation">:</span><span class="token number">498</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod<span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory.java<span class="token punctuation">:</span><span class="token number">1748</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods<span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory.java<span class="token punctuation">:</span><span class="token number">1685</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean<span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory.java<span class="token punctuation">:</span><span class="token number">1615</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean<span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory.java<span class="token punctuation">:</span><span class="token number">553</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean<span class="token punctuation">(</span>AbstractAutowireCapableBeanFactory.java<span class="token punctuation">:</span><span class="token number">481</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.AbstractBeanFactory$<span class="token number">1.</span>getObject<span class="token punctuation">(</span>AbstractBeanFactory.java<span class="token punctuation">:</span><span class="token number">312</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton<span class="token punctuation">(</span>DefaultSingletonBeanRegistry.java<span class="token punctuation">:</span><span class="token number">230</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean<span class="token punctuation">(</span>AbstractBeanFactory.java<span class="token punctuation">:</span><span class="token number">308</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.AbstractBeanFactory.getBean<span class="token punctuation">(</span>AbstractBeanFactory.java<span class="token punctuation">:</span><span class="token number">197</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons<span class="token punctuation">(</span>DefaultListableBeanFactory.java<span class="token punctuation">:</span><span class="token number">756</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization<span class="token punctuation">(</span>AbstractApplicationContext.java<span class="token punctuation">:</span><span class="token number">867</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.context.support.AbstractApplicationContext.refresh<span class="token punctuation">(</span>AbstractApplicationContext.java<span class="token punctuation">:</span><span class="token number">542</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>ResourceXmlApplicationContext.java<span class="token punctuation">:</span><span class="token number">64</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>ResourceXmlApplicationContext.java<span class="token punctuation">:</span><span class="token number">52</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory$<span class="token number">1.</span><span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext<span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createBroker<span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">67</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerFactory.createBroker<span class="token punctuation">(</span>BrokerFactory.java<span class="token punctuation">:</span><span class="token number">71</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerFactory.createBroker<span class="token punctuation">(</span>BrokerFactory.java<span class="token punctuation">:</span><span class="token number">54</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.StartCommand.runTask<span class="token punctuation">(</span>StartCommand.java<span class="token punctuation">:</span><span class="token number">87</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.AbstractCommand.execute<span class="token punctuation">(</span>AbstractCommand.java<span class="token punctuation">:</span><span class="token number">63</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.ShellCommand.runTask<span class="token punctuation">(</span>ShellCommand.java<span class="token punctuation">:</span><span class="token number">154</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.AbstractCommand.execute<span class="token punctuation">(</span>AbstractCommand.java<span class="token punctuation">:</span><span class="token number">63</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.ShellCommand.main<span class="token punctuation">(</span>ShellCommand.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span><span class="token function">Native</span> Method<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">62</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java<span class="token punctuation">:</span><span class="token number">498</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.Main.runTaskClass<span class="token punctuation">(</span>Main.java<span class="token punctuation">:</span><span class="token number">262</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.Main.main<span class="token punctuation">(</span>Main.java<span class="token punctuation">:</span><span class="token number">115</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span><span class="token function">Native</span> Method<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">62</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java<span class="token punctuation">:</span><span class="token number">498</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.tanukisoftware.wrapper.WrapperSimpleApp.<span class="token keyword">run</span><span class="token punctuation">(</span>WrapperSimpleApp.java<span class="token punctuation">:</span><span class="token number">240</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.Thread.<span class="token keyword">run</span><span class="token punctuation">(</span>Thread.java<span class="token punctuation">:</span><span class="token number">748</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    | Caused by<span class="token punctuation">:</span> java.io.IOException<span class="token punctuation">:</span> Failed <span class="token keyword">to</span> bind <span class="token keyword">to</span> server socket<span class="token punctuation">:</span> amqp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">:</span><span class="token number">5672</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span> due <span class="token keyword">to</span><span class="token punctuation">:</span> java.net.BindException<span class="token punctuation">:</span> Address already <span class="token function">in</span> <span class="token function">use</span><span class="token punctuation">:</span> JVM_Bind
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.util.IOExceptionSupport.create<span class="token punctuation">(</span>IOExceptionSupport.java<span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.transport.tcp.TcpTransportServer.bind<span class="token punctuation">(</span>TcpTransportServer.java<span class="token punctuation">:</span><span class="token number">146</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.transport.tcp.TcpTransportFactory.doBind<span class="token punctuation">(</span>TcpTransportFactory.java<span class="token punctuation">:</span><span class="token number">62</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.transport.TransportFactorySupport.bind<span class="token punctuation">(</span>TransportFactorySupport.java<span class="token punctuation">:</span><span class="token number">40</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.TransportConnector.createTransportServer<span class="token punctuation">(</span>TransportConnector.java<span class="token punctuation">:</span><span class="token number">335</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.TransportConnector.getServer<span class="token punctuation">(</span>TransportConnector.java<span class="token punctuation">:</span><span class="token number">145</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.TransportConnector.asManagedConnector<span class="token punctuation">(</span>TransportConnector.java<span class="token punctuation">:</span><span class="token number">110</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerService.registerConnectorMBean<span class="token punctuation">(</span>BrokerService.java<span class="token punctuation">:</span><span class="token number">2283</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      ... <span class="token number">46</span> more
jvm <span class="token number">1</span>    | Caused by<span class="token punctuation">:</span> java.net.BindException<span class="token punctuation">:</span> Address already <span class="token function">in</span> <span class="token function">use</span><span class="token punctuation">:</span> JVM_Bind
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.net.DualStackPlainSocketImpl.bind0<span class="token punctuation">(</span><span class="token function">Native</span> Method<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.net.DualStackPlainSocketImpl.socketBind<span class="token punctuation">(</span>DualStackPlainSocketImpl.java<span class="token punctuation">:</span><span class="token number">106</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.net.AbstractPlainSocketImpl.bind<span class="token punctuation">(</span>AbstractPlainSocketImpl.java<span class="token punctuation">:</span><span class="token number">387</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.net.PlainSocketImpl.bind<span class="token punctuation">(</span>PlainSocketImpl.java<span class="token punctuation">:</span><span class="token number">190</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.net.ServerSocket.bind<span class="token punctuation">(</span>ServerSocket.java<span class="token punctuation">:</span><span class="token number">375</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.net.ServerSocket.<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>ServerSocket.java<span class="token punctuation">:</span><span class="token number">237</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> javax.net.DefaultServerSocketFactory.createServerSocket<span class="token punctuation">(</span>ServerSocketFactory.java<span class="token punctuation">:</span><span class="token number">231</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.transport.tcp.TcpTransportServer.bind<span class="token punctuation">(</span>TcpTransportServer.java<span class="token punctuation">:</span><span class="token number">143</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      ... <span class="token number">52</span> more
jvm <span class="token number">1</span>    |  INFO | Apache ActiveMQ <span class="token number">5.16</span><span class="token number">.3</span> <span class="token punctuation">(</span>localhost<span class="token punctuation">,</span> ID<span class="token punctuation">:</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token operator">-</span><span class="token number">10257</span><span class="token operator">-</span><span class="token number">1646035577620</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">is</span> shutting down
jvm <span class="token number">1</span>    |  INFO | socketQueue interrupted <span class="token operator">-</span> stopping
jvm <span class="token number">1</span>    |  INFO | Connector openwire stopped
jvm <span class="token number">1</span>    |  INFO | Could <span class="token operator">not</span> accept connection during shutdown  <span class="token punctuation">:</span> null <span class="token punctuation">(</span>null<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |  INFO | Connector amqp stopped
jvm <span class="token number">1</span>    |  INFO | Connector stomp stopped
jvm <span class="token number">1</span>    |  INFO | Connector mqtt stopped
jvm <span class="token number">1</span>    |  INFO | Connector ws stopped
jvm <span class="token number">1</span>    |  INFO | PListStore<span class="token punctuation">:</span>[D<span class="token punctuation">:</span>\soft\activemq\bin\win64\..\..\<span class="token keyword">data</span>\localhost\tmp_storage] stopped
jvm <span class="token number">1</span>    |  INFO | Stopping async queue tasks
jvm <span class="token number">1</span>    |  INFO | Stopping async topic tasks
jvm <span class="token number">1</span>    |  INFO | Stopped KahaDB
jvm <span class="token number">1</span>    |  INFO | Apache ActiveMQ <span class="token number">5.16</span><span class="token number">.3</span> <span class="token punctuation">(</span>localhost<span class="token punctuation">,</span> ID<span class="token punctuation">:</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token operator">-</span><span class="token number">10257</span><span class="token operator">-</span><span class="token number">1646035577620</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span> uptime <span class="token number">0.426</span> seconds
jvm <span class="token number">1</span>    |  INFO | Apache ActiveMQ <span class="token number">5.16</span><span class="token number">.3</span> <span class="token punctuation">(</span>localhost<span class="token punctuation">,</span> ID<span class="token punctuation">:</span>CZBK<span class="token operator">-</span><span class="token number">20210302</span>VL<span class="token operator">-</span><span class="token number">10257</span><span class="token operator">-</span><span class="token number">1646035577620</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">is</span> shutdown
jvm <span class="token number">1</span>    |  INFO | Closing org.apache.activemq.xbean.XBeanBrokerFactory$<span class="token number">1</span>@<span class="token number">2</span>c9392f5<span class="token punctuation">:</span> startup <span class="token function">date</span> [Mon Feb <span class="token number">28</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">06</span><span class="token punctuation">:</span><span class="token number">16</span> CST <span class="token number">2022</span>]<span class="token punctuation">;</span> root <span class="token function">of</span> context hierarchy
jvm <span class="token number">1</span>    |  WARN | Exception encountered during context initialization <span class="token operator">-</span> cancelling refresh attempt<span class="token punctuation">:</span> org.springframework.beans.factory.BeanCreationException<span class="token punctuation">:</span> <span class="token keyword">Error</span> creating bean <span class="token function">with</span> <span class="token keyword">name</span> &#39;org.apache.activemq.xbean.XBeanBrokerService#<span class="token number">0</span>&#39; defined <span class="token function">in</span> class path resource [activemq.xml]<span class="token punctuation">:</span> Invocation <span class="token function">of</span> init method failed<span class="token punctuation">;</span> nested exception <span class="token function">is</span> java.io.IOException<span class="token punctuation">:</span> Transport Connector could <span class="token operator">not</span> be registered <span class="token function">in</span> JMX<span class="token punctuation">:</span> java.io.IOException<span class="token punctuation">:</span> Failed <span class="token keyword">to</span> bind <span class="token keyword">to</span> server socket<span class="token punctuation">:</span> amqp<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">:</span><span class="token number">5672</span>?maximumConnections<span class="token operator">=</span><span class="token number">1000</span><span class="token operator">&amp;</span>wireFormat.maxFrameSize<span class="token operator">=</span><span class="token number">104857600</span> due <span class="token keyword">to</span><span class="token punctuation">:</span> java.net.BindException<span class="token punctuation">:</span> Address already <span class="token function">in</span> <span class="token function">use</span><span class="token punctuation">:</span> JVM_Bind
jvm <span class="token number">1</span>    | <span class="token keyword">ERROR</span><span class="token punctuation">:</span> java.lang.RuntimeException<span class="token punctuation">:</span> Failed <span class="token keyword">to</span> execute start task. Reason<span class="token punctuation">:</span> java.lang.IllegalStateException<span class="token punctuation">:</span> BeanFactory <span class="token operator">not</span> initialized <span class="token operator">or</span> already closed <span class="token operator">-</span> <span class="token keyword">call</span> &#39;refresh&#39; before accessing beans via the ApplicationContext
jvm <span class="token number">1</span>    | java.lang.RuntimeException<span class="token punctuation">:</span> Failed <span class="token keyword">to</span> execute start task. Reason<span class="token punctuation">:</span> java.lang.IllegalStateException<span class="token punctuation">:</span> BeanFactory <span class="token operator">not</span> initialized <span class="token operator">or</span> already closed <span class="token operator">-</span> <span class="token keyword">call</span> &#39;refresh&#39; before accessing beans via the ApplicationContext
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.StartCommand.runTask<span class="token punctuation">(</span>StartCommand.java<span class="token punctuation">:</span><span class="token number">91</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.AbstractCommand.execute<span class="token punctuation">(</span>AbstractCommand.java<span class="token punctuation">:</span><span class="token number">63</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.ShellCommand.runTask<span class="token punctuation">(</span>ShellCommand.java<span class="token punctuation">:</span><span class="token number">154</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.AbstractCommand.execute<span class="token punctuation">(</span>AbstractCommand.java<span class="token punctuation">:</span><span class="token number">63</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.ShellCommand.main<span class="token punctuation">(</span>ShellCommand.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span><span class="token function">Native</span> Method<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">62</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java<span class="token punctuation">:</span><span class="token number">498</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.Main.runTaskClass<span class="token punctuation">(</span>Main.java<span class="token punctuation">:</span><span class="token number">262</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.Main.main<span class="token punctuation">(</span>Main.java<span class="token punctuation">:</span><span class="token number">115</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span><span class="token function">Native</span> Method<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">62</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java<span class="token punctuation">:</span><span class="token number">498</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.tanukisoftware.wrapper.WrapperSimpleApp.<span class="token keyword">run</span><span class="token punctuation">(</span>WrapperSimpleApp.java<span class="token punctuation">:</span><span class="token number">240</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.Thread.<span class="token keyword">run</span><span class="token punctuation">(</span>Thread.java<span class="token punctuation">:</span><span class="token number">748</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    | Caused by<span class="token punctuation">:</span> java.lang.IllegalStateException<span class="token punctuation">:</span> BeanFactory <span class="token operator">not</span> initialized <span class="token operator">or</span> already closed <span class="token operator">-</span> <span class="token keyword">call</span> &#39;refresh&#39; before accessing beans via the ApplicationContext
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory<span class="token punctuation">(</span>AbstractRefreshableApplicationContext.java<span class="token punctuation">:</span><span class="token number">164</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.context.support.AbstractApplicationContext.destroyBeans<span class="token punctuation">(</span>AbstractApplicationContext.java<span class="token punctuation">:</span><span class="token number">1034</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.context.support.AbstractApplicationContext.refresh<span class="token punctuation">(</span>AbstractApplicationContext.java<span class="token punctuation">:</span><span class="token number">555</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>ResourceXmlApplicationContext.java<span class="token punctuation">:</span><span class="token number">64</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>ResourceXmlApplicationContext.java<span class="token punctuation">:</span><span class="token number">52</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory$<span class="token number">1.</span><span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext<span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createBroker<span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">67</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerFactory.createBroker<span class="token punctuation">(</span>BrokerFactory.java<span class="token punctuation">:</span><span class="token number">71</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerFactory.createBroker<span class="token punctuation">(</span>BrokerFactory.java<span class="token punctuation">:</span><span class="token number">54</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.StartCommand.runTask<span class="token punctuation">(</span>StartCommand.java<span class="token punctuation">:</span><span class="token number">87</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      ... <span class="token number">16</span> more
jvm <span class="token number">1</span>    | <span class="token keyword">ERROR</span><span class="token punctuation">:</span> java.lang.IllegalStateException<span class="token punctuation">:</span> BeanFactory <span class="token operator">not</span> initialized <span class="token operator">or</span> already closed <span class="token operator">-</span> <span class="token keyword">call</span> &#39;refresh&#39; before accessing beans via the ApplicationContext
jvm <span class="token number">1</span>    | java.lang.IllegalStateException<span class="token punctuation">:</span> BeanFactory <span class="token operator">not</span> initialized <span class="token operator">or</span> already closed <span class="token operator">-</span> <span class="token keyword">call</span> &#39;refresh&#39; before accessing beans via the ApplicationContext
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory<span class="token punctuation">(</span>AbstractRefreshableApplicationContext.java<span class="token punctuation">:</span><span class="token number">164</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.context.support.AbstractApplicationContext.destroyBeans<span class="token punctuation">(</span>AbstractApplicationContext.java<span class="token punctuation">:</span><span class="token number">1034</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.springframework.context.support.AbstractApplicationContext.refresh<span class="token punctuation">(</span>AbstractApplicationContext.java<span class="token punctuation">:</span><span class="token number">555</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>ResourceXmlApplicationContext.java<span class="token punctuation">:</span><span class="token number">64</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>ResourceXmlApplicationContext.java<span class="token punctuation">:</span><span class="token number">52</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory$<span class="token number">1.</span><span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext<span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createBroker<span class="token punctuation">(</span>XBeanBrokerFactory.java<span class="token punctuation">:</span><span class="token number">67</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerFactory.createBroker<span class="token punctuation">(</span>BrokerFactory.java<span class="token punctuation">:</span><span class="token number">71</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.broker.BrokerFactory.createBroker<span class="token punctuation">(</span>BrokerFactory.java<span class="token punctuation">:</span><span class="token number">54</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.StartCommand.runTask<span class="token punctuation">(</span>StartCommand.java<span class="token punctuation">:</span><span class="token number">87</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.AbstractCommand.execute<span class="token punctuation">(</span>AbstractCommand.java<span class="token punctuation">:</span><span class="token number">63</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.ShellCommand.runTask<span class="token punctuation">(</span>ShellCommand.java<span class="token punctuation">:</span><span class="token number">154</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.AbstractCommand.execute<span class="token punctuation">(</span>AbstractCommand.java<span class="token punctuation">:</span><span class="token number">63</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.command.ShellCommand.main<span class="token punctuation">(</span>ShellCommand.java<span class="token punctuation">:</span><span class="token number">104</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span><span class="token function">Native</span> Method<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">62</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java<span class="token punctuation">:</span><span class="token number">498</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.Main.runTaskClass<span class="token punctuation">(</span>Main.java<span class="token punctuation">:</span><span class="token number">262</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.apache.activemq.console.Main.main<span class="token punctuation">(</span>Main.java<span class="token punctuation">:</span><span class="token number">115</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span><span class="token function">Native</span> Method<span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">62</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java<span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java<span class="token punctuation">:</span><span class="token number">498</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> org.tanukisoftware.wrapper.WrapperSimpleApp.<span class="token keyword">run</span><span class="token punctuation">(</span>WrapperSimpleApp.java<span class="token punctuation">:</span><span class="token number">240</span><span class="token punctuation">)</span>
jvm <span class="token number">1</span>    |      <span class="token function">at</span> java.lang.Thread.<span class="token keyword">run</span><span class="token punctuation">(</span>Thread.java<span class="token punctuation">:</span><span class="token number">748</span><span class="token punctuation">)</span>
wrapper  | <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">-</span> Wrapper Stopped
è¯·æŒ‰ä»»æ„é”®ç»§ç»­. . .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ•´åˆ-3" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ-3" aria-hidden="true">#</a> æ•´åˆ</h5><p>â€‹ åšäº†è¿™ä¹ˆå¤šspringbootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯ï¼Œå·²ç»æ‘¸åˆ°é—¨è·¯äº†ï¼ŒåŠ åæ ‡ï¼Œåšé…ç½®ï¼Œè°ƒæ¥å£ï¼Œç›´æ¥å¼€å·¥</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆActiveMQçš„starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-activemq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®ActiveMQçš„æœåŠ¡å™¨åœ°å€</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">activemq</span><span class="token punctuation">:</span>
    <span class="token key atrule">broker-url</span><span class="token punctuation">:</span> tcp<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">61616</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨JmsMessagingTemplateæ“ä½œActiveMQ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageServiceActivemqImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MessageService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JmsMessagingTemplate</span> messagingTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        messagingTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;order.queue.id&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">doMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> messagingTemplate<span class="token punctuation">.</span><span class="token function">receiveAndConvert</span><span class="token punctuation">(</span><span class="token string">&quot;order.queue.id&quot;</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å‘é€æ¶ˆæ¯éœ€è¦å…ˆå°†æ¶ˆæ¯çš„ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶åå†å‘é€ï¼Œæ‰€ä»¥æ˜¯convertAndSendï¼Œå®šä¹‰æ¶ˆæ¯å‘é€çš„ä½ç½®ï¼Œå’Œå…·ä½“çš„æ¶ˆæ¯å†…å®¹ï¼Œæ­¤å¤„ä½¿ç”¨idä½œä¸ºæ¶ˆæ¯å†…å®¹ã€‚</p><p>â€‹ æ¥æ”¶æ¶ˆæ¯éœ€è¦å…ˆå°†æ¶ˆæ¯æ¥æ”¶åˆ°ï¼Œç„¶åå†è½¬æ¢æˆæŒ‡å®šçš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥æ˜¯receiveAndConvertï¼Œæ¥æ”¶æ¶ˆæ¯é™¤äº†æä¾›è¯»å–çš„ä½ç½®ï¼Œè¿˜è¦ç»™å‡ºè½¬æ¢åçš„æ•°æ®çš„å…·ä½“ç±»å‹ã€‚</p><p><strong>æ­¥éª¤â‘£</strong>ï¼šä½¿ç”¨æ¶ˆæ¯ç›‘å¬å™¨åœ¨æœåŠ¡å™¨å¯åŠ¨åï¼Œç›‘å¬æŒ‡å®šä½ç½®ï¼Œå½“æ¶ˆæ¯å‡ºç°åï¼Œç«‹å³æ¶ˆè´¹æ¶ˆæ¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@JmsListener</span><span class="token punctuation">(</span>destination <span class="token operator">=</span> <span class="token string">&quot;order.queue.id&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@SendTo</span><span class="token punctuation">(</span><span class="token string">&quot;order.other.queue.id&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;new:&quot;</span><span class="token operator">+</span>id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨æ³¨è§£@JmsListenerå®šä¹‰å½“å‰æ–¹æ³•ç›‘å¬ActiveMQä¸­æŒ‡å®šåç§°çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p>â€‹ å¦‚æœå½“å‰æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†å®Œè¿˜éœ€è¦ç»§ç»­å‘ä¸‹ä¼ é€’å½“å‰æ¶ˆæ¯åˆ°å¦ä¸€ä¸ªé˜Ÿåˆ—ä¸­ä½¿ç”¨æ³¨è§£@SendToå³å¯ï¼Œè¿™æ ·å³å¯æ„é€ è¿ç»­æ‰§è¡Œçš„é¡ºåºæ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p><strong>æ­¥éª¤â‘¤</strong>ï¼šåˆ‡æ¢æ¶ˆæ¯æ¨¡å‹ç”±ç‚¹å¯¹ç‚¹æ¨¡å‹åˆ°å‘å¸ƒè®¢é˜…æ¨¡å‹ï¼Œä¿®æ”¹jmsé…ç½®å³å¯</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">activemq</span><span class="token punctuation">:</span>
    <span class="token key atrule">broker-url</span><span class="token punctuation">:</span> tcp<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">61616</span>
  <span class="token key atrule">jms</span><span class="token punctuation">:</span>
    <span class="token key atrule">pub-sub-domain</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ pub-sub-domainé»˜è®¤å€¼ä¸ºfalseï¼Œå³ç‚¹å¯¹ç‚¹æ¨¡å‹ï¼Œä¿®æ”¹ä¸ºtrueåå°±æ˜¯å‘å¸ƒè®¢é˜…æ¨¡å‹ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆActiveMQæä¾›äº†JmsMessagingTemplateå¯¹è±¡ä½œä¸ºå®¢æˆ·ç«¯æ“ä½œæ¶ˆæ¯é˜Ÿåˆ—</li><li>æ“ä½œActiveMQéœ€è¦é…ç½®ActiveMQæœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ç«¯å£61616</li><li>ä¼ä¸šå¼€å‘æ—¶é€šå¸¸ä½¿ç”¨ç›‘å¬å™¨æ¥å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œè®¾ç½®ç›‘å¬å™¨ä½¿ç”¨æ³¨è§£@JmsListener</li><li>é…ç½®jmsçš„pub-sub-domainå±æ€§å¯ä»¥åœ¨ç‚¹å¯¹ç‚¹æ¨¡å‹å’Œå‘å¸ƒè®¢é˜…æ¨¡å‹é—´åˆ‡æ¢æ¶ˆæ¯æ¨¡å‹</li></ol><h4 id="springbootæ•´åˆrabbitmq" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆrabbitmq" aria-hidden="true">#</a> SpringBootæ•´åˆRabbitMQ</h4><p>â€‹ RabbitMQæ˜¯MQäº§å“ä¸­çš„ç›®å‰è¾ƒä¸ºæµè¡Œçš„äº§å“ä¹‹ä¸€ï¼Œå®ƒéµä»AMQPåè®®ã€‚RabbitMQçš„åº•å±‚å®ç°è¯­è¨€ä½¿ç”¨çš„æ˜¯Erlangï¼Œæ‰€ä»¥å®‰è£…RabbitMQéœ€è¦å…ˆå®‰è£…Erlangã€‚</p><p><strong>Erlangå®‰è£…</strong></p><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<a href="https://www.erlang.org/downloads" target="_blank" rel="noopener noreferrer">https<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://www.erlang.org/downloads" target="_blank" rel="noopener noreferrer">ğŸ˜•/www.erlang.org/downloads<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>â€‹ ä¸‹è½½å®Œæ¯•åå¾—åˆ°exeå®‰è£…æ–‡ä»¶ï¼Œä¸€é”®å‚»ç“œå¼å®‰è£…ï¼Œå®‰è£…å®Œæ¯•éœ€è¦é‡å¯ï¼Œéœ€è¦é‡å¯ï¼Œéœ€è¦é‡å¯ã€‚</p><p>â€‹ å®‰è£…çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ä¾èµ–Windowsç»„ä»¶çš„æç¤ºï¼Œæ ¹æ®æç¤ºä¸‹è½½å®‰è£…å³å¯ï¼Œéƒ½æ˜¯è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20220228164851551.0f434c81.png" alt="image-20220228164851551"></p><p>â€‹ Erlangå®‰è£…åéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™RabbitMQå°†æ— æ³•æ‰¾åˆ°å®‰è£…çš„Erlangã€‚éœ€è¦é…ç½®é¡¹å¦‚ä¸‹ï¼Œä½œç”¨ç­‰åŒJDKé…ç½®ç¯å¢ƒå˜é‡çš„ä½œç”¨ã€‚</p><ul><li>ERLANG_HOME</li><li>PATH</li></ul><h5 id="å®‰è£…-4" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-4" aria-hidden="true">#</a> å®‰è£…</h5><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<a href="https://rabbitmq.com/install-windows.html" target="_blank" rel="noopener noreferrer">https://<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://rabbitmq.com/install-windows.html" target="_blank" rel="noopener noreferrer">rabbitmq.com/install-windows.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>â€‹ ä¸‹è½½å®Œæ¯•åå¾—åˆ°exeå®‰è£…æ–‡ä»¶ï¼Œä¸€é”®å‚»ç“œå¼å®‰è£…ï¼Œå®‰è£…å®Œæ¯•åä¼šå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶</p><img src="/assets/image-20220228165151524.5815b1d0.png" alt="image-20220228165151524" style="zoom:67%;"><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong></p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>rabbitmq-service.bat start		# å¯åŠ¨æœåŠ¡
rabbitmq-service.bat stop		# åœæ­¢æœåŠ¡
rabbitmqctl status				# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿è¡Œsbinç›®å½•ä¸‹çš„rabbitmq-service.batå‘½ä»¤å³å¯ï¼Œstartå‚æ•°è¡¨ç¤ºå¯åŠ¨ï¼Œstopå‚æ•°è¡¨ç¤ºé€€å‡ºï¼Œé»˜è®¤å¯¹å¤–æœåŠ¡ç«¯å£5672ã€‚</p><p>â€‹ æ³¨æ„ï¼šå¯åŠ¨rabbitmqçš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯å¼€å¯rabbitmqå¯¹åº”çš„ç³»ç»ŸæœåŠ¡ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™æ–¹å¯æ‰§è¡Œã€‚</p><p>â€‹ è¯´æ˜ï¼šæœ‰æ²¡æœ‰æ„Ÿè§‰5672çš„æœåŠ¡ç«¯å£å¾ˆç†Ÿæ‚‰ï¼Ÿactivemqä¸rabbitmqæœ‰ä¸€ä¸ªç«¯å£å†²çªé—®é¢˜ï¼Œå­¦ä¹ é˜¶æ®µæ— è®ºæ“ä½œå“ªä¸€ä¸ªï¼Ÿè¯·ç¡®ä¿å¦ä¸€ä¸ªå¤„äºå…³é—­çŠ¶æ€ã€‚</p><p>â€‹ è¯´æ˜ï¼šä¸å–œæ¬¢å‘½ä»¤è¡Œçš„å°ä¼™ä¼´å¯ä»¥ä½¿ç”¨ä»»åŠ¡ç®¡ç†å™¨ä¸­çš„æœåŠ¡é¡µï¼Œæ‰¾åˆ°RabbitMQæœåŠ¡ï¼Œä½¿ç”¨é¼ æ ‡å³é”®èœå•æ§åˆ¶æœåŠ¡çš„å¯åœã€‚</p><img src="/assets/image-20220228170147193.abe98ec4.png" alt="image-20220228170147193" style="zoom:67%;"><p><strong>è®¿é—®webç®¡ç†æœåŠ¡</strong></p><p>â€‹ RabbitMQä¹Ÿæä¾›æœ‰webæ§åˆ¶å°æœåŠ¡ï¼Œä½†æ˜¯æ­¤åŠŸèƒ½æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œéœ€è¦å…ˆå¯ç”¨æ‰å¯ä»¥ä½¿ç”¨ã€‚</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>rabbitmq-plugins.bat list							# æŸ¥çœ‹å½“å‰æ‰€æœ‰æ’ä»¶çš„è¿è¡ŒçŠ¶æ€
rabbitmq-plugins.bat enable rabbitmq_management		# å¯åŠ¨rabbitmq_managementæ’ä»¶
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¯åŠ¨æ’ä»¶åå¯ä»¥åœ¨æ’ä»¶è¿è¡ŒçŠ¶æ€ä¸­æŸ¥çœ‹æ˜¯å¦è¿è¡Œï¼Œè¿è¡Œåé€šè¿‡æµè§ˆå™¨å³å¯æ‰“å¼€æœåŠ¡åå°ç®¡ç†ç•Œé¢</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>http://localhost:15672
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€‹ webç®¡ç†æœåŠ¡é»˜è®¤ç«¯å£15672ï¼Œè®¿é—®åå¯ä»¥æ‰“å¼€RabbitMQçš„ç®¡ç†ç•Œé¢ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20220228170504793.2dfbe071.png" alt="image-20220228170504793"></p><p>â€‹ é¦–å…ˆè¾“å…¥è®¿é—®ç”¨æˆ·åå’Œå¯†ç ï¼Œåˆå§‹åŒ–ç”¨æˆ·åå’Œå¯†ç ç›¸åŒï¼Œå‡ä¸ºï¼šguestï¼ŒæˆåŠŸç™»å½•åè¿›å…¥ç®¡ç†åå°ç•Œé¢ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20220228170535261.36004c49.png" alt="image-20220228170535261"></p><h5 id="æ•´åˆ-directæ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ-directæ¨¡å‹" aria-hidden="true">#</a> æ•´åˆ(directæ¨¡å‹)</h5><p>â€‹ RabbitMQæ»¡è¶³AMQPåè®®ï¼Œå› æ­¤ä¸åŒçš„æ¶ˆæ¯æ¨¡å‹å¯¹åº”çš„åˆ¶ä½œä¸åŒï¼Œå…ˆä½¿ç”¨æœ€ç®€å•çš„directæ¨¡å‹å¼€å‘ã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆamqpçš„starterï¼Œamqpåè®®é»˜è®¤å®ç°ä¸ºrabbitmqæ–¹æ¡ˆ</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®RabbitMQçš„æœåŠ¡å™¨åœ°å€</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¢</strong>ï¼šåˆå§‹åŒ–ç›´è¿æ¨¡å¼ç³»ç»Ÿè®¾ç½®</p><p>â€‹ ç”±äºRabbitMQä¸åŒæ¨¡å‹è¦ä½¿ç”¨ä¸åŒçš„äº¤æ¢æœºï¼Œå› æ­¤éœ€è¦å…ˆåˆå§‹åŒ–RabbitMQç›¸å…³çš„å¯¹è±¡ï¼Œä¾‹å¦‚é˜Ÿåˆ—ï¼Œäº¤æ¢æœºç­‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfigDirect</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">directQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token string">&quot;direct_queue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">directQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token string">&quot;direct_queue2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DirectExchange</span> <span class="token function">directExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DirectExchange</span><span class="token punctuation">(</span><span class="token string">&quot;directExchange&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingDirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">directQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">directExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;direct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingDirect2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">directQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">directExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;direct2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ é˜Ÿåˆ—Queueä¸ç›´è¿äº¤æ¢æœºDirectExchangeåˆ›å»ºåï¼Œè¿˜éœ€è¦ç»‘å®šä»–ä»¬ä¹‹é—´çš„å…³ç³»Bindingï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡äº¤æ¢æœºæ“ä½œå¯¹åº”é˜Ÿåˆ—ã€‚</p><p><strong>æ­¥éª¤â‘£</strong>ï¼šä½¿ç”¨AmqpTemplateæ“ä½œRabbitMQ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageServiceRabbitmqDirectImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MessageService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AmqpTemplate</span> amqpTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—ï¼ˆrabbitmq directï¼‰ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        amqpTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;directExchange&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;direct&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ amqpåè®®ä¸­çš„æ“ä½œAPIæ¥å£åç§°çœ‹ä¸Šå»å’Œjmsè§„èŒƒçš„æ“ä½œAPIæ¥å£å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ä¼ é€’å‚æ•°å·®å¼‚å¾ˆå¤§ã€‚</p><p><strong>æ­¥éª¤â‘¤</strong>ï¼šä½¿ç”¨æ¶ˆæ¯ç›‘å¬å™¨åœ¨æœåŠ¡å™¨å¯åŠ¨åï¼Œç›‘å¬æŒ‡å®šä½ç½®ï¼Œå½“æ¶ˆæ¯å‡ºç°åï¼Œç«‹å³æ¶ˆè´¹æ¶ˆæ¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token string">&quot;direct_queue&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡(rabbitmq direct)ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨æ³¨è§£@RabbitListenerå®šä¹‰å½“å‰æ–¹æ³•ç›‘å¬RabbitMQä¸­æŒ‡å®šåç§°çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><h5 id="æ•´åˆ-topicæ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ-topicæ¨¡å‹" aria-hidden="true">#</a> æ•´åˆ(topicæ¨¡å‹)</h5><p><strong>æ­¥éª¤â‘ </strong>ï¼šåŒä¸Š</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåŒä¸Š</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šåˆå§‹åŒ–ä¸»é¢˜æ¨¡å¼ç³»ç»Ÿè®¾ç½®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfigTopic</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">topicQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token string">&quot;topic_queue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">topicQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token string">&quot;topic_queue2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TopicExchange</span> <span class="token function">topicExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TopicExchange</span><span class="token punctuation">(</span><span class="token string">&quot;topicExchange&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingTopic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">topicQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">topicExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;topic.*.id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingTopic2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">topicQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">topicExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;topic.orders.*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸»é¢˜æ¨¡å¼æ”¯æŒroutingKeyåŒ¹é…æ¨¡å¼ï¼Œ*è¡¨ç¤ºåŒ¹é…ä¸€ä¸ªå•è¯ï¼Œ#è¡¨ç¤ºåŒ¹é…ä»»æ„å†…å®¹ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ä¸»é¢˜äº¤æ¢æœºå°†æ¶ˆæ¯åˆ†å‘åˆ°ä¸åŒçš„é˜Ÿåˆ—ä¸­ï¼Œè¯¦ç»†å†…å®¹è¯·å‚çœ‹RabbitMQç³»åˆ—è¯¾ç¨‹ã€‚</p><table><thead><tr><th><strong>åŒ¹é…é”®</strong></th><th><strong>topic.*.*</strong></th><th><strong>topic.#</strong></th></tr></thead><tbody><tr><td>topic.order.id</td><td>true</td><td>true</td></tr><tr><td>order.topic.id</td><td>false</td><td>false</td></tr><tr><td>topic.sm.order.id</td><td>false</td><td>true</td></tr><tr><td>topic.sm.id</td><td>false</td><td>true</td></tr><tr><td>topic.id.order</td><td>true</td><td>true</td></tr><tr><td>topic.id</td><td>false</td><td>true</td></tr><tr><td>topic.order</td><td>false</td><td>true</td></tr></tbody></table><p><strong>æ­¥éª¤â‘£</strong>ï¼šä½¿ç”¨AmqpTemplateæ“ä½œRabbitMQ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageServiceRabbitmqTopicImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MessageService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AmqpTemplate</span> amqpTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—ï¼ˆrabbitmq topicï¼‰ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        amqpTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;topicExchange&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;topic.orders.id&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å‘é€æ¶ˆæ¯åï¼Œæ ¹æ®å½“å‰æä¾›çš„routingKeyä¸ç»‘å®šäº¤æ¢æœºæ—¶è®¾å®šçš„routingKeyè¿›è¡ŒåŒ¹é…ï¼Œè§„åˆ™åŒ¹é…æˆåŠŸæ¶ˆæ¯æ‰ä¼šè¿›å…¥åˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸­ã€‚</p><p><strong>æ­¥éª¤â‘¤</strong>ï¼šä½¿ç”¨æ¶ˆæ¯ç›‘å¬å™¨åœ¨æœåŠ¡å™¨å¯åŠ¨åï¼Œç›‘å¬æŒ‡å®šé˜Ÿåˆ—</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token string">&quot;topic_queue&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡(rabbitmq topic 1)ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token string">&quot;topic_queue2&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receive2</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡(rabbitmq topic 22222222)ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨æ³¨è§£@RabbitListenerå®šä¹‰å½“å‰æ–¹æ³•ç›‘å¬RabbitMQä¸­æŒ‡å®šåç§°çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆRabbitMQæä¾›äº†AmqpTemplateå¯¹è±¡ä½œä¸ºå®¢æˆ·ç«¯æ“ä½œæ¶ˆæ¯é˜Ÿåˆ—</li><li>æ“ä½œActiveMQéœ€è¦é…ç½®ActiveMQæœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ç«¯å£5672</li><li>ä¼ä¸šå¼€å‘æ—¶é€šå¸¸ä½¿ç”¨ç›‘å¬å™¨æ¥å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œè®¾ç½®ç›‘å¬å™¨ä½¿ç”¨æ³¨è§£@RabbitListener</li><li>RabbitMQæœ‰5ç§æ¶ˆæ¯æ¨¡å‹ï¼Œä½¿ç”¨çš„é˜Ÿåˆ—ç›¸åŒï¼Œä½†æ˜¯äº¤æ¢æœºä¸åŒã€‚äº¤æ¢æœºä¸åŒï¼Œå¯¹åº”çš„æ¶ˆæ¯è¿›å…¥çš„ç­–ç•¥ä¹Ÿä¸åŒ</li></ol><h4 id="springbootæ•´åˆrocketmq" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆrocketmq" aria-hidden="true">#</a> SpringBootæ•´åˆRocketMQ</h4><p>â€‹ RocketMQç”±é˜¿é‡Œç ”å‘ï¼Œåæèµ ç»™apacheåŸºé‡‘ä¼šï¼Œç›®å‰æ˜¯apacheåŸºé‡‘ä¼šé¡¶çº§é¡¹ç›®ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ç›®å‰å¸‚é¢ä¸Šçš„MQäº§å“ä¸­è¾ƒä¸ºæµè¡Œçš„äº§å“ä¹‹ä¸€ï¼Œå®ƒéµä»AMQPåè®®ã€‚</p><h5 id="å®‰è£…-5" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-5" aria-hidden="true">#</a> å®‰è£…</h5><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<a href="https://rocketmq.apache.org/" target="_blank" rel="noopener noreferrer">https://rocketmq.apache.org<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://rocketmq.apache.org/" target="_blank" rel="noopener noreferrer">/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>â€‹ ä¸‹è½½å®Œæ¯•åå¾—åˆ°zipå‹ç¼©æ–‡ä»¶ï¼Œè§£å‹ç¼©å³å¯ä½¿ç”¨ï¼Œè§£å‹åå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶</p><p><img src="/assets/image-20220228174453471.aea5a0b9.png" alt="image-20220228174453471"></p><p>â€‹ RocketMQå®‰è£…åéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li>ROCKETMQ_HOME</li><li>PATH</li><li>NAMESRV_ADDR ï¼ˆå»ºè®®ï¼‰ï¼š 127.0.0.1:9876</li></ul><p>â€‹ å…³äºNAMESRV_ADDRå¯¹äºåˆå­¦è€…æ¥è¯´å»ºè®®é…ç½®æ­¤é¡¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è®¾ç½®å¯¹åº”å€¼ï¼Œæ“ä½œç•¥æ˜¾ç¹çï¼Œå»ºè®®é…ç½®ã€‚ç³»ç»Ÿå­¦ä¹ RocketMQçŸ¥è¯†åå³å¯çµæ´»æ§åˆ¶è¯¥é¡¹ã€‚</p><p><strong>RocketMQå·¥ä½œæ¨¡å¼</strong></p><p>â€‹ åœ¨RocketMQä¸­ï¼Œå¤„ç†ä¸šåŠ¡çš„æœåŠ¡å™¨ç§°ä¸ºbrokerï¼Œç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¸æ˜¯ç›´æ¥ä¸brokerè”ç³»çš„ï¼Œè€Œæ˜¯é€šè¿‡å‘½åæœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚brokerå¯åŠ¨åä¼šé€šçŸ¥å‘½åæœåŠ¡å™¨è‡ªå·±å·²ç»ä¸Šçº¿ï¼Œè¿™æ ·å‘½åæœåŠ¡å™¨ä¸­å°±ä¿å­˜æœ‰æ‰€æœ‰çš„brokerä¿¡æ¯ã€‚å½“ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…éœ€è¦è¿æ¥brokeræ—¶ï¼Œé€šè¿‡å‘½åæœåŠ¡å™¨æ‰¾åˆ°å¯¹åº”çš„å¤„ç†ä¸šåŠ¡çš„brokerï¼Œå› æ­¤å‘½åæœåŠ¡å™¨åœ¨æ•´å¥—ç»“æ„ä¸­èµ·åˆ°ä¸€ä¸ªä¿¡æ¯ä¸­å¿ƒçš„ä½œç”¨ã€‚å¹¶ä¸”brokerå¯åŠ¨å‰å¿…é¡»ä¿éšœå‘½åæœåŠ¡å™¨å…ˆå¯åŠ¨ã€‚</p><img src="/assets/image-20220228175123790.a1fc5df4.png" alt="image-20220228175123790" style="zoom:80%;"><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong></p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>mqnamesrv		# å¯åŠ¨å‘½åæœåŠ¡å™¨
mqbroker		# å¯åŠ¨broker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿è¡Œbinç›®å½•ä¸‹çš„mqnamesrvå‘½ä»¤å³å¯å¯åŠ¨å‘½åæœåŠ¡å™¨ï¼Œé»˜è®¤å¯¹å¤–æœåŠ¡ç«¯å£9876ã€‚</p><p>â€‹ è¿è¡Œbinç›®å½•ä¸‹çš„mqbrokerå‘½ä»¤å³å¯å¯åŠ¨brokeræœåŠ¡å™¨ï¼Œå¦‚æœç¯å¢ƒå˜é‡ä¸­æ²¡æœ‰è®¾ç½®NAMESRV_ADDRåˆ™éœ€è¦åœ¨è¿è¡ŒmqbrokeræŒ‡ä»¤å‰é€šè¿‡setæŒ‡ä»¤è®¾ç½®NAMESRV_ADDRçš„å€¼ï¼Œå¹¶ä¸”æ¯æ¬¡å¼€å¯å‡éœ€è¦è®¾ç½®æ­¤é¡¹ã€‚</p><p><strong>æµ‹è¯•æœåŠ¡å™¨å¯åŠ¨çŠ¶æ€</strong></p><p>â€‹ RocketMQæä¾›æœ‰ä¸€å¥—æµ‹è¯•æœåŠ¡å™¨åŠŸèƒ½çš„æµ‹è¯•ç¨‹åºï¼Œè¿è¡Œbinç›®å½•ä¸‹çš„toolså‘½ä»¤å³å¯ä½¿ç”¨ã€‚</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>tools org.apache.rocketmq.example.quickstart.Producer		# ç”Ÿäº§æ¶ˆæ¯
tools org.apache.rocketmq.example.quickstart.Consumer		# æ¶ˆè´¹æ¶ˆæ¯
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ•´åˆ-å¼‚æ­¥æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ-å¼‚æ­¥æ¶ˆæ¯" aria-hidden="true">#</a> æ•´åˆï¼ˆå¼‚æ­¥æ¶ˆæ¯ï¼‰</h5><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆRocketMQçš„starterï¼Œæ­¤åæ ‡ä¸ç”±springbootç»´æŠ¤ç‰ˆæœ¬</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.rocketmq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>rocketmq-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®RocketMQçš„æœåŠ¡å™¨åœ°å€</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">rocketmq</span><span class="token punctuation">:</span>
  <span class="token key atrule">name-server</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">9876</span>
  <span class="token key atrule">producer</span><span class="token punctuation">:</span>
    <span class="token key atrule">group</span><span class="token punctuation">:</span> group_rocketmq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è®¾ç½®é»˜è®¤çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ‰€å±ç»„groupã€‚</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨RocketMQTemplateæ“ä½œRocketMQ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageServiceRocketmqImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MessageService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RocketMQTemplate</span> rocketMQTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—ï¼ˆrocketmqï¼‰ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SendCallback</span> callback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SendCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">SendResult</span> sendResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onException</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€å¤±è´¥ï¼ï¼ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        rocketMQTemplate<span class="token punctuation">.</span><span class="token function">asyncSend</span><span class="token punctuation">(</span><span class="token string">&quot;order_id&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨asyncSendæ–¹æ³•å‘é€å¼‚æ­¥æ¶ˆæ¯ã€‚</p><p><strong>æ­¥éª¤â‘£</strong>ï¼šä½¿ç”¨æ¶ˆæ¯ç›‘å¬å™¨åœ¨æœåŠ¡å™¨å¯åŠ¨åï¼Œç›‘å¬æŒ‡å®šä½ç½®ï¼Œå½“æ¶ˆæ¯å‡ºç°åï¼Œç«‹å³æ¶ˆè´¹æ¶ˆæ¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@RocketMQMessageListener</span><span class="token punctuation">(</span>topic <span class="token operator">=</span> <span class="token string">&quot;order_id&quot;</span><span class="token punctuation">,</span>consumerGroup <span class="token operator">=</span> <span class="token string">&quot;group_rocketmq&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageListener</span> <span class="token keyword">implements</span> <span class="token class-name">RocketMQListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡(rocketmq)ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ RocketMQçš„ç›‘å¬å™¨å¿…é¡»æŒ‰ç…§æ ‡å‡†æ ¼å¼å¼€å‘ï¼Œå®ç°RocketMQListeneræ¥å£ï¼Œæ³›å‹ä¸ºæ¶ˆæ¯ç±»å‹ã€‚</p><p>â€‹ ä½¿ç”¨æ³¨è§£@RocketMQMessageListenerå®šä¹‰å½“å‰ç±»ç›‘å¬RabbitMQä¸­æŒ‡å®šç»„ã€æŒ‡å®šåç§°çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>springbootæ•´åˆRocketMQä½¿ç”¨RocketMQTemplateå¯¹è±¡ä½œä¸ºå®¢æˆ·ç«¯æ“ä½œæ¶ˆæ¯é˜Ÿåˆ—</li><li>æ“ä½œRocketMQéœ€è¦é…ç½®RocketMQæœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ç«¯å£9876</li><li>ä¼ä¸šå¼€å‘æ—¶é€šå¸¸ä½¿ç”¨ç›‘å¬å™¨æ¥å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œè®¾ç½®ç›‘å¬å™¨ä½¿ç”¨æ³¨è§£@RocketMQMessageListener</li></ol><h4 id="springbootæ•´åˆkafka" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆkafka" aria-hidden="true">#</a> SpringBootæ•´åˆKafka</h4><h5 id="å®‰è£…-6" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-6" aria-hidden="true">#</a> å®‰è£…</h5><p>â€‹ windowsç‰ˆå®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<a href="https://kafka.apache.org/downloads" target="_blank" rel="noopener noreferrer">https://<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://kafka.apache.org/downloads" target="_blank" rel="noopener noreferrer">kafka.apache.org/downloads<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>â€‹ ä¸‹è½½å®Œæ¯•åå¾—åˆ°tgzå‹ç¼©æ–‡ä»¶ï¼Œä½¿ç”¨è§£å‹ç¼©è½¯ä»¶è§£å‹ç¼©å³å¯ä½¿ç”¨ï¼Œè§£å‹åå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶</p><p><img src="/assets/image-20220228181442155.86b42668.png" alt="image-20220228181442155"></p><p>â€‹ å»ºè®®ä½¿ç”¨windowsç‰ˆ2.8.1ç‰ˆæœ¬ã€‚</p><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong></p><p>â€‹ kafkaæœåŠ¡å™¨çš„åŠŸèƒ½ç›¸å½“äºRocketMQä¸­çš„brokerï¼Œkafkaè¿è¡Œè¿˜éœ€è¦ä¸€ä¸ªç±»ä¼¼äºå‘½åæœåŠ¡å™¨çš„æœåŠ¡ã€‚åœ¨kafkaå®‰è£…ç›®å½•ä¸­è‡ªå¸¦ä¸€ä¸ªç±»ä¼¼äºå‘½åæœåŠ¡å™¨çš„å·¥å…·ï¼Œå«åšzookeeperï¼Œå®ƒçš„ä½œç”¨æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œç›¸å…³çŸ¥è¯†è¯·åˆ°å¯¹åº”è¯¾ç¨‹ä¸­å­¦ä¹ ã€‚</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>zookeeper-server-start.bat ..\..\config\zookeeper.properties		# å¯åŠ¨zookeeper
kafka-server-start.bat ..\..\config\server.properties				# å¯åŠ¨kafka
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿è¡Œbinç›®å½•ä¸‹çš„windowsç›®å½•ä¸‹çš„zookeeper-server-startå‘½ä»¤å³å¯å¯åŠ¨æ³¨å†Œä¸­å¿ƒï¼Œé»˜è®¤å¯¹å¤–æœåŠ¡ç«¯å£2181ã€‚</p><p>â€‹ è¿è¡Œbinç›®å½•ä¸‹çš„windowsç›®å½•ä¸‹çš„kafka-server-startå‘½ä»¤å³å¯å¯åŠ¨kafkaæœåŠ¡å™¨ï¼Œé»˜è®¤å¯¹å¤–æœåŠ¡ç«¯å£9092ã€‚</p><p><strong>åˆ›å»ºä¸»é¢˜</strong></p><p>â€‹ å’Œä¹‹å‰æ“ä½œå…¶ä»–MQäº§å“ç›¸ä¼¼ï¼Œkakfaä¹Ÿæ˜¯åŸºäºä¸»é¢˜æ“ä½œï¼Œæ“ä½œä¹‹å‰éœ€è¦å…ˆåˆå§‹åŒ–topicã€‚</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code># åˆ›å»ºtopic
kafka-topics.bat --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic itheima
# æŸ¥è¯¢topic
kafka-topics.bat --zookeeper 127.0.0.1:2181 --list					
# åˆ é™¤topic
kafka-topics.bat --delete --zookeeper localhost:2181 --topic itheima
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•æœåŠ¡å™¨å¯åŠ¨çŠ¶æ€</strong></p><p>â€‹ Kafkaæä¾›æœ‰ä¸€å¥—æµ‹è¯•æœåŠ¡å™¨åŠŸèƒ½çš„æµ‹è¯•ç¨‹åºï¼Œè¿è¡Œbinç›®å½•ä¸‹çš„windowsç›®å½•ä¸‹çš„å‘½ä»¤å³å¯ä½¿ç”¨ã€‚</p><div class="language-CMD ext-CMD line-numbers-mode"><pre class="language-CMD"><code>kafka-console-producer.bat --broker-list localhost:9092 --topic itheima							# æµ‹è¯•ç”Ÿäº§æ¶ˆæ¯
kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic itheima --from-beginning	# æµ‹è¯•æ¶ˆæ¯æ¶ˆè´¹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ•´åˆ-4" tabindex="-1"><a class="header-anchor" href="#æ•´åˆ-4" aria-hidden="true">#</a> æ•´åˆ</h5><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springbootæ•´åˆKafkaçš„starterï¼Œæ­¤åæ ‡ç”±springbootç»´æŠ¤ç‰ˆæœ¬</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.kafka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-kafka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®Kafkaçš„æœåŠ¡å™¨åœ°å€</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">kafka</span><span class="token punctuation">:</span>
    <span class="token key atrule">bootstrap-servers</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">9092</span>
    <span class="token key atrule">consumer</span><span class="token punctuation">:</span>
      <span class="token key atrule">group-id</span><span class="token punctuation">:</span> order
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è®¾ç½®é»˜è®¤çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ‰€å±ç»„idã€‚</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨KafkaTemplateæ“ä½œKafka</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageServiceKafkaImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MessageService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">KafkaTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> kafkaTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—ï¼ˆkafkaï¼‰ï¼Œidï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        kafkaTemplate<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;itheima2022&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨sendæ–¹æ³•å‘é€æ¶ˆæ¯ï¼Œéœ€è¦ä¼ å…¥topicåç§°ã€‚</p><p><strong>æ­¥éª¤â‘£</strong>ï¼šä½¿ç”¨æ¶ˆæ¯ç›‘å¬å™¨åœ¨æœåŠ¡å™¨å¯åŠ¨åï¼Œç›‘å¬æŒ‡å®šä½ç½®ï¼Œå½“æ¶ˆæ¯å‡ºç°åï¼Œç«‹å³æ¶ˆè´¹æ¶ˆæ¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@KafkaListener</span><span class="token punctuation">(</span>topics <span class="token operator">=</span> <span class="token string">&quot;itheima2022&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">ConsumerRecord</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> record<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡(kafka)ï¼Œidï¼š&quot;</span><span class="token operator">+</span>record<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä½¿ç”¨æ³¨è§£@KafkaListenerå®šä¹‰å½“å‰æ–¹æ³•ç›‘å¬Kafkaä¸­æŒ‡å®štopicçš„æ¶ˆæ¯ï¼Œæ¥æ”¶åˆ°çš„æ¶ˆæ¯å°è£…åœ¨å¯¹è±¡ConsumerRecordä¸­ï¼Œè·å–æ•°æ®ä»ConsumerRecordå¯¹è±¡ä¸­è·å–å³å¯ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li><p>springbootæ•´åˆKafkaä½¿ç”¨KafkaTemplateå¯¹è±¡ä½œä¸ºå®¢æˆ·ç«¯æ“ä½œæ¶ˆæ¯é˜Ÿåˆ—</p></li><li><p>æ“ä½œKafkaéœ€è¦é…ç½®KafkaæœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ç«¯å£9092</p></li><li><p>ä¼ä¸šå¼€å‘æ—¶é€šå¸¸ä½¿ç”¨ç›‘å¬å™¨æ¥å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œè®¾ç½®ç›‘å¬å™¨ä½¿ç”¨æ³¨è§£@KafkaListenerã€‚æ¥æ”¶æ¶ˆæ¯ä¿å­˜åœ¨å½¢å‚ConsumerRecordå¯¹è±¡ä¸­</p></li></ol><h2 id="_6-ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#_6-ç›‘æ§" aria-hidden="true">#</a> 6.ç›‘æ§</h2><p>â€‹ åœ¨è¯´ç›‘æ§ä¹‹å‰ï¼Œéœ€è¦å›é¡¾ä¸€ä¸‹è½¯ä»¶ä¸šçš„å‘å±•å²ã€‚æœ€æ—©çš„è½¯ä»¶å®Œæˆä¸€äº›éå¸¸ç®€å•çš„åŠŸèƒ½ï¼Œä»£ç ä¸å¤šï¼Œé”™è¯¯ä¹Ÿå°‘ã€‚éšç€è½¯ä»¶åŠŸèƒ½çš„é€æ­¥å®Œå–„ï¼Œè½¯ä»¶çš„åŠŸèƒ½å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼ŒåŠŸèƒ½ä¸èƒ½å¾—åˆ°æœ‰æ•ˆçš„ä¿éšœï¼Œè¿™ä¸ªé˜¶æ®µå‡ºç°äº†é’ˆå¯¹è½¯ä»¶åŠŸèƒ½çš„æ£€æµ‹ï¼Œä¹Ÿå°±æ˜¯è½¯ä»¶æµ‹è¯•ã€‚ä¼´éšç€è®¡ç®—æœºæ“ä½œç³»ç»Ÿçš„é€æ­¥å‡çº§ï¼Œè½¯ä»¶çš„è¿è¡ŒçŠ¶æ€ä¹Ÿå˜å¾—å¼€å§‹è®©äººæ‰æ‘¸ä¸é€ï¼Œå‡ºç°äº†ä¸ç¨³å®šçš„çŠ¶å†µã€‚ä¼´éšç€è®¡ç®—æœºç½‘ç»œçš„å‘å±•ï¼Œç¨‹åºä¹Ÿä»å•æœºçŠ¶æ€åˆ‡æ¢æˆåŸºäºè®¡ç®—æœºç½‘ç»œçš„ç¨‹åºï¼Œåº”ç”¨äºç½‘ç»œçš„ç¨‹åºå¼€å§‹å‡ºç°ï¼Œç”±äºç½‘ç»œçš„ä¸ç¨³å®šæ€§ï¼Œç¨‹åºçš„è¿è¡ŒçŠ¶æ€è®©ä½¿ç”¨è€…æ›´åŠ å ªå¿§ã€‚äº’è”ç½‘çš„å‡ºç°å½»åº•æ‰“ç ´äº†è½¯ä»¶çš„æ€ç»´æ¨¡å¼ï¼Œéšä¹‹è€Œæ¥çš„äº’è”ç½‘è½¯ä»¶å°±æ›´åŠ å‡¸æ˜¾å‡ºåº”å¯¹å„ç§å„æ ·å¤æ‚çš„ç½‘ç»œæƒ…å†µä¹‹ä¸‹çš„å¼±å°ã€‚è®¡ç®—æœºè½¯ä»¶çš„è¿è¡ŒçŠ¶å†µå·²ç»æˆä¸ºäº†è½¯ä»¶è¿è¡Œçš„ä¸€ä¸ªå¤§è¯é¢˜ï¼Œé’ˆå¯¹è½¯ä»¶çš„è¿è¡ŒçŠ¶å†µå°±å‡ºç°äº†å…¨æ–°çš„æ€ç»´ï¼Œå»ºç«‹èµ·äº†åˆä»£çš„è½¯ä»¶è¿è¡ŒçŠ¶æ€ç›‘æ§ã€‚</p><p>â€‹ ä»€ä¹ˆæ˜¯ç›‘æ§ï¼Ÿå°±æ˜¯é€šè¿‡è½¯ä»¶çš„æ–¹å¼å±•ç¤ºå¦ä¸€ä¸ªè½¯ä»¶çš„è¿è¡Œæƒ…å†µï¼Œè¿è¡Œçš„æƒ…å†µåˆ™é€šè¿‡å„ç§å„æ ·çš„æŒ‡æ ‡æ•°æ®åé¦ˆç»™ç›‘æ§äººå‘˜ã€‚ä¾‹å¦‚ç½‘ç»œæ˜¯å¦é¡ºç•…ã€æœåŠ¡å™¨æ˜¯å¦åœ¨è¿è¡Œã€ç¨‹åºçš„åŠŸèƒ½æ˜¯å¦èƒ½å¤Ÿæ•´ç™¾åˆ†ç™¾è¿è¡ŒæˆåŠŸï¼Œå†…å­˜æ˜¯å¦å¤Ÿç”¨ï¼Œç­‰ç­‰ç­‰ç­‰ã€‚</p><p>â€‹ æœ¬ç« è¦è®²è§£çš„ç›‘æ§å°±æ˜¯å¯¹è½¯ä»¶çš„è¿è¡Œæƒ…å†µè¿›è¡Œç›‘ç£ï¼Œä½†æ˜¯springbootç¨‹åºä¸éspringbootç¨‹åºçš„å·®å¼‚è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä¸ºäº†æ–¹ä¾¿ç›‘æ§è½¯ä»¶çš„å¼€å‘ï¼Œspringbootæä¾›äº†ä¸€å¥—åŠŸèƒ½æ¥å£ï¼Œä¸ºå¼€å‘è€…åŠ é€Ÿå¼€å‘è¿‡ç¨‹ã€‚</p><h3 id="_6-1-ç›‘æ§çš„æ„ä¹‰" tabindex="-1"><a class="header-anchor" href="#_6-1-ç›‘æ§çš„æ„ä¹‰" aria-hidden="true">#</a> 6-1.ç›‘æ§çš„æ„ä¹‰</h3><p>â€‹ å¯¹äºç°ä»£çš„äº’è”ç½‘ç¨‹åºæ¥è¯´ï¼Œè§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼ŒåŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚ï¼Œè¿˜è¦è¿½æ±‚æ›´å¥½çš„å®¢æˆ·ä½“éªŒï¼Œå› æ­¤è¦ç›‘æ§çš„ä¿¡æ¯é‡ä¹Ÿå°±æ¯”è¾ƒå¤§äº†ã€‚ç”±äºç°åœ¨çš„äº’è”ç½‘ç¨‹åºå¤§éƒ¨åˆ†éƒ½æ˜¯åŸºäºå¾®æœåŠ¡çš„ç¨‹åºï¼Œä¸€ä¸ªç¨‹åºçš„è¿è¡Œéœ€è¦è‹¥å¹²ä¸ªæœåŠ¡æ¥ä¿éšœï¼Œå› æ­¤ç¬¬ä¸€ä¸ªè¦ç›‘æ§çš„æŒ‡æ ‡å°±æ˜¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œä¹Ÿå°±æ˜¯<strong>ç›‘æ§æœåŠ¡çŠ¶æ€æ˜¯å¦å¤„ç†å®•æœºçŠ¶æ€</strong>ã€‚ä¸€æ—¦å‘ç°æŸä¸ªæœåŠ¡å®•æœºäº†ï¼Œå¿…é¡»é©¬ä¸Šç»™å‡ºå¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼Œé¿å…æ•´ä½“åº”ç”¨åŠŸèƒ½å—å½±å“ã€‚å…¶æ¬¡ï¼Œç”±äºäº’è”ç½‘ç¨‹åºæœåŠ¡çš„å®¢æˆ·é‡æ˜¯å·¨å¤§çš„ï¼Œå½“å®¢æˆ·çš„è¯·æ±‚åœ¨çŸ­æ—¶é—´å†…é›†ä¸­è¾¾åˆ°æœåŠ¡å™¨åï¼Œå°±ä¼šå‡ºç°å„ç§ç¨‹åºè¿è¡ŒæŒ‡æ ‡çš„æ³¢åŠ¨ã€‚æ¯”å¦‚å†…å­˜å ç”¨ä¸¥é‡ï¼Œè¯·æ±‚æ— æ³•åŠæ—¶å“åº”å¤„ç†ç­‰ï¼Œè¿™å°±æ˜¯ç¬¬äºŒä¸ªè¦ç›‘æ§çš„é‡è¦æŒ‡æ ‡ï¼Œ<strong>ç›‘æ§æœåŠ¡è¿è¡ŒæŒ‡æ ‡</strong>ã€‚è™½ç„¶è½¯ä»¶æ˜¯å¯¹å¤–æä¾›ç”¨æˆ·çš„è®¿é—®éœ€æ±‚ï¼Œå®Œæˆå¯¹åº”åŠŸèƒ½çš„ï¼Œä½†æ˜¯åå°çš„è¿è¡Œæ˜¯å¦å¹³ç¨³ï¼Œæ˜¯å¦å‡ºç°äº†ä¸å½±å“å®¢æˆ·ä½¿ç”¨çš„åŠŸèƒ½éšæ‚£ï¼Œè¿™äº›ä¹Ÿæ˜¯è¦å¯†åˆ‡ç›‘æ§çš„ï¼Œæ­¤æ—¶å°±éœ€è¦åœ¨ä¸åœæœºçš„æƒ…å†µä¸‹ï¼Œç›‘æ§ç³»ç»Ÿè¿è¡Œæƒ…å†µï¼Œæ—¥å¿—æ˜¯ä¸€ä¸ªä¸é”™çš„æ‰‹æ®µã€‚å¦‚æœåœ¨ä¼—å¤šæ—¥å¿—ä¸­æ‰¾åˆ°å¼€å‘è€…æˆ–è¿ç»´äººå‘˜æ‰€å…³æ³¨çš„æ—¥å¿—ä¿¡æ¯ï¼Œç®€å•å¿«é€Ÿæœ‰æ•ˆçš„è¿‡æ»¤å‡ºè¦çœ‹çš„æ—¥å¿—ä¹Ÿæ˜¯ç›‘æ§ç³»ç»Ÿéœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯ç¬¬ä¸‰ä¸ªè¦ç›‘æ§çš„æŒ‡æ ‡ï¼Œ<strong>ç›‘æ§ç¨‹åºè¿è¡Œæ—¥å¿—</strong>ã€‚è™½ç„¶æˆ‘ä»¬æœŸæœ›ç¨‹åºä¸€ç›´å¹³ç¨³è¿è¡Œï¼Œä½†æ˜¯ç”±äºçªå‘æƒ…å†µçš„å‡ºç°ï¼Œä¾‹å¦‚æœåŠ¡å™¨è¢«æ”»å‡»ã€æœåŠ¡å™¨å†…å­˜æº¢å‡ºç­‰æƒ…å†µé€ æˆäº†æœåŠ¡å™¨å®•æœºï¼Œæ­¤æ—¶å½“å‰æœåŠ¡ä¸èƒ½æ»¡è¶³ä½¿ç”¨éœ€è¦ï¼Œå°±è¦å°†å…¶é‡å¯ç”šè‡³å…³é—­ï¼Œå¦‚ä½•å¿«é€Ÿæ§åˆ¶æœåŠ¡å™¨çš„å¯åœä¹Ÿæ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¸å¯å›é¿çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯ç¬¬å››ä¸ªç›‘æ§é¡¹ï¼Œ<strong>ç®¡ç†æœåŠ¡çŠ¶æ€</strong>ã€‚ä»¥ä¸Šè¿™äº›ä»…ä»…æ˜¯ä»å¤§çš„æ–¹é¢æ¥æ€è€ƒç›‘æ§è¿™ä¸ªé—®é¢˜ï¼Œè¿˜æœ‰å¾ˆå¤šçš„ç»†èŠ‚ç‚¹ï¼Œä¾‹å¦‚ä¸Šçº¿äº†ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå®šæ—¶æé†’ç”¨æˆ·ç»­è´¹ï¼Œè¿™ç§åŠŸèƒ½ä¸æ˜¯ä¸Šçº¿åé©¬ä¸Šå°±è¿è¡Œçš„ï¼Œä½†æ˜¯å½“å‰åŠŸèƒ½æ˜¯å¦çœŸçš„å¯åŠ¨ï¼Œå¦‚æœå¿«é€Ÿçš„æŸ¥è¯¢åˆ°è¿™ä¸ªåŠŸèƒ½å·²ç»å¼€å¯ï¼Œè¿™ä¹Ÿæ˜¯ç›‘æ§ä¸­è¦è§£å†³çš„é—®é¢˜ï¼Œç­‰ç­‰ã€‚çœ‹æ¥ç›‘æ§çœŸçš„æ˜¯ä¸€é¡¹éå¸¸é‡è¦çš„å·¥ä½œã€‚</p><p>â€‹ é€šè¿‡ä¸Šè¿°æè¿°ï¼Œå¯ä»¥çœ‹å‡ºç›‘æ§å¾ˆé‡è¦ã€‚é‚£å…·ä½“çš„ç›‘æ§è¦å¦‚ä½•å¼€å±•å‘¢ï¼Ÿè¿˜è¦ä»å®é™…çš„ç¨‹åºè¿è¡Œè§’åº¦å‡ºå‘ã€‚æ¯”å¦‚ç°åœ¨æœ‰3ä¸ªæœåŠ¡æ”¯æ’‘ç€ä¸€ä¸ªç¨‹åºçš„è¿è¡Œï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„è¿è¡ŒçŠ¶æ€ã€‚</p><img src="/assets/image-20220301093704396.88e34967.png" alt="image-20220301093704396" style="zoom:50%;"><p>â€‹ æ­¤æ—¶è¢«ç›‘æ§çš„ä¿¡æ¯å°±è¦åœ¨ä¸‰ä¸ªä¸åŒçš„ç¨‹åºä¸­å»æŸ¥è¯¢å¹¶å±•ç¤ºï¼Œä½†æ˜¯ä¸‰ä¸ªæœåŠ¡æ˜¯æœåŠ¡äºä¸€ä¸ªç¨‹åºçš„è¿è¡Œçš„ï¼Œå¦‚æœä¸èƒ½åˆå¹¶åˆ°ä¸€ä¸ªå¹³å°ä¸Šå±•ç¤ºï¼Œç›‘æ§å·¥ä½œé‡å·¨å¤§ï¼Œè€Œä¸”ä¿¡æ¯å¯¹ç§°æ€§å·®ï¼Œè¦ä¸åœçš„åœ¨ä¸‰ä¸ªç›‘æ§ç«¯æŸ¥çœ‹æ•°æ®ã€‚å¦‚æœå°†ä¸šåŠ¡æ”¾å¤§æˆ30ä¸ªï¼Œ300ä¸ªï¼Œ3000ä¸ªå‘¢ï¼Ÿçœ‹æ¥å¿…é¡»æœ‰ä¸€ä¸ªå•ç‹¬çš„å¹³å°ï¼Œå°†å¤šä¸ªè¢«ç›‘æ§çš„æœåŠ¡å¯¹åº”çš„ç›‘æ§æŒ‡æ ‡ä¿¡æ¯æ±‡æ€»åœ¨ä¸€èµ·ï¼Œè¿™æ ·æ›´åˆ©äºç›‘æ§å·¥ä½œçš„å¼€å±•ã€‚</p><img src="/assets/image-20220301094001896.006574de.png" alt="image-20220301094001896" style="zoom:50%;"><p>â€‹ æ–°çš„ç¨‹åºä¸“é—¨ç”¨æ¥ç›‘æ§ï¼Œæ–°çš„é—®é¢˜å°±å‡ºç°äº†ï¼Œæ˜¯è¢«ç›‘æ§ç¨‹åºä¸»åŠ¨ä¸ŠæŠ¥ä¿¡æ¯è¿˜æ˜¯ç›‘æ§ç¨‹åºä¸»åŠ¨è·å–ä¿¡æ¯ï¼Ÿå¦‚æœç›‘æ§ç¨‹åºä¸èƒ½ä¸»åŠ¨è·å–ä¿¡æ¯ï¼Œè¿™å°±æ„å‘³ç€ç›‘æ§ç¨‹åºæœ‰å¯èƒ½çœ‹åˆ°çš„æ˜¯å¾ˆä¹…ä¹‹å‰è¢«ç›‘æ§ç¨‹åºä¸ŠæŠ¥çš„ä¿¡æ¯ï¼Œä¸‡ä¸€è¢«ç›‘æ§ç¨‹åºå®•æœºäº†ï¼Œç›‘æ§ç¨‹åºå°±æ— æ³•åŒºåˆ†ç©¶ç«Ÿæ˜¯å¥½ä¹…æ²¡æ³•ä¿¡æ¯äº†ï¼Œè¿˜æ˜¯å·²ç»ä¸‹çº¿äº†ã€‚æ‰€ä»¥ç›‘æ§ç¨‹åºå¿…é¡»å…·æœ‰ä¸»åŠ¨å‘èµ·è¯·æ±‚è·å–è¢«ç›‘æ§æœåŠ¡ä¿¡æ¯çš„èƒ½åŠ›ã€‚</p><img src="/assets/image-20220301094259844.a6950469.png" alt="image-20220301094259844" style="zoom:50%;"><p>â€‹ å¦‚æœç›‘æ§ç¨‹åºè¦ç›‘æ§æœåŠ¡æ—¶ï¼Œä¸»åŠ¨è·å–å¯¹æ–¹çš„ä¿¡æ¯ã€‚é‚£ç›‘æ§ç¨‹åºå¦‚ä½•çŸ¥é“å“ªäº›ç¨‹åºè¢«è‡ªå·±ç›‘æ§å‘¢ï¼Ÿä¸å¯èƒ½åœ¨ç›‘æ§ç¨‹åºä¸­è®¾ç½®æˆ‘ç›‘æ§è°ï¼Œè¿™æ ·äº’è”ç½‘ä¸Šçš„æ‰€æœ‰ç¨‹åºå²‚ä¸æ˜¯éƒ½å¯ä»¥è¢«ç›‘æ§åˆ°ï¼Œè¿™æ ·çš„è¯ä¿¡æ¯å®‰å…¨å°†æ— æ³•å¾—åˆ°ä¿éšœã€‚åˆç†çš„åšæ³•åªèƒ½æ˜¯åœ¨è¢«ç›‘æ§ç¨‹åºå¯åŠ¨æ—¶ä¸ŠæŠ¥ç›‘æ§ç¨‹åºï¼Œå‘Šè¯‰ç›‘æ§ç¨‹åºä½ å¯ä»¥ç›‘æ§æˆ‘äº†ã€‚çœ‹æ¥éœ€è¦åœ¨è¢«ç›‘æ§ç¨‹åºç«¯åšä¸»åŠ¨ä¸ŠæŠ¥çš„æ“ä½œï¼Œè¿™å°±è¦æ±‚è¢«ç›‘æ§ç¨‹åºä¸­é…ç½®å¯¹åº”çš„ç›‘æ§ç¨‹åºæ˜¯è°ã€‚</p><img src="/assets/image-20220301094547748.2701ec0f.png" alt="image-20220301094547748" style="zoom:50%;"><p>â€‹ è¢«ç›‘æ§ç¨‹åºå¯ä»¥æä¾›å„ç§å„æ ·çš„æŒ‡æ ‡æ•°æ®ç»™ç›‘æ§ç¨‹åºçœ‹ï¼Œä½†æ˜¯æ¯ä¸€ä¸ªæŒ‡æ ‡éƒ½ä»£è¡¨ç€å…¬å¸çš„æœºå¯†ä¿¡æ¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æŒ‡æ ‡éƒ½å¯ä»¥ç»™ä»»ä½•äººçœ‹çš„ï¼Œä¹ƒè‡³è¿ç»´äººå‘˜ï¼Œæ‰€ä»¥å¯¹è¢«ç›‘æ§æŒ‡æ ‡çš„æ˜¯å¦å¼€æ”¾å‡ºæ¥ç»™ç›‘æ§ç³»ç»Ÿçœ‹ï¼Œä¹Ÿéœ€è¦åšè¯¦ç»†çš„è®¾å®šã€‚</p><p>â€‹ ä»¥ä¸Šæè¿°çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªç›‘æ§ç³»ç»Ÿçš„åŸºæœ¬æµç¨‹ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>ç›‘æ§æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å·¥ä½œï¼Œæ˜¯ä¿éšœç¨‹åºæ­£å¸¸è¿è¡Œçš„åŸºç¡€æ‰‹æ®µ</li><li>ç›‘æ§çš„è¿‡ç¨‹é€šè¿‡ä¸€ä¸ªç›‘æ§ç¨‹åºè¿›è¡Œï¼Œå®ƒæ±‡æ€»æ‰€æœ‰è¢«ç›‘æ§çš„ç¨‹åºçš„ä¿¡æ¯é›†ä¸­ç»Ÿä¸€å±•ç¤º</li><li>è¢«ç›‘æ§ç¨‹åºéœ€è¦ä¸»åŠ¨ä¸ŠæŠ¥è‡ªå·±è¢«ç›‘æ§ï¼ŒåŒæ—¶è¦è®¾ç½®å“ªäº›æŒ‡æ ‡è¢«ç›‘æ§</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ ä¸‹é¢å°±è¦å¼€å§‹åšç›‘æ§äº†ï¼Œæ–°çš„é—®é¢˜å°±æ¥äº†ï¼Œç›‘æ§ç¨‹åºæ€ä¹ˆåšå‘¢ï¼Ÿéš¾é“è¦è‡ªå·±å†™å—ï¼Ÿè‚¯å®šæ˜¯ä¸ç°å®çš„ï¼Œå¦‚ä½•è¿›è¡Œç›‘æ§ï¼Œå’±ä»¬ä¸‹èŠ‚å†è®²ã€‚</p><h3 id="_6-2-å¯è§†åŒ–ç›‘æ§å¹³å°" tabindex="-1"><a class="header-anchor" href="#_6-2-å¯è§†åŒ–ç›‘æ§å¹³å°" aria-hidden="true">#</a> 6-2.å¯è§†åŒ–ç›‘æ§å¹³å°</h3><p>â€‹ springbootæŠ½å–äº†å¤§éƒ¨åˆ†ç›‘æ§ç³»ç»Ÿçš„å¸¸ç”¨æŒ‡æ ‡ï¼Œæå‡ºäº†ç›‘æ§çš„æ€»æ€æƒ³ã€‚ç„¶åå°±æœ‰å¥½å¿ƒçš„åŒå¿—æ ¹æ®ç›‘æ§çš„æ€»æ€æƒ³ï¼Œåˆ¶ä½œäº†ä¸€ä¸ªé€šç”¨æ€§å¾ˆå¼ºçš„ç›‘æ§ç³»ç»Ÿï¼Œå› ä¸ºæ˜¯åŸºäºspringbootç›‘æ§çš„æ ¸å¿ƒæ€æƒ³åˆ¶ä½œçš„ï¼Œæ‰€ä»¥è¿™ä¸ªç¨‹åºè¢«å‘½åä¸º<strong>Spring Boot Admin</strong>ã€‚</p><p>â€‹ Spring Boot Adminï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒºé¡¹ç›®ï¼Œç”¨äºç®¡ç†å’Œç›‘æ§SpringBootåº”ç”¨ç¨‹åºã€‚è¿™ä¸ªé¡¹ç›®ä¸­åŒ…å«æœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸¤éƒ¨åˆ†ï¼Œè€Œç›‘æ§å¹³å°æŒ‡çš„å°±æ˜¯æœåŠ¡ç«¯ã€‚æˆ‘ä»¬åšçš„ç¨‹åºå¦‚æœéœ€è¦è¢«ç›‘æ§ï¼Œå°†æˆ‘ä»¬åšçš„ç¨‹åºåˆ¶ä½œæˆå®¢æˆ·ç«¯ï¼Œç„¶åé…ç½®æœåŠ¡ç«¯åœ°å€åï¼ŒæœåŠ¡ç«¯å°±å¯ä»¥é€šè¿‡HTTPè¯·æ±‚çš„æ–¹å¼ä»å®¢æˆ·ç«¯è·å–å¯¹åº”çš„ä¿¡æ¯ï¼Œå¹¶é€šè¿‡UIç•Œé¢å±•ç¤ºå¯¹åº”ä¿¡æ¯ã€‚</p><p>â€‹ ä¸‹é¢å°±æ¥å¼€å‘è¿™å¥—ç›‘æ§ç¨‹åºï¼Œå…ˆåˆ¶ä½œæœåŠ¡ç«¯ï¼Œå…¶å®æœåŠ¡ç«¯å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªwebç¨‹åºï¼Œæ”¶åˆ°ä¸€äº›ä¿¡æ¯åå±•ç¤ºè¿™äº›ä¿¡æ¯ã€‚</p><p><strong>æœåŠ¡ç«¯å¼€å‘</strong></p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springboot adminå¯¹åº”çš„starterï¼Œç‰ˆæœ¬ä¸å½“å‰ä½¿ç”¨çš„springbootç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œå¹¶å°†å…¶é…ç½®æˆwebå·¥ç¨‹</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>de.codecentric<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-admin-starter-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°è¿‡ç¨‹å¯ä»¥é€šè¿‡åˆ›å»ºé¡¹ç›®æ—¶ä½¿ç”¨å‹¾é€‰çš„å½¢å¼å®Œæˆã€‚</p><img src="/assets/image-20220301102432817.4adab24a.png" alt="image-20220301102432817" style="zoom:50%;"><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨å¼•å¯¼ç±»ä¸Šæ·»åŠ æ³¨è§£@EnableAdminServerï¼Œå£°æ˜å½“å‰åº”ç”¨å¯åŠ¨åä½œä¸ºSpringBootAdminçš„æœåŠ¡å™¨ä½¿ç”¨</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableAdminServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot25AdminServerApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Springboot25AdminServerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ åšåˆ°è¿™é‡Œï¼Œè¿™ä¸ªæœåŠ¡å™¨å°±å¼€å‘å¥½äº†ï¼Œå¯åŠ¨åå°±å¯ä»¥è®¿é—®å½“å‰ç¨‹åºäº†ï¼Œç•Œé¢å¦‚ä¸‹ã€‚</p><img src="/assets/image-20220301103028468.117a57d4.png" alt="image-20220301103028468" style="zoom:50%;"><p>â€‹ ç”±äºç›®å‰æ²¡æœ‰å¯åŠ¨ä»»ä½•è¢«ç›‘æ§çš„ç¨‹åºï¼Œæ‰€ä»¥é‡Œé¢ä»€ä¹ˆä¿¡æ¯éƒ½æ²¡æœ‰ã€‚ä¸‹é¢åˆ¶ä½œä¸€ä¸ªè¢«ç›‘æ§çš„å®¢æˆ·ç«¯ç¨‹åºã€‚</p><p><strong>å®¢æˆ·ç«¯å¼€å‘</strong></p><p>â€‹ å®¢æˆ·ç«¯ç¨‹åºå¼€å‘å…¶å®å’ŒæœåŠ¡ç«¯å¼€å‘æ€è·¯åŸºæœ¬ç›¸ä¼¼ï¼Œå¤šäº†ä¸€äº›é…ç½®è€Œå·²ã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥springboot adminå¯¹åº”çš„starterï¼Œç‰ˆæœ¬ä¸å½“å‰ä½¿ç”¨çš„springbootç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œå¹¶å°†å…¶é…ç½®æˆwebå·¥ç¨‹</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>de.codecentric<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-admin-starter-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°è¿‡ç¨‹ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºé¡¹ç›®æ—¶ä½¿ç”¨å‹¾é€‰çš„å½¢å¼å®Œæˆï¼Œä¸è¿‡ä¸€å®šè¦å°å¿ƒï¼Œç«¯å£é…ç½®æˆä¸ä¸€æ ·çš„ï¼Œå¦åˆ™ä¼šå†²çªã€‚</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šè®¾ç½®å½“å‰å®¢æˆ·ç«¯å°†ä¿¡æ¯ä¸Šä¼ åˆ°å“ªä¸ªæœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡ymlæ–‡ä»¶é…ç½®</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">boot</span><span class="token punctuation">:</span>
    <span class="token key atrule">admin</span><span class="token punctuation">:</span>
      <span class="token key atrule">client</span><span class="token punctuation">:</span>
        <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ åšåˆ°è¿™é‡Œï¼Œè¿™ä¸ªå®¢æˆ·ç«¯å°±å¯ä»¥å¯åŠ¨äº†ã€‚å¯åŠ¨åå†æ¬¡è®¿é—®æœåŠ¡ç«¯ç¨‹åºï¼Œç•Œé¢å¦‚ä¸‹ã€‚</p><img src="/assets/image-20220301103838079.8b891ee7.png" alt="image-20220301103838079" style="zoom:50%;"><p>â€‹ å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰ç›‘æ§äº†1ä¸ªç¨‹åºï¼Œç‚¹å‡»è¿›å»æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚</p><img src="/assets/image-20220301103936386.4ca63f6b.png" alt="image-20220301103936386" style="zoom:50%;"><p>â€‹ ç”±äºå½“å‰æ²¡æœ‰è®¾ç½®å¼€æ”¾å“ªäº›ä¿¡æ¯ç»™ç›‘æ§æœåŠ¡å™¨ï¼Œæ‰€ä»¥ç›®å‰çœ‹ä¸åˆ°ä»€ä¹ˆæœ‰æ•ˆçš„ä¿¡æ¯ã€‚ä¸‹é¢éœ€è¦åšä¸¤ç»„é…ç½®å°±å¯ä»¥çœ‹åˆ°ä¿¡æ¯äº†ã€‚</p><ol><li><p>å¼€æ”¾æŒ‡å®šä¿¡æ¯ç»™æœåŠ¡å™¨çœ‹</p></li><li><p>å…è®¸æœåŠ¡å™¨ä»¥HTTPè¯·æ±‚çš„æ–¹å¼è·å–å¯¹åº”çš„ä¿¡æ¯</p><p>é…ç½®å¦‚ä¸‹ï¼š</p></li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">boot</span><span class="token punctuation">:</span>
    <span class="token key atrule">admin</span><span class="token punctuation">:</span>
      <span class="token key atrule">client</span><span class="token punctuation">:</span>
        <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8080</span>
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> always
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°é…ç½®å¯¹äºåˆå­¦è€…æ¥è¯´æ¯”è¾ƒå®¹æ˜“æ··æ·†ã€‚ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œåˆ°ä¸‹ä¸€èŠ‚å†åšå…·ä½“çš„è®²è§£ã€‚springbootadminçš„å®¢æˆ·ç«¯é»˜è®¤å¼€æ”¾äº†13ç»„ä¿¡æ¯ç»™æœåŠ¡å™¨ï¼Œä½†æ˜¯è¿™äº›ä¿¡æ¯é™¤äº†ä¸€ä¸ªä¹‹å¤–ï¼Œå…¶ä»–çš„ä¿¡æ¯éƒ½ä¸è®©é€šè¿‡HTTPè¯·æ±‚æŸ¥çœ‹ã€‚æ‰€ä»¥ä½ çœ‹åˆ°çš„ä¿¡æ¯åŸºæœ¬ä¸Šå°±æ²¡ä»€ä¹ˆå†…å®¹äº†ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªå†…å®¹ï¼Œå°±æ˜¯ä¸‹é¢çš„å¥åº·ä¿¡æ¯ã€‚</p><img src="/assets/image-20220301104742563.b8075cdf.png" alt="image-20220301104742563" style="zoom:50%;"><p>â€‹ ä½†æ˜¯å³ä¾¿å¦‚æ­¤æˆ‘ä»¬çœ‹åˆ°å¥åº·ä¿¡æ¯ä¸­ä¹Ÿæ²¡ä»€ä¹ˆå†…å®¹ï¼ŒåŸå› åœ¨äºå¥åº·ä¿¡æ¯ä¸­æœ‰ä¸€äº›ä¿¡æ¯æè¿°äº†ä½ å½“å‰åº”ç”¨ä½¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯ç­‰ä¿¡æ¯ï¼Œå¦‚æœæ— è„‘çš„å¯¹å¤–æš´éœ²åŠŸèƒ½ä¼šæœ‰å®‰å…¨éšæ‚£ã€‚é€šè¿‡é…ç½®å°±å¯ä»¥å¼€æ”¾æ‰€æœ‰çš„å¥åº·ä¿¡æ¯æ˜ç»†æŸ¥çœ‹äº†ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> always
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å¥åº·æ˜ç»†ä¿¡æ¯å¦‚ä¸‹ï¼š</p><img src="/assets/image-20220301105116554.e8d00f5c.png" alt="image-20220301105116554" style="zoom:50%;"><p>â€‹ ç›®å‰é™¤äº†å¥åº·ä¿¡æ¯ï¼Œå…¶ä»–ä¿¡æ¯éƒ½æŸ¥é˜…ä¸äº†ã€‚åŸå› åœ¨äºå…¶ä»–12ç§ä¿¡æ¯æ˜¯é»˜è®¤ä¸æä¾›ç»™æœåŠ¡å™¨é€šè¿‡HTTPè¯·æ±‚æŸ¥é˜…çš„ï¼Œæ‰€ä»¥éœ€è¦å¼€å¯æŸ¥é˜…çš„å†…å®¹é¡¹ï¼Œä½¿ç”¨*è¡¨ç¤ºæŸ¥é˜…å…¨éƒ¨ã€‚è®°å¾—å¸¦å¼•å·ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
      <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ é…ç½®åå†åˆ·æ–°æœåŠ¡å™¨é¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ä¿¡æ¯äº†ã€‚</p><img src="/assets/image-20220301105554494.f564b9d0.png" alt="image-20220301105554494" style="zoom:50%;"><p>â€‹ ä»¥ä¸Šç•Œé¢ä¸­å±•ç¤ºçš„ä¿¡æ¯é‡å°±éå¸¸å¤§äº†ï¼ŒåŒ…å«äº†13ç»„ä¿¡æ¯ï¼Œæœ‰æ€§èƒ½æŒ‡æ ‡ç›‘æ§ï¼ŒåŠ è½½çš„beanåˆ—è¡¨ï¼ŒåŠ è½½çš„ç³»ç»Ÿå±æ€§ï¼Œæ—¥å¿—çš„æ˜¾ç¤ºæ§åˆ¶ç­‰ç­‰ã€‚</p><p><strong>é…ç½®å¤šä¸ªå®¢æˆ·ç«¯</strong></p><p>â€‹ å¯ä»¥é€šè¿‡é…ç½®å®¢æˆ·ç«¯çš„æ–¹å¼åœ¨å…¶ä»–çš„springbootç¨‹åºä¸­æ·»åŠ å®¢æˆ·ç«¯åæ ‡ï¼Œè¿™æ ·å½“å‰æœåŠ¡å™¨å°±å¯ä»¥ç›‘æ§å¤šä¸ªå®¢æˆ·ç«¯ç¨‹åºäº†ã€‚æ¯ä¸ªå®¢æˆ·ç«¯å±•ç¤ºä¸åŒçš„ç›‘æ§ä¿¡æ¯ã€‚</p><img src="/assets/image-20220301110352170.31095f34.png" alt="image-20220301110352170" style="zoom:50%;"><p>â€‹ è¿›å…¥ç›‘æ§é¢æ¿ï¼Œå¦‚æœä½ åŠ è½½çš„åº”ç”¨å…·æœ‰åŠŸèƒ½ï¼Œåœ¨ç›‘æ§é¢æ¿ä¸­å¯ä»¥çœ‹åˆ°3ç»„ä¿¡æ¯å±•ç¤ºçš„ä¸ä¹‹å‰åŠ è½½çš„ç©ºå·¥ç¨‹ä¸ä¸€æ ·ã€‚</p><ul><li>ç±»åŠ è½½é¢æ¿ä¸­å¯ä»¥æŸ¥é˜…åˆ°å¼€å‘è€…è‡ªå®šä¹‰çš„ç±»ï¼Œå¦‚ä¸‹å›¾</li></ul><p>â€‹ <img src="/assets/image-20220301161246835.5a2747ba.png" alt="image-20220301161246835" style="zoom:33%;"></p><ul><li>æ˜ å°„ä¸­å¯ä»¥æŸ¥é˜…åˆ°å½“å‰åº”ç”¨é…ç½®çš„æ‰€æœ‰è¯·æ±‚</li></ul><p>â€‹ <img src="/assets/image-20220301161418791.4d44236c.png" alt="image-20220301161418791" style="zoom:33%;"><img src="/assets/image-20220301162008737.1aa4d5c9.png" alt="image-20220301162008737" style="zoom:33%;"></p><ul><li>æ€§èƒ½æŒ‡æ ‡ä¸­å¯ä»¥æŸ¥é˜…å½“å‰åº”ç”¨ç‹¬æœ‰çš„è¯·æ±‚è·¯å¾„ç»Ÿè®¡æ•°æ®</li></ul><p>â€‹ <img src="/assets/image-20220301161906949.2cb5c53f.png" alt="image-20220301161906949" style="zoom:33%;"><img src="/assets/image-20220301162040670.9137be5d.png" alt="image-20220301162040670" style="zoom:33%;"></p><p><strong>æ€»ç»“</strong></p><ol><li>å¼€å‘ç›‘æ§æœåŠ¡ç«¯éœ€è¦å¯¼å…¥åæ ‡ï¼Œç„¶ååœ¨å¼•å¯¼ç±»ä¸Šæ·»åŠ æ³¨è§£@EnableAdminServerï¼Œå¹¶å°†å…¶é…ç½®æˆwebç¨‹åºå³å¯</li><li>å¼€å‘è¢«ç›‘æ§çš„å®¢æˆ·ç«¯éœ€è¦å¯¼å…¥åæ ‡ï¼Œç„¶åé…ç½®æœåŠ¡ç«¯æœåŠ¡å™¨åœ°å€ï¼Œå¹¶åšå¼€æ”¾æŒ‡æ ‡çš„è®¾å®šå³å¯</li><li>åœ¨ç›‘æ§å¹³å°ä¸­å¯ä»¥æŸ¥é˜…åˆ°å„ç§å„æ ·è¢«ç›‘æ§çš„æŒ‡æ ‡ï¼Œå‰ææ˜¯å®¢æˆ·ç«¯å¼€æ”¾äº†è¢«ç›‘æ§çš„æŒ‡æ ‡</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹ ä¹‹å‰è¯´è¿‡ï¼ŒæœåŠ¡ç«¯è¦æƒ³ç›‘æ§å®¢æˆ·ç«¯ï¼Œéœ€è¦ä¸»åŠ¨çš„è·å–åˆ°å¯¹åº”ä¿¡æ¯å¹¶å±•ç¤ºå‡ºæ¥ã€‚ä½†æ˜¯ç›®å‰æˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨å®¢æˆ·ç«¯å¼€å‘ä»»ä½•æ–°çš„åŠŸèƒ½ï¼Œä½†æ˜¯æœåŠ¡ç«¯ç¡®å¯ä»¥è·å–ç›‘æ§ä¿¡æ¯ï¼Œè°å¸®æˆ‘ä»¬åšçš„è¿™äº›åŠŸèƒ½å‘¢ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è®²ã€‚</p><h3 id="_6-3-ç›‘æ§åŸç†" tabindex="-1"><a class="header-anchor" href="#_6-3-ç›‘æ§åŸç†" aria-hidden="true">#</a> 6-3.ç›‘æ§åŸç†</h3><p>â€‹ é€šè¿‡æŸ¥é˜…ç›‘æ§ä¸­çš„æ˜ å°„æŒ‡æ ‡ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰ç³»ç»Ÿä¸­å¯ä»¥è¿è¡Œçš„æ‰€æœ‰è¯·æ±‚è·¯å¾„ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†è·¯å¾„ä»¥/actuatorå¼€å¤´</p><img src="/assets/image-20220301170214076.b47395c9.png" alt="image-20220301170214076" style="zoom:50%;"><p>â€‹ é¦–å…ˆè¿™äº›è¯·æ±‚è·¯å¾„ä¸æ˜¯å¼€å‘è€…è‡ªå·±ç¼–å†™çš„ï¼Œå…¶æ¬¡è¿™ä¸ªè·¯å¾„ä»£è¡¨ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿæ—¢ç„¶è¿™ä¸ªè·¯å¾„å¯ä»¥è®¿é—®ï¼Œå°±å¯ä»¥é€šè¿‡æµè§ˆå™¨å‘é€è¯¥è¯·æ±‚çœ‹çœ‹ç©¶ç«Ÿå¯ä»¥å¾—åˆ°ä»€ä¹ˆä¿¡æ¯ã€‚</p><p><img src="/assets/image-20220301170723057.416ac8d3.png" alt="image-20220301170723057"></p><p>â€‹ é€šè¿‡å‘é€è¯·æ±‚ï¼Œå¯ä»¥å¾—åˆ°ä¸€ç»„jsonä¿¡æ¯ï¼Œå¦‚ä¸‹</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;_links&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;self&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;beans&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/beans&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;caches-cache&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/caches/{cache}&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;caches&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/caches&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;health&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/health&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;health-path&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/health/{*path}&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/info&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;conditions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/conditions&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;shutdown&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/shutdown&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;configprops&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/configprops&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;configprops-prefix&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/configprops/{prefix}&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/env&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;env-toMatch&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/env/{toMatch}&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;loggers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/loggers&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;loggers-name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/loggers/{name}&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;heapdump&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/heapdump&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;threaddump&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/threaddump&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;metrics-requiredMetricName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/metrics/{requiredMetricName}&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;metrics&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/metrics&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;scheduledtasks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/scheduledtasks&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:81/actuator/mappings&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;templated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å…¶ä¸­æ¯ä¸€ç»„æ•°æ®éƒ½æœ‰ä¸€ä¸ªè¯·æ±‚è·¯å¾„ï¼Œè€Œåœ¨è¿™é‡Œè¯·æ±‚è·¯å¾„ä¸­æœ‰ä¹‹å‰çœ‹åˆ°è¿‡çš„healthï¼Œå‘é€æ­¤è¯·æ±‚åˆå¾—åˆ°äº†ä¸€ç»„ä¿¡æ¯</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UP&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;components&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;diskSpace&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UP&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;details&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">297042808832</span><span class="token punctuation">,</span>
                <span class="token property">&quot;free&quot;</span><span class="token operator">:</span> <span class="token number">72284409856</span><span class="token punctuation">,</span>
                <span class="token property">&quot;threshold&quot;</span><span class="token operator">:</span> <span class="token number">10485760</span><span class="token punctuation">,</span>
                <span class="token property">&quot;exists&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ping&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UP&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å½“å‰ä¿¡æ¯ä¸ç›‘æ§é¢æ¿ä¸­çš„æ•°æ®å­˜åœ¨ç€å¯¹åº”å…³ç³»</p><img src="/assets/image-20220301171025615.4eabe937.png" alt="image-20220301171025615" style="zoom:50%;"><p>â€‹ åŸæ¥ç›‘æ§ä¸­æ˜¾ç¤ºçš„ä¿¡æ¯å®é™…ä¸Šæ˜¯é€šè¿‡å‘é€è¯·æ±‚åå¾—åˆ°jsonæ•°æ®ï¼Œç„¶åå±•ç¤ºå‡ºæ¥ã€‚æŒ‰ç…§ä¸Šè¿°æ“ä½œï¼Œå¯ä»¥å‘é€æ›´å¤šçš„ä»¥/actuatorå¼€å¤´çš„é“¾æ¥åœ°å€ï¼Œè·å–æ›´å¤šçš„æ•°æ®ï¼Œè¿™äº›æ•°æ®æ±‡æ€»åˆ°ä¸€èµ·ç»„æˆäº†ç›‘æ§å¹³å°æ˜¾ç¤ºçš„æ‰€æœ‰æ•°æ®ã€‚</p><p>â€‹ åˆ°è¿™é‡Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ ¸å¿ƒä¿¡æ¯ï¼Œç›‘æ§å¹³å°ä¸­æ˜¾ç¤ºçš„ä¿¡æ¯å®é™…ä¸Šæ˜¯é€šè¿‡å¯¹è¢«ç›‘æ§çš„åº”ç”¨å‘é€è¯·æ±‚å¾—åˆ°çš„ã€‚é‚£è¿™äº›è¯·æ±‚è°å¼€å‘çš„å‘¢ï¼Ÿæ‰“å¼€è¢«ç›‘æ§åº”ç”¨çš„pomæ–‡ä»¶ï¼Œå…¶ä¸­å¯¼å…¥äº†springboot adminçš„å¯¹åº”çš„clientï¼Œåœ¨è¿™ä¸ªèµ„æºä¸­å¯¼å…¥äº†ä¸€ä¸ªåç§°å«åšactuatorçš„åŒ…ã€‚è¢«ç›‘æ§çš„åº”ç”¨ä¹‹æ‰€ä»¥å¯ä»¥å¯¹å¤–æä¾›ä¸Šè¿°è¯·æ±‚è·¯å¾„ï¼Œå°±æ˜¯å› ä¸ºæ·»åŠ äº†è¿™ä¸ªåŒ…ã€‚</p><p><img src="/assets/image-20220301171437817.a966c2f7.png" alt="image-20220301171437817"></p><p>â€‹ è¿™ä¸ªactuatoræ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™å°±æ˜¯æœ¬èŠ‚è¦è®²çš„æ ¸å¿ƒå†…å®¹ï¼Œç›‘æ§çš„ç«¯ç‚¹ã€‚</p><p>â€‹ Actuatorï¼Œå¯ä»¥ç§°ä¸ºç«¯ç‚¹ï¼Œæè¿°äº†ä¸€ç»„ç›‘æ§ä¿¡æ¯ï¼ŒSpringBootAdminæä¾›äº†å¤šä¸ªå†…ç½®ç«¯ç‚¹ï¼Œé€šè¿‡è®¿é—®ç«¯ç‚¹å°±å¯ä»¥è·å–å¯¹åº”çš„ç›‘æ§ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ç«¯ç‚¹ä¿¡æ¯ã€‚é€šè¿‡å‘é€è¯·æ±‚è·¯å¾„**/actuator<strong>å¯ä»¥è®¿é—®åº”ç”¨æ‰€æœ‰ç«¯ç‚¹ä¿¡æ¯ï¼Œå¦‚æœç«¯ç‚¹ä¸­è¿˜æœ‰æ˜ç»†ä¿¡æ¯å¯ä»¥å‘é€è¯·æ±‚</strong>/actuator/ç«¯ç‚¹åç§°**æ¥è·å–è¯¦ç»†ä¿¡æ¯ã€‚ä»¥ä¸‹åˆ—å‡ºäº†æ‰€æœ‰ç«¯ç‚¹ä¿¡æ¯è¯´æ˜ï¼š</p><table><thead><tr><th>ID</th><th>æè¿°</th><th>é»˜è®¤å¯ç”¨</th></tr></thead><tbody><tr><td>auditevents</td><td>æš´éœ²å½“å‰åº”ç”¨ç¨‹åºçš„å®¡è®¡äº‹ä»¶ä¿¡æ¯ã€‚</td><td>æ˜¯</td></tr><tr><td>beans</td><td>æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æ‰€æœ‰ Spring bean çš„å®Œæ•´åˆ—è¡¨ã€‚</td><td>æ˜¯</td></tr><tr><td>caches</td><td>æš´éœ²å¯ç”¨çš„ç¼“å­˜ã€‚</td><td>æ˜¯</td></tr><tr><td>conditions</td><td>æ˜¾ç¤ºåœ¨é…ç½®å’Œè‡ªåŠ¨é…ç½®ç±»ä¸Šè¯„ä¼°çš„æ¡ä»¶ä»¥åŠå®ƒä»¬åŒ¹é…æˆ–ä¸åŒ¹é…çš„åŸå› ã€‚</td><td>æ˜¯</td></tr><tr><td>configprops</td><td>æ˜¾ç¤ºæ‰€æœ‰ @ConfigurationProperties çš„æ ¡å¯¹æ¸…å•ã€‚</td><td>æ˜¯</td></tr><tr><td>env</td><td>æš´éœ² Spring ConfigurableEnvironment ä¸­çš„å±æ€§ã€‚</td><td>æ˜¯</td></tr><tr><td>flyway</td><td>æ˜¾ç¤ºå·²åº”ç”¨çš„ Flyway æ•°æ®åº“è¿ç§»ã€‚</td><td>æ˜¯</td></tr><tr><td>health</td><td>æ˜¾ç¤ºåº”ç”¨ç¨‹åºå¥åº·ä¿¡æ¯</td><td>æ˜¯</td></tr><tr><td>httptrace</td><td>æ˜¾ç¤º HTTP è¿½è¸ªä¿¡æ¯ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæœ€å 100 ä¸ª HTTP è¯·æ±‚/å“åº”äº¤æ¢ï¼‰ã€‚</td><td>æ˜¯</td></tr><tr><td>info</td><td>æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¿¡æ¯ã€‚</td><td>æ˜¯</td></tr><tr><td>integrationgraph</td><td>æ˜¾ç¤º Spring Integration å›¾ã€‚</td><td>æ˜¯</td></tr><tr><td>loggers</td><td>æ˜¾ç¤ºå’Œä¿®æ”¹åº”ç”¨ç¨‹åºä¸­æ—¥å¿—è®°å½•å™¨çš„é…ç½®ã€‚</td><td>æ˜¯</td></tr><tr><td>liquibase</td><td>æ˜¾ç¤ºå·²åº”ç”¨çš„ Liquibase æ•°æ®åº“è¿ç§»ã€‚</td><td>æ˜¯</td></tr><tr><td>metrics</td><td>æ˜¾ç¤ºå½“å‰åº”ç”¨ç¨‹åºçš„æŒ‡æ ‡åº¦é‡ä¿¡æ¯ã€‚</td><td>æ˜¯</td></tr><tr><td>mappings</td><td>æ˜¾ç¤ºæ‰€æœ‰ @RequestMapping è·¯å¾„çš„æ•´ç†æ¸…å•ã€‚</td><td>æ˜¯</td></tr><tr><td>scheduledtasks</td><td>æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­çš„è°ƒåº¦ä»»åŠ¡ã€‚</td><td>æ˜¯</td></tr><tr><td>sessions</td><td>å…è®¸ä» Spring Session æ”¯æŒçš„ä¼šè¯å­˜å‚¨ä¸­æ£€ç´¢å’Œåˆ é™¤ç”¨æˆ·ä¼šè¯ã€‚å½“ä½¿ç”¨ Spring Session çš„å“åº”å¼ Web åº”ç”¨ç¨‹åºæ”¯æŒæ—¶ä¸å¯ç”¨ã€‚</td><td>æ˜¯</td></tr><tr><td>shutdown</td><td>æ­£å¸¸å…³é—­åº”ç”¨ç¨‹åºã€‚</td><td>å¦</td></tr><tr><td>threaddump</td><td>æ‰§è¡Œçº¿ç¨‹ dumpã€‚</td><td>æ˜¯</td></tr><tr><td>heapdump</td><td>è¿”å›ä¸€ä¸ª hprof å † dump æ–‡ä»¶ã€‚</td><td>æ˜¯</td></tr><tr><td>jolokia</td><td>é€šè¿‡ HTTP æš´éœ² JMX beanï¼ˆå½“ Jolokia åœ¨ classpath ä¸Šæ—¶ï¼Œä¸é€‚ç”¨äº WebFluxï¼‰ã€‚</td><td>æ˜¯</td></tr><tr><td>logfile</td><td>è¿”å›æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ï¼ˆå¦‚æœå·²è®¾ç½® logging.file æˆ– logging.path å±æ€§ï¼‰ã€‚æ”¯æŒä½¿ç”¨ HTTP Range å¤´æ¥æ£€ç´¢éƒ¨åˆ†æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ã€‚</td><td>æ˜¯</td></tr><tr><td>prometheus</td><td>ä»¥å¯ä»¥ç”± Prometheus æœåŠ¡å™¨æŠ“å–çš„æ ¼å¼æš´éœ²æŒ‡æ ‡ã€‚</td><td>æ˜¯</td></tr></tbody></table><p>â€‹ ä¸Šè¿°ç«¯ç‚¹æ¯ä¸€é¡¹ä»£è¡¨è¢«ç›‘æ§çš„æŒ‡æ ‡ï¼Œå¦‚æœå¯¹å¤–å¼€æ”¾åˆ™ç›‘æ§å¹³å°å¯ä»¥æŸ¥è¯¢åˆ°å¯¹åº”çš„ç«¯ç‚¹ä¿¡æ¯ï¼Œå¦‚æœæœªå¼€æ”¾åˆ™æ— æ³•æŸ¥è¯¢å¯¹åº”çš„ç«¯ç‚¹ä¿¡æ¯ã€‚é€šè¿‡é…ç½®å¯ä»¥è®¾ç½®ç«¯ç‚¹æ˜¯å¦å¯¹å¤–å¼€æ”¾åŠŸèƒ½ã€‚ä½¿ç”¨enableå±æ€§æ§åˆ¶ç«¯ç‚¹æ˜¯å¦å¯¹å¤–å¼€æ”¾ã€‚å…¶ä¸­healthç«¯ç‚¹ä¸ºé»˜è®¤ç«¯ç‚¹ï¼Œä¸èƒ½å…³é—­ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>						<span class="token comment"># ç«¯ç‚¹åç§°</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> always
    <span class="token key atrule">info</span><span class="token punctuation">:</span>						<span class="token comment"># ç«¯ç‚¹åç§°</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>				<span class="token comment"># æ˜¯å¦å¼€æ”¾</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿé…ç½®ç«¯ç‚¹ï¼Œspringboot adminè®¾ç½®äº†13ä¸ªè¾ƒä¸ºå¸¸ç”¨çš„ç«¯ç‚¹ä½œä¸ºé»˜è®¤å¼€æ”¾çš„ç«¯ç‚¹ï¼Œå¦‚æœéœ€è¦æ§åˆ¶é»˜è®¤å¼€æ”¾çš„ç«¯ç‚¹çš„å¼€æ”¾çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡é…ç½®è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>management:
  endpoints:
    enabled-by-default: true	# æ˜¯å¦å¼€å¯é»˜è®¤ç«¯ç‚¹ï¼Œé»˜è®¤å€¼true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°ç«¯ç‚¹å¼€å¯åï¼Œå°±å¯ä»¥é€šè¿‡ç«¯ç‚¹å¯¹åº”çš„è·¯å¾„æŸ¥çœ‹å¯¹åº”çš„ä¿¡æ¯äº†ã€‚ä½†æ˜¯æ­¤æ—¶è¿˜ä¸èƒ½é€šè¿‡HTTPè¯·æ±‚æŸ¥è¯¢æ­¤ä¿¡æ¯ï¼Œè¿˜éœ€è¦å¼€å¯é€šè¿‡HTTPè¯·æ±‚æŸ¥è¯¢çš„ç«¯ç‚¹åç§°ï¼Œä½¿ç”¨â€œ*â€å¯ä»¥ç®€åŒ–é…ç½®æˆå¼€æ”¾æ‰€æœ‰ç«¯ç‚¹çš„WEBç«¯HTTPè¯·æ±‚æƒé™ã€‚</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>management:
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ•´ä½“ä¸Šæ¥è¯´ï¼Œå¯¹äºç«¯ç‚¹çš„é…ç½®æœ‰ä¸¤ç»„ä¿¡æ¯ï¼Œä¸€ç»„æ˜¯endpointså¼€å¤´çš„ï¼Œå¯¹æ‰€æœ‰ç«¯ç‚¹è¿›è¡Œé…ç½®ï¼Œä¸€ç»„æ˜¯endpointå¼€å¤´çš„ï¼Œå¯¹å…·ä½“ç«¯ç‚¹è¿›è¡Œé…ç½®ã€‚</p><div class="language-YAML ext-YAML line-numbers-mode"><pre class="language-YAML"><code>management:
  endpoint:		# å…·ä½“ç«¯ç‚¹çš„é…ç½®
    health:
      show-details: always
    info:
      enabled: true
  endpoints:	# å…¨éƒ¨ç«¯ç‚¹çš„é…ç½®
    web:
      exposure:
        include: &quot;*&quot;
    enabled-by-default: true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€»ç»“</strong></p><ol><li><p>è¢«ç›‘æ§å®¢æˆ·ç«¯é€šè¿‡æ·»åŠ actuatorçš„åæ ‡å¯ä»¥å¯¹å¤–æä¾›è¢«è®¿é—®çš„ç«¯ç‚¹åŠŸèƒ½</p></li><li><p>ç«¯ç‚¹åŠŸèƒ½çš„å¼€æ”¾ä¸å…³é—­å¯ä»¥é€šè¿‡é…ç½®è¿›è¡Œæ§åˆ¶</p></li><li><p>webç«¯é»˜è®¤æ— æ³•è·å–æ‰€æœ‰ç«¯ç‚¹ä¿¡æ¯ï¼Œé€šè¿‡é…ç½®å¼€æ”¾ç«¯ç‚¹åŠŸèƒ½</p></li></ol><h3 id="_6-4-è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡" tabindex="-1"><a class="header-anchor" href="#_6-4-è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡" aria-hidden="true">#</a> 6-4.è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡</h3><p>â€‹ ç«¯ç‚¹æè¿°äº†è¢«ç›‘æ§çš„ä¿¡æ¯ï¼Œé™¤äº†ç³»ç»Ÿé»˜è®¤çš„æŒ‡æ ‡ï¼Œè¿˜å¯ä»¥è‡ªè¡Œæ·»åŠ æ˜¾ç¤ºçš„æŒ‡æ ‡ï¼Œä¸‹é¢å°±é€šè¿‡3ç§ä¸åŒçš„ç«¯ç‚¹çš„æŒ‡æ ‡è‡ªå®šä¹‰æ–¹å¼æ¥å­¦ä¹ ç«¯ç‚¹ä¿¡æ¯çš„äºŒæ¬¡å¼€å‘ã€‚</p><p><strong>INFOç«¯ç‚¹</strong></p><p>â€‹ infoç«¯ç‚¹æè¿°äº†å½“å‰åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§å½¢å¼å¿«é€Ÿé…ç½®infoç«¯ç‚¹çš„ä¿¡æ¯</p><ul><li><p>é…ç½®å½¢å¼</p><p>åœ¨ymlæ–‡ä»¶ä¸­é€šè¿‡è®¾ç½®infoèŠ‚ç‚¹çš„ä¿¡æ¯å°±å¯ä»¥å¿«é€Ÿé…ç½®ç«¯ç‚¹ä¿¡æ¯</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">appName</span><span class="token punctuation">:</span> @project.artifactId@
  <span class="token key atrule">version</span><span class="token punctuation">:</span> @project.version@
  <span class="token key atrule">company</span><span class="token punctuation">:</span> ä¼ æ™ºæ•™è‚²
  <span class="token key atrule">author</span><span class="token punctuation">:</span> itheima
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®å®Œæ¯•åï¼Œå¯¹åº”ä¿¡æ¯æ˜¾ç¤ºåœ¨ç›‘æ§å¹³å°ä¸Š</p><img src="/assets/image-20220301174133248.0467e976.png" alt="image-20220301174133248" style="zoom:50%;"><p>ä¹Ÿå¯ä»¥é€šè¿‡è¯·æ±‚ç«¯ç‚¹ä¿¡æ¯è·¯å¾„è·å–å¯¹åº”jsonä¿¡æ¯</p><img src="/assets/image-20220301174241310.845523ad.png" alt="image-20220301174241310" style="zoom:50%;"></li><li><p>ç¼–ç¨‹å½¢å¼</p><p>é€šè¿‡é…ç½®çš„å½¢å¼åªèƒ½æ·»åŠ å›ºå®šçš„æ•°æ®ï¼Œå¦‚æœéœ€è¦åŠ¨æ€æ•°æ®è¿˜å¯ä»¥é€šè¿‡é…ç½®beançš„æ–¹å¼ä¸ºinfoç«¯ç‚¹æ·»åŠ ä¿¡æ¯ï¼Œæ­¤ä¿¡æ¯ä¸é…ç½®ä¿¡æ¯å…±å­˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InfoConfig</span> <span class="token keyword">implements</span> <span class="token class-name">InfoContributor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contribute</span><span class="token punctuation">(</span><span class="token class-name">Info<span class="token punctuation">.</span>Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">withDetail</span><span class="token punctuation">(</span><span class="token string">&quot;runTime&quot;</span><span class="token punctuation">,</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//æ·»åŠ å•ä¸ªä¿¡æ¯</span>
        <span class="token class-name">Map</span> infoMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
        infoMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;buildTime&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2006&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        builder<span class="token punctuation">.</span><span class="token function">withDetails</span><span class="token punctuation">(</span>infoMap<span class="token punctuation">)</span><span class="token punctuation">;</span>									<span class="token comment">//æ·»åŠ ä¸€ç»„ä¿¡æ¯</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>Healthç«¯ç‚¹</strong></p><p>â€‹ healthç«¯ç‚¹æè¿°å½“å‰åº”ç”¨çš„è¿è¡Œå¥åº·æŒ‡æ ‡ï¼Œå³åº”ç”¨çš„è¿è¡Œæ˜¯å¦æˆåŠŸã€‚é€šè¿‡ç¼–ç¨‹çš„å½¢å¼å¯ä»¥æ‰©å±•æŒ‡æ ‡ä¿¡æ¯ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HealthConfig</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractHealthIndicator</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doHealthCheck</span><span class="token punctuation">(</span><span class="token class-name">Health<span class="token punctuation">.</span>Builder</span> builder<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> condition <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            builder<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">Status</span><span class="token punctuation">.</span><span class="token constant">UP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">//è®¾ç½®è¿è¡ŒçŠ¶æ€ä¸ºå¯åŠ¨çŠ¶æ€</span>
            builder<span class="token punctuation">.</span><span class="token function">withDetail</span><span class="token punctuation">(</span><span class="token string">&quot;runTime&quot;</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Map</span> infoMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            infoMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;buildTime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2006&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">withDetails</span><span class="token punctuation">(</span>infoMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            builder<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">Status</span><span class="token punctuation">.</span><span class="token constant">OUT_OF_SERVICE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//è®¾ç½®è¿è¡ŒçŠ¶æ€ä¸ºä¸åœ¨æœåŠ¡çŠ¶æ€</span>
            builder<span class="token punctuation">.</span><span class="token function">withDetail</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šçº¿äº†å—ï¼Ÿ&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ä½ åšæ¢¦&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ å½“ä»»æ„ä¸€ä¸ªç»„ä»¶çŠ¶æ€ä¸ä¸ºUPæ—¶ï¼Œæ•´ä½“åº”ç”¨å¯¹å¤–æœåŠ¡çŠ¶æ€ä¸ºéUPçŠ¶æ€ã€‚</p><img src="/assets/image-20220301174751845.d9f85027.png" alt="image-20220301174751845" style="zoom:50%;"><p><strong>Metricsç«¯ç‚¹</strong></p><p>â€‹ metricsç«¯ç‚¹æè¿°äº†æ€§èƒ½æŒ‡æ ‡ï¼Œé™¤äº†ç³»ç»Ÿè‡ªå¸¦çš„ç›‘æ§æ€§èƒ½æŒ‡æ ‡ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BookDao</span><span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">IBookService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookDao</span> bookDao<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Counter</span> counter<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BookServiceImpl</span><span class="token punctuation">(</span><span class="token class-name">MeterRegistry</span> meterRegistry<span class="token punctuation">)</span><span class="token punctuation">{</span>
        counter <span class="token operator">=</span> meterRegistry<span class="token punctuation">.</span><span class="token function">counter</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·ä»˜è´¹æ“ä½œæ¬¡æ•°ï¼š&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//æ¯æ¬¡æ‰§è¡Œåˆ é™¤ä¸šåŠ¡ç­‰åŒäºæ‰§è¡Œäº†ä»˜è´¹ä¸šåŠ¡</span>
        counter<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bookDao<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ åœ¨æ€§èƒ½æŒ‡æ ‡ä¸­å°±å‡ºç°äº†è‡ªå®šä¹‰çš„æ€§èƒ½æŒ‡æ ‡ç›‘æ§é¡¹</p><img src="/assets/image-20220301175101812.5fc894cf.png" alt="image-20220301175101812" style="zoom:50%;"><p><strong>è‡ªå®šä¹‰ç«¯ç‚¹</strong></p><p>â€‹ å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦è‡ªå®šä¹‰ç«¯ç‚¹ï¼Œæ–¹ä¾¿ä¸šåŠ¡ç›‘æ§</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Endpoint</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">&quot;pay&quot;</span><span class="token punctuation">,</span>enableByDefault <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PayEndpoint</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ReadOperation</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getPay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span> payMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        payMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;level 1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;300&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        payMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;level 2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;291&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        payMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;level 3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;666&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> payMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ç”±äºæ­¤ç«¯ç‚¹æ•°æ®spirng boot adminæ— æ³•é¢„çŸ¥è¯¥å¦‚ä½•å±•ç¤ºï¼Œæ‰€ä»¥é€šè¿‡ç•Œé¢æ— æ³•çœ‹åˆ°æ­¤æ•°æ®ï¼Œé€šè¿‡HTTPè¯·æ±‚è·¯å¾„å¯ä»¥è·å–åˆ°å½“å‰ç«¯ç‚¹çš„ä¿¡æ¯ï¼Œä½†æ˜¯éœ€è¦å…ˆå¼€å¯å½“å‰ç«¯ç‚¹å¯¹å¤–åŠŸèƒ½ï¼Œæˆ–è€…è®¾ç½®å½“å‰ç«¯ç‚¹ä¸ºé»˜è®¤å¼€å‘çš„ç«¯ç‚¹ã€‚</p><img src="/assets/image-20220301175355482.e5ce5152.png" alt="image-20220301175355482" style="zoom:50%;"><p><strong>æ€»ç»“</strong></p><ol><li>ç«¯ç‚¹çš„æŒ‡æ ‡å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†æ˜¯æ¯ç§ä¸åŒçš„æŒ‡æ ‡æ ¹æ®å…¶åŠŸèƒ½ä¸åŒï¼Œè‡ªå®šä¹‰æ–¹å¼ä¸åŒ</li><li>infoç«¯ç‚¹é€šè¿‡é…ç½®å’Œç¼–ç¨‹çš„æ–¹å¼éƒ½å¯ä»¥æ·»åŠ ç«¯ç‚¹æŒ‡æ ‡</li><li>healthç«¯ç‚¹é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼æ·»åŠ ç«¯ç‚¹æŒ‡æ ‡ï¼Œéœ€è¦æ³¨æ„è¦ä¸ºå¯¹åº”æŒ‡æ ‡æ·»åŠ å¯åŠ¨çŠ¶æ€çš„é€»è¾‘è®¾å®š</li><li>metricsæŒ‡æ ‡é€šè¿‡åœ¨ä¸šåŠ¡ä¸­æ·»åŠ ç›‘æ§æ“ä½œè®¾ç½®æŒ‡æ ‡</li><li>å¯ä»¥è‡ªå®šä¹‰ç«¯ç‚¹æ·»åŠ æ›´å¤šçš„æŒ‡æ ‡</li></ol><h2 id="å¼€å‘å®ç”¨ç¯‡å®Œç»“" tabindex="-1"><a class="header-anchor" href="#å¼€å‘å®ç”¨ç¯‡å®Œç»“" aria-hidden="true">#</a> å¼€å‘å®ç”¨ç¯‡å®Œç»“</h2><p>â€‹ å¼€å‘å®ç”¨ç¯‡åˆ°è¿™é‡Œå°±æš‚æ—¶å®Œç»“äº†ï¼Œåœ¨å¼€å‘å®ç”¨ç¯‡ä¸­æˆ‘ä»¬è®²è§£äº†å¤§é‡çš„ç¬¬ä¸‰æ–¹æŠ€æœ¯çš„æ•´åˆæ–¹æ¡ˆï¼Œé€‰æ‹©çš„æ–¹æ¡ˆéƒ½æ˜¯å¸‚é¢ä¸Šæ¯”è¾ƒæµè¡Œçš„å¸¸ç”¨æ–¹æ¡ˆï¼Œè¿˜æœ‰ä¸€äº›å›½å†…æµè¡Œåº¦è¾ƒä½çš„æ–¹æ¡ˆç›®å‰è¿˜æ²¡è®²ï¼Œç•™åˆ°ç•ªå¤–ç¯‡ä¸­æ…¢æ…¢è®²å§ã€‚</p><p>â€‹ æ•´ä½“å¼€å‘å®ç”¨ç¯‡ä¸­è®²è§£çš„å†…å®¹å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»çŸ¥è¯†ï¼šå®ç”¨æ€§çŸ¥è¯†ä¸ç»éªŒæ€§çŸ¥è¯†ã€‚</p><p>â€‹ å®ç”¨æ€§çŸ¥è¯†å°±æ˜¯æ–°çŸ¥è¯†äº†ï¼Œspringbootæ•´åˆå„ç§æŠ€æœ¯ï¼Œæ¯ç§æŠ€æœ¯æ•´åˆä¸­éƒ½æœ‰ä¸€äº›ç‰¹æ®Šæ“ä½œï¼Œæ•´ä½“æ¥è¯´å…¶å®å°±æ˜¯ä¸‰å¥è¯ã€‚åŠ åæ ‡åšé…ç½®è°ƒæ¥å£ã€‚ç»éªŒæ€§çŸ¥è¯†æ˜¯å¯¹å‰é¢ä¸¤ç¯‡ä¸­å‡ºç°çš„ä¸€äº›çŸ¥è¯†çš„è¡¥å……ï¼Œåœ¨å­¦ä¹ åŸºç¡€ç¯‡æ—¶å¦‚æœå°†ç²¾åŠ›æ”¾åœ¨è¿™äº›ä¸œè¥¿ä¸Šå°±æœ‰ç‚¹å­¦åäº†ï¼Œå®¹æ˜“é’»ç‰›è§’å°–ï¼Œæ”¾åˆ°å®ç”¨å¼€å‘ç¯‡ä¸­ç»“åˆå®é™…å¼€å‘è¯´ä¸€äº›ä¸å¸¸è§çš„ä½†æ˜¯å¯¹ç³»ç»ŸåŠŸèƒ½åˆå±å®³çš„æ“ä½œè§£å†³æ–¹æ¡ˆï¼Œæå‡ç†è§£ã€‚</p><p>â€‹ å¼€å‘å®ç”¨ç¯‡åšåˆ°è¿™é‡Œå°±å‘Šä¸€æ®µè½ï¼Œä¸‹é¢å°±è¦ç€æ‰‹å‡†å¤‡åŸç†ç¯‡äº†ã€‚å¸‚é¢ä¸Šå¾ˆå¤šè¯¾ç¨‹åŸç†ç¯‡è®²çš„è¿‡äºé«˜æ·±è«æµ‹ï¼Œåœ¨æ–°æ‰‹è¿˜æ²¡æ˜ç™½123çš„æ—¶å€™å°±å¼€å§‹è®²å¾®ç§¯åˆ†äº†ï¼Œç€å®è®©äººçœ‹äº†ç€æ€¥ã€‚è‡³äºåŸç†ç¯‡æˆ‘è®²æˆä»€ä¹ˆæ ·å­ï¼Ÿä¸€èµ·æœŸå¾…å§ã€‚</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://gitee.com/xiaweifeng/vuepress-source/edit/master/docs/Javaåç«¯/06SpringBoot/2åº”ç”¨ç¯‡/02å¼€å‘å®ç”¨ç¯‡/SpringBootè®²ä¹‰.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨Giteeä¸Šç¼–è¾‘æ­¤é¡µ"><!--[--><!--]--> åœ¨Giteeä¸Šç¼–è¾‘æ­¤é¡µ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">è´¡çŒ®è€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 769313759@qq.com">å¤ä¸€æ¬¡</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--[--><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.3924f47e.js" defer></script>
  </body>
</html>
