import{_ as c,o as r,c as t,a as e,b as a,d as s,e as i,r as o}from"./app.9fc9d956.js";var l="/assets/image-20210418154704436.ac680f90.png",d="/assets/image-20210417133020614.2d065126.png";const p={},u=e("h1",{id:"\u5B89\u88C5docker",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u5B89\u88C5docker","aria-hidden":"true"},"#"),s(" \u5B89\u88C5Docker")],-1),m=e("p",null,"Docker \u5206\u4E3A CE \u548C EE \u4E24\u5927\u7248\u672C\u3002CE \u5373\u793E\u533A\u7248\uFF08\u514D\u8D39\uFF0C\u652F\u6301\u5468\u671F 7 \u4E2A\u6708\uFF09\uFF0CEE \u5373\u4F01\u4E1A\u7248\uFF0C\u5F3A\u8C03\u5B89\u5168\uFF0C\u4ED8\u8D39\u4F7F\u7528\uFF0C\u652F\u6301\u5468\u671F 24 \u4E2A\u6708\u3002",-1),v=e("p",null,[s("Docker CE \u5206\u4E3A "),e("code",null,"stable"),s(),e("code",null,"test"),s(" \u548C "),e("code",null,"nightly"),s(" \u4E09\u4E2A\u66F4\u65B0\u9891\u9053\u3002")],-1),k=s("\u5B98\u65B9\u7F51\u7AD9\u4E0A\u6709\u5404\u79CD\u73AF\u5883\u4E0B\u7684 "),h={href:"https://docs.docker.com/install/",target:"_blank",rel:"noopener noreferrer"},b=s("\u5B89\u88C5\u6307\u5357"),g=s("\uFF0C\u8FD9\u91CC\u4E3B\u8981\u4ECB\u7ECD Docker CE \u5728 CentOS\u4E0A\u7684\u5B89\u88C5\u3002"),_=i(`<h2 id="_1-centos\u5B89\u88C5docker" tabindex="-1"><a class="header-anchor" href="#_1-centos\u5B89\u88C5docker" aria-hidden="true">#</a> 1.CentOS\u5B89\u88C5Docker</h2><p>Docker CE \u652F\u6301 64 \u4F4D\u7248\u672C CentOS 7\uFF0C\u5E76\u4E14\u8981\u6C42\u5185\u6838\u7248\u672C\u4E0D\u4F4E\u4E8E 3.10\uFF0C CentOS 7 \u6EE1\u8DB3\u6700\u4F4E\u5185\u6838\u7684\u8981\u6C42\uFF0C\u6240\u4EE5\u6211\u4EEC\u5728CentOS 7\u5B89\u88C5Docker\u3002</p><h3 id="_1-1-\u5378\u8F7D-\u53EF\u9009" tabindex="-1"><a class="header-anchor" href="#_1-1-\u5378\u8F7D-\u53EF\u9009" aria-hidden="true">#</a> 1.1.\u5378\u8F7D\uFF08\u53EF\u9009\uFF09</h3><p>\u5982\u679C\u4E4B\u524D\u5B89\u88C5\u8FC7\u65E7\u7248\u672C\u7684Docker\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u547D\u4EE4\u5378\u8F7D\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yum remove docker \\
                  docker-client \\
                  docker-client-latest \\
                  docker-common \\
                  docker-latest \\
                  docker-latest-logrotate \\
                  docker-logrotate \\
                  docker-selinux \\
                  docker-engine-selinux \\
                  docker-engine \\
                  docker-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-\u5B89\u88C5docker" tabindex="-1"><a class="header-anchor" href="#_1-2-\u5B89\u88C5docker" aria-hidden="true">#</a> 1.2.\u5B89\u88C5docker</h3><p>\u9996\u5148\u9700\u8981\u5927\u5BB6\u865A\u62DF\u673A\u8054\u7F51\uFF0C\u5B89\u88C5yum\u5DE5\u5177</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils <span class="token punctuation">\\</span>
           device-mapper-persistent-data <span class="token punctuation">\\</span>
           lvm2 --skip-broken
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u66F4\u65B0\u672C\u5730\u955C\u50CF\u6E90\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u8BBE\u7F6Edocker\u955C\u50CF\u6E90</span>
yum-config-manager <span class="token punctuation">\\</span>
    --add-repo <span class="token punctuation">\\</span>
    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
    
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/download.docker.com/mirrors.aliyun.com\\/docker-ce/g&#39;</span> /etc/yum.repos.d/docker-ce.repo

yum makecache fast
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728centos8\u53CA\u4EE5\u4E0A\u7248\u672C\u4F7F\u7528</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum makecache
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0D\u7136\u4F1A\u62A5\uFF1A</p><p><strong>yum makecache: error: argument timer: invalid choice: \u2018fast\u2019 (choose from \u2018timer\u2019)</strong></p><p>\u7136\u540E\u8F93\u5165\u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>docker-ce\u4E3A\u793E\u533A\u514D\u8D39\u7248\u672C\u3002\u7A0D\u7B49\u7247\u523B\uFF0Cdocker\u5373\u53EF\u5B89\u88C5\u6210\u529F\u3002</p><h3 id="_1-3-\u542F\u52A8docker" tabindex="-1"><a class="header-anchor" href="#_1-3-\u542F\u52A8docker" aria-hidden="true">#</a> 1.3.\u542F\u52A8docker</h3><p>Docker\u5E94\u7528\u9700\u8981\u7528\u5230\u5404\u79CD\u7AEF\u53E3\uFF0C\u9010\u4E00\u53BB\u4FEE\u6539\u9632\u706B\u5899\u8BBE\u7F6E\u3002\u975E\u5E38\u9EBB\u70E6\uFF0C\u56E0\u6B64\u5EFA\u8BAE\u5927\u5BB6\u76F4\u63A5\u5173\u95ED\u9632\u706B\u5899\uFF01</p><p>\u542F\u52A8docker\u524D\uFF0C\u4E00\u5B9A\u8981\u5173\u95ED\u9632\u706B\u5899\u540E\uFF01\uFF01</p><p>\u542F\u52A8docker\u524D\uFF0C\u4E00\u5B9A\u8981\u5173\u95ED\u9632\u706B\u5899\u540E\uFF01\uFF01</p><p>\u542F\u52A8docker\u524D\uFF0C\u4E00\u5B9A\u8981\u5173\u95ED\u9632\u706B\u5899\u540E\uFF01\uFF01</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5173\u95ED</span>
systemctl stop firewalld
<span class="token comment"># \u7981\u6B62\u5F00\u673A\u542F\u52A8\u9632\u706B\u5899</span>
systemctl disable firewalld
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7\u547D\u4EE4\u542F\u52A8docker\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start <span class="token function">docker</span>  <span class="token comment"># \u542F\u52A8docker\u670D\u52A1</span>

systemctl stop <span class="token function">docker</span>  <span class="token comment"># \u505C\u6B62docker\u670D\u52A1</span>

systemctl restart <span class="token function">docker</span>  <span class="token comment"># \u91CD\u542Fdocker\u670D\u52A1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u8F93\u5165\u547D\u4EE4\uFF0C\u53EF\u4EE5\u67E5\u770Bdocker\u7248\u672C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker -v
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u56FE\uFF1A</p><p><img src="`+l+'" alt="image-20210418154704436"></p><h3 id="_1-4-\u914D\u7F6E\u955C\u50CF\u52A0\u901F" tabindex="-1"><a class="header-anchor" href="#_1-4-\u914D\u7F6E\u955C\u50CF\u52A0\u901F" aria-hidden="true">#</a> 1.4.\u914D\u7F6E\u955C\u50CF\u52A0\u901F</h3><p>docker\u5B98\u65B9\u955C\u50CF\u4ED3\u5E93\u7F51\u901F\u8F83\u5DEE\uFF0C\u6211\u4EEC\u9700\u8981\u8BBE\u7F6E\u56FD\u5185\u955C\u50CF\u670D\u52A1\uFF1A</p>',31),y=s("\u53C2\u8003\u963F\u91CC\u4E91\u7684\u955C\u50CF\u52A0\u901F\u6587\u6863\uFF1A"),f={href:"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors",target:"_blank",rel:"noopener noreferrer"},x=s("https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors"),D=i('<h2 id="_2-centos7\u5B89\u88C5dockercompose" tabindex="-1"><a class="header-anchor" href="#_2-centos7\u5B89\u88C5dockercompose" aria-hidden="true">#</a> 2.CentOS7\u5B89\u88C5DockerCompose</h2><h3 id="_2-1-\u4E0B\u8F7D" tabindex="-1"><a class="header-anchor" href="#_2-1-\u4E0B\u8F7D" aria-hidden="true">#</a> 2.1.\u4E0B\u8F7D</h3><p>Linux\u4E0B\u9700\u8981\u901A\u8FC7\u547D\u4EE4\u4E0B\u8F7D\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5B89\u88C5</span>\n<span class="token function">curl</span> <span class="token parameter variable">-L</span> https://github.com/docker/compose/releases/download/1.23.1/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">`</span></span> <span class="token operator">&gt;</span> /usr/local/bin/docker-compose\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u4E0B\u8F7D\u901F\u5EA6\u8F83\u6162\uFF0C\u6216\u8005\u4E0B\u8F7D\u5931\u8D25\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8BFE\u524D\u8D44\u6599\u63D0\u4F9B\u7684docker-compose\u6587\u4EF6\uFF1A</p><p><img src="'+d+`" alt="image-20210417133020614"></p><p>\u4E0A\u4F20\u5230<code>/usr/local/bin/</code>\u76EE\u5F55\u4E5F\u53EF\u4EE5\u3002</p><h3 id="_2-2-\u4FEE\u6539\u6587\u4EF6\u6743\u9650" tabindex="-1"><a class="header-anchor" href="#_2-2-\u4FEE\u6539\u6587\u4EF6\u6743\u9650" aria-hidden="true">#</a> 2.2.\u4FEE\u6539\u6587\u4EF6\u6743\u9650</h3><p>\u4FEE\u6539\u6587\u4EF6\u6743\u9650\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u4FEE\u6539\u6743\u9650</span>
<span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-base\u81EA\u52A8\u8865\u5168\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_2-3-base\u81EA\u52A8\u8865\u5168\u547D\u4EE4" aria-hidden="true">#</a> 2.3.Base\u81EA\u52A8\u8865\u5168\u547D\u4EE4\uFF1A</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u8865\u5168\u547D\u4EE4</span>
<span class="token function">curl</span> <span class="token parameter variable">-L</span> https://raw.githubusercontent.com/docker/compose/1.29.1/contrib/completion/bash/docker-compose <span class="token operator">&gt;</span> /etc/bash_completion.d/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u8FD9\u91CC\u51FA\u73B0\u9519\u8BEF\uFF0C\u9700\u8981\u4FEE\u6539\u81EA\u5DF1\u7684hosts\u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;199.232.68.133 raw.githubusercontent.com&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/hosts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-docker\u955C\u50CF\u4ED3\u5E93" tabindex="-1"><a class="header-anchor" href="#_3-docker\u955C\u50CF\u4ED3\u5E93" aria-hidden="true">#</a> 3.Docker\u955C\u50CF\u4ED3\u5E93</h2><p>\u642D\u5EFA\u955C\u50CF\u4ED3\u5E93\u53EF\u4EE5\u57FA\u4E8EDocker\u5B98\u65B9\u63D0\u4F9B\u7684DockerRegistry\u6765\u5B9E\u73B0\u3002</p>`,16),C=s("\u5B98\u7F51\u5730\u5740\uFF1A"),E={href:"https://hub.docker.com/_/registry",target:"_blank",rel:"noopener noreferrer"},S=s("https://hub.docker.com/_/registry"),R=i(`<h3 id="_3-1-\u7B80\u5316\u7248\u955C\u50CF\u4ED3\u5E93" tabindex="-1"><a class="header-anchor" href="#_3-1-\u7B80\u5316\u7248\u955C\u50CF\u4ED3\u5E93" aria-hidden="true">#</a> 3.1.\u7B80\u5316\u7248\u955C\u50CF\u4ED3\u5E93</h3><p>Docker\u5B98\u65B9\u7684Docker Registry\u662F\u4E00\u4E2A\u57FA\u7840\u7248\u672C\u7684Docker\u955C\u50CF\u4ED3\u5E93\uFF0C\u5177\u5907\u4ED3\u5E93\u7BA1\u7406\u7684\u5B8C\u6574\u529F\u80FD\uFF0C\u4F46\u662F\u6CA1\u6709\u56FE\u5F62\u5316\u754C\u9762\u3002</p><p>\u642D\u5EFA\u65B9\u5F0F\u6BD4\u8F83\u7B80\u5355\uFF0C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
    <span class="token parameter variable">--name</span> registry	<span class="token punctuation">\\</span>
    <span class="token parameter variable">-p</span> <span class="token number">5000</span>:5000 <span class="token punctuation">\\</span>
    <span class="token parameter variable">-v</span> registry-data:/var/lib/registry <span class="token punctuation">\\</span>
    registry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u547D\u4EE4\u4E2D\u6302\u8F7D\u4E86\u4E00\u4E2A\u6570\u636E\u5377registry-data\u5230\u5BB9\u5668\u5185\u7684/var/lib/registry \u76EE\u5F55\uFF0C\u8FD9\u662F\u79C1\u6709\u955C\u50CF\u5E93\u5B58\u653E\u6570\u636E\u7684\u76EE\u5F55\u3002</p>`,5),w=s("\u8BBF\u95EE"),I={href:"http://YourIp:5000/v2/_catalog",target:"_blank",rel:"noopener noreferrer"},L=s("http://YourIp:5000/v2/_catalog"),q=s(" \u53EF\u4EE5\u67E5\u770B\u5F53\u524D\u79C1\u6709\u955C\u50CF\u670D\u52A1\u4E2D\u5305\u542B\u7684\u955C\u50CF"),O=i(`<h3 id="_3-2-\u5E26\u6709\u56FE\u5F62\u5316\u754C\u9762\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5E26\u6709\u56FE\u5F62\u5316\u754C\u9762\u7248\u672C" aria-hidden="true">#</a> 3.2.\u5E26\u6709\u56FE\u5F62\u5316\u754C\u9762\u7248\u672C</h3><p>\u4F7F\u7528DockerCompose\u90E8\u7F72\u5E26\u6709\u56FE\u8C61\u754C\u9762\u7684DockerRegistry\uFF0C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.0&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">registry</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./registry<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/registry
  <span class="token key atrule">ui</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> joxit/docker<span class="token punctuation">-</span>registry<span class="token punctuation">-</span>ui<span class="token punctuation">:</span>static
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">80</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> REGISTRY_TITLE=\u4F20\u667A\u6559\u80B2\u79C1\u6709\u4ED3\u5E93
      <span class="token punctuation">-</span> REGISTRY_URL=http<span class="token punctuation">:</span>//registry<span class="token punctuation">:</span><span class="token number">5000</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> registry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-\u914D\u7F6Edocker\u4FE1\u4EFB\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#_3-3-\u914D\u7F6Edocker\u4FE1\u4EFB\u5730\u5740" aria-hidden="true">#</a> 3.3.\u914D\u7F6EDocker\u4FE1\u4EFB\u5730\u5740</h3><p>\u6211\u4EEC\u7684\u79C1\u670D\u91C7\u7528\u7684\u662Fhttp\u534F\u8BAE\uFF0C\u9ED8\u8BA4\u4E0D\u88ABDocker\u4FE1\u4EFB\uFF0C\u6240\u4EE5\u9700\u8981\u505A\u4E00\u4E2A\u914D\u7F6E\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6253\u5F00\u8981\u4FEE\u6539\u7684\u6587\u4EF6</span>
<span class="token function">vi</span> /etc/docker/daemon.json
<span class="token comment"># \u6DFB\u52A0\u5185\u5BB9\uFF1A</span>
<span class="token string">&quot;insecure-registries&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;http://192.168.150.101:8080&quot;</span><span class="token punctuation">]</span>
<span class="token comment"># \u91CD\u52A0\u8F7D</span>
systemctl daemon-reload
<span class="token comment"># \u91CD\u542Fdocker</span>
systemctl restart <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6);function T(B,N){const n=o("ExternalLinkIcon");return r(),t("div",null,[u,m,v,e("p",null,[k,e("a",h,[b,a(n)]),g]),_,e("p",null,[y,e("a",f,[x,a(n)])]),D,e("p",null,[C,e("a",E,[S,a(n)])]),R,e("p",null,[w,e("a",I,[L,a(n)]),q]),O])}var Y=c(p,[["render",T],["__file","Centos7\u5B89\u88C5Docker.html.vue"]]);export{Y as default};
