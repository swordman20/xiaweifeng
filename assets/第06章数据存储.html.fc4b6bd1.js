import{_ as n,o as s,c as a,e as t}from"./app.3222cd28.js";const p={},e=t(`<h1 id="\u7B2C-6-\u7AE0-\u6570\u636E\u5B58\u50A8" tabindex="-1"><a class="header-anchor" href="#\u7B2C-6-\u7AE0-\u6570\u636E\u5B58\u50A8" aria-hidden="true">#</a> \u7B2C 6 \u7AE0\u3000\u6570\u636E\u5B58\u50A8</h1><p>\u672C\u7AE0\u4ECB\u7ECDAndroid 4\u79CD\u5B58\u50A8\u65B9\u5F0F\u7684\u7528\u6CD5\uFF0C\u5305\u62EC\u5171\u4EAB\u53C2\u6570SharedPreferences\u3001\u6570\u636E\u5E93SQLite\u3001\u5B58\u50A8\u5361\u6587\u4EF6\u3001App\u7684\u5168\u5C40\u5185\u5B58\uFF0C\u53E6\u5916\u4ECB\u7ECDAndroid\u91CD\u8981\u7EC4\u4EF6\u2014\u5E94\u7528Application\u7684\u57FA\u672C\u6982\u5FF5\u4E0E\u5E38\u89C1\u7528\u6CD5\u3002\u6700\u540E\uFF0C\u7ED3\u5408\u672C\u7AE0\u6240\u5B66\u7684\u77E5\u8BC6\u6F14\u793A\u5B9E\u6218\u9879\u76EE\u201C\u8D2D\u7269\u8F66\u201D\u7684\u8BBE\u8BA1\u4E0E\u5B9E\u73B0\u3002</p><h2 id="_6-1-sharedpreferences" tabindex="-1"><a class="header-anchor" href="#_6-1-sharedpreferences" aria-hidden="true">#</a> 6.1 SharedPreferences</h2><p>\u672C\u8282\u4ECB\u7ECDAndroid\u7684\u952E\u503C\u5BF9\u5B58\u50A8\u65B9\u5F0F\u2014\u2014\u5171\u4EAB\u53C2\u6570SharedPreferences\u7684\u4F7F\u7528\u65B9\u6CD5\uFF0C\u5305\u62EC\uFF1A\u5982\u4F55\u5C06\u6570\u636E\u4FDD\u5B58\u5230\u5171\u4EAB\u53C2\u6570\uFF0C\u5982\u4F55\u4ECE\u5171\u4EAB\u53C2\u6570\u8BFB\u53D6\u6570\u636E\uFF0C\u5982\u4F55\u4F7F\u7528\u5171\u4EAB\u53C2\u6570\u5B9E\u73B0\u767B\u5F55\u9875\u9762\u7684\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD\uFF0C\u5982\u4F55\u5229\u7528\u8BBE\u5907\u6D4F\u89C8\u5668\u627E\u5230\u5171\u4EAB\u53C2\u6570\u6587\u4EF6\u3002</p><h3 id="_6-1-1-\u5171\u4EAB\u53C2\u6570\u7684\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#_6-1-1-\u5171\u4EAB\u53C2\u6570\u7684\u7528\u6CD5" aria-hidden="true">#</a> 6.1.1\u3000\u5171\u4EAB\u53C2\u6570\u7684\u7528\u6CD5</h3><p>SharedPreferences\u662FAndroid\u7684\u4E00\u4E2A\u8F7B\u91CF\u7EA7\u5B58\u50A8\u5DE5\u5177\uFF0C\u5B83\u91C7\u7528\u7684\u5B58\u50A8\u7ED3\u6784\u662FKey-Value\u7684\u952E\u503C\u5BF9\u65B9\u5F0F\uFF0C\u7C7B\u4F3C\u4E8EJava\u7684Properties\uFF0C\u4E8C\u8005\u90FD\u662F\u628AKey-Value\u7684\u952E\u503C\u5BF9\u4FDD\u5B58\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u3002\u4E0D\u540C\u7684\u662F\uFF0CProperties\u7684\u6587\u4EF6\u5185\u5BB9\u5F62\u5982Key=Value\uFF0C\u800CSharedPreferences\u7684\u5B58\u50A8\u4ECB\u8D28\u662FXML\u6587\u4EF6\uFF0C\u4E14\u4EE5XML\u6807\u8BB0\u4FDD\u5B58\u952E\u503C\u5BF9\u3002\u4FDD\u5B58\u5171\u4EAB\u53C2\u6570\u952E\u503C\u5BF9\u4FE1\u606F\u7684\u6587\u4EF6\u8DEF\u5F84\u4E3A\uFF1A/data/data/\u5E94\u7528\u5305\u540D/shared_prefs/\u6587\u4EF6\u540D.xml\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u5171\u4EAB\u53C2\u6570\u7684XML\u6587\u4EF6\u4F8B\u5B50\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39; standalone=&#39;yes&#39; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Mr Lee<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>int</span> <span class="token attr-name">nane</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>married<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>float</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weight<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u57FA\u4E8EXML\u683C\u5F0F\u7684\u7279\u70B9\uFF0C\u5171\u4EAB\u53C2\u6570\u4E3B\u8981\u7528\u4E8E\u5982\u4E0B\u573A\u5408\uFF1A</p><p>\uFF08 1 \uFF09\u7B80\u5355\u4E14\u5B64\u7ACB\u7684\u6570\u636E\u3002\u82E5\u662F\u590D\u6742\u4E14\u76F8\u4E92\u5173\u8054\u7684\u6570\u636E\uFF0C\u5219\u8981\u4FDD\u5B58\u4E8E\u5173\u7CFB\u6570\u636E\u5E93\u3002</p><p>\uFF08 2 \uFF09\u6587\u672C\u5F62\u5F0F\u7684\u6570\u636E\u3002\u82E5\u662F\u4E8C\u8FDB\u5236\u6570\u636E\uFF0C\u5219\u8981\u4FDD\u5B58\u81F3\u6587\u4EF6\u3002</p><p>\uFF08 3 \uFF09\u9700\u8981\u6301\u4E45\u5316\u5B58\u50A8\u7684\u6570\u636E\u3002App\u9000\u51FA\u540E\u518D\u6B21\u542F\u52A8\u65F6\uFF0C\u4E4B\u524D\u4FDD\u5B58\u7684\u6570\u636E\u4ECD\u7136\u6709\u6548\u3002</p><p>\u5B9E\u9645\u5F00\u53D1\u4E2D\uFF0C\u5171\u4EAB\u53C2\u6570\u7ECF\u5E38\u5B58\u50A8\u7684\u6570\u636E\u5305\u62EC\uFF1AApp\u7684\u4E2A\u6027\u5316\u914D\u7F6E\u4FE1\u606F\u3001\u7528\u6237\u4F7F\u7528App\u7684\u884C\u4E3A\u4FE1\u606F\u3001\u4E34\u65F6\u9700\u8981\u4FDD\u5B58\u7684\u7247\u6BB5\u4FE1\u606F\u7B49\u3002</p><p>\u5171\u4EAB\u53C2\u6570\u5BF9\u6570\u636E\u7684\u5B58\u50A8\u548C\u8BFB\u53D6\u64CD\u4F5C\u7C7B\u4F3C\u4E8EMap\uFF0C\u4E5F\u6709\u5B58\u50A8\u6570\u636E\u7684put\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u8BFB\u53D6\u6570\u636E\u7684get\u65B9\u6CD5\u3002\u8C03\u7528getSharedPreferences\u65B9\u6CD5\u53EF\u4EE5\u83B7\u5F97\u5171\u4EAB\u53C2\u6570\u5B9E\u4F8B\uFF0C\u83B7\u53D6\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4ECEshare.xml\u83B7\u53D6\u5171\u4EAB\u53C2\u6570\u5B9E\u4F8B</span>
<span class="token class-name">SharedPreferences</span> shared <span class="token operator">=</span> <span class="token function">getSharedPreferences</span><span class="token punctuation">(</span><span class="token string">&quot;share&quot;</span><span class="token punctuation">,</span> <span class="token constant">MODE_PRIVATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7531\u4EE5\u4E0A\u4EE3\u7801\u53EF\u77E5\uFF0CgetSharedPreferences\u65B9\u6CD5\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F\u6587\u4EF6\u540D\uFF0C\u586Bshare\u8868\u793A\u5171\u4EAB\u53C2\u6570\u7684\u6587\u4EF6\u540D\u662Fshare.xml\uFF1B\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u64CD\u4F5C\u6A21\u5F0F\uFF0C\u586BMODE_PRIVATE\u8868\u793A\u79C1\u6709\u6A21\u5F0F\u3002\u5F80\u5171\u4EAB\u53C2\u6570\u5B58\u50A8\u6570\u636E\u8981\u501F\u52A9\u4E8EEditor\u7C7B\uFF0C\u4FDD\u5B58\u6570\u636E\u7684\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\ShareWriteActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">SharedPreferences<span class="token punctuation">.</span>Editor</span> editor <span class="token operator">=</span> shared<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u83B7\u5F97\u7F16\u8F91\u5668\u7684\u5BF9\u8C61</span>
editor<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Mr Lee&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u6DFB\u52A0\u4E00\u4E2A\u540D\u4E3Aname\u7684\u5B57\u7B26\u4E32\u53C2\u6570</span>
editor<span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u6DFB\u52A0\u4E00\u4E2A\u540D\u4E3Aage\u7684\u6574\u578B\u53C2\u6570</span>
editor<span class="token punctuation">.</span><span class="token function">putBoolean</span><span class="token punctuation">(</span><span class="token string">&quot;married&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u6DFB\u52A0\u4E00\u4E2A\u540D\u4E3Amarried\u7684\u5E03\u5C14\u578B\u53C2\u6570</span>
editor<span class="token punctuation">.</span><span class="token function">putFloat</span><span class="token punctuation">(</span><span class="token string">&quot;weight&quot;</span><span class="token punctuation">,</span> <span class="token number">100f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u6DFB\u52A0\u4E00\u4E2A\u540D\u4E3Aweight\u7684\u6D6E\u70B9\u6570\u53C2\u6570</span>
editor<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u4EA4\u7F16\u8F91\u5668\u4E2D\u7684\u4FEE\u6539</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u5171\u4EAB\u53C2\u6570\u8BFB\u53D6\u6570\u636E\u76F8\u5BF9\u7B80\u5355\uFF0C\u76F4\u63A5\u8C03\u7528\u5171\u4EAB\u53C2\u6570\u5B9E\u4F8B\u7684get * * * \u65B9\u6CD5\u5373\u53EF\u8BFB\u53D6\u952E\u503C\uFF0C\u6CE8\u610F get***\u65B9\u6CD5\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u8868\u793A\u9ED8\u8BA4\u503C\uFF0C\u8BFB\u53D6\u6570\u636E\u7684\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\ShareReadActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> name <span class="token operator">=</span> shared<span class="token punctuation">.</span>getString <span class="token punctuation">(</span> <span class="token string">&quot;name.&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4ECE\u5171\u4EAB\u53C2\u6570\u83B7\u53D6\u540D\u4E3Aname\u7684\u5B57\u7B26\u4E32 </span>
<span class="token keyword">int</span> age <span class="token operator">=</span> shared<span class="token punctuation">.</span>getInt <span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u4ECE\u5171\u4EAB\u53C2\u6570\u83B7\u53D6\u540D\u4E3Aage \u7684\u6574\u578B\u6570</span>
<span class="token keyword">boolean</span> married <span class="token operator">=</span> shared<span class="token punctuation">.</span>getBoolean <span class="token punctuation">(</span> <span class="token string">&quot;married&quot;</span>\uFF0C <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4ECE\u5171\u4EAB\u53C2\u6570\u83B7\u53D6\u540D\u4E3Amarried </span>
\u7684\u5E03\u5C14\u6570
<span class="token keyword">float</span> weight <span class="token operator">=</span> shared<span class="token punctuation">.</span>getFloat <span class="token punctuation">(</span> <span class="token string">&quot;weight&quot;</span>\uFF0C<span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4ECE\u5171\u4EAB\u53C2\u6570\u83B7\u53D6\u540D\u4E3Aweight\u7684\u6D6E\u70B9\u6570</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0B\u9762\u901A\u8FC7\u6D4B\u8BD5\u9875\u9762\u6F14\u793A\u5171\u4EAB\u53C2\u6570\u7684\u5B58\u53D6\u8FC7\u7A0B\uFF0C\u5148\u5728\u7F16\u8F91\u9875\u9762\u5F55\u5165\u7528\u6237\u6CE8\u518C\u4FE1\u606F\uFF0C\u70B9\u51FB\u4FDD\u5B58\u6309\u94AE\u628A\u6570\u636E\u63D0\u4EA4\u81F3\u5171\u4EAB\u53C2\u6570\uFF0C\u5982\u56FE6-1\u6240\u793A\u3002\u518D\u5230\u67E5\u770B\u9875\u9762\u6D4F\u89C8\u7528\u6237\u6CE8\u518C\u4FE1\u606F\uFF0CApp\u4ECE\u5171\u4EAB\u53C2\u6570\u4E2D\u8BFB\u53D6\u5404\u9879\u6570\u636E\uFF0C\u5E76\u5C06 \u6CE8\u518C\u4FE1\u606F\u663E\u793A\u5728\u9875\u9762\u4E0A\uFF0C\u5982\u56FE6-2\u6240\u793A\u3002</p><pre><code>															![Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218](https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061642827.png)
</code></pre><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061642546.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:67%;"><h3 id="_6-1-2-\u5B9E\u73B0\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_6-1-2-\u5B9E\u73B0\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD" aria-hidden="true">#</a> 6.1.2\u3000\u5B9E\u73B0\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD</h3><p>\u4E0A\u4E00\u7AE0\u672B\u5C3E\u7684\u5B9E\u6218\u9879\u76EE\uFF0C\u767B\u5F55\u9875\u9762\u4E0B\u65B9\u6709\u4E00\u4E2A\u201C\u8BB0\u4F4F\u5BC6\u7801\u201D\u590D\u9009\u6846\uFF0C\u5F53\u65F6\u53EA\u662F\u4E3A\u4E86\u6F14\u793A\u63A7\u4EF6\u7684\u7528\u6CD5\uFF0C\u5E76\u672A\u771F\u6B63\u8BB0\u4F4F\u5BC6\u7801\u3002\u56E0\u4E3A\u7528\u6237\u9000\u51FA\u540E\u91CD\u65B0\u8FDB\u5165\u767B\u5F55\u9875\u9762\uFF0CApp\u6CA1\u6709\u56DE\u5FC6\u8D77\u4E0A\u6B21\u7684\u767B\u5F55\u5BC6\u7801\u3002\u73B0\u5728\u5229\u7528\u5171\u4EAB\u53C2\u6570\u6539\u9020\u8BE5\u9879\u76EE\uFF0C\u4F7F\u4E4B\u5B9E\u73B0\u8BB0\u4F4F\u5BC6\u7801\u7684\u529F\u80FD\u3002</p><p>\u6539\u9020\u5185\u5BB9\u4E3B\u8981\u6709\u4E0B\u5217 3 \u5904\uFF1A</p><p>\uFF08 1 \uFF09\u58F0\u660E\u4E00\u4E2A\u5171\u4EAB\u53C2\u6570\u5BF9\u8C61\uFF0C\u5E76\u5728onCreate\u4E2D\u8C03\u7528getSharedPreferences\u65B9\u6CD5\u83B7\u53D6\u5171\u4EAB\u53C2\u6570\u7684\u5B9E\u4F8B\u3002</p><p>\uFF08 2 \uFF09\u767B\u5F55\u6210\u529F\u65F6\uFF0C\u5982\u679C\u7528\u6237\u52FE\u9009\u4E86\u201C\u8BB0\u4F4F\u5BC6\u7801\u201D\uFF0C\u5C31\u4F7F\u7528\u5171\u4EAB\u53C2\u6570\u4FDD\u5B58\u624B\u673A\u53F7\u7801\u4E0E\u5BC6\u7801\u3002\u4E5F\u5C31\u662F\u5728loginSuccess\u65B9\u6CD5\u4E2D\u589E\u52A0\u4EE5\u4E0B\u4EE3\u7801\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\LoginShareActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u5982\u679C\u52FE\u9009\u4E86\u201C\u8BB0\u4F4F\u5BC6\u7801\u201D\uFF0C\u5C31\u628A\u624B\u673A\u53F7\u7801\u548C\u5BC6\u7801\u90FD\u4FDD\u5B58\u5230\u5171\u4EAB\u53C2\u6570\u4E2D </span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isRemember<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">SharedPreferences<span class="token punctuation">.</span>Editor</span> editor <span class="token operator">=</span> mShared<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u83B7\u5F97\u7F16\u8F91\u5668\u7684\u5BF9\u8C61</span>
   editor<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span> et_phone<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6DFB\u52A0\u540D\u53EBphone\u7684\u624B\u673A\u53F7\u7801</span>
   editor<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> et_password<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6DFB\u52A0\u540D\u53EB </span>
password\u7684\u5BC6\u7801
   editor<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u4EA4\u7F16\u8F91\u5668\u4E2D\u7684\u4FEE\u6539 </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uFF08 3 \uFF09\u518D\u6B21\u6253\u5F00\u767B\u5F55\u9875\u9762\u65F6\uFF0CApp\u4ECE\u5171\u4EAB\u53C2\u6570\u8BFB\u53D6\u624B\u673A\u53F7\u7801\u4E0E\u5BC6\u7801\uFF0C\u5E76\u81EA\u52A8\u586B\u5165\u7F16\u8F91\u6846\u3002\u4E5F\u5C31\u662F\u5728onCreate\u65B9\u6CD5\u4E2D\u589E\u52A0\u4EE5\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4ECEshare_login.xml\u83B7\u53D6\u5171\u4EAB\u53C2\u6570\u5BF9\u8C61</span>
mShared <span class="token operator">=</span> <span class="token function">getSharedPreferences</span><span class="token punctuation">(</span><span class="token string">&quot;share_login&quot;</span><span class="token punctuation">,</span> <span class="token constant">MODE_PRIVATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// \u83B7\u53D6\u5171\u4EAB\u53C2\u6570\u4FDD\u5B58\u7684\u624B\u673A\u53F7\u7801</span>
<span class="token class-name">String</span> phone <span class="token operator">=</span> mShared<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// \u83B7\u53D6\u5171\u4EAB\u53C2\u6570\u4FDD\u5B58\u7684\u5BC6\u7801</span>
<span class="token class-name">String</span> password <span class="token operator">=</span> mShared<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
et_phone<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5F80\u624B\u673A\u53F7\u7801\u7F16\u8F91\u6846\u586B\u5199\u4E0A\u6B21\u4FDD\u5B58\u7684\u624B\u673A\u53F7 </span>
et_password<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5F80\u5BC6\u7801\u7F16\u8F91\u6846\u586B\u5199\u4E0A\u6B21\u4FDD\u5B58\u7684\u5BC6\u7801</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u4FEE\u6539\u5B8C\u6BD5\uFF0C\u53EA\u8981\u7528\u6237\u4E0A\u6B21\u767B\u5F55\u6210\u529F\u65F6\u52FE\u9009\u201C\u8BB0\u4F4F\u5BC6\u7801\u201D\uFF0C\u4E0B\u6B21\u8FDB\u5165\u767B\u5F55\u9875\u9762\u540EApp\u5C31\u4F1A\u81EA\u52A8\u586B\u5199\u4E0A\u6B21\u767B\u5F55\u7684\u624B\u673A\u53F7\u7801\u4E0E\u5BC6\u7801\u3002\u5177\u4F53\u7684\u6548\u679C\u5982\u56FE6-3\u548C\u56FE6-4\u6240\u793A\u3002\u5176\u4E2D\uFF0C\u56FE6-3\u4E3A\u7528\u6237\u9996\u6B21\u767B\u5F55\u6210\u529F\u7684\u754C\u9762\uFF0C\u6B64\u65F6\u52FE\u9009\u4E86\u201C\u8BB0\u4F4F\u5BC6\u7801\u201D\uFF1B\u56FE6-4\u4E3A\u7528\u6237\u518D\u6B21\u8FDB\u5165\u767B\u5F55\u7684\u754C\u9762\uFF0C\u56E0\u4E3A\u4E0A\u6B21\u767B\u5F55\u6210\u529F\u65F6\u5DF2\u7ECF\u8BB0\u4F4F\u5BC6\u7801\uFF0C\u6240\u4EE5\u8FD9\u6B21\u9875\u9762\u4F1A\u81EA\u52A8\u586B\u5145\u4FDD\u5B58\u7684\u767B\u5F55\u4FE1\u606F\u3002</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061647750.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061647433.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><h3 id="_6-1-3-\u5229\u7528\u8BBE\u5907\u6D4F\u89C8\u5668\u5BFB\u627E\u5171\u4EAB\u53C2\u6570\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u5229\u7528\u8BBE\u5907\u6D4F\u89C8\u5668\u5BFB\u627E\u5171\u4EAB\u53C2\u6570\u6587\u4EF6" aria-hidden="true">#</a> 6.1.3\u3000\u5229\u7528\u8BBE\u5907\u6D4F\u89C8\u5668\u5BFB\u627E\u5171\u4EAB\u53C2\u6570\u6587\u4EF6</h3><p>\u524D\u9762\u7684\u201C6.1.1\u3000\u5171\u4EAB\u53C2\u6570\u7684\u57FA\u672C\u7528\u6CD5\u201D\u63D0\u5230\uFF0C\u53C2\u6570\u6587\u4EF6\u7684\u8DEF\u5F84\u4E3A\u201C/data/data/\u5E94\u7528\u5305\u540D/shared_prefs/xxx.xml\u201D\uFF0C\u7136\u800C\u4F7F\u7528\u624B\u673A\u81EA\u5E26\u7684\u6587\u4EF6\u7BA1\u7406\u5668\u5374\u627E\u4E0D\u5230\u8BE5\u8DEF\u5F84\uFF0Cdata\u4E0B\u9762\u53EA\u6709\u7A7A\u76EE\u5F55\u800C\u5DF2\u3002\u8FD9\u662F\u56E0\u4E3A\u624B\u673A\u5382\u5546\u52A0\u4E86\u5C42\u4FDD\u62A4\uFF0C\u4E0D\u8BA9\u7528\u6237\u67E5\u770BApp\u7684\u6838\u5FC3\u6587\u4EF6\uFF0C\u5426\u5219\u4E07\u4E00\u4E0D\u5C0F\u5FC3\u8BEF\u5220\u4E86\uFF0CApp\u5C82\u4E0D\u662F\u8FD0\u884C\u62A5\u9519\u4E86\uFF1F\u5F53\u7136\u4F5C\u4E3A\u5F00\u53D1\u8005\uFF0C\u53EA\u8981\u6253\u5F00\u4E86\u624B\u673A\u7684USB\u8C03\u8BD5\u529F\u80FD\uFF0C\u8FD8\u662F\u6709\u529E\u6CD5\u62FF\u5230\u6D4B\u8BD5\u5E94\u7528\u7684\u6570\u636E\u6587\u4EF6\u3002\u9996\u5148\u6253\u5F00Android Studio\uFF0C\u4F9D\u6B21\u9009\u62E9\u83DC\u5355Run\u2192Run &#39;***&#39;\uFF0C\u628A\u6D4B\u8BD5\u5E94\u7528\u6BD4\u5982chapter06\u5B89\u88C5\u5230\u624B\u673A\u4E0A\u3002\u63A5\u7740\u5355\u51FBAndroid Studio\u5DE6\u4E0B\u89D2\u7684logcat\u6807\u7B7E\uFF0C\u627E\u5230\u5DF2\u8FDE\u63A5\u7684\u624B\u673A\u8BBE\u5907\u548C\u6D4B\u8BD5\u5E94\u7528\uFF0C\u5982\u56FE6-5\u6240\u793A\u3002\u6CE8\u610F\u5230logcat\u7A97\u53E3\u7684\u53F3\u8FB9\uFF0C\u4E5F\u5C31\u662FAndroid Studio\u53F3\u4E0B\u89D2\u6709\u4E2A\u7AD6\u6392\u6807\u7B7E\u201CDevice File Explorer\u201D\uFF0C\u7FFB\u8BD1\u8FC7\u6765\u53EB\u8BBE\u5907\u6587\u4EF6\u6D4F\u89C8\u5668\u3002\u5355\u51FB\u8BE5\u6807\u7B7E\u6309\u94AE\uFF0C\u6B64\u65F6\u4E3B\u754C\u9762\u53F3\u8FB9\u5F39\u51FA\u540D\u4E3A\u201CDevice File Explorer\u201D\u7684\u7A97\u53E3\uFF0C\u5982\u56FE6-6</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061650804.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p>\u5728\u56FE6-6\u7684\u7A97\u53E3\u4E2D\u4F9D\u6B21\u5C55\u5F00\u5404\u7EA7\u76EE\u5F55\uFF0C\u8FDB\u5230/data/data/com.example.chapter06/shared_prefs\u76EE\u5F55\uFF0C\u5728\u8BE5\u76EE\u5F55\u4E0B\u770B\u5230\u4E86\u53C2\u6570\u6587\u4EF6share.xml\u3002\u53F3\u51FBshare.xml\uFF0C\u5E76\u5728\u53F3\u952E\u83DC\u5355\u4E2D\u9009\u62E9\u201CSave As\u201D\uFF0C\u628A\u8BE5\u6587\u4EF6\u4FDD\u5B58\u5230\u7535\u8111\u4E2D\uFF0C\u4E4B\u540E\u5C31\u80FD\u67E5\u770B\u8BE6\u7EC6\u7684\u6587\u4EF6\u5185\u5BB9\u4E86\u3002\u4E0D\u4EC5\u53C2\u6570\u6587\u4EF6\uFF0C\u51E1\u662F\u4FDD\u5B58\u5728\u201C/data/data/\u5E94\u7528\u5305\u540D/\u201D\u4E0B\u9762\u7684\u6240\u6709\u6587\u4EF6\uFF0C\u5747\u53EF\u5229\u7528\u8BBE\u5907\u6D4F\u89C8\u5668\u5BFC\u51FA\u81F3\u7535\u8111\uFF0C\u4E0B\u4E00\u8282\u5C06\u8981\u4ECB\u7ECD\u7684\u6570\u636E\u5E93db\u6587\u4EF6\u4E5F\u53EF\u6309\u7167\u4EE5\u4E0A\u6B65\u9AA4\u5BFC\u51FA\u3002</p><h2 id="_6-2-\u6570\u636E\u5E93sqlite" tabindex="-1"><a class="header-anchor" href="#_6-2-\u6570\u636E\u5E93sqlite" aria-hidden="true">#</a> 6.2\u3000\u6570\u636E\u5E93SQLite</h2><p>\u672C\u8282\u4ECB\u7ECDAndroid\u7684\u6570\u636E\u5E93\u5B58\u50A8\u65B9\u5F0F\u2014SQLite\u7684\u4F7F\u7528\u65B9\u6CD5\uFF0C\u5305\u62EC\uFF1ASQLite\u7528\u5230\u4E86\u54EA\u4E9BSQL\u8BED\u6CD5\uFF0C\u5982\u4F55\u4F7F\u7528\u6570\u636E\u5E93\u7BA1\u7406\u5668\u64CD\u7EB5SQLite\uFF0C\u5982\u4F55\u4F7F\u7528\u6570\u636E\u5E93\u5E2E\u52A9\u5668\u7B80\u5316\u6570\u636E\u5E93\u64CD\u4F5C\u7B49\uFF0C\u4EE5\u53CA\u5982\u4F55\u5229\u7528SQLite\u6539\u8FDB\u767B\u5F55\u9875\u9762\u7684\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD\u3002</p><h3 id="_6-2-1-sql\u7684\u57FA\u672C\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_6-2-1-sql\u7684\u57FA\u672C\u8BED\u6CD5" aria-hidden="true">#</a> 6.2.1 SQL\u7684\u57FA\u672C\u8BED\u6CD5</h3><p>SQL\u672C\u8D28\u4E0A\u662F\u4E00\u79CD\u7F16\u7A0B\u8BED\u8A00\uFF0C\u5B83\u7684\u5B66\u540D\u53EB\u4F5C\u201C\u7ED3\u6784\u5316\u67E5\u8BE2\u8BED\u8A00\u201D\uFF08\u5168\u79F0\u4E3AStructured Query Language\uFF0C\u7B80\u79F0SQL\uFF09\u3002\u4E0D\u8FC7SQL\u8BED\u8A00\u5E76\u975E\u901A\u7528\u7684\u7F16\u7A0B\u8BED\u8A00\uFF0C\u5B83\u4E13\u7528\u4E8E\u6570\u636E\u5E93\u7684\u8BBF\u95EE\u548C\u5904\u7406\uFF0C\u66F4\u50CF\u662F\u4E00\u79CD<strong>\u64CD\u4F5C\u547D\u4EE4</strong>\uFF0C\u6240\u4EE5\u5E38\u8BF4SQL\u8BED\u53E5\u800C\u4E0D\u8BF4SQL\u4EE3\u7801\u3002\u6807\u51C6\u7684SQL\u8BED\u53E5\u5206\u4E3A 3 \u7C7B\uFF1A\u6570\u636E\u5B9A\u4E49\u3001\u6570\u636E\u64CD\u7EB5\u548C\u6570\u636E\u63A7\u5236\uFF0C\u4F46\u4E0D\u540C\u7684\u6570\u636E\u5E93\u5F80\u5F80\u6709\u81EA\u5DF1\u7684\u5B9E\u73B0\u3002SQLite\u662F\u4E00\u79CD\u5C0F\u5DE7\u7684\u5D4C\u5165\u5F0F\u6570\u636E\u5E93\uFF0C\u4F7F\u7528\u65B9\u4FBF\u3001\u5F00\u53D1\u7B80\u5355\u3002\u5982\u540CMySQL\u3001Oracle\u90A3\u6837\uFF0CSQLite\u4E5F\u91C7\u7528SQL\u8BED\u53E5\u7BA1\u7406\u6570\u636E\uFF0C\u7531\u4E8E\u5B83\u5C5E\u4E8E\u8F7B\u578B\u6570\u636E\u5E93\uFF0C\u4E0D\u6D89\u53CA\u590D\u6742\u7684\u6570\u636E\u63A7\u5236\u64CD\u4F5C\uFF0C\u56E0\u6B64App\u5F00\u53D1\u53EA\u7528\u5230\u6570\u636E\u5B9A\u4E49\u548C\u6570\u636E\u64CD\u7EB5\u4E24\u7C7BSQL\u3002\u6B64\u5916\uFF0CSQLite\u7684SQL\u8BED\u6CD5\u4E0E\u901A\u7528\u7684SQL\u8BED\u6CD5\u7565\u6709\u4E0D\u540C\uFF0C\u63A5\u4E0B\u6765\u4ECB\u7ECD\u7684\u4E24\u7C7BSQL\u8BED \u6CD5\u5168\u90E8\u57FA\u4E8ESQLite\u3002</p><p><strong>1 \uFF0E\u6570\u636E\u5B9A\u4E49\u8BED\u8A00</strong></p><p>\u6570\u636E\u5B9A\u4E49\u8BED\u8A00\u5168\u79F0Data Definition Language\uFF0C\u7B80\u79F0DDL\uFF0C\u5B83\u63CF\u8FF0\u4E86\u600E\u6837\u53D8\u66F4\u6570\u636E\u5B9E\u4F53\u7684\u6846\u67B6\u7ED3\u6784\u3002\u5C31SQLite\u800C\u8A00\uFF0CDDL\u8BED\u8A00\u4E3B\u8981\u5305\u62EC 3 \u79CD\u64CD\u4F5C\uFF1A\u521B\u5EFA\u8868\u683C\u3001\u5220\u9664\u8868\u683C\u3001\u4FEE\u6539\u8868\u7ED3\u6784\uFF0C\u5206\u522B\u8BF4\u660E\u5982\u4E0B\u3002</p><p>\uFF08 1 \uFF09\u521B\u5EFA\u8868\u683C</p><p>\u8868\u683C\u7684\u521B\u5EFA\u52A8\u4F5C\u7531create\u547D\u4EE4\u5B8C\u6210\uFF0C\u683C\u5F0F\u4E3A\u201CCREATE TABLE IF NOT EXISTS\u3000\u8868\u683C\u540D\u79F0\uFF08\u4EE5\u9017\u53F7\u5206\u9694\u7684\u5404\u5B57\u6BB5\u5B9A\u4E49\uFF09\uFF1B\u201D\u3002\u4EE5\u7528\u6237\u4FE1\u606F\u8868\u4E3A\u4F8B\uFF0C\u5B83\u7684\u5EFA\u8868\u8BED\u53E5\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-sqlite ext-sqlite line-numbers-mode"><pre class="language-sqlite"><code>CREATE TABLE IF NOT EXISTS user_info (
_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
\xA0 name VARCHAR NOT NULL,
\xA0 age INTEGER NOT NULL, 
\xA0 height LONG NOT NULL, 
\xA0 weight FLOAT NOT NULL,
married INTEGER NOT NULL,
\xA0 update_time VARCHAR NOT NULL);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684SQL\u8BED\u6CD5\u4E0E\u5176\u4ED6\u6570\u636E\u5E93\u7684SQL\u8BED\u6CD5\u6709\u6240\u51FA\u5165\uFF0C\u76F8\u5173\u7684\u6CE8\u610F\u70B9\u8BF4\u660E\u89C1\u4E0B\uFF1A</p><p>\u2460SQL\u8BED\u53E5\u4E0D\u533A\u5206\u5927\u5C0F\u5199\uFF0C\u65E0\u8BBA\u662Fcreate\u4E0Etable\u8FD9\u7C7B\u5173\u952E\u8BCD\uFF0C\u8FD8\u662F\u8868\u683C\u540D\u79F0\u3001\u5B57\u6BB5\u540D\u79F0\uFF0C\u90FD\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u3002\u552F\u4E00\u533A\u5206\u5927\u5C0F\u5199\u7684\u662F\u88AB\u5355\u5F15\u53F7\u62EC\u8D77\u6765\u7684\u5B57\u7B26\u4E32\u503C\u3002</p><p>\u2461\u4E3A\u907F\u514D\u91CD\u590D\u5EFA\u8868\uFF0C\u5E94\u52A0\u4E0AIF NOT EXISTS\u5173\u952E\u8BCD\uFF0C\u4F8B\u5982CREATE TABLE IF NOT EXISTS\u3000\u8868\u683C\u540D\u79F0......</p><p>\u2462SQLite\u652F\u6301\u6574\u578BINTEGER\u3001\u957F\u6574\u578BLONG\u3001\u5B57\u7B26\u4E32VARCHAR\u3001\u6D6E\u70B9\u6570FLOAT\uFF0C\u4F46<strong>\u4E0D\u652F\u6301\u5E03\u5C14\u7C7B\u578B</strong>\u3002\u5E03\u5C14\u7C7B\u578B\u7684\u6570\u636E\u8981\u4F7F\u7528\u6574\u578B\u4FDD\u5B58\uFF0C\u5982\u679C\u76F4\u63A5\u4FDD\u5B58\u5E03\u5C14\u6570\u636E\uFF0C\u5728\u5165\u5E93\u65F6SQLite\u4F1A\u81EA\u52A8\u5C06\u5B83\u8F6C\u4E3A 0 \u6216 1 \uFF0C\u5176\u4E2D 0 \u8868\u793Afalse\uFF0C 1 \u8868\u793Atrue\u3002</p><p>\u2463\u5EFA\u8868\u65F6\u9700\u8981\u552F\u4E00\u6807\u8BC6\u5B57\u6BB5\uFF0C\u5B83\u7684\u5B57\u6BB5\u540D\u4E3A id \u3002\u521B\u5EFA\u65B0\u8868\u90FD\u8981\u52A0\u4E0A\u8BE5\u5B57\u6BB5\u5B9A\u4E49\uFF0C\u4F8B\u5982id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\u3002</p><p>\uFF08 2 \uFF09\u5220\u9664\u8868\u683C</p><p>\u8868\u683C\u7684\u5220\u9664\u52A8\u4F5C\u7531drop\u547D\u4EE4\u5B8C\u6210\uFF0C\u683C\u5F0F\u4E3A\u201CDROP TABLE IF EXISTS\u3000\u8868\u683C\u540D\u79F0;\u201D\u3002\u4E0B\u9762\u662F\u5220\u9664\u7528\u6237</p><p>\u4FE1\u606F\u8868\u7684SQL\u8BED\u53E5\u4F8B\u5B50\uFF1A</p><div class="language-sqlite ext-sqlite line-numbers-mode"><pre class="language-sqlite"><code>DROP TABLE IF EXISTS user_info; 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\uFF08 3 \uFF09\u4FEE\u6539\u8868\u7ED3\u6784</p><p>\u8868\u683C\u7684\u4FEE\u6539\u52A8\u4F5C\u7531alter\u547D\u4EE4\u5B8C\u6210\uFF0C\u683C\u5F0F\u4E3A\u201CALTER TABLE\u3000\u8868\u683C\u540D\u79F0\u3000\u4FEE\u6539\u64CD\u4F5C;\u201D\u3002\u4E0D\u8FC7SQLite \u53EA\u652F\u6301\u589E\u52A0\u5B57\u6BB5 \uFF0C\u4E0D\u652F\u6301\u4FEE\u6539\u5B57\u6BB5\uFF0C\u4E5F\u4E0D\u652F\u6301\u5220\u9664\u5B57\u6BB5\u3002\u5BF9\u4E8E\u5B57\u6BB5\u589E\u52A0\u64CD\u4F5C\uFF0C\u9700\u8981\u5728alter\u4E4B\u540E\u8865\u5145add\u547D\u4EE4\uFF0C\u5177\u4F53\u683C\u5F0F\u5982\u201CALTER TABLE\u3000\u8868\u683C\u540D\u79F0\u3000ADD COLUMN\u3000\u5B57\u6BB5\u540D\u79F0\u3000\u5B57\u6BB5\u7C7B\u578B;\u201D\u3002\u4E0B\u9762\u662F\u7ED9\u7528\u6237\u4FE1\u606F\u8868\u589E\u52A0\u624B\u673A\u53F7\u5B57\u6BB5\u7684SQL\u8BED\u53E5\u4F8B\u5B50\uFF1A</p><div class="language-sqlite ext-sqlite line-numbers-mode"><pre class="language-sqlite"><code>ALTER TABLE user_info ADD COLUMN phone VARCHAR;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF0CSQLite\u7684ALTER\u8BED\u53E5\u6BCF\u6B21\u53EA\u80FD\u6DFB\u52A0\u4E00\u5217\u5B57\u6BB5\uFF0C\u82E5\u8981\u6DFB\u52A0\u591A\u5217\uFF0C\u5C31\u5F97\u5206\u591A\u6B21\u6DFB\u52A0\u3002</p><p><strong>2 \uFF0E\u6570\u636E\u64CD\u7EB5\u8BED\u8A00</strong></p><p>\u6570\u636E\u64CD\u7EB5\u8BED\u8A00\u5168\u79F0Data Manipulation Language\uFF0C\u7B80\u79F0DML\uFF0C\u5B83\u63CF\u8FF0\u4E86\u600E\u6837\u5904\u7406\u6570\u636E\u5B9E\u4F53\u7684\u5185\u90E8\u8BB0\u5F55\u3002\u8868\u683C\u8BB0\u5F55\u7684\u64CD\u4F5C\u7C7B\u578B\u5305\u62EC\u6DFB\u52A0\u3001\u5220\u9664\u3001\u4FEE\u6539\u3001\u67E5\u8BE2 4 \u7C7B\uFF0C\u5206\u522B\u8BF4\u660E\u5982\u4E0B\uFF1A</p><p>\uFF08 1 \uFF09\u6DFB\u52A0\u8BB0\u5F55</p><p>\u8BB0\u5F55\u7684\u6DFB\u52A0\u52A8\u4F5C\u7531insert\u547D\u4EE4\u5B8C\u6210\uFF0C\u683C\u5F0F\u4E3A\u201CINSERT INTO\u3000\u8868\u683C\u540D\u79F0\uFF08\u4EE5\u9017\u53F7\u5206\u9694\u7684\u5B57\u6BB5\u540D\u5217\u8868\uFF09VALUES\u3000\uFF08\u4EE5\u9017\u53F7\u5206\u9694\u7684\u5B57\u6BB5\u503C\u5217\u8868\uFF09\uFF1B\u201D\u3002\u4E0B\u9762\u662F\u5F80\u7528\u6237\u4FE1\u606F\u8868\u63D2\u5165\u4E00\u6761\u8BB0\u5F55\u7684SQL\u8BED\u53E5\u4F8B\u5B50\uFF1A</p><div class="language-sqlite ext-sqlite line-numbers-mode"><pre class="language-sqlite"><code>INSERT INTO user_info (name,age,height,weight,married,update_time) 
VALUES (&#39;\u5F20\u4E09&#39;,20,170,50,0,&#39;20200504&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\uFF08 2 \uFF09\u5220\u9664\u8BB0\u5F55</p><p>\u8BB0\u5F55\u7684\u5220\u9664\u52A8\u4F5C\u7531delete\u547D\u4EE4\u5B8C\u6210\uFF0C\u683C\u5F0F\u4E3A\u201CDELETE FROM\u3000\u8868\u683C\u540D\u79F0\u3000WHERE\u3000\u67E5\u8BE2\u6761\u4EF6;\u201D\uFF0C\u5176\u4E2D\u67E5\u8BE2\u6761\u4EF6\u7684\u8868\u8FBE\u5F0F\u5F62\u5982\u201C\u5B57\u6BB5\u540D=\u5B57\u6BB5\u503C\u201D\uFF0C\u591A\u4E2A\u5B57\u6BB5\u7684\u6761\u4EF6\u4EA4\u96C6\u901A\u8FC7\u201CAND\u201D\u8FDE\u63A5\uFF0C\u6761\u4EF6\u5E76\u96C6\u901A\u8FC7\u201COR\u201D\u8FDE\u63A5\u3002\u4E0B\u9762\u662F\u4ECE\u7528\u6237\u4FE1\u606F\u8868\u5220\u9664\u6307\u5B9A\u8BB0\u5F55\u7684SQL\u8BED\u53E5\u4F8B\u5B50\uFF1A</p><div class="language-sqlite ext-sqlite line-numbers-mode"><pre class="language-sqlite"><code>DELETE FROM user_info WHERE name=&#39;\u5F20\u4E09&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\uFF08 3 \uFF09\u4FEE\u6539\u8BB0\u5F55</p><p>\u8BB0\u5F55\u7684\u4FEE\u6539\u52A8\u4F5C\u7531update\u547D\u4EE4\u5B8C\u6210\uFF0C\u683C\u5F0F\u4E3A\u201CUPDATE\u3000\u8868\u683C\u540D\u79F0\u3000SET\u3000\u5B57\u6BB5\u540D=\u5B57\u6BB5\u503C WHERE\u3000\u67E5\u8BE2\u6761\u4EF6;\u201D\u3002\u4E0B\u9762\u662F\u5BF9\u7528\u6237\u4FE1\u606F\u8868\u66F4\u65B0\u6307\u5B9A\u8BB0\u5F55\u7684SQL\u8BED\u53E5\u4F8B\u5B50\uFF1A</p><div class="language-sqlite ext-sqlite line-numbers-mode"><pre class="language-sqlite"><code>UPDATE user_info SET married=1 WHERE name=&#39;\u5F20\u4E09&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\uFF08 4 \uFF09\u67E5\u8BE2\u8BB0\u5F55</p><p>\u8BB0\u5F55\u7684\u67E5\u8BE2\u52A8\u4F5C\u7531select\u547D\u4EE4\u5B8C\u6210\uFF0C\u683C\u5F0F\u4E3A\u201CSELECT\u3000\u4EE5\u9017\u53F7\u5206\u9694\u7684\u5B57\u6BB5\u540D\u5217\u8868\u3000FROM\u3000\u8868\u683C\u540D\u79F0WHERE\u3000\u67E5\u8BE2\u6761\u4EF6;\u201D\u3002\u5982\u679C\u5B57\u6BB5\u540D\u5217\u8868\u586B\u661F\u53F7\u201C*\u201D\uFF0C\u5219\u8868\u793A\u67E5\u8BE2\u8BE5\u8868\u7684\u6240\u6709\u5B57\u6BB5\u3002\u4E0B\u9762\u662F\u4ECE\u7528\u6237\u4FE1\u606F\u8868\u67E5\u8BE2\u6307\u5B9A\u8BB0\u5F55\u7684SQL\u8BED\u53E5\u4F8B\u5B50\uFF1A</p><div class="language-sqlite ext-sqlite line-numbers-mode"><pre class="language-sqlite"><code>SELECT name FROM user_info WHERE name=&#39;\u5F20\u4E09&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u8BE2\u64CD\u4F5C\u9664\u4E86\u6BD4\u8F83\u5B57\u6BB5\u503C\u6761\u4EF6\u4E4B\u5916\uFF0C\u5E38\u5E38\u9700\u8981\u5BF9\u67E5\u8BE2\u7ED3\u679C\u6392\u5E8F\uFF0C\u6B64\u65F6\u8981\u5728\u67E5\u8BE2\u6761\u4EF6\u540E\u9762\u6DFB\u52A0\u6392\u5E8F\u6761\u4EF6\uFF0C\u5BF9\u5E94\u7684\u8868\u8FBE\u5F0F\u4E3A\u201CORDER BY\u3000\u5B57\u6BB5\u540D\u3000ASC\u6216\u8005DESC\u201D\uFF0C\u610F\u6307\u5BF9\u67E5\u8BE2\u7ED3\u679C\u6309\u7167\u67D0\u4E2A\u5B57\u6BB5\u6392\u5E8F\uFF0C\u5176\u4E2DASC\u4EE3\u8868\u5347\u5E8F\uFF0CDESC\u4EE3\u8868\u964D\u5E8F\u3002\u4E0B\u9762\u662F\u67E5\u8BE2\u8BB0\u5F55\u5E76\u5BF9\u7ED3\u679C\u6392\u5E8F\u7684SQL\u8BED\u53E5\u4F8B\u5B50\uFF1A</p><div class="language-sqlite ext-sqlite line-numbers-mode"><pre class="language-sqlite"><code>SELECT * FROM user_info ORDER BY age ASC;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u8BFB\u8005\u4E4B\u524D\u4E0D\u719F\u6089SQL\u8BED\u6CD5\uFF0C\u5EFA\u8BAE\u4E0B\u8F7D\u4E00\u4E2ASQLite\u7BA1\u7406\u8F6F\u4EF6\uFF0C\u8B6C\u5982SQLiteStudio\uFF0C\u5148\u5728\u7535\u8111\u4E0A\u591A\u52A0\u7EC3\u4E60SQLite\u7684\u5E38\u89C1\u64CD\u4F5C\u8BED\u53E5\u3002</p><h3 id="_6-2-2-\u6570\u636E\u5E93\u7BA1\u7406\u5668sqlitedatabase" tabindex="-1"><a class="header-anchor" href="#_6-2-2-\u6570\u636E\u5E93\u7BA1\u7406\u5668sqlitedatabase" aria-hidden="true">#</a> 6.2.2\u3000\u6570\u636E\u5E93\u7BA1\u7406\u5668SQLiteDatabase</h3><p>SQL\u8BED\u53E5\u6BD5\u7ADF\u53EA\u662FSQL\u547D\u4EE4\uFF0C\u82E5\u8981\u5728Java\u4EE3\u7801\u4E2D\u64CD\u7EB5SQLite\uFF0C\u8FD8\u9700\u4E13\u95E8\u7684\u5DE5\u5177\u7C7B\u3002SQLiteDatabase\u4FBF\u662FAndroid\u63D0\u4F9B\u7684SQLite\u6570\u636E\u5E93\u7BA1\u7406\u5668\uFF0C\u5F00\u53D1\u8005\u53EF\u4EE5\u5728\u6D3B\u52A8\u9875\u9762\u4EE3\u7801\u8C03\u7528openOrCreateDatabase\u65B9\u6CD5\u83B7\u53D6\u6570\u636E\u5E93\u5B9E\u4F8B\uFF0C\u53C2\u8003\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\DatabaseActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u521B\u5EFA\u540D\u4E3Atest.db\u7684\u6570\u636E\u5E93\u3002\u6570\u636E\u5E93\u5982\u679C\u4E0D\u5B58\u5728\u5C31\u521B\u5EFA\u5B83\uFF0C\u5982\u679C\u5B58\u5728\u5C31\u6253\u5F00\u5B83 </span>
<span class="token class-name">SQLiteDatabase</span> db <span class="token operator">=</span> <span class="token function">openOrCreateDatabase</span><span class="token punctuation">(</span><span class="token function">getFilesDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/test.db&quot;</span><span class="token punctuation">,</span> 
<span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">MODE_PRIVATE</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> desc <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;\u6570\u636E\u5E93%s\u521B\u5EFA%s&quot;</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>db<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">&quot;\u6210\u529F&quot;</span><span class="token operator">:</span>&quot;\u5931 
\u8D25&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
tv_database<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// deleteDatabase(getFilesDir() + &quot;/test.db&quot;); // \u5220\u9664\u540D\u4E3Atest.db\u6570\u636E\u5E93</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9996\u6B21\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u8C03\u7528openOrCreateDatabase\u65B9\u6CD5\u4F1A\u81EA\u52A8\u521B\u5EFA\u6570\u636E\u5E93\uFF0C\u5E76\u8FD4\u56DE\u8BE5\u6570\u636E\u5E93\u7684\u7BA1\u7406\u5668\u5B9E\u4F8B\uFF0C\u521B\u5EFA\u7ED3\u679C\u5982\u56FE6-7\u6240\u793A\u3002</p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061718642.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:67%;"><p>\u83B7\u5F97\u6570\u636E\u5E93\u5B9E\u4F8B\u4E4B\u540E\uFF0C\u5C31\u80FD\u5BF9\u8BE5\u6570\u636E\u5E93\u5F00\u5C55\u5404\u9879\u64CD\u4F5C\u4E86\u3002\u6570\u636E\u5E93\u7BA1\u7406\u5668SQLiteDatabase\u63D0\u4F9B\u4E86\u82E5\u5E72\u64CD\u4F5C\u6570\u636E\u8868\u7684API\uFF0C\u5E38\u7528\u7684\u65B9\u6CD5\u6709 3 \u7C7B\uFF0C\u5217\u4E3E\u5982\u4E0B\uFF1A</p><p><strong>1 \uFF0E\u7BA1\u7406\u7C7B\uFF0C\u7528\u4E8E\u6570\u636E\u5E93\u5C42\u9762\u7684\u64CD\u4F5C</strong></p><ul><li><p>openDatabase\uFF1A\u6253\u5F00\u6307\u5B9A\u8DEF\u5F84\u7684\u6570\u636E\u5E93\u3002</p></li><li><p>isOpen\uFF1A\u5224\u65AD\u6570\u636E\u5E93\u662F\u5426\u5DF2\u6253\u5F00\u3002</p></li><li><p>close\uFF1A\u5173\u95ED\u6570\u636E\u5E93\u3002</p></li><li><p>getVersion\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u7684\u7248\u672C\u53F7\u3002</p></li><li><p>setVersion\uFF1A\u8BBE\u7F6E\u6570\u636E\u5E93\u7684\u7248\u672C\u53F7\u3002</p><p><strong>2 \uFF0E\u4E8B\u52A1\u7C7B\uFF0C\u7528\u4E8E\u4E8B\u52A1\u5C42\u9762\u7684\u64CD\u4F5C</strong></p></li><li><p>beginTransaction\uFF1A\u5F00\u59CB\u4E8B\u52A1\u3002</p></li><li><p>setTransactionSuccessful\uFF1A\u8BBE\u7F6E\u4E8B\u52A1\u7684\u6210\u529F\u6807\u5FD7\u3002</p></li><li><p>endTransaction\uFF1A\u7ED3\u675F\u4E8B\u52A1\u3002\u6267\u884C\u672C\u65B9\u6CD5\u65F6\uFF0C\u7CFB\u7EDF\u4F1A\u5224\u65AD\u4E4B\u524D\u662F\u5426\u8C03\u7528\u4E86</p></li><li><p>setTransactionSuccessful\u65B9\u6CD5\uFF0C\u5982\u679C\u4E4B\u524D\u5DF2\u8C03\u7528\u8BE5\u65B9\u6CD5\u5C31\u63D0\u4EA4\u4E8B\u52A1\uFF0C\u5982\u679C\u6CA1\u6709\u8C03\u7528\u8BE5\u65B9\u6CD5\u5C31\u56DE\u6EDA\u4E8B\u52A1\u3002</p><p><strong>3 \uFF0E\u6570\u636E\u5904\u7406\u7C7B\uFF0C\u7528\u4E8E\u6570\u636E\u8868\u5C42\u9762\u7684\u64CD\u4F5C</strong></p></li><li><p>execSQL\uFF1A\u6267\u884C\u62FC\u63A5\u597D\u7684SQL\u63A7\u5236\u8BED\u53E5\u3002\u4E00\u822C\u7528\u4E8E\u5EFA\u8868\u3001\u5220\u8868\u3001\u53D8\u66F4\u8868\u7ED3\u6784\u3002</p></li><li><p>delete\uFF1A\u5220\u9664\u7B26\u5408\u6761\u4EF6\u7684\u8BB0\u5F55\u3002</p></li><li><p>update\uFF1A\u66F4\u65B0\u7B26\u5408\u6761\u4EF6\u7684\u8BB0\u5F55\u4FE1\u606F\u3002</p></li><li><p>insert\uFF1A\u63D2\u5165\u4E00\u6761\u8BB0\u5F55\u3002</p></li><li><p>query\uFF1A\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u5E76\u8FD4\u56DE\u7ED3\u679C\u96C6\u7684\u6E38\u6807\u3002</p></li><li><p>rawQuery\uFF1A\u6267\u884C\u62FC\u63A5\u597D\u7684SQL\u67E5\u8BE2\u8BED\u53E5\uFF0C\u5E76\u8FD4\u56DE\u7ED3\u679C\u96C6\u7684\u6E38\u6807\u3002</p><p>\u5728\u5B9E\u9645\u5F00\u53D1\u4E2D\uFF0C\u6BD4\u8F83\u7ECF\u5E38\u7528\u5230\u7684\u662F\u67E5\u8BE2\u8BED\u53E5\uFF0C\u5EFA\u8BAE\u5148\u5199\u597D\u67E5\u8BE2\u64CD\u4F5C\u7684select\u8BED\u53E5\uFF0C\u518D\u8C03\u7528rawQuery\u65B9\u6CD5</p><p>\u6267\u884C\u67E5\u8BE2\u8BED\u53E5\u3002</p></li></ul><h3 id="_6-2-3-\u6570\u636E\u5E93\u5E2E\u52A9\u5668sqliteopenhelper" tabindex="-1"><a class="header-anchor" href="#_6-2-3-\u6570\u636E\u5E93\u5E2E\u52A9\u5668sqliteopenhelper" aria-hidden="true">#</a> 6.2.3\u3000\u6570\u636E\u5E93\u5E2E\u52A9\u5668SQLiteOpenHelper</h3><p>\u7531\u4E8ESQLiteDatabase\u5B58\u5728\u5C40\u9650\u6027\uFF0C\u4E00\u4E0D\u5C0F\u5FC3\u5C31\u4F1A\u91CD\u590D\u6253\u5F00\u6570\u636E\u5E93\uFF0C\u5904\u7406\u6570\u636E\u5E93\u7684\u5347\u7EA7\u4E5F\u4E0D\u65B9\u4FBF\uFF1B\u56E0\u6B64Android\u63D0\u4F9B\u4E86\u6570\u636E\u5E93\u5E2E\u52A9\u5668SQLiteOpenHelper\uFF0C\u5E2E\u52A9\u5F00\u53D1\u8005\u5408\u7406\u4F7F\u7528SQLite\u3002</p><p>SQLiteOpenHelper\u7684\u5177\u4F53\u4F7F\u7528\u6B65\u9AA4\u5982\u4E0B\uFF1A</p><p><strong>\u6B65\u9AA4\u4E00</strong>\uFF0C\u65B0\u5EFA\u4E00\u4E2A\u7EE7\u627F\u81EASQLiteOpenHelper\u7684\u6570\u636E\u5E93\u64CD\u4F5C\u7C7B\uFF0C\u6309\u63D0\u793A\u91CD\u5199onCreate\u548ConUpgrade\u4E24\u4E2A\u65B9\u6CD5\u3002\u5176\u4E2D\uFF0ConCreate\u65B9\u6CD5\u53EA\u5728\u7B2C\u4E00\u6B21\u6253\u5F00\u6570\u636E\u5E93\u65F6\u6267\u884C\uFF0C\u5728\u6B64\u53EF\u4EE5\u521B\u5EFA\u8868\u7ED3\u6784\uFF1B\u800ConUpgrade\u65B9\u6CD5\u5728\u6570\u636E\u5E93\u7248\u672C\u5347\u9AD8\u65F6\u6267\u884C\uFF0C\u5728\u6B64\u53EF\u4EE5\u6839\u636E\u65B0\u65E7\u7248\u672C\u53F7\u53D8\u66F4\u8868\u7ED3\u6784\u3002</p><p><strong>\u6B65\u9AA4\u4E8C</strong>\uFF0C\u4E3A\u4FDD\u8BC1\u6570\u636E\u5E93\u5B89\u5168\u4F7F\u7528\uFF0C\u9700\u8981\u5C01\u88C5\u51E0\u4E2A\u5FC5\u8981\u65B9\u6CD5\uFF0C\u5305\u62EC\u83B7\u53D6\u5355\u4F8B\u5BF9\u8C61\u3001\u6253\u5F00\u6570\u636E\u5E93\u8FDE\u63A5\u3001\u5173\u95ED\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u8BF4\u660E\u5982\u4E0B\uFF1A</p><ul><li><p>\u83B7\u53D6\u5355\u4F8B\u5BF9\u8C61\uFF1A\u786E\u4FDD\u5728App\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u6570\u636E\u5E93\u53EA\u4F1A\u6253\u5F00\u4E00\u6B21\uFF0C\u907F\u514D\u91CD\u590D\u6253\u5F00\u5F15\u8D77\u9519\u8BEF\u3002</p></li><li><p>\u6253\u5F00\u6570\u636E\u5E93\u8FDE\u63A5\uFF1ASQLite\u6709\u9501\u673A\u5236\uFF0C\u5373\u8BFB\u9501\u548C\u5199\u9501\u7684\u5904\u7406\uFF1B\u6545\u800C\u6570\u636E\u5E93\u8FDE\u63A5\u4E5F\u5206\u4E24\u79CD\uFF0C\u8BFB\u8FDE\u63A5\u53EF\u8C03\u7528getReadableDatabase\u65B9\u6CD5\u83B7\u5F97\uFF0C\u5199\u8FDE\u63A5\u53EF\u8C03\u7528getWritableDatabase\u83B7\u5F97\u3002</p></li><li><p>\u5173\u95ED\u6570\u636E\u5E93\u8FDE\u63A5\uFF1A\u6570\u636E\u5E93\u64CD\u4F5C\u5B8C\u6BD5\uFF0C\u8C03\u7528\u6570\u636E\u5E93\u5B9E\u4F8B\u7684close\u65B9\u6CD5\u5173\u95ED\u8FDE\u63A5\u3002</p></li></ul><p><strong>\u6B65\u9AA4\u4E09</strong>\uFF0C \u63D0\u4F9B\u5BF9\u8868\u8BB0\u5F55\u589E\u52A0\u3001\u5220\u9664\u3001\u4FEE\u6539\u3001\u67E5\u8BE2\u7684\u64CD\u4F5C\u65B9\u6CD5\u3002 \u80FD\u88ABSQLite\u76F4\u63A5\u4F7F\u7528\u7684\u6570\u636E\u7ED3\u6784\u662FContentValues\u7C7B\uFF0C\u5B83\u7C7B\u4F3C\u4E8E\u6620\u5C04Map\uFF0C\u4E5F\u63D0\u4F9B\u4E86put\u548Cget\u65B9\u6CD5\u5B58\u53D6\u952E\u503C\u5BF9\u3002\u533A\u522B\u4E4B\u5904\u5728\u4E8E\uFF1AContentValues\u7684\u952E\u53EA\u80FD\u662F\u5B57\u7B26\u4E32\uFF0C\u4E0D\u80FD\u662F\u5176\u4ED6\u7C7B\u578B\u3002ContentValues\u4E3B\u8981\u7528\u4E8E\u589E\u52A0\u8BB0\u5F55\u548C\u66F4\u65B0\u8BB0\u5F55\uFF0C\u5BF9\u5E94\u6570\u636E\u5E93\u7684insert\u548Cupdate\u65B9\u6CD5\u3002\u8BB0\u5F55\u7684\u67E5\u8BE2\u64CD\u4F5C\u7528\u5230\u4E86\u6E38\u6807\u7C7BCursor\uFF0C\u8C03\u7528query\u548CrawQuery\u65B9\u6CD5\u8FD4\u56DE\u7684\u90FD\u662FCursor\u5BF9\u8C61\uFF0C\u82E5\u8981\u83B7\u53D6\u5168\u90E8\u7684\u67E5\u8BE2\u7ED3\u679C\uFF0C\u5219\u9700\u6839\u636E\u6E38\u6807\u7684\u6307\u793A\u4E00\u6761\u4E00\u6761\u904D\u5386\u7ED3\u679C\u96C6\u5408\u3002Cursor\u7684\u5E38\u7528\u65B9\u6CD5\u53EF\u5206\u4E3A 3 \u7C7B\uFF0C\u8BF4\u660E\u5982\u4E0B\uFF1A</p><p><strong>1 \uFF0E\u6E38\u6807\u63A7\u5236\u7C7B\u65B9\u6CD5\uFF0C\u7528\u4E8E\u6307\u5B9A\u6E38\u6807\u7684\u72B6\u6001</strong></p><ul><li><p>close\uFF1A\u5173\u95ED\u6E38\u6807\u3002</p></li><li><p>isClosed\uFF1A\u5224\u65AD\u6E38\u6807\u662F\u5426\u5173\u95ED\u3002</p></li><li><p>isFirst\uFF1A\u5224\u65AD\u6E38\u6807\u662F\u5426\u5728\u5F00\u5934\u3002</p></li><li><p>isLast\uFF1A\u5224\u65AD\u6E38\u6807\u662F\u5426\u5728\u672B\u5C3E\u3002</p></li></ul><p><strong>2 \uFF0E\u6E38\u6807\u79FB\u52A8\u7C7B\u65B9\u6CD5\uFF0C\u628A\u6E38\u6807\u79FB\u52A8\u5230\u6307\u5B9A\u4F4D\u7F6E</strong></p><ul><li><p>moveToFirst\uFF1A\u79FB\u52A8\u6E38\u6807\u5230\u5F00\u5934\u3002</p></li><li><p>moveToLast\uFF1A\u79FB\u52A8\u6E38\u6807\u5230\u672B\u5C3E\u3002</p></li><li><p>moveToNext\uFF1A\u79FB\u52A8\u6E38\u6807\u5230\u4E0B\u4E00\u6761\u8BB0\u5F55\u3002</p></li><li><p>moveToPrevious\uFF1A\u79FB\u52A8\u6E38\u6807\u5230\u4E0A\u4E00\u6761\u8BB0\u5F55\u3002</p></li><li><p>move\uFF1A\u5F80\u540E\u79FB\u52A8\u6E38\u6807\u82E5\u5E72\u6761\u8BB0\u5F55\u3002</p></li><li><p>moveToPosition\uFF1A\u79FB\u52A8\u6E38\u6807\u5230\u6307\u5B9A\u4F4D\u7F6E\u7684\u8BB0\u5F55\u3002</p></li></ul><p><strong>3 \uFF0E\u83B7\u53D6\u8BB0\u5F55\u7C7B\u65B9\u6CD5\uFF0C\u53EF\u83B7\u53D6\u8BB0\u5F55\u7684\u6570\u91CF\u3001\u7C7B\u578B\u4EE5\u53CA\u53D6\u503C</strong></p><ul><li><p>getCount\uFF1A\u83B7\u53D6\u7ED3\u679C\u8BB0\u5F55\u7684\u6570\u91CF\u3002</p></li><li><p>getInt\uFF1A\u83B7\u53D6\u6307\u5B9A\u5B57\u6BB5\u7684\u6574\u578B\u503C\u3002</p></li><li><p>getLong\uFF1A\u83B7\u53D6\u6307\u5B9A\u5B57\u6BB5\u7684\u957F\u6574\u578B\u503C\u3002</p></li><li><p>getFloat\uFF1A\u83B7\u53D6\u6307\u5B9A\u5B57\u6BB5\u7684\u6D6E\u70B9\u6570\u503C\u3002</p></li><li><p>getString\uFF1A\u83B7\u53D6\u6307\u5B9A\u5B57\u6BB5\u7684\u5B57\u7B26\u4E32\u503C\u3002</p></li><li><p>getType\uFF1A\u83B7\u53D6\u6307\u5B9A\u5B57\u6BB5\u7684\u5B57\u6BB5\u7C7B\u578B\u3002</p></li></ul><p>\u9274\u4E8E\u6570\u636E\u5E93\u64CD\u4F5C\u7684\u7279\u6B8A\u6027\uFF0C\u4E0D\u65B9\u4FBF\u5355\u72EC\u6F14\u793A\u67D0\u4E2A\u529F\u80FD\uFF0C\u63A5\u4E0B\u6765\u4ECE\u521B\u5EFA\u6570\u636E\u5E93\u5F00\u59CB\u4ECB\u7ECD\uFF0C\u5B8C\u6574\u6F14\u793A\u4E00\u4E0B\u6570\u636E\u5E93\u7684\u8BFB\u5199\u64CD\u4F5C\u3002\u7528\u6237\u6CE8\u518C\u4FE1\u606F\u7684\u6F14\u793A\u9875\u9762\u5305\u62EC\u4E24\u4E2A\uFF0C\u5206\u522B\u662F\u8BB0\u5F55\u4FDD\u5B58\u9875\u9762\u548C\u8BB0\u5F55\u8BFB\u53D6\u9875\u9762\uFF0C\u5176\u4E2D\u8BB0\u5F55\u4FDD\u5B58\u9875\u9762\u901A\u8FC7insert\u65B9\u6CD5\u5411\u6570\u636E\u5E93\u6DFB\u52A0\u7528\u6237\u4FE1\u606F\uFF0C\u5B8C\u6574\u4EE3\u7801\u89C1 chapter06\\src\\main\\java\\com\\example\\chapter06\\SQLiteHelperActivity.java\uFF1B\u800C\u8BB0\u5F55\u8BFB\u53D6\u9875\u9762\u901A\u8FC7query\u65B9\u6CD5\u4ECE\u6570\u636E\u5E93\u8BFB\u53D6\u7528\u6237\u4FE1\u606F\uFF0C\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\SQLiteHelperActivity.java\u3002\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u5148\u6253\u5F00\u8BB0\u5F55\u4FDD\u5B58\u9875\u9762\uFF0C\u4F9D\u6B21\u5F55\u5165\u5E76\u5C06\u4E24\u4E2A\u7528\u6237\u7684\u6CE8\u518C\u4FE1\u606F\u4FDD\u5B58\u81F3\u6570\u636E\u5E93\uFF0C\u5982\u56FE6-8\u548C\u56FE6-9 \u6240\u793A\u3002\u518D\u6253\u5F00\u8BB0\u5F55\u8BFB\u53D6\u9875\u9762\uFF0C\u4ECE\u6570\u636E\u5E93\u8BFB\u53D6\u7528\u6237\u6CE8\u518C\u4FE1\u606F\u5E76\u5C55\u793A\u5728\u9875\u9762\u4E0A\uFF0C\u5982\u56FE6-10\u6240\u793A\u3002</p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061730004.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:67%;"><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061730447.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:67%;"><p>\u4E0A\u8FF0\u6F14\u793A\u9875\u9762\u4E3B\u8981\u7528\u5230\u4E86\u6570\u636E\u5E93\u8BB0\u5F55\u7684\u6DFB\u52A0\u3001\u67E5\u8BE2\u548C\u5220\u9664\u64CD\u4F5C\uFF0C\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u5E2E\u52A9\u5668\u5173\u952E\u4EE3\u7801\u5982\u4E0B\u6240\u793A\uFF0C\u5C24\u5176\u5173\u6CE8\u91CC\u9762\u7684insert\u3001delete\u3001update\u548Cquery\u65B9\u6CD5\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\database\\UserDBHelper.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dongnaoedu<span class="token punctuation">.</span>chapter06<span class="token punctuation">.</span>database</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">ContentValues</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Context</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>database<span class="token punctuation">.</span></span><span class="token class-name">Cursor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>database<span class="token punctuation">.</span>sqlite<span class="token punctuation">.</span></span><span class="token class-name">SQLiteDatabase</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>database<span class="token punctuation">.</span>sqlite<span class="token punctuation">.</span></span><span class="token class-name">SQLiteOpenHelper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">WindowAnimationFrameStats</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>dongnaoedu<span class="token punctuation">.</span>chapter06<span class="token punctuation">.</span>enity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDBHelper</span> <span class="token keyword">extends</span> <span class="token class-name">SQLiteOpenHelper</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DB_NAME</span> <span class="token operator">=</span> <span class="token string">&quot;user.db&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">TABLE_NAME</span> <span class="token operator">=</span> <span class="token string">&quot;user_info&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DB_VERSION</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">UserDBHelper</span> mHelper <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">SQLiteDatabase</span> mRDB <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">SQLiteDatabase</span> mWDB <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">UserDBHelper</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token constant">DB_NAME</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token constant">DB_VERSION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u5229\u7528\u5355\u4F8B\u6A21\u5F0F\u83B7\u53D6\u6570\u636E\u5E93\u5E2E\u52A9\u5668\u7684\u552F\u4E00\u5B9E\u4F8B</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">UserDBHelper</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mHelper <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDBHelper</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> mHelper<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u6253\u5F00\u6570\u636E\u5E93\u7684\u8BFB\u8FDE\u63A5</span>
    <span class="token keyword">public</span> <span class="token class-name">SQLiteDatabase</span> <span class="token function">openReadLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mRDB <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>mRDB<span class="token punctuation">.</span><span class="token function">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mRDB <span class="token operator">=</span> mHelper<span class="token punctuation">.</span><span class="token function">getReadableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> mRDB<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u6253\u5F00\u6570\u636E\u5E93\u7684\u5199\u8FDE\u63A5</span>
    <span class="token keyword">public</span> <span class="token class-name">SQLiteDatabase</span> <span class="token function">openWriteLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mWDB <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>mWDB<span class="token punctuation">.</span><span class="token function">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mWDB <span class="token operator">=</span> mHelper<span class="token punctuation">.</span><span class="token function">getWritableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> mWDB<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u5173\u95ED\u6570\u636E\u5E93\u8FDE\u63A5</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">closeLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mRDB <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> mRDB<span class="token punctuation">.</span><span class="token function">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mRDB<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mRDB <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>mWDB <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> mWDB<span class="token punctuation">.</span><span class="token function">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mWDB<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mWDB <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u521B\u5EFA\u6570\u636E\u5E93\uFF0C\u6267\u884C\u5EFA\u8868\u8BED\u53E5</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">SQLiteDatabase</span> db<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;CREATE TABLE IF NOT EXISTS &quot;</span> <span class="token operator">+</span> <span class="token constant">TABLE_NAME</span> <span class="token operator">+</span> <span class="token string">&quot; (&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; name VARCHAR NOT NULL,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; age INTEGER NOT NULL,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; height LONG NOT NULL,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; weight FLOAT NOT NULL,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; married INTEGER NOT NULL);&quot;</span><span class="token punctuation">;</span>
        db<span class="token punctuation">.</span><span class="token function">execSQL</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u5347\u7EA7\u6570\u636E\u5E93\u4F1A\u6267\u884C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onUpgrade</span><span class="token punctuation">(</span><span class="token class-name">SQLiteDatabase</span> db<span class="token punctuation">,</span> <span class="token keyword">int</span> oldVersion<span class="token punctuation">,</span> <span class="token keyword">int</span> newVersion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;ALTER TABLE &quot;</span> <span class="token operator">+</span> <span class="token constant">TABLE_NAME</span> <span class="token operator">+</span> <span class="token string">&quot; ADD COLUMN phone VARCHAR;&quot;</span><span class="token punctuation">;</span>
        db<span class="token punctuation">.</span><span class="token function">execSQL</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sql <span class="token operator">=</span> <span class="token string">&quot;ALTER TABLE &quot;</span> <span class="token operator">+</span> <span class="token constant">TABLE_NAME</span> <span class="token operator">+</span> <span class="token string">&quot; ADD COLUMN password VARCHAR;&quot;</span><span class="token punctuation">;</span>
        db<span class="token punctuation">.</span><span class="token function">execSQL</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ContentValues</span> values <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;weight&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;married&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>married<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u6267\u884C\u63D2\u5165\u8BB0\u5F55\u52A8\u4F5C\uFF0C\u8BE5\u8BED\u53E5\u8FD4\u56DE\u63D2\u5165\u8BB0\u5F55\u7684\u884C\u53F7</span>
        <span class="token comment">// \u5982\u679C\u7B2C\u4E09\u4E2A\u53C2\u6570values \u4E3ANull\u6216\u8005\u5143\u7D20\u4E2A\u6570\u4E3A0\uFF0C \u7531\u4E8Einsert()\u65B9\u6CD5\u8981\u6C42\u5FC5\u987B\u6DFB\u52A0\u4E00\u6761\u9664\u4E86\u4E3B\u952E\u4E4B\u5916\u5176\u5B83\u5B57\u6BB5\u4E3ANull\u503C\u7684\u8BB0\u5F55\uFF0C</span>
        <span class="token comment">// \u4E3A\u4E86\u6EE1\u8DB3SQL\u8BED\u6CD5\u7684\u9700\u8981\uFF0C insert\u8BED\u53E5\u5FC5\u987B\u7ED9\u5B9A\u4E00\u4E2A\u5B57\u6BB5\u540D \uFF0C\u5982\uFF1Ainsert into person(name) values(NULL)\uFF0C</span>
        <span class="token comment">// \u5018\u82E5\u4E0D\u7ED9\u5B9A\u5B57\u6BB5\u540D \uFF0C insert\u8BED\u53E5\u5C31\u6210\u4E86\u8FD9\u6837\uFF1A insert into person() values()\uFF0C\u663E\u7136\u8FD9\u4E0D\u6EE1\u8DB3\u6807\u51C6SQL\u7684\u8BED\u6CD5\u3002</span>
        <span class="token comment">// \u5982\u679C\u7B2C\u4E09\u4E2A\u53C2\u6570values \u4E0D\u4E3ANull\u5E76\u4E14\u5143\u7D20\u7684\u4E2A\u6570\u5927\u4E8E0 \uFF0C\u53EF\u4EE5\u628A\u7B2C\u4E8C\u4E2A\u53C2\u6570\u8BBE\u7F6E\u4E3Anull \u3002</span>
        <span class="token comment">//return mWDB.insert(TABLE_NAME, null, values);</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            mWDB<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mWDB<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token constant">TABLE_NAME</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//int i = 10 / 0;</span>
            mWDB<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token constant">TABLE_NAME</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mWDB<span class="token punctuation">.</span><span class="token function">setTransactionSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            mWDB<span class="token punctuation">.</span><span class="token function">endTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">deleteByName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5220\u9664\u6240\u6709</span>
        <span class="token comment">//mWDB.delete(TABLE_NAME, &quot;1=1&quot;, null);</span>
        <span class="token keyword">return</span> mWDB<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token constant">TABLE_NAME</span><span class="token punctuation">,</span> <span class="token string">&quot;name=?&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ContentValues</span> values <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;weight&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;married&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>married<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mWDB<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token constant">TABLE_NAME</span><span class="token punctuation">,</span> values<span class="token punctuation">,</span> <span class="token string">&quot;name=?&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u6267\u884C\u8BB0\u5F55\u67E5\u8BE2\u52A8\u4F5C\uFF0C\u8BE5\u8BED\u53E5\u8FD4\u56DE\u7ED3\u679C\u96C6\u7684\u6E38\u6807</span>
        <span class="token class-name">Cursor</span> cursor <span class="token operator">=</span> mRDB<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token constant">TABLE_NAME</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5FAA\u73AF\u53D6\u51FA\u6E38\u6807\u6307\u5411\u7684\u6BCF\u6761\u8BB0\u5F55</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>id <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>name <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>age <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>height <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>weight <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//SQLite\u6CA1\u6709\u5E03\u5C14\u578B\uFF0C\u75280\u8868\u793Afalse\uFF0C\u75281\u8868\u793Atrue</span>
            user<span class="token punctuation">.</span>married <span class="token operator">=</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryByName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u6267\u884C\u8BB0\u5F55\u67E5\u8BE2\u52A8\u4F5C\uFF0C\u8BE5\u8BED\u53E5\u8FD4\u56DE\u7ED3\u679C\u96C6\u7684\u6E38\u6807</span>
        <span class="token class-name">Cursor</span> cursor <span class="token operator">=</span> mRDB<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token constant">TABLE_NAME</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;name=?&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5FAA\u73AF\u53D6\u51FA\u6E38\u6807\u6307\u5411\u7684\u6BCF\u6761\u8BB0\u5F55</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>id <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>name <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>age <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>height <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>weight <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//SQLite\u6CA1\u6709\u5E03\u5C14\u578B\uFF0C\u75280\u8868\u793Afalse\uFF0C\u75281\u8868\u793Atrue</span>
            user<span class="token punctuation">.</span>married <span class="token operator">=</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-4-\u4F18\u5316\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_6-2-4-\u4F18\u5316\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD" aria-hidden="true">#</a> 6.2.4\u3000\u4F18\u5316\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD</h3><p>\u5728\u201C6.1.2\u3000\u5B9E\u73B0\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD\u201D\u4E2D\uFF0C\u867D\u7136\u4F7F\u7528\u5171\u4EAB\u53C2\u6570\u5B9E\u73B0\u4E86\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD\uFF0C\u4F46\u662F\u8BE5\u65B9\u6848\u53EA\u80FD\u8BB0\u4F4F\u4E00\u4E2A\u7528\u6237\u7684\u767B\u5F55\u4FE1\u606F\uFF0C\u5E76\u4E14\u624B\u673A\u53F7\u7801\u8DDF\u5BC6\u7801\u6CA1\u6709\u5BF9\u5E94\u5173\u7CFB\uFF0C\u5982\u679C\u6362\u4E2A\u624B\u673A\u53F7\u7801\u767B\u5F55\uFF0C\u524D\u4E00\u4E2A\u7528\u6237\u7684\u767B\u5F55\u4FE1\u606F\u5C31\u88AB\u8986\u76D6\u4E86\u3002\u771F\u6B63\u7684\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD\u5E94\u5F53\u662F\u8FD9\u6837\u7684\uFF1A\u5148\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF0C\u7136\u540E\u6839\u636E\u624B\u673A\u53F7\u7801\u5339\u914D\u4FDD\u5B58\u7684\u5BC6\u7801\uFF0C\u4E00\u4E2A\u624B\u673A\u53F7\u7801\u5BF9\u5E94\u4E00\u4E2A\u5BC6\u7801\uFF0C\u4ECE\u800C\u5B9E\u73B0\u5177\u4F53\u624B\u673A\u53F7\u7801\u7684\u5BC6\u7801\u8BB0\u5FC6\u529F\u80FD\u3002\u73B0\u5728\u8FD0\u7528\u6570\u636E\u5E93\u6280\u672F\u5206\u6761\u5B58\u50A8\u5404\u7528\u6237\u7684\u767B\u5F55\u4FE1\u606F\uFF0C\u5E76\u652F\u6301\u6839\u636E\u624B\u673A\u53F7\u67E5\u627E\u767B\u5F55\u4FE1\u606F\uFF0C\u4ECE\u800C\u540C\u65F6\u8BB0\u4F4F\u591A\u4E2A\u624B\u673A\u53F7\u7684\u5BC6\u7801\u3002\u5177\u4F53\u7684\u6539\u9020\u4E3B\u8981\u6709\u4E0B\u5217 3 \u70B9\uFF1A</p><p>\uFF08 1 \uFF09\u58F0\u660E\u4E00\u4E2A\u6570\u636E\u5E93\u7684\u5E2E\u52A9\u5668\u5BF9\u8C61\uFF0C\u7136\u540E\u5728\u6D3B\u52A8\u9875\u9762\u7684onResume\u65B9\u6CD5\u4E2D\u6253\u5F00\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u5728onPasue\u65B9\u6CD5\u4E2D\u5173\u95ED\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u793A\u4F8B\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\LoginSQLiteActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">UserDBHelper</span> mHelper<span class="token punctuation">;</span> <span class="token comment">// \u58F0\u660E\u4E00\u4E2A\u7528\u6237\u6570\u636E\u5E93\u7684\u5E2E\u52A9\u5668\u5BF9\u8C61 </span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
   <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   mHelper <span class="token operator">=</span> <span class="token class-name">UserDBHelper</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u83B7\u5F97\u7528\u6237\u6570\u636E\u5E93\u5E2E\u52A9\u5668\u7684\u5B9E\u4F8B </span>
   mHelper<span class="token punctuation">.</span><span class="token function">openWriteLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6062\u590D\u9875\u9762\uFF0C\u5219\u6253\u5F00\u6570\u636E\u5E93\u8FDE\u63A5</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
   <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   mHelper<span class="token punctuation">.</span><span class="token function">closeLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6682\u505C\u9875\u9762\uFF0C\u5219\u5173\u95ED\u6570\u636E\u5E93\u8FDE\u63A5 </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uFF08 2 \uFF09\u767B\u5F55\u6210\u529F\u65F6\uFF0C\u5982\u679C\u7528\u6237\u52FE\u9009\u4E86\u201C\u8BB0\u4F4F\u5BC6\u7801\u201D\uFF0C\u5C31\u5C06\u624B\u673A\u53F7\u7801\u53CA\u5176\u5BC6\u7801\u4FDD\u5B58\u81F3\u6570\u636E\u5E93\u3002\u4E5F\u5C31\u662F\u5728loginSuccess\u65B9\u6CD5\u4E2D\u589E\u52A0\u5982\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u5982\u679C\u52FE\u9009\u4E86\u201C\u8BB0\u4F4F\u5BC6\u7801\u201D\uFF0C\u5219\u628A\u624B\u673A\u53F7\u7801\u548C\u5BC6\u7801\u4FDD\u5B58\u4E3A\u6570\u636E\u5E93\u7684\u7528\u6237\u8868\u8BB0\u5F55 </span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isRemember<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">UserInfo</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u7528\u6237\u4FE1\u606F\u5BF9\u8C61 </span>
   info<span class="token punctuation">.</span>phone <span class="token operator">=</span> et_phone<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span>password <span class="token operator">=</span> et_password<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span>update_time <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">getNowDateTime</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   mHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5F80\u7528\u6237\u6570\u636E\u5E93\u6DFB\u52A0\u767B\u5F55\u6210\u529F\u7684\u7528\u6237\u4FE1\u606F</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uFF08 3 \uFF09\u518D\u6B21\u6253\u5F00\u767B\u5F55\u9875\u9762\uFF0C\u7528\u6237\u8F93\u5165\u624B\u673A\u53F7\u518D\u70B9\u51FB\u5BC6\u7801\u6846\u7684\u65F6\u5019\uFF0CApp\u6839\u636E\u624B\u673A\u53F7\u5230\u6570\u636E\u5E93\u67E5\u627E\u767B\u5F55\u4FE1\u606F\uFF0C\u5E76\u5C06\u8BB0\u5F55\u7ED3\u679C\u4E2D\u7684\u5BC6\u7801\u586B\u5165\u5BC6\u7801\u6846\u3002\u5176\u4E2D\u6839\u636E\u624B\u673A\u53F7\u7801\u67E5\u627E\u767B\u5F55\u4FE1\u606F\uFF0C\u8981\u6C42\u5728\u5E2E\u52A9\u5668\u4EE3\u7801\u4E2D\u6DFB\u52A0\u4EE5\u4E0B\u65B9\u6CD5\uFF0C\u7528\u4E8E\u627E\u5230\u6307\u5B9A\u624B\u673A\u7684\u767B\u5F55\u5BC6\u7801\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u6839\u636E\u624B\u673A\u53F7\u7801\u67E5\u8BE2\u6307\u5B9A\u8BB0\u5F55</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">queryByPhone</span><span class="token punctuation">(</span><span class="token class-name">String</span> phone<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
   <span class="token class-name">UserInfo</span> info <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> infoList <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;phone=&#39;%s&#39;&quot;</span><span class="token punctuation">,</span> phone<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token keyword">if</span> <span class="token punctuation">(</span>infoList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// \u5B58\u5728\u8BE5\u53F7\u7801\u7684\u767B\u5F55\u4FE1\u606F</span>
       info <span class="token operator">=</span> infoList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span>
   <span class="token keyword">return</span> info<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u5916\uFF0C\u4E0A\u9762\u7B2C 3 \u70B9\u7684\u70B9\u51FB\u5BC6\u7801\u6846\u89E6\u53D1\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u7528\u5230\u4E86\u7F16\u8F91\u6846\u7684\u7126\u70B9\u53D8\u66F4\u4E8B\u4EF6\uFF0C\u6709\u5173\u7126\u70B9\u53D8\u66F4\u76D1\u542C\u5668\u7684\u8BE6\u7EC6\u7528\u6CD5\u53C2\u89C1\u7B2C 5 \u7AE0\u7684\u201C5.3.2\u3000\u7126\u70B9\u53D8\u66F4\u76D1\u542C\u5668\u201D\u3002\u5C31\u672C\u6848\u4F8B\u800C\u8A00\uFF0C\u5149\u6807\u5207\u5230\u5BC6\u7801\u6846\u89E6\u53D1\u7126\u70B9\u53D8\u66F4\u4E8B\u4EF6\uFF0C\u5177\u4F53\u5904\u7406\u903B\u8F91\u8981\u6C42\u91CD\u5199\u76D1\u542C\u5668\u7684onFocusChange\u65B9\u6CD5\uFF0C\u91CD\u5199\u540E\u7684\u65B9\u6CD5\u4EE3\u7801\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFocusChange</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">,</span> <span class="token keyword">boolean</span> hasFocus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">String</span> phone <span class="token operator">=</span> et_phone<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// \u5224\u65AD\u662F\u5426\u662F\u5BC6\u7801\u7F16\u8F91\u6846\u53D1\u751F\u7126\u70B9\u53D8\u5316</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>et_password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// \u7528\u6237\u5DF2\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF0C\u4E14\u5BC6\u7801\u6846\u83B7\u5F97\u7126\u70B9</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>phone<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> hasFocus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// \u6839\u636E\u624B\u673A\u53F7\u7801\u5230\u6570\u636E\u5E93\u4E2D\u67E5\u8BE2\u7528\u6237\u8BB0\u5F55</span>
           <span class="token class-name">UserInfo</span> info <span class="token operator">=</span> mHelper<span class="token punctuation">.</span><span class="token function">queryByPhone</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>info <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token comment">// \u627E\u5230\u7528\u6237\u8BB0\u5F55\uFF0C\u5219\u81EA\u52A8\u5728\u5BC6\u7801\u6846\u4E2D\u586B\u5199\u8BE5\u7528\u6237\u7684\u5BC6\u7801</span>
               et_password<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u65B0\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u5148\u6253\u5F00\u767B\u5F55\u9875\u9762\uFF0C\u52FE\u9009\u201C\u8BB0\u4F4F\u5BC6\u7801\u201D\uFF0C\u5E76\u786E\u4FDD\u672C\u6B21\u767B\u5F55\u6210\u529F\u3002\u7136\u540E\u518D\u6B21\u8FDB\u5165\u767B\u5F55\u9875\u9762\uFF0C\u8F93\u5165\u624B\u673A\u53F7\u7801\u540E\u5149\u6807\u8FD8\u505C\u7559\u5728\u624B\u673A\u6846\uFF0C\u5982\u56FE6-11\u6240\u793A\u3002\u63A5\u7740\u70B9\u51FB\u5BC6\u7801\u6846\uFF0C\u5149\u6807\u968F\u4E4B\u8DF3\u5230\u5BC6\u7801\u6846\uFF0C\u6B64\u65F6\u5BC6\u7801\u6846\u81EA\u52A8\u586B\u5165\u4E86\u8BE5\u53F7\u7801\u5BF9\u5E94\u7684\u5BC6\u7801\u4E32\uFF0C\u5982\u56FE6-12\u6240\u793A\u3002\u7531\u6548\u679C\u56FE\u53EF\u89C1\uFF0C\u8FD9\u6B21\u5B9E\u73B0\u4E86\u771F\u6B63\u610F\u4E49\u4E0A\u7684\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD\u3002</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061753565.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061753193.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><h2 id="_6-3-\u5B58\u50A8\u5361\u7684\u6587\u4EF6\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_6-3-\u5B58\u50A8\u5361\u7684\u6587\u4EF6\u64CD\u4F5C" aria-hidden="true">#</a> 6.3\u3000\u5B58\u50A8\u5361\u7684\u6587\u4EF6\u64CD\u4F5C</h2><p>\u672C\u8282\u4ECB\u7ECDAndroid\u7684\u6587\u4EF6\u5B58\u50A8\u65B9\u5F0F\u2014\u5728\u5B58\u50A8\u5361\u4E0A\u8BFB\u5199\u6587\u4EF6\uFF0C\u5305\u62EC\uFF1A\u516C\u6709\u5B58\u50A8\u7A7A\u95F4\u4E0E\u79C1\u6709\u5B58\u50A8\u7A7A\u95F4\u6709\u4EC0\u4E48\u533A\u522B\u3001\u5982\u4F55\u5229\u7528\u5B58\u50A8\u5361\u8BFB\u5199\u6587\u672C\u6587\u4EF6\u3001\u5982\u4F55\u5229\u7528\u5B58\u50A8\u5361\u8BFB\u5199\u56FE\u7247\u6587\u4EF6\u7B49\u3002</p><h3 id="_6-3-1-\u79C1\u6709\u5B58\u50A8\u7A7A\u95F4\u4E0E\u516C\u5171\u5B58\u50A8\u7A7A\u95F4" tabindex="-1"><a class="header-anchor" href="#_6-3-1-\u79C1\u6709\u5B58\u50A8\u7A7A\u95F4\u4E0E\u516C\u5171\u5B58\u50A8\u7A7A\u95F4" aria-hidden="true">#</a> 6.3.1\u3000\u79C1\u6709\u5B58\u50A8\u7A7A\u95F4\u4E0E\u516C\u5171\u5B58\u50A8\u7A7A\u95F4</h3><p>\u4E3A\u4E86\u66F4\u89C4\u8303\u5730\u7BA1\u7406\u624B\u673A\u5B58\u50A8\u7A7A\u95F4\uFF0C<strong>Android\u4ECE7.0\u5F00\u59CB\u5C06\u5B58\u50A8\u5361\u5212\u5206\u4E3A\u79C1\u6709\u5B58\u50A8\u548C\u516C\u5171\u5B58\u50A8</strong>\u4E24\u5927\u90E8\u5206\uFF0C\u4E5F\u5C31\u662F\u5206\u533A\u5B58\u50A8\u65B9\u5F0F\uFF0C\u7CFB\u7EDF\u7ED9\u6BCF\u4E2AApp\u90FD\u5206\u914D\u4E86\u9ED8\u8BA4\u7684\u79C1\u6709\u5B58\u50A8\u7A7A\u95F4\u3002App\u5728\u79C1\u6709\u7A7A\u95F4\u4E0A\u8BFB\u5199\u6587\u4EF6\u65E0\u987B\u4EFB\u4F55\u6388\u6743\uFF0C\u4F46\u662F\u82E5\u60F3\u5728\u516C\u5171\u7A7A\u95F4\u8BFB\u5199\u6587\u4EF6\uFF0C\u5219\u8981\u5728AndroidManifest.xml\u91CC\u9762\u6DFB\u52A0\u4E0B\u8FF0\u7684\u6743\u9650\u914D\u7F6E\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- \u5B58\u50A8\u5361\u8BFB\u5199 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.WRITE_EXTERNAL_STORAGE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_EXTERNAL_STORAG<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F46\u662F\u5373\u4F7FApp\u58F0\u660E\u4E86\u5B8C\u6574\u7684\u5B58\u50A8\u5361\u64CD\u4F5C\u6743\u9650\uFF0C\u7CFB\u7EDF\u4ECD\u7136\u9ED8\u8BA4\u7981\u6B62\u8BE5App\u8BBF\u95EE\u516C\u5171\u7A7A\u95F4\u3002\u6253\u5F00\u624B\u673A\u7684\u7CFB\u7EDF\u8BBE\u7F6E\u754C\u9762\uFF0C\u8FDB\u5165\u5230\u5177\u4F53\u5E94\u7528\u7684\u7BA1\u7406\u9875\u9762\uFF0C\u4F1A\u53D1\u73B0\u8BE5\u5E94\u7528\u7684\u5B58\u50A8\u8BBF\u95EE\u6743\u9650\u88AB\u7981\u6B62\u4E86\u3002\u5F53\u7136\u7981\u6B62\u8BBF\u95EE\u53EA\u662F\u4E0D\u8BA9\u8BBF\u95EE\u5B58\u50A8\u5361\u7684\u516C\u5171\u7A7A\u95F4\uFF0CApp\u81EA\u8EAB\u7684\u79C1\u6709\u7A7A\u95F4\u4F9D\u65E7\u53EF\u4EE5\u6B63\u5E38\u8BFB\u5199\u3002\u8FD9\u7F18\u4E8EAndroid\u628A\u5B58\u50A8\u5361\u5206\u6210\u4E86\u4E24\u5757\u533A\u57DF\uFF0C\u4E00\u5757\u662F\u6240\u6709\u5E94\u7528\u5747\u53EF\u8BBF\u95EE\u7684\u516C\u5171\u7A7A\u95F4\uFF0C\u53E6\u4E00\u5757\u662F\u53EA\u6709\u5E94\u7528\u81EA\u5DF1\u624D\u53EF\u8BBF\u95EE\u7684\u4E13\u4EAB\u7A7A\u95F4\u3002\u867D\u7136Android\u7ED9\u6BCF\u4E2A\u5E94\u7528\u90FD\u5206\u914D\u4E86\u5355\u72EC\u7684\u5B89\u88C5\u76EE\u5F55\uFF0C\u4F46\u662F\u5B89\u88C5\u76EE\u5F55\u7684\u7A7A\u95F4\u5F88\u7D27\u5F20\uFF0C\u6240\u4EE5Android\u5728\u5B58\u50A8\u5361\u7684\u201CAndroid/data\u201D\u76EE\u5F55\u4E0B\u7ED9<strong>\u6BCF\u4E2A\u5E94\u7528\u53C8\u5355\u72EC\u5EFA\u4E86\u4E00\u4E2A\u6587\u4EF6\u76EE\u5F55</strong>\uFF0C\u7528\u6765\u4FDD\u5B58\u5E94\u7528\u81EA\u5DF1\u9700\u8981\u5904\u7406\u7684\u4E34\u65F6\u6587\u4EF6\u3002\u8FD9\u4E2A\u76EE\u5F55\u53EA\u6709\u5F53\u524D\u5E94\u7528\u624D\u80FD\u591F\u8BFB\u5199\u6587\u4EF6\uFF0C\u5176\u4ED6\u5E94\u7528\u662F\u4E0D\u5141\u8BB8\u8BFB\u5199\u7684\u3002\u7531\u4E8E\u79C1\u6709\u7A7A\u95F4\u672C\u8EAB\u5DF2\u7ECF\u52A0\u4E86\u8BBF\u95EE\u6743\u9650\u63A7\u5236\uFF0C\u56E0\u6B64\u5B83\u4E0D\u53D7\u7CFB\u7EDF\u7981\u6B62\u8BBF\u95EE\u7684\u5F71\u54CD\uFF0C\u5E94\u7528\u64CD\u4F5C\u81EA\u5DF1\u7684\u6587\u4EF6\u76EE\u5F55\u81EA\u7136\u4E0D\u6210\u95EE\u9898\u3002\u56E0\u4E3A\u79C1\u6709\u7684\u6587\u4EF6\u76EE\u5F55\u53EA\u6709\u5C5E\u4E3B\u5E94\u7528\u624D\u80FD\u8BBF\u95EE\uFF0C\u6240\u4EE5\u4E00\u65E6\u5C5E\u4E3B\u5E94\u7528\u88AB\u5378\u8F7D\uFF0C\u90A3\u4E48\u5BF9\u5E94\u7684\u76EE\u5F55\u4E5F\u4F1A\u88AB\u5220\u6389\u3002</p><p>\u65E2\u7136\u5B58\u50A8\u5361\u5206\u4E3A\u516C\u5171\u7A7A\u95F4\u548C\u79C1\u6709\u7A7A\u95F4\u4E24\u90E8\u5206\uFF0C\u5B83\u4EEC\u7684\u7A7A\u95F4\u8DEF\u5F84\u83B7\u53D6\u4E5F\u5C31\u6709\u6240\u4E0D\u540C\u3002\u82E5\u60F3\u83B7\u53D6\u516C\u5171\u7A7A\u95F4\u7684\u5B58\u50A8\u8DEF\u5F84\uFF0C\u8C03\u7528\u7684\u662F<strong>Environment.getExternalStoragePublicDirectory</strong>\u65B9\u6CD5\uFF1B\u82E5\u60F3\u83B7\u53D6\u5E94\u7528\u79C1\u6709\u7A7A\u95F4\u7684\u5B58\u50A8\u8DEF\u5F84\uFF0C\u8C03\u7528\u7684\u662F<strong>getExternalFilesDir</strong>\u65B9\u6CD5\u3002\u4E0B\u9762\u662F\u5206\u522B\u83B7\u53D6\u4E24\u4E2A\u7A7A\u95F4\u8DEF\u5F84\u7684\u4EE3\u7801\u4F8B\u5B50\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\FilePathActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u83B7\u53D6\u7CFB\u7EDF\u7684\u516C\u5171\u5B58\u50A8\u8DEF\u5F84 </span>
<span class="token class-name">String</span> publicPath <span class="token operator">=</span>
<span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token function">getExternalStoragePublicDirectory</span><span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token constant">DIRECTORY_DOWNLOADS</span><span class="token punctuation">)</span><span class="token punctuation">.</span>t 
<span class="token function">oString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u83B7\u53D6\u5F53\u524DApp\u7684\u79C1\u6709\u5B58\u50A8\u8DEF\u5F84 </span>
<span class="token class-name">String</span> privatePath <span class="token operator">=</span>
<span class="token function">getExternalFilesDir</span><span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token constant">DIRECTORY_DOWNLOADS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">boolean</span> isLegacy <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Build</span><span class="token punctuation">.</span><span class="token constant">VERSION</span><span class="token punctuation">.</span><span class="token constant">SDK_INT</span> <span class="token operator">&gt;=</span> <span class="token class-name">Build<span class="token punctuation">.</span>VERSION_CODES<span class="token punctuation">.</span>Q</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// Android10\u7684\u5B58\u50A8\u7A7A\u95F4\u9ED8\u8BA4\u91C7\u53D6\u5206\u533A\u65B9\u5F0F\uFF0C\u6B64\u5904\u5224\u65AD\u662F\u4F20\u7EDF\u65B9\u5F0F\u8FD8\u662F\u5206\u533A\u65B9\u5F0F </span>
   isLegacy <span class="token operator">=</span> <span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token function">isExternalStorageLegacy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">String</span> desc <span class="token operator">=</span> <span class="token string">&quot;\u7CFB\u7EDF\u7684\u516C\u5171\u5B58\u50A8\u8DEF\u5F84\u4F4D\u4E8E&quot;</span> <span class="token operator">+</span> publicPath <span class="token operator">+</span> 
   <span class="token string">&quot;\\n\\n\u5F53\u524DApp\u7684\u79C1\u6709\u5B58\u50A8\u8DEF\u5F84\u4F4D\u4E8E&quot;</span> <span class="token operator">+</span> privatePath <span class="token operator">+</span> 
   <span class="token string">&quot;\\n\\nAndroid7.0\u4E4B\u540E\u9ED8\u8BA4\u7981\u6B62\u8BBF\u95EE\u516C\u5171\u5B58\u50A8\u76EE\u5F55&quot;</span> <span class="token operator">+</span>
   <span class="token string">&quot;\\n\\n\u5F53\u524DApp\u7684\u5B58\u50A8\u7A7A\u95F4\u91C7\u53D6&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>isLegacy<span class="token operator">?</span><span class="token string">&quot;\u4F20\u7EDF\u65B9\u5F0F&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5206\u533A\u65B9\u5F0F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
tv_path<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5\u4F8B\u5B50\u8FD0\u884C\u4E4B\u540E\u83B7\u5F97\u7684\u8DEF\u5F84\u4FE1\u606F\u5982\u56FE6-14\u6240\u793A\uFF0C\u53EF\u89C1\u5E94\u7528\u7684\u79C1\u6709\u7A7A\u95F4\u8DEF\u5F84\u4F4D\u4E8E\u201C\u5B58\u50A8\u5361\u6839\u76EE\u5F55/Android/data/\u5E94\u7528\u5305\u540D/files/Download\u201D\u8FD9\u4E2A\u76EE\u5F55\u4E2D\u3002</p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061803776.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:67%;"><h3 id="_6-3-2-\u5728\u5B58\u50A8\u5361\u4E0A\u8BFB\u5199\u6587\u672C\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_6-3-2-\u5728\u5B58\u50A8\u5361\u4E0A\u8BFB\u5199\u6587\u672C\u6587\u4EF6" aria-hidden="true">#</a> 6.3.2\u3000\u5728\u5B58\u50A8\u5361\u4E0A\u8BFB\u5199\u6587\u672C\u6587\u4EF6</h3><p>\u6587\u672C\u6587\u4EF6\u7684\u8BFB\u5199\u501F\u52A9\u4E8E\u6587\u4EF6IO\u6D41FileOutputStream\u548CFileInputStream\u3002\u5176\u4E2D\uFF0CFileOutputStream\u7528\u4E8E\u5199\u6587\u4EF6\uFF0CFileInputStream\u7528\u4E8E\u8BFB\u6587\u4EF6\uFF0C\u5B83\u4EEC\u8BFB\u5199\u6587\u4EF6\u7684\u4EE3\u7801\u4F8B\u5B50\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\util\\FileUtil.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u628A\u5B57\u7B26\u4E32\u4FDD\u5B58\u5230\u6307\u5B9A\u8DEF\u5F84\u7684\u6587\u672C\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">saveText</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">,</span> <span class="token class-name">String</span> txt<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
   <span class="token comment">// \u6839\u636E\u6307\u5B9A\u7684\u6587\u4EF6\u8DEF\u5F84\u6784\u5EFA\u6587\u4EF6\u8F93\u51FA\u6D41\u5BF9\u8C61</span>
   <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
       fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>txt<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u628A\u5B57\u7B26\u4E32\u5199\u5165\u6587\u4EF6\u8F93\u51FA\u6D41</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
       e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u4ECE\u6307\u5B9A\u8DEF\u5F84\u7684\u6587\u672C\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5185\u5BB9\u5B57\u7B26\u4E32</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">openText</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">String</span> readStr <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
   <span class="token comment">// \u6839\u636E\u6307\u5B9A\u7684\u6587\u4EF6\u8DEF\u5F84\u6784\u5EFA\u6587\u4EF6\u8F93\u5165\u6D41\u5BF9\u8C61</span>
   <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>fis<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
       fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u4ECE\u6587\u4EF6\u8F93\u5165\u6D41\u8BFB\u53D6\u5B57\u8282\u6570\u7EC4</span>
       readStr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u628A\u5B57\u8282\u6570\u7EC4\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
   <span class="token keyword">return</span> readStr<span class="token punctuation">;</span> <span class="token comment">// \u8FD4\u56DE\u6587\u672C\u6587\u4EF6\u4E2D\u7684\u6587\u672C\u5B57\u7B26\u4E32 </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u65B9\u5F0F\u4E8C\uFF1A\u4F7F\u7528\u5B57\u7B26\u6D41\u5B58\u50A8\u8BFB\u53D6\u6587\u4EF6</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u628A\u5B57\u7B26\u4E32\u4FDD\u5B58\u5230\u6307\u5B9A\u8DEF\u5F84\u7684\u6587\u672C\u6587\u4EF6</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">saveText</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">,</span> <span class="token class-name">String</span> txt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BufferedWriter</span> os <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>os <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u4ECE\u6307\u5B9A\u8DEF\u5F84\u7684\u6587\u672C\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5185\u5BB9\u5B57\u7B26\u4E32</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">openText</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BufferedReader</span> is <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> line <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>is <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u7740\u5206\u522B\u521B\u5EFA\u5199\u6587\u4EF6\u9875\u9762\u548C\u8BFB\u6587\u4EF6\u9875\u9762\uFF0C\u5176\u4E2D\u5199\u6587\u4EF6\u9875\u9762\u8C03\u7528saveText\u65B9\u6CD5\u4FDD\u5B58\u6587\u672C\uFF0C\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\FileWriteActivity.java\uFF1B\u800C\u8BFB\u6587\u4EF6\u9875\u9762\u8C03\u7528readText\u65B9\u6CD5\u4ECE\u6307\u5B9A\u8DEF\u5F84\u7684\u6587\u4EF6\u4E2D\u8BFB\u53D6\u6587\u672C\u5185\u5BB9\uFF0C\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\FileReadActivity.java\u3002\u7136\u540E\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u5148\u6253\u5F00\u6587\u672C\u5199\u5165\u9875\u9762\uFF0C\u5F55\u5165\u6CE8\u518C\u4FE1\u606F\u540E\u4FDD\u5B58\u4E3A\u79C1\u6709\u76EE\u5F55\u91CC\u7684\u6587\u672C\u6587\u4EF6\uFF0C\u6B64\u65F6\u5199\u5165\u754C\u9762\u5982\u56FE6-15\u6240\u793A\u3002\u518D\u6253\u5F00\u6587\u672C\u8BFB\u53D6\u9875\u9762\uFF0CApp\u81EA\u52A8\u5728\u79C1\u6709\u76EE\u5F55\u4E0B\u627E\u5230\u6587\u672C\u6587\u4EF6\u5217\u8868\uFF0C\u5E76\u5C55\u793A\u5176\u4E2D\u4E00\u4E2A\u6587\u4EF6\u7684\u6587\u672C\u5185\u5BB9\uFF0C\u6B64\u65F6\u8BFB\u53D6\u754C\u9762\u5982\u56FE6-16\u6240\u793A\u3002</p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061810868.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:67%;"><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061810074.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:67%;"><h3 id="_6-3-3-\u5728\u5B58\u50A8\u5361\u4E0A\u8BFB\u5199\u56FE\u7247\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_6-3-3-\u5728\u5B58\u50A8\u5361\u4E0A\u8BFB\u5199\u56FE\u7247\u6587\u4EF6" aria-hidden="true">#</a> 6.3.3\u3000\u5728\u5B58\u50A8\u5361\u4E0A\u8BFB\u5199\u56FE\u7247\u6587\u4EF6</h3><p>\u6587\u672C\u6587\u4EF6\u8BFB\u5199\u53EF\u4EE5\u8F6C\u6362\u4E3A\u5BF9\u5B57\u7B26\u4E32\u7684\u8BFB\u5199\uFF0C\u800C\u56FE\u7247\u6587\u4EF6\u4FDD\u5B58\u7684\u662F\u56FE\u50CF\u6570\u636E\uFF0C\u9700\u8981\u4E13\u95E8\u7684\u4F4D\u56FE\u5DE5\u5177Bitmap\u5904\u7406\u3002\u4F4D\u56FE\u5BF9\u8C61\u4F9D\u636E\u6765\u6E90\u4E0D\u540C\u53C8\u5206\u6210 3 \u79CD\u83B7\u53D6\u65B9\u5F0F\uFF0C\u5206\u522B\u5BF9\u5E94\u4F4D\u56FE\u5DE5\u5382BitmapFactory\u7684\u4E0B\u5217 3 \u79CD\u65B9\u6CD5\uFF1A</p><ul><li>decodeResource\uFF1A\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u6587\u4EF6\u4E2D\u83B7\u53D6\u4F4D\u56FE\u6570\u636E\u3002\u4F8B\u5982\u4E0B\u9762\u4EE3\u7801\u8868\u793A\u4ECE\u8D44\u6E90\u6587\u4EF6huawei.png\u83B7\u53D6\u4F4D\u56FE\u5BF9\u8C61\uFF1A</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>huawei<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>decodeFile\uFF1A\u4ECE\u6307\u5B9A\u8DEF\u5F84\u7684\u6587\u4EF6\u4E2D\u83B7\u53D6\u4F4D\u56FE\u6570\u636E\u3002\u6CE8\u610F\u4ECEAndroid 10\u5F00\u59CB\uFF0C\u8BE5\u65B9\u6CD5\u53EA\u9002\u7528\u4E8E\u79C1\u6709\u76EE\u5F55\u4E0B\u7684\u56FE\u7247\uFF0C\u4E0D\u9002\u7528\u516C\u5171\u7A7A\u95F4\u4E0B\u7684\u56FE\u7247\u3002</p></li><li><p>decodeStream\uFF1A\u4ECE\u6307\u5B9A\u7684\u8F93\u5165\u6D41\u4E2D\u83B7\u53D6\u4F4D\u56FE\u6570\u636E\u3002\u6BD4\u5982\u4F7F\u7528IO\u6D41\u6253\u5F00\u56FE\u7247\u6587\u4EF6\uFF0C\u6B64\u65F6\u6587\u4EF6\u8F93\u5165\u6D41</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4ECE\u6307\u5B9A\u8DEF\u5F84\u7684\u56FE\u7247\u6587\u4EF6\u4E2D\u8BFB\u53D6\u4F4D\u56FE\u6570\u636E</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Bitmap</span> <span class="token function">openImage</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
            bitmap <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeStream</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fis <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> bitmap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u8C61\u5373\u53EF\u4F5C\u4E3AdecodeStream\u65B9\u6CD5\u7684\u5165\u53C2\uFF0C\u76F8\u5E94\u7684\u56FE\u7247\u8BFB\u53D6\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\util\\FileUtil.java\uFF09</p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4ECE\u6307\u5B9A\u8DEF\u5F84\u7684\u56FE\u7247\u6587\u4EF6\u4E2D\u8BFB\u53D6\u4F4D\u56FE\u6570\u636E</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Bitmap</span> <span class="token function">openImage</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// \u58F0\u660E\u4E00\u4E2A\u4F4D\u56FE\u5BF9\u8C61</span>
   <span class="token comment">// \u6839\u636E\u6307\u5B9A\u7684\u6587\u4EF6\u8DEF\u5F84\u6784\u5EFA\u6587\u4EF6\u8F93\u5165\u6D41\u5BF9\u8C61</span>
   <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       bitmap <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeStream</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u4ECE\u6587\u4EF6\u8F93\u5165\u6D41\u4E2D\u89E3\u7801\u4F4D\u56FE\u6570\u636E</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
   <span class="token keyword">return</span> bitmap<span class="token punctuation">;</span> <span class="token comment">// \u8FD4\u56DE\u56FE\u7247\u6587\u4EF6\u4E2D\u7684\u4F4D\u56FE\u6570\u636E </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F97\u5230\u4F4D\u56FE\u5BF9\u8C61\u4E4B\u540E\uFF0C\u5C31\u80FD\u5728\u56FE\u50CF\u89C6\u56FE\u4E0A\u663E\u793A\u4F4D\u56FE\u3002\u56FE\u50CF\u89C6\u56FEImageView\u63D0\u4F9B\u4E86\u4E0B\u5217\u65B9\u6CD5\u663E\u793A\u5404\u79CD\u6765\u6E90\u7684\u56FE\u7247\uFF1A</p><ul><li><p>setImageResource\uFF1A\u8BBE\u7F6E\u56FE\u50CF\u89C6\u56FE\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u8BE5\u65B9\u6CD5\u7684\u5165\u53C2\u4E3A\u8D44\u6E90\u56FE\u7247\u7684\u7F16\u53F7\uFF0C\u5F62\u5982</p></li><li><p>\u201CR.drawable.\u53BB\u6389\u6269\u5C55\u540D\u7684\u56FE\u7247\u540D\u79F0\u201D\u3002</p></li><li><p>setImageBitmap\uFF1A\u8BBE\u7F6E\u56FE\u50CF\u89C6\u56FE\u7684\u4F4D\u56FE\u5BF9\u8C61\uFF0C\u8BE5\u65B9\u6CD5\u7684\u5165\u53C2\u4E3ABitmap\u7C7B\u578B\u3002</p></li><li><p>setImageURI\uFF1A\u8BBE\u7F6E\u56FE\u50CF\u89C6\u56FE\u7684\u8DEF\u5F84\u5BF9\u8C61\uFF0C\u8BE5\u65B9\u6CD5\u7684\u5165\u53C2\u4E3AUri\u7C7B\u578B\u3002\u5B57\u7B26\u4E32\u683C\u5F0F\u7684\u6587\u4EF6\u8DEF\u5F84\u53EF\u901A\u8FC7\u4EE3\u7801\u201CUri.parse(file_path)\u201D\u8F6C\u6362\u6210\u8DEF\u5F84\u5BF9\u8C61\u3002\u8BFB\u53D6\u56FE\u7247\u6587\u4EF6\u7684\u82B1\u6837\u5012\u662F\u633A\u591A\uFF0C\u628A\u4F4D\u56FE\u6570\u636E\u5199\u5165\u56FE\u7247\u6587\u4EF6\u5374\u53EA\u6709\u4E00\u79CD\uFF0C\u5373\u901A\u8FC7\u4F4D\u56FE\u5BF9\u8C61\u7684compress\u65B9\u6CD5\u5C06\u4F4D\u56FE\u6570\u636E\u538B\u7F29\u5230\u6587\u4EF6\u8F93\u51FA\u6D41\u3002\u5177\u4F53\u7684\u56FE\u7247\u5199\u5165\u4EE3\u7801\u5982\u4E0B\u6240\u793A\uFF1A</p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u628A\u4F4D\u56FE\u6570\u636E\u4FDD\u5B58\u5230\u6307\u5B9A\u8DEF\u5F84\u7684\u56FE\u7247\u6587\u4EF6</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">saveImage</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">,</span> <span class="token class-name">Bitmap</span> bitmap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// \u628A\u4F4D\u56FE\u6570\u636E\u538B\u7F29\u5230\u6587\u4EF6\u8F93\u51FA\u6D41\u4E2D</span>
            bitmap<span class="token punctuation">.</span><span class="token function">compress</span><span class="token punctuation">(</span><span class="token class-name">Bitmap<span class="token punctuation">.</span>CompressFormat</span><span class="token punctuation">.</span><span class="token constant">JPEG</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> fos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fos <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u4E0B\u6765\u5B8C\u6574\u6F14\u793A\u4E00\u904D\u56FE\u7247\u6587\u4EF6\u7684\u8BFB\u5199\u64CD\u4F5C\uFF0C\u9996\u5148\u521B\u5EFA\u56FE\u7247\u5199\u5165\u9875\u9762\uFF0C\u4ECE\u67D0\u4E2A\u8D44\u6E90\u56FE\u7247\u8BFB\u53D6\u4F4D\u56FE\u6570\u636E\uFF0C\u518D\u628A\u4F4D\u56FE\u6570\u636E\u4FDD\u5B58\u4E3A\u79C1\u6709\u76EE\u5F55\u7684\u56FE\u7247\u6587\u4EF6\uFF0C\u76F8\u5173\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\ImageWriteActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u83B7\u53D6\u5F53\u524DApp\u7684\u79C1\u6709\u4E0B\u8F7D\u76EE\u5F55</span>
<span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token function">getExternalFilesDir</span><span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token constant">DIRECTORY_DOWNLOADS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
<span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// \u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u6587\u4EF6\u4E2D\u83B7\u53D6\u4F4D\u56FE\u5BF9\u8C61</span>
<span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>huawei<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">String</span> file_path <span class="token operator">=</span> path <span class="token operator">+</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">getNowDateTime</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.jpeg&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">saveImage</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u628A\u4F4D\u56FE\u5BF9\u8C61\u4FDD\u5B58\u4E3A\u56FE\u7247\u6587\u4EF6 </span>
tv_path<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;\u56FE\u7247\u6587\u4EF6\u7684\u4FDD\u5B58\u8DEF\u5F84\u4E3A\uFF1A\\n&quot;</span> <span class="token operator">+</span> file_path<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u521B\u5EFA\u56FE\u7247\u8BFB\u53D6\u9875\u9762\uFF0C\u4ECE\u79C1\u6709\u76EE\u5F55\u627E\u5230\u56FE\u7247\u6587\u4EF6\uFF0C\u5E76\u6311\u51FA\u4E00\u5F20\u5728\u56FE\u50CF\u89C6\u56FE\u4E0A\u663E\u793A\uFF0C\u76F8\u5173\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\ImageReadActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u83B7\u53D6\u5F53\u524DApp\u7684\u79C1\u6709\u4E0B\u8F7D\u76EE\u5F55</span>
mPath <span class="token operator">=</span> <span class="token function">getExternalFilesDir</span><span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token constant">DIRECTORY_DOWNLOADS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span> 
<span class="token comment">// \u83B7\u5F97\u6307\u5B9A\u76EE\u5F55\u4E0B\u9762\u7684\u6240\u6709\u56FE\u7247\u6587\u4EF6</span>
mFilelist <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">getFileList</span><span class="token punctuation">(</span>mPath<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;.jpeg&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">if</span> <span class="token punctuation">(</span>mFilelist<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// \u6253\u5F00\u5E76\u663E\u793A\u9009\u4E2D\u7684\u56FE\u7247\u6587\u4EF6\u5185\u5BB9</span>
   <span class="token class-name">String</span> file_path <span class="token operator">=</span> mFilelist<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   tv_content<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;\u627E\u5230\u6700\u65B0\u7684\u56FE\u7247\u6587\u4EF6\uFF0C\u8DEF\u5F84\u4E3A&quot;</span><span class="token operator">+</span>file_path<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// \u663E\u793A\u5B58\u50A8\u5361\u56FE\u7247\u6587\u4EF6\u7684\u7B2C\u4E00\u79CD\u65B9\u5F0F\uFF1A\u76F4\u63A5\u8C03\u7528setImageURI\u65B9\u6CD5</span>
   <span class="token comment">//iv_content.setImageURI(Uri.parse(file_path)); // \u8BBE\u7F6E\u56FE\u50CF\u89C6\u56FE\u7684\u8DEF\u5F84\u5BF9\u8C61</span>
   <span class="token comment">// \u7B2C\u4E8C\u79CD\u65B9\u5F0F\uFF1A\u5148\u8C03\u7528BitmapFactory.decodeFile\u83B7\u5F97\u4F4D\u56FE\uFF0C\u518D\u8C03\u7528setImageBitmap\u65B9\u6CD5</span>
   <span class="token comment">//Bitmap bitmap = BitmapFactory.decodeFile(file_path);</span>
   <span class="token comment">//iv_content.setImageBitmap(bitmap); // \u8BBE\u7F6E\u56FE\u50CF\u89C6\u56FE\u7684\u4F4D\u56FE\u5BF9\u8C61</span>
   <span class="token comment">// \u7B2C\u4E09\u79CD\u65B9\u5F0F\uFF1A\u5148\u8C03\u7528FileUtil.openImage\u83B7\u5F97\u4F4D\u56FE\uFF0C\u518D\u8C03\u7528setImageBitmap\u65B9\u6CD5</span>
   <span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">openImage</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">;</span>
   iv_content<span class="token punctuation">.</span><span class="token function">setImageBitmap</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8BBE\u7F6E\u56FE\u50CF\u89C6\u56FE\u7684\u4F4D\u56FE\u5BF9\u8C61 </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u5148\u6253\u5F00\u56FE\u7247\u5199\u5165\u9875\u9762\uFF0C\u70B9\u51FB\u4FDD\u5B58\u6309\u94AE\u628A\u8D44\u6E90\u56FE\u7247\u4FDD\u5B58\u5230\u5B58\u50A8\u5361\uFF0C\u6B64\u65F6\u5199\u5165\u754C\u9762\u5982\u56FE6-17\u6240\u793A\u3002\u518D\u6253\u5F00\u56FE\u7247\u8BFB\u53D6\u9875\u9762\uFF0CApp\u81EA\u52A8\u5728\u79C1\u6709\u76EE\u5F55\u4E0B\u627E\u5230\u56FE\u7247\u6587\u4EF6\u5217\u8868\uFF0C\u5E76\u5C55\u793A\u5176\u4E2D\u4E00\u5F20\u56FE\u7247\uFF0C\u6B64\u65F6\u8BFB\u53D6\u754C\u9762\u5982\u56FE6-18\u6240\u793A\u3002</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061822363.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207061823764.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><h2 id="_6-4-\u5E94\u7528\u7EC4\u4EF6application" tabindex="-1"><a class="header-anchor" href="#_6-4-\u5E94\u7528\u7EC4\u4EF6application" aria-hidden="true">#</a> 6.4\u3000\u5E94\u7528\u7EC4\u4EF6Application</h2><p>\u672C\u8282\u4ECB\u7ECDAndroid\u91CD\u8981\u7EC4\u4EF6Application\u7684\u57FA\u672C\u6982\u5FF5\u548C\u5E38\u89C1\u7528\u6CD5\u3002\u9996\u5148\u8BF4\u660EApplication\u7684\u751F\u547D\u5468\u671F\u8D2F\u7A7F\u4E86App\u7684\u6574\u4E2A\u8FD0\u884C\u8FC7\u7A0B\uFF0C\u63A5\u7740\u5229\u7528Application\u5B9E\u73B0App\u5168\u5C40\u53D8\u91CF\u7684\u8BFB\u5199\uFF0C\u7136\u540E\u9610\u8FF0\u4E86\u5982\u4F55\u501F\u52A9App\u5B9E\u4F8B\u6765\u64CD\u4F5CRoom\u6570\u636E\u5E93\u6846\u67B6\u3002</p><h3 id="_6-4-1-application\u7684\u751F\u547D\u5468\u671F" tabindex="-1"><a class="header-anchor" href="#_6-4-1-application\u7684\u751F\u547D\u5468\u671F" aria-hidden="true">#</a> 6.4.1 Application\u7684\u751F\u547D\u5468\u671F</h3><p>Application\u662FAndroid\u7684\u4E00\u5927\u7EC4\u4EF6\uFF0C\u5728App\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u6709\u4E14\u4EC5\u6709\u4E00\u4E2AApplication\u5BF9\u8C61\u8D2F\u7A7F\u5E94\u7528\u7684\u6574\u4E2A\u751F\u547D\u5468\u671F\u3002\u6253\u5F00AndroidManifest.xml\uFF0C\u53D1\u73B0activity\u8282\u70B9\u7684\u4E0A\u7EA7\u6B63\u662Fapplication\u8282\u70B9\uFF0C\u4E0D\u8FC7\u8BE5\u8282\u70B9\u5E76\u672A\u6307\u5B9Aname\u5C5E\u6027\uFF0C\u6B64\u65F6App\u91C7\u7528\u9ED8\u8BA4\u7684Application\u5B9E\u4F8B\u3002\u6CE8\u610F\u5230\u6BCF\u4E2Aactivity\u8282\u70B9\u90FD\u6307\u5B9A\u4E86name\u5C5E\u6027\uFF0C\u8B6C\u5982\u5E38\u89C1\u7684name\u5C5E\u6027\u503C\u4E3A.MainActivity\uFF0C\u8BA9\u4EBA\u77E5\u6653\u8BE5activity\u7684\u5165\u53E3\u4EE3\u7801\u662FMainActivity.java\u3002\u73B0\u5728\u5C1D\u8BD5\u7ED9application\u8282\u70B9\u52A0\u4E0Aname\u5C5E\u6027\uFF0C\u770B\u770B\u5176\u5E90\u5C71\u771F\u9762\u76EE\uFF0C\u5177\u4F53\u6B65\u9AA4\u8BF4\u660E\u5982\u4E0B\uFF1A</p><p>\uFF08 1 \uFF09\u6253\u5F00AndroidManifest.xml\uFF0C\u7ED9application\u8282\u70B9\u52A0\u4E0Aname\u5C5E\u6027\uFF0C\u8868\u793Aapplication\u7684\u5165\u53E3\u4EE3\u7801\u662FMainApplication.java\u3002\u4FEE\u6539\u540E\u7684application\u8282\u70B9\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\AndroidManifest.xml\uFF09</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
       <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.MainApplication<span class="token punctuation">&quot;</span></span> 
       <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@mipmap/ic_launcher<span class="token punctuation">&quot;</span></span> 
       <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@string/app_name<span class="token punctuation">&quot;</span></span> 
       <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@style/AppTheme<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uFF08 2 \uFF09\u5728Java\u4EE3\u7801\u7684\u5305\u540D\u76EE\u5F55\u4E0B\u521B\u5EFAMainApplication.java\uFF0C\u8981\u6C42\u8BE5\u7C7B\u7EE7\u627FApplication\uFF0C\u7EE7\u627F\u4E4B\u540E\u53EF\u4F9B\u91CD\u5199\u7684\u65B9\u6CD5\u4E3B\u8981\u6709\u4EE5\u4E0B 3 \u4E2A\u3002</p><ul><li><p>onCreate\uFF1A\u5728App\u542F\u52A8\u65F6\u8C03\u7528\u3002</p></li><li><p>onTerminate\uFF1A\u5728App\u7EC8\u6B62\u65F6\u8C03\u7528\uFF08\u6309\u5B57\u9762\u610F\u601D\uFF09\u3002</p></li><li><p>onConfigurationChanged\uFF1A\u5728\u914D\u7F6E\u6539\u53D8\u65F6\u8C03\u7528\uFF0C\u4F8B\u5982\u4ECE\u7AD6\u5C4F\u53D8\u4E3A\u6A2A\u5C4F\u3002</p></li></ul><p>\u5149\u770B\u5B57\u9762\u610F\u601D\u7684\u8BDD\uFF0C\u4E0E\u751F\u547D\u5468\u671F\u6709\u5173\u7684\u65B9\u6CD5\u662FonCreate\u548ConTerminate\uFF0C\u90A3\u4E48\u91CD\u5199\u8FD9\u4E24\u4E2A\u65B9\u6CD5\uFF0C\u5E76\u5728\u91CD\u5199\u540E\u7684\u65B9\u6CD5\u4E2D\u6253\u5370\u65E5\u5FD7\uFF0C\u4FEE\u6539\u540E\u7684Java\u4EE3\u7801\u5982\u4E0B\u6240\u793A\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\MainApplication.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">&quot;onCreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onTerminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onTerminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">&quot;onTerminate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uFF08 3 \uFF09\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u5728logcat\u7A97\u53E3\u89C2\u5BDF\u5E94\u7528\u65E5\u5FD7\u3002\u4F46\u662F\u53EA\u5728\u542F\u52A8\u4E00\u5F00\u59CB\u770B\u5230MainApplication\u7684onCreate\u65E5\u5FD7\uFF08\u8BE5\u65E5\u5FD7\u5148\u4E8EMainActivity\u7684onCreate\u65E5\u5FD7\uFF09\uFF0C\u5374\u59CB\u7EC8\u65E0\u6CD5\u770B\u5230\u5B83\u7684onTerminate\u65E5\u5FD7\uFF0C\u65E0\u8BBA\u662F\u81EA\u884C\u9000\u51FAApp\u8FD8\u662F\u5F3A\u884C\u6740\u6389App\uFF0C\u65E5\u5FD7\u90FD\u4E0D\u4F1A\u6253\u5370onTerminate\u3002\u65E0\u8BBA\u4F60\u600E\u4E48\u6298\u817E\uFF0C\u8FD9\u4E2AonTerminate\u65E5\u5FD7\u90FD\u4E0D\u4F1A\u51FA\u6765\u3002Android\u660E\u660E\u63D0\u4F9B\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u540C\u65F6\u63D0\u4F9B\u4E86\u5173\u4E8E\u8BE5\u65B9\u6CD5\u7684\u89E3\u91CA\uFF0C\u8BF4\u660E\u6587\u5B57\u5982\u4E0B\uFF1AThis method is for use in emulated process environments\uFF0EIt will never be called on a production Android device, where processes are removed by simply killing them; no user code (including this callback) is executed when doing so\u3002\u8FD9\u6BB5\u8BDD\u7684\u610F\u601D\u662F\uFF1A\u8BE5\u65B9\u6CD5\u4F9B\u6A21\u62DF\u73AF\u5883\u4F7F\u7528\uFF0C\u5B83\u5728\u771F\u673A\u4E0A\u6C38\u8FDC\u4E0D\u4F1A\u88AB\u8C03\u7528\uFF0C\u65E0\u8BBA\u662F\u76F4\u63A5\u6740\u8FDB\u7A0B\u8FD8\u662F\u4EE3\u7801\u9000\u51FA\uFF1B\u6267\u884C\u8BE5\u64CD\u4F5C\u65F6\uFF0C\u4E0D\u4F1A\u6267\u884C\u4EFB\u4F55\u7528\u6237\u4EE3\u7801\u3002\u73B0\u5728\u5F88\u660E\u786E\u4E86\uFF0ConTerminate\u65B9\u6CD5\u5C31\u662F\u4E2A\u6446\u8BBE\uFF0C\u4E2D\u770B\u4E0D\u4E2D\u7528\u3002\u5982\u679C\u8BFB\u8005\u60F3\u5728App\u9000\u51FA\u524D\u56DE\u6536\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u5C31\u4E0D\u80FD\u6307\u671BonTerminate\u65B9\u6CD5\u7684\u56DE\u8C03\u4E86\u3002</p><h3 id="_6-4-2-application\u64CD\u4F5C\u5168\u5C40\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#_6-4-2-application\u64CD\u4F5C\u5168\u5C40\u53D8\u91CF" aria-hidden="true">#</a> 6.4.2 Application\u64CD\u4F5C\u5168\u5C40\u53D8\u91CF</h3><p>C/C++\u6709\u5168\u5C40\u53D8\u91CF\u7684\u6982\u5FF5\uFF0C\u56E0\u4E3A\u5168\u5C40\u53D8\u91CF\u4FDD\u5B58\u5728\u5185\u5B58\u4E2D\uFF0C\u6240\u4EE5\u64CD\u4F5C\u5168\u5C40\u53D8\u91CF\u5C31\u662F\u64CD\u4F5C\u5185\u5B58\uFF0C\u663E\u7136\u5185\u5B58\u7684\u8BFB\u5199\u901F\u5EA6\u8FDC\u6BD4\u8BFB\u5199\u6570\u636E\u5E93\u6216\u8BFB\u5199\u6587\u4EF6\u5FEB\u5F97\u591A\u3002\u6240\u8C13\u5168\u5C40\uFF0C\u6307\u7684\u662F\u5176\u4ED6\u4EE3\u7801\u90FD\u53EF\u4EE5\u5F15\u7528\u8BE5\u53D8\u91CF\uFF0C\u56E0\u6B64\u5168\u5C40\u53D8\u91CF\u662F\u5171\u4EAB\u6570\u636E\u548C\u6D88\u606F\u4F20\u9012\u7684\u597D\u5E2E\u624B\u3002\u4E0D\u8FC7Java\u6CA1\u6709\u5168\u5C40\u53D8\u91CF\u7684\u6982\u5FF5\uFF0C\u4E0E\u4E4B\u6BD4\u8F83\u63A5\u8FD1\u7684\u662F\u7C7B\u91CC\u9762\u7684\u9759\u6001\u6210\u5458\u53D8\u91CF\uFF0C\u8BE5\u53D8\u91CF\u4E0D\u4F46\u80FD\u88AB\u5916\u90E8\u76F4\u63A5\u5F15\u7528\uFF0C\u800C\u4E14\u5B83\u5728\u4E0D\u540C\u5730\u65B9\u5F15\u7528\u7684\u503C\u662F\u4E00\u6837\u7684\uFF08\u524D\u63D0\u662F\u5728\u5F15\u7528\u671F\u95F4\u4E0D\u80FD\u6539\u52A8\u53D8\u91CF\u503C\uFF09\uFF0C\u6240\u4EE5\u501F\u52A9\u9759\u6001\u6210\u5458\u53D8\u91CF\u4E5F\u80FD\u5B9E\u73B0\u7C7B\u4F3C\u5168\u5C40\u53D8\u91CF\u7684\u529F\u80FD\u3002\u6839\u636E\u4E0A\u4E00\u5C0F\u8282\u7684\u4ECB\u7ECD\u53EF\u77E5\uFF0CApplication\u7684\u751F\u547D\u5468\u671F\u8986\u76D6\u4E86App\u8FD0\u884C\u7684\u5168\u8FC7\u7A0B\u3002\u4E0D\u50CF\u77ED\u6682\u7684Activity\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u9000\u51FA\u8BE5\u9875\u9762\uFF0CActivity\u5B9E\u4F8B\u5C31\u88AB\u9500\u6BC1\u3002\u56E0\u6B64\uFF0C\u5229\u7528Application\u7684\u5168\u751F\u547D\u7279\u6027\uFF0C\u80FD\u591F\u5728Application\u5B9E\u4F8B\u4E2D\u4FDD\u5B58\u5168\u5C40\u53D8\u91CF\u3002</p><p>\u9002\u5408\u5728Application\u4E2D\u4FDD\u5B58\u7684\u5168\u5C40\u53D8\u91CF\u4E3B\u8981\u6709\u4E0B\u9762 3 \u7C7B\u6570\u636E\uFF1A</p><p>\uFF08 1 \uFF09\u4F1A\u9891\u7E41\u8BFB\u53D6\u7684\u4FE1\u606F\uFF0C\u4F8B\u5982\u7528\u6237\u540D\u3001\u624B\u673A\u53F7\u7801\u7B49\u3002</p><p>\uFF08 2 \uFF09\u4E0D\u65B9\u4FBF\u7531\u610F\u56FE\u4F20\u9012\u7684\u6570\u636E\uFF0C\u4F8B\u5982\u4F4D\u56FE\u5BF9\u8C61\u3001\u975E\u5B57\u7B26\u4E32\u7C7B\u578B\u7684\u96C6\u5408\u5BF9\u8C61\u7B49\u3002</p><p>\uFF08 3 \uFF09\u5BB9\u6613\u56E0\u9891\u7E41\u5206\u914D\u5185\u5B58\u800C\u5BFC\u81F4\u5185\u5B58\u6CC4\u6F0F\u7684\u5BF9\u8C61\uFF0C\u4F8B\u5982Handler\u5904\u7406\u5668\u5B9E\u4F8B\u7B49\u3002</p><p>\u8981\u60F3\u901A\u8FC7Application\u5B9E\u73B0\u5168\u5C40\u5185\u5B58\u7684\u8BFB\u5199\uFF0C\u5F97\u5B8C\u6210\u4EE5\u4E0B 3 \u9879\u5DE5\u4F5C\uFF1A</p><p>\uFF08 1 \uFF09\u7F16\u5199\u4E00\u4E2A\u7EE7\u627F\u81EAApplication\u7684\u65B0\u7C7BMainApplication\u3002\u8BE5\u7C7B\u91C7\u7528\u5355\u4F8B\u6A21\u5F0F\uFF0C\u5185\u90E8\u5148\u58F0\u660E\u81EA\u8EAB\u7C7B\u7684\u4E00\u4E2A\u9759\u6001\u6210\u5458\u5BF9\u8C61\uFF0C\u5728\u521B\u5EFAApp\u65F6\u628A\u81EA\u8EAB\u8D4B\u503C\u7ED9\u8FD9\u4E2A\u9759\u6001\u5BF9\u8C61\uFF0C\u7136\u540E\u63D0\u4F9B\u8BE5\u5BF9\u8C61\u7684\u83B7\u53D6\u65B9\u6CD5getInstance\u3002</p><p>\u5177\u4F53\u5B9E\u73B0\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\MainApplication.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token constant">TAG</span> <span class="token operator">=</span> <span class="token string">&quot;MainApplication&quot;</span><span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">MainApplication</span> mApp<span class="token punctuation">;</span> <span class="token comment">// \u58F0\u660E\u4E00\u4E2A\u5F53\u524D\u5E94\u7528\u7684\u9759\u6001\u5B9E\u4F8B</span>
   <span class="token comment">// \u58F0\u660E\u4E00\u4E2A\u516C\u5171\u7684\u4FE1\u606F\u6620\u5C04\u5BF9\u8C61\uFF0C\u53EF\u5F53\u4F5C\u5168\u5C40\u53D8\u91CF\u4F7F\u7528</span>
   <span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> infoMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// \u5229\u7528\u5355\u4F8B\u6A21\u5F0F\u83B7\u53D6\u5F53\u524D\u5E94\u7528\u7684\u552F\u4E00\u5B9E\u4F8B</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">MainApplication</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> mApp<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">&quot;onCreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       mApp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// \u5728\u6253\u5F00\u5E94\u7528\u65F6\u5BF9\u9759\u6001\u7684\u5E94\u7528\u5B9E\u4F8B\u8D4B\u503C</span>
 <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uFF08 2 \uFF09\u5728\u6D3B\u52A8\u9875\u9762\u4EE3\u7801\u4E2D\u8C03\u7528MainApplication\u7684getInstance\u65B9\u6CD5\uFF0C\u83B7\u5F97\u5B83\u7684\u4E00\u4E2A\u9759\u6001\u5BF9\u8C61\uFF0C\u518D\u901A\u8FC7\u8BE5\u5BF9\u8C61\u8BBF\u95EEMainApplication\u7684\u516C\u5171\u53D8\u91CF\u548C\u516C\u5171\u65B9\u6CD5\u3002</p><p>\uFF08 3 \uFF09\u4E0D\u8981\u5FD8\u4E86\u5728AndroidManifest.xml\u4E2D\u6CE8\u518C\u65B0\u5B9A\u4E49\u7684Application\u7C7B\u540D\uFF0C\u4E5F\u5C31\u662F\u7ED9application\u8282\u70B9\u589E\u52A0android:name\u5C5E\u6027\uFF0C\u5176\u503C\u4E3A.MainApplication\u3002\u63A5\u4E0B\u6765\u6F14\u793A\u5982\u4F55\u8BFB\u5199\u5185\u5B58\u4E2D\u7684\u5168\u5C40\u53D8\u91CF\uFF0C\u9996\u5148\u5206\u522B\u521B\u5EFA\u5199\u5185\u5B58\u9875\u9762\u548C\u8BFB\u5185\u5B58\u9875\u9762\uFF0C\u5176\u4E2D\u5199\u5185\u5B58\u9875\u9762\u628A\u7528\u6237\u7684\u6CE8\u518C\u4FE1\u606F\u4FDD\u5B58\u5230\u5168\u5C40\u53D8\u91CFinfoMap\uFF0C\u5B8C\u6574\u4EE3\u7801\u89C1 chapter06\\src\\main\\java\\com\\example\\chapter06\\AppWriteActivity.java\uFF1B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> name <span class="token operator">=</span> et_name<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> age <span class="token operator">=</span> et_age<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> height <span class="token operator">=</span> et_height<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> weight <span class="token operator">=</span> et_weight<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app <span class="token operator">=</span> <span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;weight&quot;</span><span class="token punctuation">,</span> weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;married&quot;</span><span class="token punctuation">,</span> ck_married<span class="token punctuation">.</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;\u662F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5426&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u800C\u8BFB\u5185\u5B58\u9875\u9762\u4ECE\u5168\u5C40\u53D8\u91CFinfoMap\u8BFB\u53D6\u7528\u6237\u7684\u6CE8\u518C\u4FE1\u606F\uFF0C\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\AppReadActivity.java\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> age <span class="token operator">=</span> app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> height <span class="token operator">=</span> app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> weight <span class="token operator">=</span> app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;weight&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> married <span class="token operator">=</span> app<span class="token punctuation">.</span>infoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;married&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        et_name<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        et_age<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        et_height<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        et_weight<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;\u662F&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>married<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ck_married<span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            ck_married<span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u5148\u6253\u5F00\u5185\u5B58\u5199\u5165\u9875\u9762\uFF0C\u5F55\u5165\u6CE8\u518C\u4FE1\u606F\u540E\u4FDD\u5B58\u81F3\u5168\u5C40\u53D8\u91CF\uFF0C\u6B64\u65F6\u5199\u5165\u754C\u9762\u5982\u56FE6-19\u6240\u793A\u3002\u518D\u6253\u5F00\u5185\u5B58\u8BFB\u53D6\u9875\u9762\uFF0CApp\u81EA\u52A8\u4ECE\u5168\u5C40\u53D8\u91CF\u83B7\u53D6\u6CE8\u518C\u4FE1\u606F\uFF0C\u5E76\u5C55\u793A\u62FC\u63A5\u540E\u7684\u4FE1\u606F\u6587\u672C\uFF0C\u6B64\u65F6\u8BFB\u53D6\u754C\u9762\u5982\u56FE6-20\u6240\u793A\u3002</p><h3 id="_6-4-3-\u5229\u7528room\u7B80\u5316\u6570\u636E\u5E93\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_6-4-3-\u5229\u7528room\u7B80\u5316\u6570\u636E\u5E93\u64CD\u4F5C" aria-hidden="true">#</a> 6.4.3\u3000\u5229\u7528Room\u7B80\u5316\u6570\u636E\u5E93\u64CD\u4F5C</h3><p>\u867D\u7136Android\u63D0\u4F9B\u4E86\u6570\u636E\u5E93\u5E2E\u52A9\u5668\uFF0C\u4F46\u662F\u5F00\u53D1\u8005\u5728\u8FDB\u884C\u6570\u636E\u5E93\u7F16\u7A0B\u65F6\u4ECD\u6709\u8BF8\u591A\u4E0D\u4FBF\uFF0C\u6BD4\u5982\u6BCF\u6B21\u589E\u52A0\u4E00\u5F20\u65B0\u8868\uFF0C\u5F00\u53D1\u8005\u90FD\u5F97\u624B\u5DE5\u5B9E\u73B0\u4EE5\u4E0B\u4EE3\u7801\u903B\u8F91\uFF1A</p><p>\uFF08 1 \uFF09\u91CD\u5199\u6570\u636E\u5E93\u5E2E\u52A9\u5668\u7684onCreate\u65B9\u6CD5\uFF0C\u6DFB\u52A0\u8BE5\u8868\u7684\u5EFA\u8868\u8BED\u53E5\u3002</p><p>\uFF08 2 \uFF09\u5728\u63D2\u5165\u8BB0\u5F55\u4E4B\u65F6\uFF0C\u5FC5\u987B\u5C06\u6570\u636E\u5B9E\u4F8B\u7684\u5C5E\u6027\u503C\u9010\u4E00\u8D4B\u7ED9\u8BE5\u8868\u7684\u5404\u5B57\u6BB5\u3002</p><p>\uFF08 3 \uFF09\u5728\u67E5\u8BE2\u8BB0\u5F55\u4E4B\u65F6\uFF0C\u5FC5\u987B\u904D\u5386\u7ED3\u679C\u96C6\u6E38\u6807\uFF0C\u628A\u5404\u5B57\u6BB5\u503C\u9010\u4E00\u8D4B\u7ED9\u6570\u636E\u5B9E\u4F8B\u3002</p><p>\uFF08 4 \uFF09\u6BCF\u6B21\u8BFB\u5199\u64CD\u4F5C\u4E4B\u524D\uFF0C\u90FD\u8981\u5148\u5F00\u542F\u6570\u636E\u5E93\u8FDE\u63A5\uFF1B\u8BFB\u5199\u64CD\u4F5C\u4E4B\u540E\uFF0C\u53C8\u8981\u5173\u95ED\u6570\u636E\u5E93\u8FDE\u63A5\u3002</p><p>\u4E0A\u8FF0\u7684\u5904\u7406\u64CD\u4F5C\u65E0\u7591\u5B58\u5728\u4E0D\u5C11\u91CD\u590D\u52B3\u52A8\uFF0C\u6570\u5E74\u6765\u5F15\u5F97\u5F00\u53D1\u8005\u53EB\u82E6\u8FDE\u8FDE\u3002\u4E3A\u6B64\u5404\u7C7B\u6570\u636E\u5E93\u5904\u7406\u6846\u67B6\u7EB7\u7EB7\u6D8C\u73B0\uFF0C\u5305\u62ECGreenDao\u3001OrmLite\u3001Realm\u7B49\uFF0C\u53EF\u8C13\u767E\u82B1\u9F50\u653E\u3002\u773C\u89C1SQLite\u6E10\u6E10\u4E4F\u4EBA\u95EE\u6D25\uFF0C\u8C37\u6B4C\u516C\u53F8\u5E72\u8106\u6574\u4E86\u4E2A\u81EA\u5DF1\u7684\u6570\u636E\u5E93\u6846\u67B6\u2014Room\uFF0C\u8BE5\u6846\u67B6\u540C\u6837\u57FA\u4E8ESQLite\uFF0C\u4F46\u5B83\u901A\u8FC7\u6CE8\u89E3\u6280\u672F\u6781\u5927\u5730\u7B80\u5316\u4E86\u6570\u636E\u5E93\u64CD\u4F5C\uFF0C\u51CF\u5C11\u4E86\u539F\u6765\u76F8\u5F53\u4E00\u90E8\u5206\u7F16\u7801\u5DE5\u4F5C\u91CF\u3002\u7531\u4E8ERoom\u5E76\u672A\u96C6\u6210\u5230SDK\u4E2D\uFF0C\u800C\u662F\u4F5C\u4E3A\u7B2C\u4E09\u65B9\u6846\u67B6\u63D0\u4F9B\uFF0C\u56E0\u6B64\u8981\u4FEE\u6539\u6A21\u5757\u7684build.gradle\u6587\u4EF6\uFF0C\u5F80dependencies\u8282\u70B9\u6DFB\u52A0\u4E0B\u9762\u4E24\u884C\u914D\u7F6E\uFF0C\u8868\u793A\u5BFC\u5165\u6307\u5B9A\u7248\u672C\u7684Room\u5E93\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code>implementation <span class="token string">&#39;androidx.room:room-runtime:2.2.5&#39;</span> 
annotationProcessor <span class="token string">&#39;androidx.room:room-compiler:2.2.5&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BFC\u5165Room\u5E93\u4E4B\u540E\uFF0C\u8FD8\u8981\u7F16\u5199\u82E5\u5E72\u5BF9\u5E94\u7684\u4EE3\u7801\u6587\u4EF6\u3002\u4EE5\u5F55\u5165\u56FE\u4E66\u4FE1\u606F\u4E3A\u4F8B\uFF0C\u6B64\u65F6\u8981\u5BF9\u56FE\u4E66\u4FE1\u606F\u8868\u8FDB\u884C\u589E\u5220\u6539\u67E5\uFF0C\u5219\u5177\u4F53\u7684\u7F16\u7801\u8FC7\u7A0B\u5206\u4E3A\u4E0B\u5217 5 \u4E2A\u6B65\u9AA4\uFF1A</p><p><strong>1 \uFF0E\u7F16\u5199\u56FE\u4E66\u4FE1\u606F\u8868\u5BF9\u5E94\u7684\u5B9E\u4F53\u7C7B</strong></p><p>\u5047\u8BBE\u56FE\u4E66\u4FE1\u606F\u7C7B\u540D\u4E3ABookInfo\uFF0C\u4E14\u5B83\u7684\u5404\u5C5E\u6027\u4E0E\u56FE\u4E66\u4FE1\u606F\u8868\u7684\u5404\u5B57\u6BB5\u4E00\u4E00\u5BF9\u5E94\uFF0C\u90A3\u4E48\u8981\u7ED9\u8BE5\u7C7B\u6DFB\u52A0\u201C@Entity\u201D\u6CE8\u89E3\uFF0C\u8868\u793A\u8BE5\u7C7B\u662FRoom\u4E13\u7528\u7684\u6570\u636E\u7C7B\u578B\uFF0C\u5BF9\u5E94\u7684\u8868\u540D\u79F0\u4E5F\u53EBBookInfo\u3002\u5982\u679CBookInfo\u8868\u7684name\u5B57\u6BB5\u662F\u8BE5\u8868\u7684\u4E3B\u952E\uFF0C\u5219\u9700\u7ED9BookInfo\u7C7B\u7684name\u5C5E\u6027\u6DFB\u52A0\u201C@PrimaryKey\u201D\u4E0E\u201C@NonNull\u201D\u4E24\u4E2A\u6CE8\u89E3\uFF0C\u8868\u793A\u8BE5\u5B57\u6BB5\u662F\u4E2A\u975E\u7A7A\u7684\u4E3B\u952E\u3002\u4E0B\u9762\u662FBookInfo\u7C7B\u7684\u5B9A\u4E49\u4EE3\u7801\u4F8B\u5B50\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\entity\\BookInfo.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u4E66\u7C4D\u4FE1\u606F</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookInfo</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@PrimaryKey</span><span class="token punctuation">(</span>autoGenerate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span> <span class="token comment">// \u4E66\u7C4D\u540D\u79F0</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> author<span class="token punctuation">;</span> <span class="token comment">// \u4F5C\u8005</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> press<span class="token punctuation">;</span> <span class="token comment">// \u51FA\u7248\u793E</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> price<span class="token punctuation">;</span> <span class="token comment">// \u4EF7\u683C</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> author<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token class-name">String</span> author<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> press<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPress</span><span class="token punctuation">(</span><span class="token class-name">String</span> press<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>press <span class="token operator">=</span> press<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">double</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;BookInfo{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">&quot;, name=&#39;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, author=&#39;&quot;</span> <span class="token operator">+</span> author <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, press=&#39;&quot;</span> <span class="token operator">+</span> press <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, price=&quot;</span> <span class="token operator">+</span> price <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2 \uFF0E\u7F16\u5199\u56FE\u4E66\u4FE1\u606F\u8868\u5BF9\u5E94\u7684\u6301\u4E45\u5316\u7C7B</strong></p><p>\u6240\u8C13\u6301\u4E45\u5316\uFF0C\u6307\u7684\u662F\u5C06\u6570\u636E\u4FDD\u5B58\u5230\u78C1\u76D8\u800C\u975E\u5185\u5B58\uFF0C\u5176\u5B9E\u7B49\u540C\u4E8E\u589E\u5220\u6539\u7B49SQL\u8BED\u53E5\u3002\u5047\u8BBE\u56FE\u4E66\u4FE1\u606F\u8868\u7684\u6301\u4E45\u5316\u7C7B\u540D\u53EB\u4F5CBookDao\uFF0C\u90A3\u4E48\u8BE5\u7C7B\u5FC5\u987B\u6DFB\u52A0\u201C@Dao\u201D\u6CE8\u89E3\uFF0C\u5185\u90E8\u7684\u8BB0\u5F55\u67E5\u8BE2\u65B9\u6CD5\u5FC5\u987B\u6DFB\u52A0\u201C@Query\u201D\u6CE8\u89E3\uFF0C\u8BB0\u5F55\u63D2\u5165\u65B9\u6CD5\u5FC5\u987B\u6DFB\u52A0\u201C@Insert\u201D\u6CE8\u89E3\uFF0C\u8BB0\u5F55\u66F4\u65B0\u65B9\u6CD5\u5FC5\u987B\u6DFB\u52A0\u201C@Update\u201D\u6CE8\u89E3\uFF0C\u8BB0\u5F55\u5220\u9664\u65B9\u6CD5\u5FC5\u987B\u6DFB\u52A0\u201C@Delete\u201D\u6CE8\u89E3\uFF08\u5E26\u6761\u4EF6\u7684\u5220\u9664\u65B9\u6CD5\u9664\u5916\uFF09\u3002\u5BF9\u4E8E\u8BB0\u5F55\u67E5\u8BE2\u65B9\u6CD5\uFF0C\u5141\u8BB8\u5728@Query\u4E4B\u540E\u8865\u5145\u5177\u4F53\u7684\u67E5\u8BE2\u8BED\u53E5\u4EE5\u53CA\u67E5\u8BE2\u6761\u4EF6\uFF1B\u5BF9\u4E8E\u8BB0\u5F55\u63D2\u5165\u65B9\u6CD5\u4E0E\u8BB0\u5F55\u66F4\u65B0\u65B9\u6CD5\uFF0C\u9700\u660E\u786E\u51FA\u73B0\u91CD\u590D\u8BB0\u5F55\u65F6\u8981\u91C7\u53D6\u54EA\u79CD\u5904\u7406\u7B56\u7565\u3002\u4E0B\u9762\u662FBookDao\u7C7B\u7684\u5B9A\u4E49\u4EE3\u7801\u4F8B\u5B50\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\dao\\BookDao.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Dao</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Insert</span>
    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">BookInfo</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> book<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Delete</span>
    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">BookInfo</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> book<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u5220\u9664\u6240\u6709\u4E66\u7C4D\u4FE1\u606F</span>
    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;DELETE FROM BookInfo&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Update</span>
    <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">BookInfo</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> book<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u52A0\u8F7D\u6240\u6709\u4E66\u7C4D\u4FE1\u606F</span>
    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM BookInfo&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BookInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u6839\u636E\u540D\u5B57\u52A0\u8F7D\u4E66\u7C4D</span>
    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM BookInfo WHERE name = :name ORDER BY id DESC limit 1&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">BookInfo</span> <span class="token function">queryByName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3 \uFF0E\u7F16\u5199\u56FE\u4E66\u4FE1\u606F\u8868\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u7C7B</strong></p><p>\u56E0\u4E3A\u5148\u6709\u6570\u636E\u5E93\u7136\u540E\u624D\u6709\u8868\uFF0C\u6240\u4EE5\u56FE\u4E66\u4FE1\u606F\u8868\u8FD8\u5F97\u653E\u5230\u67D0\u4E2A\u6570\u636E\u5E93\u91CC\uFF0C\u8FD9\u4E2A\u9ED8\u8BA4\u7684\u56FE\u4E66\u6570\u636E\u5E93\u8981\u4ECERoomDatabase\u6D3E\u751F\u800C\u6765\uFF0C\u5E76\u6DFB\u52A0\u201C@Database\u201D\u6CE8\u89E3\u3002\u4E0B\u9762\u662F\u6570\u636E\u5E93\u7C7BBookDatabase\u7684\u5B9A\u4E49\u4EE3\u7801\u4F8B\u5B50\uFF1A \uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\database\\BookDatabase.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//entities\u8868\u793A\u8BE5\u6570\u636E\u5E93\u6709\u54EA\u4E9B\u8868\uFF0Cversion\u8868\u793A\u6570\u636E\u5E93\u7684\u7248\u672C\u53F7</span>
<span class="token comment">//exportSchema\u8868\u793A\u662F\u5426\u5BFC\u51FA\u6570\u636E\u5E93\u4FE1\u606F\u7684json\u4E32\uFF0C\u5EFA\u8BAE\u8BBE\u4E3Afalse\uFF0C\u82E5\u8BBE\u4E3Atrue\u8FD8\u9700\u6307\u5B9Ajson\u6587\u4EF6\u7684\u4FDD\u5B58\u8DEF\u5F84</span>
<span class="token annotation punctuation">@Database</span><span class="token punctuation">(</span>entities <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">BookInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> exportSchema <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BookDatabase</span> <span class="token keyword">extends</span> <span class="token class-name">RoomDatabase</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u83B7\u53D6\u8BE5\u6570\u636E\u5E93\u4E2D\u67D0\u5F20\u8868\u7684\u6301\u4E45\u5316\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">BookDao</span> <span class="token function">bookDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4 \uFF0E\u5728\u81EA\u5B9A\u4E49\u7684Application\u7C7B\u4E2D\u58F0\u660E\u56FE\u4E66\u6570\u636E\u5E93\u7684\u552F\u4E00\u5B9E\u4F8B</strong></p><p>\u4E3A\u4E86\u907F\u514D\u91CD\u590D\u6253\u5F00\u6570\u636E\u5E93\u9020\u6210\u7684\u5185\u5B58\u6CC4\u6F0F\u95EE\u9898\uFF0C\u6BCF\u4E2A\u6570\u636E\u5E93\u5728App\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u7406\u5E94\u53EA\u6709\u4E00\u4E2A\u5B9E\u4F8B\uFF0C\u6B64\u65F6\u8981\u6C42\u5F00\u53D1\u8005\u81EA\u5B9A\u4E49\u65B0\u7684Application\u7C7B\uFF0C\u5728\u8BE5\u7C7B\u4E2D\u58F0\u660E\u5E76\u83B7\u53D6\u56FE\u4E66\u6570\u636E\u5E93\u7684\u5B9E\u4F8B\uFF0C\u5E76\u5C06\u81EA\u5B9A\u4E49\u7684Application\u7C7B\u8BBE\u4E3A\u5355\u4F8B\u6A21\u5F0F\uFF0C\u4FDD\u8BC1App\u8FD0\u884C\u4E4B\u65F6\u6709\u4E14\u4EC5\u6709\u4E00\u4E2A\u5E94\u7528\u5B9E\u4F8B\u3002\u4E0B\u9762\u662F\u81EA\u5B9A\u4E49Application\u7C7B\u7684\u4EE3\u7801\u4F8B\u5B50\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\MainApplication.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token constant">TAG</span> <span class="token operator">=</span> <span class="token string">&quot;MainApplication&quot;</span><span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">MainApplication</span> mApp<span class="token punctuation">;</span> <span class="token comment">// \u58F0\u660E\u4E00\u4E2A\u5F53\u524D\u5E94\u7528\u7684\u9759\u6001\u5B9E\u4F8B</span>
   <span class="token keyword">private</span> <span class="token class-name">BookDatabase</span> bookDatabase<span class="token punctuation">;</span> <span class="token comment">// \u58F0\u660E\u4E00\u4E2A\u4E66\u7C4D\u6570\u636E\u5E93\u5BF9\u8C61</span>
   <span class="token comment">// \u5229\u7528\u5355\u4F8B\u6A21\u5F0F\u83B7\u53D6\u5F53\u524D\u5E94\u7528\u7684\u552F\u4E00\u5B9E\u4F8B</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">MainApplication</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> mApp<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">&quot;onCreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       mApp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// \u5728\u6253\u5F00\u5E94\u7528\u65F6\u5BF9\u9759\u6001\u7684\u5E94\u7528\u5B9E\u4F8B\u8D4B\u503C</span>
       <span class="token comment">// \u6784\u5EFA\u4E66\u7C4D\u6570\u636E\u5E93\u7684\u5B9E\u4F8B</span>
       bookDatabase <span class="token operator">=</span> <span class="token class-name">Room</span><span class="token punctuation">.</span><span class="token function">databaseBuilder</span><span class="token punctuation">(</span>mApp<span class="token punctuation">,</span> <span class="token class-name">BookDatabase</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">addMigrations</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// \u5141\u8BB8\u8FC1\u79FB\u6570\u636E\u5E93\uFF08\u53D1\u751F\u6570\u636E\u5E93\u53D8\u66F4\u65F6\uFF0CRoom\u9ED8\u8BA4\u5220\u9664\u539F\u6570\u636E\u5E93\u518D\u521B\u5EFA\u65B0\u6570\u636E\u5E93\u3002\u5982\u6B64\u4E00\u6765\u539F\u6765\u7684\u8BB0\u5F55\u4F1A\u4E22\u5931\uFF0C\u6545\u800C\u8981\u6539\u4E3A\u8FC1\u79FB\u65B9\u5F0F\u4EE5\u4FBF\u4FDD\u5B58\u539F\u6709\u8BB0\u5F55\uFF09</span>
              <span class="token punctuation">.</span><span class="token function">allowMainThreadQueries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// \u5141\u8BB8\u5728\u4E3B\u7EBF\u7A0B\u4E2D\u64CD\u4F5C\u6570\u636E\u5E93\uFF08Room\u9ED8\u8BA4\u4E0D\u80FD\u5728\u4E3B\u7EBF\u7A0B\u4E2D\u64CD\u4F5C\u6570\u636E\u5E93\uFF09</span>
              <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span>
   <span class="token comment">// \u83B7\u53D6\u4E66\u7C4D\u6570\u636E\u5E93\u7684\u5B9E\u4F8B</span>
   <span class="token keyword">public</span> <span class="token class-name">BookDatabase</span> <span class="token function">getBookDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
       <span class="token keyword">return</span> bookDatabase<span class="token punctuation">;</span>
 <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5 \uFF0E\u5728\u64CD\u4F5C\u56FE\u4E66\u4FE1\u606F\u8868\u7684\u5730\u65B9\u83B7\u53D6\u6570\u636E\u8868\u7684\u6301\u4E45\u5316\u5BF9\u8C61</strong></p><p>\u6301\u4E45\u5316\u5BF9\u8C61\u7684\u83B7\u53D6\u4EE3\u7801\u5F88\u7B80\u5355\uFF0C\u53EA\u9700\u4E0B\u9762\u4E00\u884C\u4EE3\u7801\u5C31\u591F\u4E86\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4ECEApp\u5B9E\u4F8B\u4E2D\u83B7\u53D6\u552F\u4E00\u7684\u56FE\u4E66\u6301\u4E45\u5316\u5BF9\u8C61</span>
<span class="token class-name">BookDao</span> bookDao <span class="token operator">=</span> <span class="token class-name">MainApplication</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBookDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bookDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B8C\u6210\u4EE5\u4E0A 5 \u4E2A\u7F16\u7801\u6B65\u9AA4\u4E4B\u540E\uFF0C\u63A5\u7740\u8C03\u7528\u6301\u4E45\u5316\u5BF9\u8C61\u7684queryXXX\u3001insertXXX\u3001updateXXX\u3001deleteXXX\u7B49\u65B9\u6CD5\uFF0C\u5C31\u80FD\u5B9E\u73B0\u56FE\u4E66\u4FE1\u606F\u7684\u589E\u5220\u6539\u67E5\u64CD\u4F5C\u4E86\u3002\u4F8B\u7A0B\u7684\u56FE\u4E66\u4FE1\u606F\u6F14\u793A\u9875\u9762\u6709\u4E24\u4E2A\uFF0C\u5206\u522B\u662F\u8BB0\u5F55\u4FDD\u5B58\u9875\u9762\u548C\u8BB0\u5F55\u8BFB\u53D6\u9875\u9762\uFF0C\u5176\u4E2D\u8BB0\u5F55\u4FDD\u5B58\u9875\u9762\u901A\u8FC7insertOneBook\u65B9\u6CD5\u5411\u6570\u636E\u5E93\u6DFB\u52A0\u56FE\u4E66\u4FE1\u606F\uFF0C\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\RoomWriteActivity.java\uFF1B\u800C\u8BB0\u5F55\u8BFB\u53D6\u9875\u9762\u901A\u8FC7queryAllBook\u65B9\u6CD5\u4ECE\u6570\u636E\u5E93\u8BFB\u53D6\u56FE\u4E66\u4FE1\u606F\uFF0C\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\RoomReadActivity.java\u3002</p><p>\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u5148\u6253\u5F00\u8BB0\u5F55\u4FDD\u5B58\u9875\u9762\uFF0C\u4F9D\u6B21\u5F55\u5165\u4E24\u672C\u56FE\u4E66\u4FE1\u606F\u5E76\u4FDD\u5B58\u81F3\u6570\u636E\u5E93\uFF0C\u5982\u56FE6-21\u548C\u56FE6-22\u6240\u793A\u3002\u518D\u6253\u5F00\u8BB0\u5F55\u8BFB\u53D6\u9875\u9762\uFF0C\u4ECE\u6570\u636E\u5E93\u8BFB\u53D6\u56FE\u4E66\u4FE1\u606F\u5E76\u5C55\u793A\u5728\u9875\u9762\u4E0A\uFF0C\u5982\u56FE6-23\u6240\u793A\u3002</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062136090.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062137111.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062137916.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><h2 id="_6-5-\u5B9E\u6218\u9879\u76EE-\u8D2D\u7269\u8F66" tabindex="-1"><a class="header-anchor" href="#_6-5-\u5B9E\u6218\u9879\u76EE-\u8D2D\u7269\u8F66" aria-hidden="true">#</a> 6.5\u3000\u5B9E\u6218\u9879\u76EE\uFF1A\u8D2D\u7269\u8F66</h2><p>\u8D2D\u7269\u8F66\u7684\u5E94\u7528\u9762\u5F88\u5E7F\uFF0C\u51E1\u662F\u7535\u5546App\u90FD\u53EF\u4EE5\u770B\u5230\u5B83\u7684\u8EAB\u5F71\uFF0C\u4E4B\u6240\u4EE5\u9009\u62E9\u8D2D\u7269\u8F66\u4F5C\u4E3A\u672C\u7AE0\u7684\u5B9E\u6218\u9879\u76EE\uFF0C\u9664\u4E86\u5B83\u4F7F\u7528\u5E7F\u6CDB\u7684\u7279\u70B9\uFF0C\u66F4\u56E0\u4E3A\u5B83\u7528\u5230\u4E86\u591A\u79CD\u5B58\u50A8\u65B9\u5F0F\u3002\u73B0\u5728\u5C31\u8BA9\u6211\u4EEC\u5F00\u542F\u7535\u5546\u8D2D\u7269\u8F66\u7684\u4F53\u9A8C\u4E4B\u65C5\u5427\u3002</p><h3 id="_6-5-1-\u9700\u6C42\u63CF\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-5-1-\u9700\u6C42\u63CF\u8FF0" aria-hidden="true">#</a> 6.5.1\u3000\u9700\u6C42\u63CF\u8FF0</h3><p>\u7535\u5546App\u7684\u8D2D\u7269\u8F66\u53EF\u8C13\u662F\u53F8\u7A7A\u89C1\u60EF\u4E86\uFF0C\u4EE5\u4EAC\u4E1C\u5546\u57CE\u7684\u8D2D\u7269\u8F66\u4E3A\u4F8B\uFF0C\u4E00\u5F00\u59CB\u6CA1\u6709\u6DFB\u52A0\u4EFB\u4F55\u5546\u54C1\uFF0C\u6B64\u65F6\u7A7A\u8D2D\u7269\u8F66\u5982\u56FE6-24\u6240\u793A\uFF0C\u800C\u4E14\u63D0\u793A\u53BB\u901B\u79D2\u6740\u5546\u573A\uFF1B\u52A0\u5165\u51E0\u4EF6\u5546\u54C1\u4E4B\u540E\uFF0C\u8D2D\u7269\u8F66\u9875\u9762\u5982\u56FE6-25\u6240\u793A\u3002</p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062143868.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:67%;"><p>\u56FE6-24\u3000\u4EAC\u4E1CApp\u8D2D\u7269\u8F66\u7684\u521D\u59CB\u9875\u9762</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062143613.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p>\u56FE6-25\u3000\u4EAC\u4E1CApp\u8D2D\u7269\u8F66\u52A0\u4E86\u51E0\u4EF6\u5546\u54C1</p><p>\u53EF\u89C1\u8D2D\u7269\u8F66\u9664\u4E86\u5E95\u90E8\u6709\u4E2A\u7ED3\u7B97\u884C\uFF0C\u5176\u4F59\u90E8\u5206\u4E3B\u8981\u662F\u5DF2\u52A0\u5165\u8D2D\u7269\u8F66\u7684\u5546\u54C1\u5217\u8868\uFF0C\u7136\u540E\u6BCF\u4E2A\u5546\u54C1\u884C\u5DE6\u8FB9\u662F\u5546\u54C1\u5C0F\u56FE\uFF0C\u53F3\u8FB9\u662F\u5546\u54C1\u540D\u79F0\u53CA\u5176\u4EF7\u683C\u3002\u636E\u6B64\u4EFF\u7167\u672C\u9879\u76EE\u7684\u8D2D\u7269\u8F66\u529F\u80FD\uFF0C\u7B2C\u4E00\u6B21\u8FDB\u5165\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u8D2D\u7269\u8F66\u91CC\u9762\u662F\u7A7A\u7684\uFF0C\u540C\u65F6\u63D0\u793A\u53BB\u901B\u624B\u673A\u5546\u573A\uFF0C \u5982\u56FE6-26\u6240\u793A\u3002\u63A5\u7740\u53BB\u5546\u573A\u9875\u9762\u9009\u8D2D\u624B\u673A\uFF0C\u968F\u4FBF\u6311\u4E86\u51E0\u90E8\u624B\u673A\u52A0\u5165\u8D2D\u7269\u8F66\uFF0C\u518D\u8FD4\u56DE\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u5373\u53EF\u770B\u5230\u8D2D\u7269\u8F66\u7684\u5546\u54C1\u5217\u8868\uFF0C\u5982\u56FE6-27\u6240\u793A\uFF0C\u6709\u5546\u54C1\u56FE\u7247\u3001\u540D\u79F0\u3001\u6570\u91CF\u3001\u5355\u4EF7\u3001\u603B\u4EF7\u7B49\u7B49\u4FE1\u606F\u3002\u5F53\u7136\u8D2D\u7269\u8F66\u5E76\u4E0D\u4EC5\u4EC5\u53EA\u662F\u5C55\u793A\u5F85\u8D2D\u4E70\u7684\u5546\u54C1\uFF0C\u8FD8\u8981\u652F\u6301\u6700\u7EC8\u8D2D\u4E70\u7684\u7ED3\u7B97\u64CD\u4F5C\u3001\u652F\u6301\u6E05\u7A7A\u8D2D\u7269\u8F66\u7B49\u529F\u80FD\u3002</p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062145081.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:80%;"><p>\u56FE6-26\u3000\u9996\u6B21\u6253\u5F00\u8D2D\u7269\u8F66\u9875\u9762</p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062146818.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218" style="zoom:80%;"><p>\u56FE6-27\u3000\u9009\u8D2D\u5546\u54C1\u540E\u7684\u8D2D\u7269\u8F66</p><p>\u8D2D\u7269\u8F66\u7684\u5B58\u5728\u611F\u5F88\u5F3A\uFF0C\u4E0D\u4EC5\u4EC5\u5728\u8D2D\u7269\u8F66\u9875\u9762\u624D\u80FD\u770B\u5230\u8D2D\u7269\u8F66\u3002\u5F80\u5F80\u5728\u5546\u573A\u9875\u9762\uFF0C\u751A\u81F3\u5546\u54C1\u8BE6\u60C5\u9875\u9762\uFF0C\u90FD\u4F1A\u770B\u5230\u67D0\u4E2A\u89D2\u843D\u5192\u51FA\u8D2D\u7269\u8F66\u56FE\u6807\u3002\u4E00\u65E6\u6709\u65B0\u5546\u54C1\u52A0\u5165\u8D2D\u7269\u8F66\uFF0C\u8D2D\u7269\u8F66\u56FE\u6807\u4E0A\u7684\u5546\u54C1\u6570\u91CF\u7ACB\u9A6C\u52A0\u4E00\u3002\u5F53\u7136\uFF0C\u7528\u6237\u4E5F\u80FD\u70B9\u51FB\u8D2D\u7269\u8F66\u56FE\u6807\u76F4\u63A5\u8DF3\u5230\u8D2D\u7269\u8F66\u9875\u9762\u3002\u5546\u573A\u9875\u9762\u9664\u4E86\u5546\u54C1\u5217\u8868\u4E4B\u5916\uFF0C\u9875\u9762\u53F3\u4E0A\u89D2\u8FD8\u6709\u4E00\u4E2A\u8D2D\u7269\u8F66\u56FE\u6807\uFF0C\u5982\u56FE6-28\u6240\u793A\uFF0C\u6709\u65F6\u8FD9\u4E2A\u56FE\u6807\u4F1A\u5728\u9875\u9762\u53F3\u4E0B\u89D2\u3002\u5546\u54C1\u8BE6\u60C5\u9875\u9762\u901A\u5E38\u4E5F\u6709\u8D2D\u7269\u8F66\u56FE\u6807\uFF0C\u5982\u56FE6-29\u6240\u793A\uFF0C\u5018\u4F7F\u7528\u6237\u5728\u8BE6\u60C5\u9875\u9762\u628A\u5546\u54C1\u52A0\u5165\u8D2D\u7269\u8F66\uFF0C\u90A3\u4E48\u56FE\u6807\u4E0A\u7684\u6570\u5B57\u4E5F\u4F1A\u52A0\u4E00\u3002</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062148610.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202207062148206.png" alt="Image From \u7B14\u8BB0-Android \u5F00\u53D1\u4ECE\u5165\u95E8\u5230\u5B9E\u6218"></p><p>\u56FE6-29\u3000\u624B\u673A\u8BE6\u60C5\u9875\u9762</p><p>\u81F3\u6B64\u5927\u6982\u8FC7\u4E86\u4E00\u904D\u8D2D\u7269\u8F66\u9700\u8981\u5B9E\u73B0\u7684\u57FA\u672C\u529F\u80FD\uFF0C\u63D0\u9700\u6C42\u603B\u662F\u5F88\u7B80\u5355\u7684\uFF0C\u771F\u6B63\u843D\u5230\u5B9E\u5904\u8FD8\u5F97\u5F00\u53D1\u8005\u53D1\u6325\u60F3\u8C61\u529B\uFF0C\u628A\u8D2D\u7269\u8F66\u505A\u6210\u4E00\u4E2A\u529F\u80FD\u5B8C\u5907\u7684\u6A21\u5757\u3002</p><h3 id="_6-5-2-\u754C\u9762\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#_6-5-2-\u754C\u9762\u8BBE\u8BA1" aria-hidden="true">#</a> 6.5.2\u3000\u754C\u9762\u8BBE\u8BA1</h3><p>\u9996\u5148\u627E\u627E\u770B\uFF0C\u8D2D\u7269\u8F66\u4F7F\u7528\u4E86\u54EA\u4E9BAndroid\u63A7\u4EF6\uFF1A</p><ul><li><p>\u7EBF\u6027\u5E03\u5C40LinearLayout\uFF1A\u8D2D\u7269\u8F66\u754C\u9762\u4ECE\u4E0A\u5F80\u4E0B\u6392\u5217\uFF0C\u7528\u5230\u4E86\u5782\u76F4\u65B9\u5411\u7684\u7EBF\u6027\u5E03\u5C40\u3002</p></li><li><p>\u7F51\u683C\u5E03\u5C40GridLayout\uFF1A\u5546\u573A\u9875\u9762\u7684\u9648\u5217\u6A71\u67DC\uFF0C\u5141\u8BB8\u5206\u884C\u5206\u5217\u5C55\u793A\u5546\u54C1\u3002</p></li><li><p>\u76F8\u5BF9\u5E03\u5C40RelativeLayout\uFF1A\u9875\u9762\u53F3\u4E0A\u89D2\u7684\u8D2D\u7269\u8F66\u56FE\u6807\uFF0C\u56FE\u6807\u53F3\u4E0A\u89D2\u53C8\u6709\u6570\u5B57\u6807\u8BB0\uFF0C\u6309\u7167\u6307\u5B9A\u65B9\u4F4D\u6392\u5217\u63A7\u4EF6\u6B63\u662F\u76F8\u5BF9\u5E03\u5C40\u7684\u62FF\u624B\u597D\u620F\u3002</p></li><li><p>\u5176\u4ED6\u5E38\u89C1\u63A7\u4EF6\u5C1A\u6709\u6587\u672C\u89C6\u56FETextView\u3001\u56FE\u50CF\u89C6\u56FEImageView\uFF0C\u6309\u94AE\u63A7\u4EF6Button\u7B49\u3002</p><p>\u7136\u540E\u8003\u8651\u4E00\u4E0B\u8D2D\u7269\u8F66\u7684\u5B58\u50A8\u529F\u80FD\uFF0C\u5230\u5E95\u91C7\u53D6\u4E86\u54EA\u4E9B\u5B58\u50A8\u65B9\u5F0F\uFF1A</p></li><li><p>\u6570\u636E\u5E93SQLite\uFF1A\u6700\u76F4\u89C2\u7684\u80AF\u5B9A\u662F\u6570\u636E\u5E93\u4E86\uFF0C\u8D2D\u7269\u8F66\u91CC\u7684\u5546\u54C1\u5217\u8868\u4E00\u5B9A\u662F\u653E\u5728SQLite\u4E2D\uFF0C\u589E\u5220\u6539\u67E5\u90FD\u5C11\u4E0D\u4E86\u5B83\u3002</p></li><li><p>\u5168\u5C40\u5185\u5B58\uFF1A\u8D2D\u7269\u8F66\u56FE\u6807\u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u8868\u793A\u8D2D\u7269\u8F66\u4E2D\u7684\u5546\u54C1\u6570\u91CF\uFF0C\u8BE5\u6570\u503C\u5EFA\u8BAE\u4FDD\u5B58\u5728\u5168\u5C40\u5185\u5B58\u4E2D\uFF0C\u8FD9\u6837\u4E0D\u5FC5\u6BCF\u6B21\u90FD\u5230\u6570\u636E\u5E93\u4E2D\u6267\u884Ccount\u64CD\u4F5C\u3002</p></li><li><p>\u5B58\u50A8\u5361\u6587\u4EF6\uFF1A\u901A\u5E38\u5546\u54C1\u56FE\u7247\u6765\u81EA\u4E8E\u7535\u5546\u5E73\u53F0\u7684\u670D\u52A1\u5668\uFF0C\u6B64\u65F6\u5F80\u5F80\u5F15\u5165\u56FE\u7247\u7F13\u5B58\u673A\u5236\uFF0C\u4E5F\u5C31\u662F\u9996\u6B21\u8BBF\u95EE\u5148\u5C06\u7F51\u7EDC\u56FE\u7247\u4FDD\u5B58\u5230\u5B58\u50A8\u5361\uFF0C\u4E0B\u6B21\u8BBF\u95EE\u65F6\u76F4\u63A5\u4ECE\u5B58\u50A8\u5361\u83B7\u53D6\u7F13\u5B58\u56FE\u7247\uFF0C\u4ECE\u800C\u63D0\u9AD8\u56FE\u7247\u7684\u52A0\u8F7D\u901F\u5EA6\u3002</p></li><li><p>\u5171\u4EAB\u53C2\u6570SharedPreferences\uFF1A\u662F\u5426\u9996\u6B21\u8BBF\u95EE\u7F51\u7EDC\u56FE\u7247\uFF0C\u8FD9\u4E2A\u6807\u5FD7\u4F4D\u63A8\u8350\u653E\u5728\u5171\u4EAB\u53C2\u6570\u4E2D\uFF0C\u56E0\u4E3A\u5B83\u9700\u8981\u6301\u4E45\u5316\u5B58\u50A8\uFF0C\u5E76\u4E14\u53EA\u6709\u4E00\u4E2A\u53C2\u6570\u4FE1\u606F\u3002\u771F\u662F\u60F3\u4E0D\u5230\uFF0C\u4E00\u4E2A\u5C0F\u5C0F\u7684\u8D2D\u7269\u8F66\uFF0C\u7ADF\u7136\u7528\u5230\u4E86\u597D\u51E0\u79CD\u5B58\u50A8\u65B9\u5F0F\u3002</p></li></ul><h3 id="_6-5-3-\u5173\u952E\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_6-5-3-\u5173\u952E\u4EE3\u7801" aria-hidden="true">#</a> 6.5.3\u3000\u5173\u952E\u4EE3\u7801</h3><p>\u4E3A\u4E86\u8BFB\u8005\u66F4\u597D\u66F4\u5FEB\u5730\u5B8C\u6210\u8D2D\u7269\u8F66\u9879\u76EE\uFF0C\u4E0B\u9762\u5217\u4E3E\u51E0\u4E2A\u91CD\u8981\u529F\u80FD\u7684\u4EE3\u7801\u7247\u6BB5\u3002</p><p><strong>1 \uFF0E\u5173\u4E8E\u9875\u9762\u8DF3\u8F6C</strong></p><p>\u56E0\u4E3A\u8D2D\u7269\u8F66\u9875\u9762\u5141\u8BB8\u76F4\u63A5\u8DF3\u5230\u5546\u573A\u9875\u9762\uFF0C\u5E76\u4E14\u5546\u573A\u9875\u9762\u4E5F\u5141\u8BB8\u8DF3\u5230\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u6240\u4EE5\u5982\u679C\u7528\u6237\u5728\u8FD9\u4E24\u4E2A\u9875\u9762\u4E4B\u95F4\u6765\u56DE\u8DF3\u8F6C\uFF0C\u7136\u540E\u518D\u6309\u8FD4\u56DE\u952E\uFF0C\u7ED3\u679C\u53D1\u73B0\u8FD4\u56DE\u7684\u65F6\u5019\u4E5F\u662F\u5728\u4E24\u4E2A\u9875\u9762\u95F4\u5F80\u8FD4\u8DF3\u8F6C\u3002\u51FA\u73B0\u95EE\u9898\u7684\u7F18\u7531\u5728\u4E8E\uFF1A\u6BCF\u6B21\u542F\u52A8\u6D3B\u52A8\u9875\u9762\u90FD\u5F80\u6D3B\u52A8\u6808\u52A0\u5165\u4E00\u4E2A\u65B0\u6D3B\u52A8\uFF0C\u90A3\u4E48\u8FD4\u56DE\u51FA\u6808\u4E4B\u65F6\uFF0C\u4E5F\u53EA\u597D\u4E00\u4E2A\u4E00\u4E2A\u6D3B\u52A8\u4F9D\u6B21\u9000\u51FA\u4E86\u3002\u89E3\u51B3\u8BE5\u95EE\u9898\u7684\u529E\u6CD5\u53C2\u89C1\u7B2C 4 \u7AE0\u7684\u201C4.1.3 Activity\u7684\u542F\u52A8\u6A21\u5F0F\u201D\uFF0C\u5BF9\u4E8E\u8D2D\u7269\u8F66\u7684\u6D3B\u52A8\u8DF3\u8F6C\u9700\u8981\u6307\u5B9A\u542F\u52A8\u6807\u5FD7FLAG_ACTIVITY_CLEAR_TOP\uFF0C\u8868\u793A\u6D3B\u52A8\u6808\u6709\u4E14\u4EC5\u6709\u8BE5\u9875\u9762\u7684\u552F\u4E00\u5B9E\u4F8B\uFF0C\u5982\u6B64\u5373\u53EF\u907F\u514D\u591A\u6B21\u8FD4\u56DE\u540C\u4E00\u9875\u9762\u7684\u60C5\u51B5\u3002\u6BD4\u5982\u4ECE\u8D2D\u7269\u8F66\u9875\u9762\u8DF3\u5230\u5546\u573A\u9875\u9762\uFF0C\u6B64\u65F6\u6D3B\u52A8\u8DF3\u8F6C\u7684\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4ECE\u8D2D\u7269\u8F66\u9875\u9762\u8DF3\u5230\u5546\u573A\u9875\u9762</span>
<span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">ShoppingChannelActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
intent<span class="token punctuation">.</span><span class="token function">setFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_CLEAR_TOP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u8BBE\u7F6E\u542F\u52A8\u6807\u5FD7 </span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u8DF3\u8F6C\u5230\u624B\u673A\u5546\u573A\u9875\u9762</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53C8\u5982\u4ECE\u5546\u573A\u9875\u9762\u8DF3\u5230\u8D2D\u7269\u8F66\u9875\u9762\uFF0C\u6B64\u65F6\u6D3B\u52A8\u8DF3\u8F6C\u7684\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4ECE\u5546\u573A\u9875\u9762\u8DF3\u5230\u8D2D\u7269\u8F66\u9875\u9762</span>
<span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">ShoppingCartActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
intent<span class="token punctuation">.</span><span class="token function">setFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_CLEAR_TOP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u8BBE\u7F6E\u542F\u52A8\u6807\u5FD7 </span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u8DF3\u8F6C\u5230\u8D2D\u7269\u8F66\u9875\u9762</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2 \uFF0E\u5173\u4E8E\u5546\u54C1\u56FE\u7247\u7684\u7F13\u5B58</strong></p><p>\u901A\u5E38\u5546\u54C1\u56FE\u7247\u7531\u540E\u7AEF\u670D\u52A1\u5668\u63D0\u4F9B\uFF0CApp\u6253\u5F00\u9875\u9762\u65F6\u518D\u4ECE\u670D\u52A1\u5668\u4E0B\u8F7D\u6240\u9700\u7684\u5546\u54C1\u56FE\u3002\u53EF\u662F\u8D2D\u7269\u8F66\u6A21\u5757\u7684\u591A\u4E2A\u9875\u9762\u90FD\u4F1A\u5C55\u793A\u5546\u54C1\u56FE\u7247\uFF0C\u5982\u679C\u6BCF\u6B21\u90FD\u5230\u670D\u52A1\u5668\u8BF7\u6C42\u56FE\u7247\uFF0C\u663E\u7136\u65E2\u8017\u65F6\u95F4\u53C8\u8017\u6D41\u91CF\u975E\u5E38\u4E0D\u7ECF\u6D4E\u3002\u56E0\u6B64App\u90FD\u4F1A\u7F13\u5B58\u5E38\u7528\u7684\u56FE\u7247\uFF0C\u4E00\u65E6\u4ECE\u670D\u52A1\u5668\u6210\u529F\u4E0B\u8F7D\u56FE\u7247\uFF0C\u4FBF\u5728\u624B\u673A\u5B58\u50A8\u5361\u4E0A\u4FDD\u5B58\u56FE\u7247\u6587\u4EF6\u3002\u7136\u540E\u4E0B\u6B21\u754C\u9762\u9700\u8981\u52A0\u8F7D\u5546\u54C1\u56FE\u7247\u65F6\uFF0C\u5C31\u5148\u4ECE\u5B58\u50A8\u5361\u5BFB\u627E\u8BE5\u56FE\u7247\uFF0C\u5982\u679C\u627E\u5230\u5C31\u8BFB\u53D6\u56FE\u7247\u7684\u4F4D\u56FE\u4FE1\u606F\uFF0C\u5982\u679C\u6CA1\u627E\u5230\u5C31\u518D\u5230\u670D\u52A1\u5668\u4E0B\u8F7D\u56FE\u7247\u3002</p><p>\u4EE5\u4E0A\u7684\u7F13\u5B58\u903B\u8F91\u662F\u6700\u7B80\u5355\u7684\u4E8C\u7EA7\u56FE\u7247\u7F13\u5B58\uFF0C\u5B9E\u9645\u5F00\u53D1\u5F80\u5F80\u4F7F\u7528\u66F4\u9AD8\u7EA7\u7684\u4E09\u7EA7\u7F13\u5B58\u673A\u5236\uFF0C\u5373\u201C\u8FD0\u884C\u5185\u5B58\u2192\u5B58\u50A8\u5361\u2192\u7F51\u7EDC\u4E0B\u8F7D\u201D\u3002\u5F53\u7136\u5C31\u521D\u5B66\u8005\u800C\u8A00\uFF0C\u5148\u4ECE\u638C\u63E1\u6700\u7B80\u5355\u7684\u4E8C\u7EA7\u7F13\u5B58\u5F00\u59CB\uFF0C\u4E5F\u5C31\u662F\u201C\u5B58\u50A8\u5361\u2192\u7F51\u7EDC\u4E0B\u8F7D\u201D\u3002</p><p>\u6309\u7167\u4E8C\u7EA7\u7F13\u5B58\u673A\u5236\uFF0C\u53EF\u4EE5\u8BBE\u8BA1\u4EE5\u4E0B\u7684\u7F13\u5B58\u5904\u7406\u903B\u8F91\uFF1A</p><p>\uFF08 1 \uFF09\u5148\u5224\u65AD\u662F\u5426\u4E3A\u9996\u6B21\u8BBF\u95EE\u7F51\u7EDC\u56FE\u7247\u3002</p><p>\uFF08 2 \uFF09\u5982\u679C\u662F\u9996\u6B21\u8BBF\u95EE\u7F51\u7EDC\u56FE\u7247\uFF0C\u5C31\u5148\u4ECE\u7F51\u7EDC\u670D\u52A1\u5668\u4E0B\u8F7D\u56FE\u7247\u3002</p><p>\uFF08 3 \uFF09\u628A\u4E0B\u8F7D\u5B8C\u7684\u56FE\u7247\u6570\u636E\u4FDD\u5B58\u5230\u624B\u673A\u7684\u5B58\u50A8\u5361\u3002</p><p>\uFF08 4 \uFF09\u5F80\u6570\u636E\u5E93\u4E2D\u5199\u5165\u5546\u54C1\u8BB0\u5F55\uFF0C\u4EE5\u53CA\u5546\u54C1\u56FE\u7247\u7684\u672C\u5730\u5B58\u50A8\u8DEF\u5F84\u3002</p><p>\uFF08 5 \uFF09\u66F4\u65B0\u5171\u4EAB\u53C2\u6570\u4E2D\u7684\u9996\u6B21\u8BBF\u95EE\u6807\u5FD7\u3002</p><p>\u6309\u7167\u4E0A\u8FF0\u7684\u5904\u7406\u903B\u8F91\uFF0C\u7F16\u5199\u7684\u56FE\u7247\u52A0\u8F7D\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\ShoppingCartActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">String</span> mFirst <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">;</span> <span class="token comment">// \u662F\u5426\u9996\u6B21\u6253\u5F00 </span>
<span class="token comment">// \u6A21\u62DF\u7F51\u7EDC\u6570\u636E\uFF0C\u521D\u59CB\u5316\u6570\u636E\u5E93\u4E2D\u7684\u5546\u54C1\u4FE1\u606F</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">downloadGoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// \u83B7\u53D6\u5171\u4EAB\u53C2\u6570\u4FDD\u5B58\u7684\u662F\u5426\u9996\u6B21\u6253\u5F00\u53C2\u6570</span>
   mFirst <span class="token operator">=</span> <span class="token class-name">SharedUtil</span><span class="token punctuation">.</span><span class="token function">getIntance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// \u83B7\u53D6\u5F53\u524DApp\u7684\u79C1\u6709\u4E0B\u8F7D\u8DEF\u5F84 </span>
   <span class="token class-name">String</span> path <span class="token operator">=</span>
<span class="token function">getExternalFilesDir</span><span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token constant">DIRECTORY_DOWNLOADS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span> 
   <span class="token keyword">if</span> <span class="token punctuation">(</span>mFirst<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// \u5982\u679C\u662F\u9996\u6B21\u6253\u5F00</span>
       <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GoodsInfo</span><span class="token punctuation">&gt;</span></span> goodsList <span class="token operator">=</span> <span class="token class-name">GoodsInfo</span><span class="token punctuation">.</span><span class="token function">getDefaultList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6A21\u62DF\u7F51\u7EDC\u56FE\u7247\u4E0B\u8F7D</span>
       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> goodsList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
           <span class="token class-name">GoodsInfo</span> info <span class="token operator">=</span> goodsList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">long</span> rowid <span class="token operator">=</span> mGoodsHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5F80\u5546\u54C1\u6570\u636E\u5E93\u63D2\u5165\u4E00\u6761\u8BE5\u5546\u54C1\u7684\u8BB0\u5F55</span>
           info<span class="token punctuation">.</span>rowid <span class="token operator">=</span> rowid<span class="token punctuation">;</span>
           <span class="token class-name">Bitmap</span> pic <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span>pic<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">String</span> pic_path <span class="token operator">=</span> path <span class="token operator">+</span> rowid <span class="token operator">+</span> <span class="token string">&quot;.jpg&quot;</span><span class="token punctuation">;</span>
           <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">saveImage</span><span class="token punctuation">(</span>pic_path<span class="token punctuation">,</span> pic<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5F80\u5B58\u50A8\u5361\u4FDD\u5B58\u5546\u54C1\u56FE\u7247</span>
           pic<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u56DE\u6536\u4F4D\u56FE\u5BF9\u8C61</span>
           info<span class="token punctuation">.</span>pic_path <span class="token operator">=</span> pic_path<span class="token punctuation">;</span>
           mGoodsHelper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u66F4\u65B0\u5546\u54C1\u6570\u636E\u5E93\u4E2D\u8BE5\u5546\u54C1\u8BB0\u5F55\u7684\u56FE\u7247\u8DEF\u5F84</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
   <span class="token comment">// \u628A\u662F\u5426\u9996\u6B21\u6253\u5F00\u5199\u5165\u5171\u4EAB\u53C2\u6570</span>
   <span class="token class-name">SharedUtil</span><span class="token punctuation">.</span><span class="token function">getIntance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeString</span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3 \uFF0E\u5173\u4E8E\u5404\u9875\u9762\u5171\u540C\u7684\u6807\u9898\u680F</strong></p><p>\u6CE8\u610F\u5230\u8D2D\u7269\u8F66\u3001\u624B\u673A\u5546\u573A\u3001\u624B\u673A\u8BE6\u60C5\u4E09\u4E2A\u9875\u9762\u9876\u90E8\u90FD\u6709\u6807\u9898\u680F\uFF0C\u800C\u4E14\u8FD9\u4E09\u4E2A\u6807\u9898\u680F\u98CE\u683C\u7EDF\u4E00\uFF0C\u65E2\u7136\u5982\u6B64\uFF0C\u80FD\u5426\u628A\u5B83\u505A\u6210\u516C\u5171\u7684\u6807\u9898\u680F\u5462\uFF1F\u5F53\u7136App\u754C\u9762\u652F\u6301\u5C40\u90E8\u7684\u516C\u5171\u5E03\u5C40\uFF0C\u4EE5\u8D2D\u7269\u8F66\u7684\u6807\u9898\u680F\u4E3A\u4F8B\uFF0C\u516C\u5171\u5E03\u5C40\u7684\u5B9E\u73B0\u8FC7\u7A0B\u5305\u62EC\u4EE5\u4E0B\u4E24\u4E2A\u6B65\u9AA4\uFF1A</p><p>\u6B65\u9AA4\u4E00\uFF0C\u9996\u5148\u5B9A\u4E49\u6807\u9898\u680F\u4E13\u7528\u7684\u5E03\u5C40\u6587\u4EF6\uFF0C\u5305\u542B\u8FD4\u56DE\u7BAD\u5934\u3001\u6587\u5B57\u6807\u9898\u3001\u8D2D\u7269\u8F66\u56FE\u6807\u3001\u5546\u54C1\u6570\u91CF\u8868\u7B49\uFF0C\u5177\u4F53\u5185\u5BB9\u5982\u4E0B\u6240\u793A\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\res\\layout\\title_shopping.xml\uFF09</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50dp<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#aaaaff<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/iv_back<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>scaleType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fitCenter<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/ic_back<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tv_title<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_centerInParent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/black<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20sp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span> 
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/iv_cart<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>scaleType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fitCenter<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/cart<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tv_count<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_toRightOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/iv_cart<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>-20dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/shape_oval_red<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/white<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15sp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B65\u9AA4\u4E8C\uFF0C\u7136\u540E\u5728\u8D2D\u7269\u8F66\u9875\u9762\u7684\u5E03\u5C40\u6587\u4EF6\u4E2D\u6DFB\u52A0\u5982\u4E0B\u4E00\u884Cinclude\u6807\u7B7E\uFF0C\u8868\u793A\u5F15\u5165title_shopping.xml\u7684\u5E03\u5C40\u5185\u5BB9\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\res\\layout\\activity_shopping_cart.xml\uFF09</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@layout/title_shopping<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E4B\u540E\u91CD\u65B0\u8FD0\u884C\u6D4B\u8BD5App\uFF0C\u5373\u53EF\u53D1\u73B0\u8D2D\u7269\u8F66\u9875\u9762\u7684\u9876\u90E8\u679C\u7136\u51FA\u73B0\u4E86\u516C\u5171\u6807\u9898\u680F\uFF0C\u5546\u573A\u9875\u9762\u3001\u8BE6\u60C5\u9875\u9762\u7684\u516C\u5171\u6807\u9898\u680F\u53EF\u53C2\u8003\u8D2D\u7269\u8F66\u9875\u9762\u7684include\u6807\u7B7E\u3002</p><p><strong>4 \uFF0E\u5173\u4E8E\u5546\u54C1\u7F51\u683C\u7684\u5355\u5143\u5E03\u5C40</strong></p><p>\u5546\u573A\u9875\u9762\u7684\u5546\u54C1\u5217\u8868\uFF0C\u5448\u73B0\u4E09\u884C\u4E8C\u5217\u7684\u8868\u683C\u5E03\u5C40\uFF0C\u6BCF\u4E2A\u8868\u683C\u5355\u5143\u7684\u754C\u9762\u5E03\u5C40\u96F7\u540C\uFF0C\u90FD\u662F\u5546\u54C1\u540D\u79F0\u5728\u4E0A\u3001\u5546\u54C1\u56FE\u7247\u5C45\u4E2D\u3001\u5546\u54C1\u4EF7\u683C\u4E0E\u6DFB\u52A0\u6309\u94AE\u5728\u4E0B\uFF0C\u770B\u8D77\u6765\u8DDF\u516C\u5171\u6807\u9898\u680F\u7684\u5904\u7406\u6709\u4E9B\u7C7B\u4F3C\u3002\u4F46\u540E\u8005\u4E3A\u591A\u4E2A\u9875\u9762\u5F15\u7528\u540C\u4E00\u4E2A\u6807\u9898\u680F\uFF0C\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\uFF1B\u800C\u524D\u8005\u4E3A\u4E00\u4E2A\u5546\u573A\u9875\u9762\u5F15\u7528\u4E86\u591A\u4E2A\u5546\u54C1\u7F51\u683C\uFF0C\u662F\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\u3002\u56E0\u6B64\u4E8C\u8005\u7684\u5B9E\u73B0\u8FC7\u7A0B\u4E0D\u5C3D\u76F8\u540C\uFF0C\u5C31\u5546\u573A\u7F51\u683C\u800C\u8A00\uFF0C\u5B83\u7684\u5355\u5143\u590D\u7528\u5206\u4E3A\u4E0B\u5217 3 \u4E2A\u6B65\u9AA4\uFF1A</p><p>\u6B65\u9AA4\u4E00\uFF0C\u5728\u5546\u573A\u9875\u9762\u7684\u5E03\u5C40\u6587\u4EF6\u4E2D\u6DFB\u52A0GridLayout\u8282\u70B9\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\res\\layout\\activity_shopping_channel.xml\uFF09</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/orange<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@layout/title_shopping<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GridLayout</span>
           <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/gl_channel<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span> 
           <span class="token attr-name"><span class="token namespace">android:</span>columnCount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollView</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B65\u9AA4\u4E8C\uFF0C\u4E3A\u5546\u573A\u7F51\u683C\u7F16\u5199\u7EDF\u4E00\u7684\u5546\u54C1\u4FE1\u606F\u5E03\u5C40\uFF0CXML\u6587\u4EF6\u5185\u5BB9\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\res\\layout\\item_goods.xml\uFF09</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/ll_item<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/white<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tv_name<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/black<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>17sp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/iv_thumb<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>150dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>scaleType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fitCenter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>45dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
           <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tv_price<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0dp<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/red<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15sp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
           <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/btn_add<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0dp<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u52A0\u5165\u8D2D\u7269\u8F66<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/black<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15sp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B65\u9AA4\u4E09\uFF0C\u5728\u5546\u573A\u9875\u9762\u7684Java\u4EE3\u7801\u4E2D\uFF0C\u5148\u5229\u7528\u4E0B\u9762\u4EE3\u7801\u83B7\u53D6\u5E03\u5C40\u6587\u4EF6item_goods.xml\u7684\u6839\u89C6\u56FE\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">View</span> view <span class="token operator">=</span> <span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>item_goods<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u518D\u4ECE\u6839\u89C6\u56FE\u4E2D\u4F9D\u636E\u63A7\u4EF6ID\u5206\u522B\u53D6\u51FA\u7F51\u683C\u5355\u5143\u7684\u5404\u63A7\u4EF6\u5BF9\u8C61\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ImageView</span> iv_thumb <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>iv_thumb<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">TextView</span> tv_name <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_name<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">TextView</span> tv_price <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_price<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">Button</span> btn_add <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_add<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u5C31\u80FD\u6309\u7167\u5BFB\u5E38\u65B9\u5F0F\u64CD\u7EB5\u8FD9\u4E9B\u63A7\u4EF6\u5BF9\u8C61\u4E86\uFF0C\u4E0B\u9762\u4FBF\u662F\u7ED9\u7F51\u683C\u5E03\u5C40\u52A0\u8F7D\u5546\u54C1\u7684\u4EE3\u7801\u4F8B\u5B50\uFF1A</p><p>\uFF08\u5B8C\u6574\u4EE3\u7801\u89C1chapter06\\src\\main\\java\\com\\example\\chapter06\\ShoppingChannelActivity.java\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">showGoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">int</span> screenWidth <span class="token operator">=</span> <span class="token class-name">Utils</span><span class="token punctuation">.</span><span class="token function">getScreenWidth</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">LinearLayout<span class="token punctuation">.</span>LayoutParams</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinearLayout<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">(</span>
               screenWidth<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">LinearLayout<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">.</span><span class="token constant">WRAP_CONTENT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       gl_channel<span class="token punctuation">.</span><span class="token function">removeAllViews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u79FB\u9664\u4E0B\u9762\u7684\u6240\u6709\u5B50\u89C6\u56FE</span>
       <span class="token comment">// \u67E5\u8BE2\u5546\u54C1\u6570\u636E\u5E93\u4E2D\u7684\u6240\u6709\u5546\u54C1\u8BB0\u5F55</span>
       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GoodsInfo</span><span class="token punctuation">&gt;</span></span> goodsArray <span class="token operator">=</span> mGoodsHelper<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&quot;1=1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">GoodsInfo</span> info <span class="token operator">:</span> goodsArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// \u83B7\u53D6\u5E03\u5C40\u6587\u4EF6item_goods.xml\u7684\u6839\u89C6\u56FE</span>
           <span class="token class-name">View</span> view <span class="token operator">=</span> <span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>item_goods<span class="token punctuation">,</span> 
<span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">ImageView</span> iv_thumb <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>iv_thumb<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">TextView</span> tv_name <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">TextView</span> tv_price <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_price<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">Button</span> btn_add <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_add<span class="token punctuation">)</span><span class="token punctuation">;</span>
           tv_name<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8BBE\u7F6E\u5546\u54C1\u540D\u79F0</span>
           iv_thumb<span class="token punctuation">.</span><span class="token function">setImageURI</span><span class="token punctuation">(</span><span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>pic_path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8BBE\u7F6E\u5546\u54C1\u56FE\u7247</span>
           iv_thumb<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token annotation punctuation">@Override</span>
               <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">ShoppingChannelActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> 
<span class="token class-name">ShoppingDetailActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">&quot;goods_id&quot;</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span>rowid<span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8DF3\u5230\u5546\u54C1\u8BE6\u60C5\u9875\u9762</span>
        <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           tv_price<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>info<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8BBE\u7F6E\u5546\u54C1\u4EF7\u683C</span>
           btn_add<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token annotation punctuation">@Override</span>
               <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   <span class="token function">addToCart</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>rowid<span class="token punctuation">,</span> info<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6DFB\u52A0\u5230\u8D2D\u7269\u8F66</span>
        <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           gl_channel<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u628A\u5546\u54C1\u89C6\u56FE\u6DFB\u52A0\u5230\u7F51\u683C\u5E03\u5C40</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F04\u597D\u4E86\u5546\u573A\u9875\u9762\u7684\u7F51\u683C\u5355\u5143\uFF0C\u8D2D\u7269\u8F66\u9875\u9762\u7684\u5546\u54C1\u884C\u4E5F\u53EF\u7167\u6B64\u529E\u7406\uFF0C\u4E0D\u540C\u4E4B\u5904\u5728\u4E8E\u8D2D\u7269\u8F66\u9875\u9762\u7684\u5546\u54C1\u884C\u4F7F\u7528\u7EBF\u6027\u5E03\u5C40\u800C\u975E\u7F51\u683C\u5E03\u5C40\uFF0C\u5176\u4F59\u5B9E\u73B0\u8FC7\u7A0B\u4F9D\u7136\u5206\u6210\u4E0A\u8FF0 3 \u4E2A\u6B65\u9AA4\u3002</p><h2 id="_6-6-\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_6-6-\u5C0F\u7ED3" aria-hidden="true">#</a> 6.6\u3000\u5C0F\u7ED3</h2><p>\u672C\u7AE0\u4E3B\u8981\u4ECB\u7ECD\u4E86Android\u5E38\u7528\u7684\u51E0\u79CD\u6570\u636E\u5B58\u50A8\u65B9\u5F0F\uFF0C\u5305\u62EC\u5171\u4EAB\u53C2\u6570SharedPreferences\u7684\u952E\u503C\u5BF9\u5B58\u53D6\u3001\u6570\u636E\u5E93SQLite\u7684\u5173\u7CFB\u578B\u6570\u636E\u5B58\u53D6\u3001\u5B58\u50A8\u5361\u7684\u6587\u4EF6\u8BFB\u5199\u64CD\u4F5C\uFF08\u542B\u6587\u672C\u6587\u4EF6\u8BFB\u5199\u548C\u56FE\u7247\u6587\u4EF6\u8BFB\u5199\uFF09\u3001App\u5168\u5C40\u5185\u5B58\u7684\u8BFB\u5199\uFF0C\u4EE5\u53CA\u4E3A\u5B9E\u73B0\u5168\u5C40\u5185\u5B58\u800C\u5B66\u4E60\u7684Application\u7EC4\u4EF6\u7684\u751F\u547D\u5468\u671F\u53CA\u5176\u7528\u6CD5\u3002\u6700\u540E\u8BBE\u8BA1\u4E86\u4E00\u4E2A\u5B9E\u6218\u9879\u76EE\u201C\u8D2D\u7269\u8F66\u201D\uFF0C\u901A\u8FC7\u8BE5\u9879\u76EE\u7684\u7F16\u7801\u8FDB\u4E00\u6B65\u590D\u4E60\u5DE9\u56FA\u672C\u7AE0\u51E0\u79CD\u5B58\u50A8\u65B9\u5F0F\u7684\u4F7F\u7528\u3002</p><p>\u901A\u8FC7\u672C\u7AE0\u7684\u5B66\u4E60\uFF0C\u6211\u4EEC\u5E94\u8BE5\u80FD\u591F\u638C\u63E1\u4EE5\u4E0B 4 \u79CD\u5F00\u53D1\u6280\u80FD\uFF1A</p><p>\uFF08 1 \uFF09\u5B66\u4F1A\u4F7F\u7528\u5171\u4EAB\u53C2\u6570\u5B58\u53D6\u952E\u503C\u5BF9\u6570\u636E\u3002</p><p>\uFF08 2 \uFF09\u5B66\u4F1A\u4F7F\u7528SQLite\u5B58\u53D6\u6570\u636E\u5E93\u8BB0\u5F55\u3002</p><p>\uFF08 3 \uFF09\u5B66\u4F1A\u4F7F\u7528\u5B58\u50A8\u5361\u8BFB\u5199\u6587\u672C\u6587\u4EF6\u548C\u56FE\u7247\u6587\u4EF6\u3002</p><p>\uFF08 4 \uFF09\u5B66\u4F1A\u5E94\u7528\u7EC4\u4EF6Application\u7684\u7528\u6CD5\u3002</p><h3 id="_6-7-\u8BFE\u540E\u7EC3\u4E60\u9898" tabindex="-1"><a class="header-anchor" href="#_6-7-\u8BFE\u540E\u7EC3\u4E60\u9898" aria-hidden="true">#</a> 6.7\u3000\u8BFE\u540E\u7EC3\u4E60\u9898</h3><p>\u4E00\u3001\u586B\u7A7A\u9898</p><p>1 \uFF0ESharedPreferences\u91C7\u7528\u7684\u5B58\u50A8\u7ED3\u6784\u662F __ \u7684\u952E\u503C\u5BF9\u65B9\u5F0F\u3002</p><p>2 \uFF0EAndroid\u53EF\u4EE5\u76F4\u63A5\u64CD\u4F5C\u7684\u6570\u636E\u5E93\u540D\u4E3A __ \u3002</p><p>3 \uFF0E __ \u662FAndroid\u63D0\u4F9B\u7684SQLite\u6570\u636E\u5E93\u7BA1\u7406\u5668\u3002</p><p>4 \uFF0E\u6570\u636E\u5E93\u8BB0\u5F55\u7684\u4FEE\u6539\u52A8\u4F5C\u7531 __ \u547D\u4EE4\u5B8C\u6210\u3002</p><p>5 \uFF0E\u4E3A\u4E86\u786E\u4FDD\u5728App\u8FD0\u884C\u671F\u95F4\u53EA\u6709\u552F\u4E00\u7684Application\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u91C7\u53D6 __ __\u6A21\u5F0F\u5B9E\u73B0\u3002</p><p>\u4E8C\u3001\u5224\u65AD\u9898\uFF08\u6B63\u786E\u6253\u221A\uFF0C\u9519\u8BEF\u6253\xD7\uFF09</p><p>1 \uFF0E\u5171\u4EAB\u53C2\u6570\u53EA\u80FD\u4FDD\u5B58\u5B57\u7B26\u4E32\u7C7B\u578B\u7684\u6570\u636E\u3002\uFF08\u3000\u3000\uFF09</p><p>2 \uFF0ESQLite\u53EF\u4EE5\u76F4\u63A5\u8BFB\u5199\u5E03\u5C14\u7C7B\u578B\u7684\u6570\u636E\u3002\uFF08\u3000\u3000\uFF09</p><p>3 \uFF0E\u4ECEAndroid 7.0\u5F00\u59CB\uFF0C\u7CFB\u7EDF\u9ED8\u8BA4\u7981\u6B62App\u8BBF\u95EE\u516C\u5171\u5B58\u50A8\u7A7A\u95F4\u3002\uFF08\u3000\u3000\uFF09</p><p>4 \uFF0EApp\u5728\u79C1\u6709\u7A7A\u95F4\u4E0A\u8BFB\u5199\u6587\u4EF6\u65E0\u987B\u4EFB\u4F55\u6388\u6743\u3002\uFF08\u3000\u3000\uFF09</p><p>5 \uFF0EApp\u7EC8\u6B62\u65F6\u4F1A\u8C03\u7528Application\u7684onTerminate\u65B9\u6CD5\u3002\uFF08\u3000\u3000\uFF09</p><p>\u4E09\u3001\u9009\u62E9\u9898</p><p>1 \uFF0E\uFF08\u3000\u3000\uFF09\u4E0D\u662F\u6301\u4E45\u5316\u7684\u5B58\u50A8\u65B9\u5F0F\u3002</p><p>A\uFF0E\u5171\u4EAB\u53C2\u6570</p><p>B\uFF0E\u6570\u636E\u5E93</p><p>C\uFF0E\u6587\u4EF6</p><p>D\uFF0E\u5168\u5C40\u53D8\u91CF</p><p>2 \uFF0EDDL\u8BED\u8A00\u5305\u542B\u54EA\u4E9B\u6570\u636E\u5E93\u64CD\u4F5C\uFF08\u3000\u3000\uFF09\u3002</p><p>A\uFF0E\u521B\u5EFA\u8868\u683C</p><p>B\uFF0E\u5220\u9664\u8868\u683C</p><p>C\uFF0E\u6E05\u7A7A\u8868\u683C</p><p>D\uFF0E\u4FEE\u6539\u8868\u7ED3\u6784</p><p>3 \uFF0E\u8C03\u7528\uFF08\u3000\u3000\uFF09\u65B9\u6CD5\u4F1A\u8FD4\u56DE\u7ED3\u679C\u96C6\u7684Cursor\u5BF9\u8C61\u3002</p><p>A\uFF0Eupdate</p><p>B\uFF0Einsert</p><p>C\uFF0Equery</p><p>D\uFF0ErawQuery</p><p>4 \uFF0E\u4F4D\u56FE\u5DE5\u5382BitmapFactory\u7684\uFF08\u3000\u3000\uFF09\u65B9\u6CD5\u652F\u6301\u83B7\u53D6\u56FE\u50CF\u6570\u636E\u3002</p><p>A\uFF0EdecodeStream</p><p>B\uFF0EdecodeFile</p><p>C\uFF0EdecodeImage</p><p>D\uFF0EdecodeResource</p><p>5 \uFF0E\u5DF2\u77E5\u67D0\u4E2A\u56FE\u7247\u6587\u4EF6\u7684\u5B58\u50A8\u5361\u8DEF\u5F84\uFF0C\u53EF\u4EE5\u8C03\u7528\uFF08\u3000\u3000\uFF09\u65B9\u6CD5\u5C06\u5B83\u663E\u793A\u5230\u56FE\u50CF\u89C6\u56FE\u4E0A\u3002</p><p>A\uFF0EsetImageBitmap</p><p>B\uFF0EsetImageFile</p><p>C\uFF0EsetImageURI</p><p>D\uFF0EsetImageResource</p><p>\u56DB\u3001\u7B80\u7B54\u9898</p><p>\u8BF7\u7B80\u8981\u63CF\u8FF0\u5171\u4EAB\u53C2\u6570\u4E0E\u6570\u636E\u5E93\u4E24\u79CD\u5B58\u50A8\u65B9\u5F0F\u7684\u4E3B\u8981\u533A\u522B\u3002</p><p>\u4E94\u3001\u52A8\u624B\u7EC3\u4E60</p><p>1 \uFF0E\u8BF7\u4E0A\u673A\u5B9E\u9A8C\u5B8C\u5584\u627E\u56DE\u5BC6\u7801\u9879\u76EE\u7684\u8BB0\u4F4F\u5BC6\u7801\u529F\u80FD\uFF0C\u5206\u522B\u91C7\u7528\u4EE5\u4E0B\u4E24\u79CD\u5B58\u50A8\u65B9\u5F0F\uFF1A</p><p>\uFF08 1 \uFF09\u4F7F\u7528\u5171\u4EAB\u53C2\u6570\u8BB0\u4F4F\u4E0A\u6B21\u767B\u5F55\u6210\u529F\u65F6\u8F93\u5165\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801\u3002</p><p>\uFF08 2 \uFF09\u4F7F\u7528SQLite\u6570\u636E\u5E93\u8BB0\u4F4F\u7528\u6237\u540D\u5BF9\u5E94\u7684\u5BC6\u7801\uFF0C\u4E5F\u5C31\u662F\u6839\u636E\u7528\u6237\u540D\u81EA\u52A8\u586B\u5199\u5BC6\u7801\u3002</p><p>2 \uFF0E\u8BF7\u4E0A\u673A\u5B9E\u9A8C\u672C\u7AE0\u7684\u8D2D\u7269\u8F66\u9879\u76EE\uFF0C\u8981\u6C42\u5B9E\u73B0\u4E0B\u5217\u529F\u80FD\uFF1A</p><p>\uFF08 1 \uFF09\u5F80\u8D2D\u7269\u8F66\u6DFB\u52A0\u5546\u54C1\u3002</p><p>\uFF08 2 \uFF09\u81EA\u52A8\u8BA1\u7B97\u8D2D\u7269\u8F66\u4E2D\u6240\u6709\u5546\u54C1\u7684\u603B\u91D1\u989D\u3002</p><p>\uFF08 3 \uFF09\u79FB\u9664\u8D2D\u7269\u8F66\u91CC\u7684\u67D0\u4E2A\u5546\u54C1\u3002</p><p>\uFF08 4 \uFF09\u6E05\u7A7A\u8D2D\u7269\u8F66\u3002</p>`,342),o=[e];function c(l,i){return s(),a("div",null,o)}var k=n(p,[["render",c],["__file","\u7B2C06\u7AE0\u6570\u636E\u5B58\u50A8.html.vue"]]);export{k as default};
