import{_ as p,o as e,c as o,a as n,b as c,e as s,d as a,r as l}from"./app.3924f47e.js";const u={},i=s(`<h1 id="\u7B2C9\u7AE0-\u79FB\u52A8\u7AEF\u5F00\u53D1-\u624B\u673A\u5FEB\u901F\u767B\u5F55\u3001\u6743\u9650\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#\u7B2C9\u7AE0-\u79FB\u52A8\u7AEF\u5F00\u53D1-\u624B\u673A\u5FEB\u901F\u767B\u5F55\u3001\u6743\u9650\u63A7\u5236" aria-hidden="true">#</a> \u7B2C9\u7AE0 \u79FB\u52A8\u7AEF\u5F00\u53D1-\u624B\u673A\u5FEB\u901F\u767B\u5F55\u3001\u6743\u9650\u63A7\u5236</h1><h2 id="_1-\u9700\u6C42\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_1-\u9700\u6C42\u5206\u6790" aria-hidden="true">#</a> 1. \u9700\u6C42\u5206\u6790</h2><p>\u624B\u673A\u5FEB\u901F\u767B\u5F55\u529F\u80FD\uFF0C\u5C31\u662F\u901A\u8FC7\u77ED\u4FE1\u9A8C\u8BC1\u7801\u7684\u65B9\u5F0F\u8FDB\u884C\u767B\u5F55\u3002\u8FD9\u79CD\u65B9\u5F0F\u76F8\u5BF9\u4E8E\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u65B9\u5F0F\uFF0C\u7528\u6237\u4E0D\u9700\u8981\u8BB0\u5FC6\u81EA\u5DF1\u7684\u5BC6\u7801\uFF0C\u53EA\u9700\u8981\u901A\u8FC7\u8F93\u5165\u624B\u673A\u53F7\u5E76\u83B7\u53D6\u9A8C\u8BC1\u7801\u5C31\u53EF\u4EE5\u5B8C\u6210\u767B\u5F55\uFF0C\u662F\u76EE\u524D\u6BD4\u8F83\u6D41\u884C\u7684\u767B\u5F55\u65B9\u5F0F\u3002</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202208231006951.png" alt="5"></p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202208231006520.png" alt="2"></p><h2 id="_2-\u624B\u673A\u5FEB\u901F\u767B\u5F55" tabindex="-1"><a class="header-anchor" href="#_2-\u624B\u673A\u5FEB\u901F\u767B\u5F55" aria-hidden="true">#</a> 2. \u624B\u673A\u5FEB\u901F\u767B\u5F55</h2><h3 id="_2-1-\u9875\u9762\u8C03\u6574" tabindex="-1"><a class="header-anchor" href="#_2-1-\u9875\u9762\u8C03\u6574" aria-hidden="true">#</a> 2.1 \u9875\u9762\u8C03\u6574</h3><p>\u767B\u5F55\u9875\u9762\u4E3A/pages/login.html</p><h4 id="_2-1-1-\u53D1\u9001\u9A8C\u8BC1\u7801" tabindex="-1"><a class="header-anchor" href="#_2-1-1-\u53D1\u9001\u9A8C\u8BC1\u7801" aria-hidden="true">#</a> 2.1.1 \u53D1\u9001\u9A8C\u8BC1\u7801</h4><p>\u4E3A\u83B7\u53D6\u9A8C\u8BC1\u7801\u6309\u94AE\u7ED1\u5B9A\u4E8B\u4EF6\uFF0C\u5E76\u5728\u4E8B\u4EF6\u5BF9\u5E94\u7684\u5904\u7406\u51FD\u6570\u4E2D\u6821\u9A8C\u624B\u673A\u53F7\uFF0C\u5982\u679C\u624B\u673A\u53F7\u8F93\u5165\u6B63\u786E\u5219\u663E\u793A30\u79D2\u5012\u8BA1\u65F6\u6548\u679C\u5E76\u53D1\u9001ajax\u8BF7\u6C42\uFF0C\u53D1\u9001\u77ED\u4FE1\u9A8C\u8BC1\u7801</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>\u624B\u673A\u53F7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginInput<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginInfo.telephone<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>account<span class="token punctuation">&#39;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> 
           <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u8BF7\u8F93\u5165\u624B\u673A\u53F7<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>validateCodeButton<span class="token punctuation">&quot;</span></span> 
           <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sendValidateCode()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 12px</span><span class="token punctuation">&quot;</span></span></span> 
           <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u83B7\u53D6\u9A8C\u8BC1\u7801<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">var</span> vue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">loginInfo</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">//\u767B\u5F55\u4FE1\u606F</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token comment">//\u53D1\u9001\u9A8C\u8BC1\u7801</span>
      <span class="token function">sendValidateCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> telephone <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loginInfo<span class="token punctuation">.</span>telephone<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkTelephone</span><span class="token punctuation">(</span>telephone<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        validateCodeButton <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#validateCodeButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        clock <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">setInterval</span><span class="token punctuation">(</span>doLoop<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u4E00\u79D2\u6267\u884C\u4E00\u6B21</span>
        axios<span class="token punctuation">.</span>
        <span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/validateCode/send4Login.do?telephone=&quot;</span> <span class="token operator">+</span> telephone<span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u9A8C\u8BC1\u7801\u53D1\u9001\u5931\u8D25</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;\u9A8C\u8BC1\u7801\u53D1\u9001\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u624B\u673A\u53F7\u8F93\u5165\u662F\u5426\u6B63\u786E&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728ValidateCodeController\u4E2D\u63D0\u4F9Bsend4Login\u65B9\u6CD5\uFF0C\u8C03\u7528\u77ED\u4FE1\u670D\u52A1\u53D1\u9001\u9A8C\u8BC1\u7801\u5E76\u5C06\u9A8C\u8BC1\u7801\u4FDD\u5B58\u5230redis</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u624B\u673A\u5FEB\u901F\u767B\u5F55\u65F6\u53D1\u9001\u624B\u673A\u9A8C\u8BC1\u7801</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/send4Login&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">send4Login</span><span class="token punctuation">(</span><span class="token class-name">String</span> telephone<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">Integer</span> code <span class="token operator">=</span> <span class="token class-name">ValidateCodeUtils</span><span class="token punctuation">.</span><span class="token function">generateValidateCode</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u751F\u62106\u4F4D\u6570\u5B57\u9A8C\u8BC1\u7801</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u53D1\u9001\u77ED\u4FE1</span>
    <span class="token class-name">SMSUtils</span><span class="token punctuation">.</span><span class="token function">sendShortMessage</span><span class="token punctuation">(</span><span class="token class-name">SMSUtils</span><span class="token punctuation">.</span><span class="token constant">VALIDATE_CODE</span><span class="token punctuation">,</span>telephone<span class="token punctuation">,</span>code<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u9A8C\u8BC1\u7801\u53D1\u9001\u5931\u8D25</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">SEND_VALIDATECODE_FAIL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u53D1\u9001\u7684\u624B\u673A\u9A8C\u8BC1\u7801\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//\u5C06\u751F\u6210\u7684\u9A8C\u8BC1\u7801\u7F13\u5B58\u5230redis</span>
  jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setex</span><span class="token punctuation">(</span>telephone<span class="token operator">+</span><span class="token class-name">RedisMessageConstant</span><span class="token punctuation">.</span><span class="token constant">SENDTYPE_LOGIN</span><span class="token punctuation">,</span>
                                <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span>
                                code<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">SEND_VALIDATECODE_SUCCESS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-1-2-\u63D0\u4EA4\u767B\u5F55\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#_2-1-2-\u63D0\u4EA4\u767B\u5F55\u8BF7\u6C42" aria-hidden="true">#</a> 2.1.2 \u63D0\u4EA4\u767B\u5F55\u8BF7\u6C42</h4><p>\u4E3A\u767B\u5F55\u6309\u94AE\u7ED1\u5B9A\u4E8B\u4EF6</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn yes-btn&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a @click<span class="token operator">=</span><span class="token string">&quot;login()&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;#&quot;</span><span class="token operator">&gt;</span>\u767B\u5F55<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//\u767B\u5F55</span>
<span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> telephone <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loginInfo<span class="token punctuation">.</span>telephone<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkTelephone</span><span class="token punctuation">(</span>telephone<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/member/login.do&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>loginInfo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//\u767B\u5F55\u6210\u529F,\u8DF3\u8F6C\u5230\u4F1A\u5458\u9875\u9762</span>
      window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">&quot;member.html&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token comment">//\u5931\u8D25\uFF0C\u63D0\u793A\u5931\u8D25\u4FE1\u606F</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-\u540E\u53F0\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_2-2-\u540E\u53F0\u4EE3\u7801" aria-hidden="true">#</a> 2.2 \u540E\u53F0\u4EE3\u7801</h3><h4 id="_2-2-1-controller" tabindex="-1"><a class="header-anchor" href="#_2-2-1-controller" aria-hidden="true">#</a> 2.2.1 Controller</h4><p>\u5728health_mobile\u5DE5\u7A0B\u4E2D\u521B\u5EFAMemberController\u5E76\u63D0\u4F9Blogin\u65B9\u6CD5\u8FDB\u884C\u767B\u5F55\u68C0\u67E5\uFF0C\u5904\u7406\u903B\u8F91\u4E3A\uFF1A</p><p>1\u3001\u6821\u9A8C\u7528\u6237\u8F93\u5165\u7684\u77ED\u4FE1\u9A8C\u8BC1\u7801\u662F\u5426\u6B63\u786E\uFF0C\u5982\u679C\u9A8C\u8BC1\u7801\u9519\u8BEF\u5219\u767B\u5F55\u5931\u8D25</p><p>2\u3001\u5982\u679C\u9A8C\u8BC1\u7801\u6B63\u786E\uFF0C\u5219\u5224\u65AD\u5F53\u524D\u7528\u6237\u662F\u5426\u4E3A\u4F1A\u5458\uFF0C\u5982\u679C\u4E0D\u662F\u4F1A\u5458\u5219\u81EA\u52A8\u5B8C\u6210\u4F1A\u5458\u6CE8\u518C</p><p>3\u3001\u5411\u5BA2\u6237\u7AEF\u5199\u5165Cookie\uFF0C\u5185\u5BB9\u4E3A\u7528\u6237\u624B\u673A\u53F7</p><p>4\u3001\u5C06\u4F1A\u5458\u4FE1\u606F\u4FDD\u5B58\u5230Redis\uFF0C\u4F7F\u7528\u624B\u673A\u53F7\u4F5C\u4E3Akey\uFF0C\u4FDD\u5B58\u65F6\u957F\u4E3A30\u5206\u949F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSON</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Reference</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span><span class="token class-name">ClientException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">MessageConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">RedisConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">RedisMessageConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Member</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">MemberService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JedisUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestBody</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">JedisPool</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">Cookie</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * \u4F1A\u5458\u767B\u5F55
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/member&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MemberController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Reference</span>
    <span class="token keyword">private</span> <span class="token class-name">MemberService</span> memberService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JedisPool</span> jedisPool<span class="token punctuation">;</span>
  
    <span class="token comment">//\u4F7F\u7528\u624B\u673A\u53F7\u548C\u9A8C\u8BC1\u7801\u767B\u5F55</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Map</span> map<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> telephone <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;telephone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> validateCode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;validateCode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECERedis\u4E2D\u83B7\u53D6\u7F13\u5B58\u7684\u9A8C\u8BC1\u7801</span>
        <span class="token class-name">String</span> codeInRedis <span class="token operator">=</span> 
            jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>telephone<span class="token operator">+</span><span class="token class-name">RedisMessageConstant</span><span class="token punctuation">.</span><span class="token constant">SENDTYPE_LOGIN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>codeInRedis <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>codeInRedis<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>validateCode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u9A8C\u8BC1\u7801\u8F93\u5165\u9519\u8BEF</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">VALIDATECODE_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">//\u9A8C\u8BC1\u7801\u8F93\u5165\u6B63\u786E</span>
            <span class="token comment">//\u5224\u65AD\u5F53\u524D\u7528\u6237\u662F\u5426\u4E3A\u4F1A\u5458</span>
            <span class="token class-name">Member</span> member <span class="token operator">=</span> memberService<span class="token punctuation">.</span><span class="token function">findByTelephone</span><span class="token punctuation">(</span>telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>member <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//\u5F53\u524D\u7528\u6237\u4E0D\u662F\u4F1A\u5458\uFF0C\u81EA\u52A8\u5B8C\u6210\u6CE8\u518C</span>
                member <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Member</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                member<span class="token punctuation">.</span><span class="token function">setPhoneNumber</span><span class="token punctuation">(</span>telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
                member<span class="token punctuation">.</span><span class="token function">setRegTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                memberService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//\u767B\u5F55\u6210\u529F</span>
            <span class="token comment">//\u5199\u5165Cookie\uFF0C\u8DDF\u8E2A\u7528\u6237</span>
            <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;login_member_telephone&quot;</span><span class="token punctuation">,</span>telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cookie<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8DEF\u5F84</span>
            cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6709\u6548\u671F30\u5929</span>
            response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u4FDD\u5B58\u4F1A\u5458\u4FE1\u606F\u5230Redis\u4E2D</span>
            <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setex</span><span class="token punctuation">(</span>telephone<span class="token punctuation">,</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">,</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">LOGIN_SUCCESS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-2-\u670D\u52A1\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_2-2-2-\u670D\u52A1\u63A5\u53E3" aria-hidden="true">#</a> 2.2.2 \u670D\u52A1\u63A5\u53E3</h4><p>\u5728MemberService\u670D\u52A1\u63A5\u53E3\u4E2D\u63D0\u4F9BfindByTelephone\u548Cadd\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Member</span> member<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">Member</span> <span class="token function">findByTelephone</span><span class="token punctuation">(</span><span class="token class-name">String</span> telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-3-\u670D\u52A1\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-2-3-\u670D\u52A1\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> 2.2.3 \u670D\u52A1\u5B9E\u73B0\u7C7B</h4><p>\u5728MemberServiceImpl\u670D\u52A1\u5B9E\u73B0\u7C7B\u4E2D\u5B9E\u73B0findByTelephone\u548Cadd\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u6839\u636E\u624B\u673A\u53F7\u67E5\u8BE2\u4F1A\u5458</span>
<span class="token keyword">public</span> <span class="token class-name">Member</span> <span class="token function">findByTelephone</span><span class="token punctuation">(</span><span class="token class-name">String</span> telephone<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> memberDao<span class="token punctuation">.</span><span class="token function">findByTelephone</span><span class="token punctuation">(</span>telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u65B0\u589E\u4F1A\u5458</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Member</span> member<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>member<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    member<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token class-name">MD5Utils</span><span class="token punctuation">.</span><span class="token function">md5</span><span class="token punctuation">(</span>member<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  memberDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-4-dao\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_2-2-4-dao\u63A5\u53E3" aria-hidden="true">#</a> 2.2.4 Dao\u63A5\u53E3</h4><p>\u5728MemberDao\u63A5\u53E3\u4E2D\u58F0\u660EfindByTelephone\u548Cadd\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Member</span> <span class="token function">findByTelephone</span><span class="token punctuation">(</span><span class="token class-name">String</span> telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Member</span> member<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-5-mapper\u6620\u5C04\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-2-5-mapper\u6620\u5C04\u6587\u4EF6" aria-hidden="true">#</a> 2.2.5 Mapper\u6620\u5C04\u6587\u4EF6</h4><p>\u5728MemberDao.xml\u6620\u5C04\u6587\u4EF6\u4E2D\u5B9A\u4E49SQL\u8BED\u53E5</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u65B0\u589E\u4F1A\u5458--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.pojo.Member<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.Integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT LAST_INSERT_ID()
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
  insert into t_member
  (fileNumber,name,sex,idCard,phoneNumber,regTime,password,email,birthday,remark)
  values 
  (#{fileNumber},#{name},#{sex},#{idCard},#{phoneNumber},#{regTime},#{password},#{email},#{birthday},#{remark})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u6839\u636E\u624B\u673A\u53F7\u67E5\u8BE2\u4F1A\u5458--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findByTelephone<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.pojo.Member<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select * from t_member where phoneNumber = #{phoneNumber}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-\u6743\u9650\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#_3-\u6743\u9650\u63A7\u5236" aria-hidden="true">#</a> 3. \u6743\u9650\u63A7\u5236</h2><h3 id="_3-1-\u8BA4\u8BC1\u548C\u6388\u6743\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_3-1-\u8BA4\u8BC1\u548C\u6388\u6743\u6982\u5FF5" aria-hidden="true">#</a> 3.1 \u8BA4\u8BC1\u548C\u6388\u6743\u6982\u5FF5</h3><p>\u524D\u9762\u6211\u4EEC\u5DF2\u7ECF\u5B8C\u6210\u4E86\u4F20\u667A\u5065\u5EB7\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u4F8B\u5982\u68C0\u67E5\u9879\u7BA1\u7406\u3001\u68C0\u67E5\u7EC4\u7BA1\u7406\u3001\u5957\u9910\u7BA1\u7406\u3001\u9884\u7EA6\u8BBE\u7F6E\u7B49\u3002\u63A5\u4E0B\u6765\u6211\u4EEC\u9700\u8981\u601D\u80032\u4E2A\u95EE\u9898\uFF1A</p><p>\u95EE\u98981\uFF1A\u5728\u751F\u4EA7\u73AF\u5883\u4E0B\u6211\u4EEC\u5982\u679C\u4E0D\u767B\u5F55\u540E\u53F0\u7CFB\u7EDF\u5C31\u53EF\u4EE5\u5B8C\u6210\u8FD9\u4E9B\u529F\u80FD\u64CD\u4F5C\u5417\uFF1F</p><p>\u7B54\u6848\u663E\u7136\u662F\u5426\u5B9A\u7684\uFF0C\u8981\u64CD\u4F5C\u8FD9\u4E9B\u529F\u80FD\u5FC5\u987B\u9996\u5148\u767B\u5F55\u5230\u7CFB\u7EDF\u624D\u53EF\u4EE5\u3002</p><p>\u95EE\u98982\uFF1A\u662F\u4E0D\u662F\u6240\u6709\u7528\u6237\uFF0C\u53EA\u8981\u767B\u5F55\u6210\u529F\u5C31\u90FD\u53EF\u4EE5\u64CD\u4F5C\u6240\u6709\u529F\u80FD\u5462\uFF1F</p><p>\u7B54\u6848\u662F\u5426\u5B9A\u7684\uFF0C\u5E76\u4E0D\u662F\u6240\u6709\u7684\u7528\u6237\u90FD\u53EF\u4EE5\u64CD\u4F5C\u8FD9\u4E9B\u529F\u80FD\u3002\u4E0D\u540C\u7684\u7528\u6237\u53EF\u80FD\u62E5\u6709\u4E0D\u540C\u7684\u6743\u9650\uFF0C\u8FD9\u5C31\u9700\u8981\u8FDB\u884C\u6388\u6743\u4E86\u3002</p><p>\u8BA4\u8BC1\uFF1A\u7CFB\u7EDF\u63D0\u4F9B\u7684\u7528\u4E8E\u8BC6\u522B\u7528\u6237\u8EAB\u4EFD\u7684\u529F\u80FD\uFF0C\u901A\u5E38\u63D0\u4F9B\u7528\u6237\u540D\u548C\u5BC6\u7801\u8FDB\u884C\u767B\u5F55\u5176\u5B9E\u5C31\u662F\u5728\u8FDB\u884C\u8BA4\u8BC1\uFF0C\u8BA4\u8BC1\u7684\u76EE\u7684\u662F\u8BA9\u7CFB\u7EDF\u77E5\u9053\u4F60\u662F\u8C01\u3002</p><p>\u6388\u6743\uFF1A\u7528\u6237\u8BA4\u8BC1\u6210\u529F\u540E\uFF0C\u9700\u8981\u4E3A\u7528\u6237\u6388\u6743\uFF0C\u5176\u5B9E\u5C31\u662F\u6307\u5B9A\u5F53\u524D\u7528\u6237\u53EF\u4EE5\u64CD\u4F5C\u54EA\u4E9B\u529F\u80FD\u3002</p><p>\u672C\u7AE0\u8282\u5C31\u662F\u8981\u5BF9\u540E\u53F0\u7CFB\u7EDF\u8FDB\u884C\u6743\u9650\u63A7\u5236\uFF0C\u5176\u672C\u8D28\u5C31\u662F\u5BF9\u7528\u6237\u8FDB\u884C\u8BA4\u8BC1\u548C\u6388\u6743\u3002</p><h3 id="_3-2-\u6743\u9650\u6A21\u5757\u6570\u636E\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#_3-2-\u6743\u9650\u6A21\u5757\u6570\u636E\u6A21\u578B" aria-hidden="true">#</a> 3.2 \u6743\u9650\u6A21\u5757\u6570\u636E\u6A21\u578B</h3><p>\u524D\u9762\u5DF2\u7ECF\u5206\u6790\u4E86\u8BA4\u8BC1\u548C\u6388\u6743\u7684\u6982\u5FF5\uFF0C\u8981\u5B9E\u73B0\u6700\u7EC8\u7684\u6743\u9650\u63A7\u5236\uFF0C\u9700\u8981\u6709\u4E00\u5957\u8868\u7ED3\u6784\u652F\u6491\uFF1A</p><p>\u7528\u6237\u8868t_user\u3001\u6743\u9650\u8868t_permission\u3001\u89D2\u8272\u8868t_role\u3001\u83DC\u5355\u8868t_menu\u3001\u7528\u6237\u89D2\u8272\u5173\u7CFB\u8868t_user_role\u3001\u89D2\u8272\u6743\u9650\u5173\u7CFB\u8868t_role_permission\u3001\u89D2\u8272\u83DC\u5355\u5173\u7CFB\u8868t_role_menu\u3002</p><p>\u8868\u4E4B\u95F4\u5173\u7CFB\u5982\u4E0B\u56FE\uFF1A</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202208231006135.png" alt="3"></p><p>\u901A\u8FC7\u4E0A\u56FE\u53EF\u4EE5\u770B\u5230\uFF0C\u6743\u9650\u6A21\u5757\u5171\u6D89\u53CA\u52307\u5F20\u8868\u3002\u5728\u8FD97\u5F20\u8868\u4E2D\uFF0C\u89D2\u8272\u8868\u8D77\u5230\u4E86\u81F3\u5173\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5176\u5904\u4E8E\u6838\u5FC3\u4F4D\u7F6E\uFF0C\u56E0\u4E3A\u7528\u6237\u3001\u6743\u9650\u3001\u83DC\u5355\u90FD\u548C\u89D2\u8272\u662F\u591A\u5BF9\u591A\u5173\u7CFB\u3002</p><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u53EF\u4EE5\u5206\u6790\u4E00\u4E0B\u5728\u8BA4\u8BC1\u548C\u6388\u6743\u8FC7\u7A0B\u4E2D\u5206\u522B\u4F1A\u4F7F\u7528\u5230\u54EA\u4E9B\u8868\uFF1A</p><p>\u8BA4\u8BC1\u8FC7\u7A0B\uFF1A\u53EA\u9700\u8981\u7528\u6237\u8868\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5728\u7528\u6237\u767B\u5F55\u65F6\u53EF\u4EE5\u67E5\u8BE2\u7528\u6237\u8868t_user\u8FDB\u884C\u6821\u9A8C\uFF0C\u5224\u65AD\u7528\u6237\u8F93\u5165\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801\u662F\u5426\u6B63\u786E\u3002</p><p>\u6388\u6743\u8FC7\u7A0B\uFF1A\u7528\u6237\u5FC5\u987B\u5B8C\u6210\u8BA4\u8BC1\u4E4B\u540E\u624D\u53EF\u4EE5\u8FDB\u884C\u6388\u6743\uFF0C\u9996\u5148\u53EF\u4EE5\u6839\u636E\u7528\u6237\u67E5\u8BE2\u5176\u89D2\u8272\uFF0C\u518D\u6839\u636E\u89D2\u8272\u67E5\u8BE2\u5BF9\u5E94\u7684\u83DC\u5355\uFF0C\u8FD9\u6837\u5C31\u786E\u5B9A\u4E86\u7528\u6237\u80FD\u591F\u770B\u5230\u54EA\u4E9B\u83DC\u5355\u3002\u7136\u540E\u518D\u6839\u636E\u7528\u6237\u7684\u89D2\u8272\u67E5\u8BE2\u5BF9\u5E94\u7684\u6743\u9650\uFF0C\u8FD9\u6837\u5C31\u786E\u5B9A\u4E86\u7528\u6237\u62E5\u6709\u54EA\u4E9B\u6743\u9650\u3002\u6240\u4EE5\u6388\u6743\u8FC7\u7A0B\u4F1A\u7528\u5230\u4E0A\u97627\u5F20\u8868\u3002</p><h3 id="_3-3-spring-security\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_3-3-spring-security\u7B80\u4ECB" aria-hidden="true">#</a> 3.3 Spring Security\u7B80\u4ECB</h3>`,58),k=a("Spring Security\u662F Spring\u63D0\u4F9B\u7684\u5B89\u5168\u8BA4\u8BC1\u670D\u52A1\u7684\u6846\u67B6\u3002 \u4F7F\u7528Spring Security\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u6765\u7B80\u5316\u8BA4\u8BC1\u548C\u6388\u6743\u7684\u8FC7\u7A0B\u3002\u5B98\u7F51\uFF1A"),r={href:"https://spring.io/projects/spring-security",target:"_blank",rel:"noopener noreferrer"},d=a("https://spring.io/projects/spring-security"),m=s(`<p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202208231007992.png" alt="4"></p><p>\u5BF9\u5E94\u7684maven\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-security-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-security-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5E38\u7528\u7684\u6743\u9650\u6846\u67B6\u9664\u4E86Spring Security\uFF0C\u8FD8\u6709Apache\u7684shiro\u6846\u67B6\u3002</p><h3 id="_3-4-spring-security\u5165\u95E8\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_3-4-spring-security\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> 3.4 Spring Security\u5165\u95E8\u6848\u4F8B</h3><h4 id="_3-4-1-\u5DE5\u7A0B\u642D\u5EFA" tabindex="-1"><a class="header-anchor" href="#_3-4-1-\u5DE5\u7A0B\u642D\u5EFA" aria-hidden="true">#</a> 3.4.1 \u5DE5\u7A0B\u642D\u5EFA</h4><p>\u521B\u5EFAmaven\u5DE5\u7A0B\uFF0C\u6253\u5305\u65B9\u5F0F\u4E3Awar\uFF0C\u4E3A\u4E86\u65B9\u4FBF\u8D77\u89C1\u6211\u4EEC\u53EF\u4EE5\u8BA9\u5165\u95E8\u6848\u4F8B\u5DE5\u7A0B\u4F9D\u8D56health_interface\uFF0C\u8FD9\u6837\u76F8\u5173\u7684\u4F9D\u8D56\u90FD\u7EE7\u627F\u8FC7\u6765\u4E86\u3002</p><p>pom.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springsecuritydemo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>springsecuritydemo Maven Webapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://www.example.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>health_interface<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.tomcat.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tomcat7-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- \u6307\u5B9A\u7AEF\u53E3 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>85<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- \u8BF7\u6C42\u8DEF\u5F84 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63D0\u4F9Bindex.html\u9875\u9762\uFF0C\u5185\u5BB9\u4E3Ahello Spring Security!!</p><h4 id="_3-4-2-\u914D\u7F6Eweb-xml" tabindex="-1"><a class="header-anchor" href="#_3-4-2-\u914D\u7F6Eweb-xml" aria-hidden="true">#</a> 3.4.2 \u914D\u7F6Eweb.xml</h4><p>\u5728web.xml\u4E2D\u4E3B\u8981\u914D\u7F6ESpringMVC\u7684DispatcherServlet\u548C\u7528\u4E8E\u6574\u5408\u7B2C\u4E09\u65B9\u6846\u67B6\u7684DelegatingFilterProxy\uFF0C\u7528\u4E8E\u6574\u5408Spring Security\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">web-app</span> <span class="token name">PUBLIC</span>
 <span class="token string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span>
 <span class="token string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Archetype Created Web Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
      DelegatingFilterProxy\u7528\u4E8E\u6574\u5408\u7B2C\u4E09\u65B9\u6846\u67B6
      \u6574\u5408Spring Security\u65F6\u8FC7\u6EE4\u5668\u7684\u540D\u79F0\u5FC5\u987B\u4E3AspringSecurityFilterChain\uFF0C
	  \u5426\u5219\u4F1A\u629B\u51FANoSuchBeanDefinitionException\u5F02\u5E38
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>springSecurityFilterChain<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.filter.DelegatingFilterProxy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>springSecurityFilterChain<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u6307\u5B9A\u52A0\u8F7D\u7684\u914D\u7F6E\u6587\u4EF6 \uFF0C\u901A\u8FC7\u53C2\u6570contextConfigLocation\u52A0\u8F7D --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:spring-security.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-4-3-\u914D\u7F6Espring-security-xml" tabindex="-1"><a class="header-anchor" href="#_3-4-3-\u914D\u7F6Espring-security-xml" aria-hidden="true">#</a> 3.4.3 \u914D\u7F6Espring-security.xml</h4><p>\u5728spring-security.xml\u4E2D\u4E3B\u8981\u914D\u7F6ESpring Security\u7684\u62E6\u622A\u89C4\u5219\u548C\u8BA4\u8BC1\u7BA1\u7406\u5668\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>dubbo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://code.alibabatech.com/schema/dubbo<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/mvc<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>security</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/security<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
						http://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/mvc
						http://www.springframework.org/schema/mvc/spring-mvc.xsd
						http://code.alibabatech.com/schema/dubbo
						http://code.alibabatech.com/schema/dubbo/dubbo.xsd
						http://www.springframework.org/schema/context
						http://www.springframework.org/schema/context/spring-context.xsd
                          http://www.springframework.org/schema/security
                          http://www.springframework.org/schema/security/spring-security.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--
        http\uFF1A\u7528\u4E8E\u5B9A\u4E49\u76F8\u5173\u6743\u9650\u63A7\u5236
        auto-config\uFF1A\u662F\u5426\u81EA\u52A8\u914D\u7F6E
                        \u8BBE\u7F6E\u4E3Atrue\u65F6\u6846\u67B6\u4F1A\u63D0\u4F9B\u9ED8\u8BA4\u7684\u4E00\u4E9B\u914D\u7F6E\uFF0C\u4F8B\u5982\u63D0\u4F9B\u9ED8\u8BA4\u7684\u767B\u5F55\u9875\u9762\u3001\u767B\u51FA\u5904\u7406\u7B49
                        \u8BBE\u7F6E\u4E3Afalse\u65F6\u9700\u8981\u663E\u793A\u63D0\u4F9B\u767B\u5F55\u8868\u5355\u914D\u7F6E\uFF0C\u5426\u5219\u4F1A\u62A5\u9519
        use-expressions\uFF1A\u7528\u4E8E\u6307\u5B9Aintercept-url\u4E2D\u7684access\u5C5E\u6027\u662F\u5426\u4F7F\u7528\u8868\u8FBE\u5F0F
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>http</span> <span class="token attr-name">auto-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">use-expressions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
            intercept-url\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62E6\u622A\u89C4\u5219
            pattern\uFF1A\u5BF9\u54EA\u4E9Burl\u8FDB\u884C\u6743\u9650\u63A7\u5236
            access\uFF1A\u5728\u8BF7\u6C42\u5BF9\u5E94\u7684URL\u65F6\u9700\u8981\u4EC0\u4E48\u6743\u9650\uFF0C\u9ED8\u8BA4\u914D\u7F6E\u65F6\u5B83\u5E94\u8BE5\u662F\u4E00\u4E2A\u4EE5\u9017\u53F7\u5206\u9694\u7684\u89D2\u8272\u5217\u8868\uFF0C
				  \u8BF7\u6C42\u7684\u7528\u6237\u53EA\u9700\u62E5\u6709\u5176\u4E2D\u7684\u4E00\u4E2A\u89D2\u8272\u5C31\u80FD\u6210\u529F\u8BBF\u95EE\u5BF9\u5E94\u7684URL
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>intercept-url</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/**<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hasRole(&#39;ROLE_ADMIN&#39;)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>http</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--
        authentication-manager\uFF1A\u8BA4\u8BC1\u7BA1\u7406\u5668\uFF0C\u7528\u4E8E\u5904\u7406\u8BA4\u8BC1\u64CD\u4F5C
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>authentication-manager</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
            authentication-provider\uFF1A\u8BA4\u8BC1\u63D0\u4F9B\u8005\uFF0C\u6267\u884C\u5177\u4F53\u7684\u8BA4\u8BC1\u903B\u8F91
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>authentication-provider</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--
                user-service\uFF1A\u7528\u4E8E\u83B7\u53D6\u7528\u6237\u4FE1\u606F\uFF0C\u63D0\u4F9B\u7ED9authentication-provider\u8FDB\u884C\u8BA4\u8BC1
            --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>user-service</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!--
                    user\uFF1A\u5B9A\u4E49\u7528\u6237\u4FE1\u606F\uFF0C\u53EF\u4EE5\u6307\u5B9A\u7528\u6237\u540D\u3001\u5BC6\u7801\u3001\u89D2\u8272\uFF0C\u540E\u671F\u53EF\u4EE5\u6539\u4E3A\u4ECE\u6570\u636E\u5E93\u67E5\u8BE2\u7528\u6237\u4FE1\u606F
				  {noop}\uFF1A\u8868\u793A\u5F53\u524D\u4F7F\u7528\u7684\u5BC6\u7801\u4E3A\u660E\u6587
                --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>user</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span> 
                               <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{noop}admin<span class="token punctuation">&quot;</span></span> 
                               <span class="token attr-name">authorities</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ROLE_ADMIN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>user</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>user-service</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>authentication-provider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>authentication-manager</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-\u5BF9\u5165\u95E8\u6848\u4F8B\u6539\u8FDB" tabindex="-1"><a class="header-anchor" href="#_3-5-\u5BF9\u5165\u95E8\u6848\u4F8B\u6539\u8FDB" aria-hidden="true">#</a> 3.5 \u5BF9\u5165\u95E8\u6848\u4F8B\u6539\u8FDB</h3><p>\u524D\u9762\u6211\u4EEC\u5DF2\u7ECF\u5B8C\u6210\u4E86Spring Security\u7684\u5165\u95E8\u6848\u4F8B\uFF0C\u901A\u8FC7\u5165\u95E8\u6848\u4F8B\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0CSpring Security\u5C06\u6211\u4EEC\u9879\u76EE\u4E2D\u7684\u6240\u6709\u8D44\u6E90\u90FD\u4FDD\u62A4\u4E86\u8D77\u6765\uFF0C\u8981\u8BBF\u95EE\u8FD9\u4E9B\u8D44\u6E90\u5FC5\u987B\u8981\u5B8C\u6210\u8BA4\u8BC1\u800C\u4E14\u9700\u8981\u5177\u6709ROLE_ADMIN\u89D2\u8272\u3002</p><p>\u4F46\u662F\u5165\u95E8\u6848\u4F8B\u4E2D\u7684\u4F7F\u7528\u65B9\u6CD5\u79BB\u6211\u4EEC\u771F\u5B9E\u751F\u4EA7\u73AF\u5883\u8FD8\u5DEE\u5F88\u8FDC\uFF0C\u8FD8\u5B58\u5728\u5982\u4E0B\u4E00\u4E9B\u95EE\u9898\uFF1A</p><p>1\u3001\u9879\u76EE\u4E2D\u6211\u4EEC\u5C06\u6240\u6709\u7684\u8D44\u6E90\uFF08\u6240\u6709\u8BF7\u6C42URL\uFF09\u90FD\u4FDD\u62A4\u8D77\u6765\uFF0C\u5B9E\u9645\u73AF\u5883\u4E0B\u5F80\u5F80\u6709\u4E00\u4E9B\u8D44\u6E90\u4E0D\u9700\u8981\u8BA4\u8BC1\u4E5F\u53EF\u4EE5\u8BBF\u95EE\uFF0C\u4E5F\u5C31\u662F\u53EF\u4EE5\u533F\u540D\u8BBF\u95EE\u3002</p><p>2\u3001\u767B\u5F55\u9875\u9762\u662F\u7531\u6846\u67B6\u751F\u6210\u7684\uFF0C\u800C\u6211\u4EEC\u7684\u9879\u76EE\u5F80\u5F80\u4F1A\u4F7F\u7528\u81EA\u5DF1\u7684\u767B\u5F55\u9875\u9762\u3002</p><p>3\u3001\u76F4\u63A5\u5C06\u7528\u6237\u540D\u548C\u5BC6\u7801\u914D\u7F6E\u5728\u4E86\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u800C\u771F\u5B9E\u751F\u4EA7\u73AF\u5883\u4E0B\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801\u5F80\u5F80\u4FDD\u5B58\u5728\u6570\u636E\u5E93\u4E2D\u3002</p><p>4\u3001\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u914D\u7F6E\u7684\u5BC6\u7801\u4F7F\u7528\u660E\u6587\uFF0C\u8FD9\u975E\u5E38\u4E0D\u5B89\u5168\uFF0C\u800C\u771F\u5B9E\u751F\u4EA7\u73AF\u5883\u4E0B\u5BC6\u7801\u9700\u8981\u8FDB\u884C\u52A0\u5BC6\u3002</p><p>\u672C\u7AE0\u8282\u9700\u8981\u5BF9\u8FD9\u4E9B\u95EE\u9898\u8FDB\u884C\u6539\u8FDB\u3002</p><h4 id="_3-5-1-\u914D\u7F6E\u53EF\u533F\u540D\u8BBF\u95EE\u7684\u8D44\u6E90" tabindex="-1"><a class="header-anchor" href="#_3-5-1-\u914D\u7F6E\u53EF\u533F\u540D\u8BBF\u95EE\u7684\u8D44\u6E90" aria-hidden="true">#</a> 3.5.1 \u914D\u7F6E\u53EF\u533F\u540D\u8BBF\u95EE\u7684\u8D44\u6E90</h4><p>\u7B2C\u4E00\u6B65\uFF1A\u5728\u9879\u76EE\u4E2D\u521B\u5EFApages\u76EE\u5F55\uFF0C\u5728pages\u76EE\u5F55\u4E2D\u521B\u5EFAa.html\u548Cb.html</p><p>\u7B2C\u4E8C\u6B65\uFF1A\u5728spring-security.xml\u6587\u4EF6\u4E2D\u914D\u7F6E\uFF0C\u6307\u5B9A\u54EA\u4E9B\u8D44\u6E90\u53EF\u4EE5\u533F\u540D\u8BBF\u95EE</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
  http\uFF1A\u7528\u4E8E\u5B9A\u4E49\u76F8\u5173\u6743\u9650\u63A7\u5236
  \u6307\u5B9A\u54EA\u4E9B\u8D44\u6E90\u4E0D\u9700\u8981\u8FDB\u884C\u6743\u9650\u6821\u9A8C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u901A\u914D\u7B26
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>http</span> <span class="token attr-name">security</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/a.html<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>http</span> <span class="token attr-name">security</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/paegs/b.html<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>http</span> <span class="token attr-name">security</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/**<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>http</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7\u4E0A\u9762\u7684\u914D\u7F6E\u53EF\u4EE5\u53D1\u73B0\uFF0Cpages\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u53EF\u4EE5\u5728\u6CA1\u6709\u8BA4\u8BC1\u7684\u60C5\u51B5\u4E0B\u4EFB\u610F\u8BBF\u95EE\u3002</p><h4 id="_3-5-2-\u4F7F\u7528\u6307\u5B9A\u7684\u767B\u5F55\u9875\u9762" tabindex="-1"><a class="header-anchor" href="#_3-5-2-\u4F7F\u7528\u6307\u5B9A\u7684\u767B\u5F55\u9875\u9762" aria-hidden="true">#</a> 3.5.2 \u4F7F\u7528\u6307\u5B9A\u7684\u767B\u5F55\u9875\u9762</h4><p>\u7B2C\u4E00\u6B65\uFF1A\u63D0\u4F9Blogin.html\u4F5C\u4E3A\u9879\u76EE\u7684\u767B\u5F55\u9875\u9762</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>\u767B\u5F55<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login.do<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        username\uFF1A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        password\uFF1A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u6B65\uFF1A\u4FEE\u6539spring-security.xml\u6587\u4EF6\uFF0C\u6307\u5B9Alogin.html\u9875\u9762\u53EF\u4EE5\u533F\u540D\u8BBF\u95EE</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>http</span> <span class="token attr-name">security</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login.html<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7B2C\u4E09\u6B65\uFF1A\u4FEE\u6539spring-security.xml\u6587\u4EF6\uFF0C\u5728<code>&lt;security:http&gt;&lt;/security:http&gt;</code>\u8282\u70B9\u4E0B\uFF0C\u52A0\u5165\u8868\u5355\u767B\u5F55\u4FE1\u606F\u7684\u914D\u7F6E</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
  form-login\uFF1A\u5B9A\u4E49\u8868\u5355\u767B\u5F55\u4FE1\u606F
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>form-login</span> <span class="token attr-name">login-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login.html<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">username-parameter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">password-parameter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">login-processing-url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login.do<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">default-target-url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/index.html<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">authentication-failure-url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login.html<span class="token punctuation">&quot;</span></span>
                     <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u56DB\u6B65\uFF1A\u4FEE\u6539spring-security.xml\u6587\u4EF6\uFF0C\u5728<code>&lt;security:http&gt;&lt;/security:http&gt;</code>\u8282\u70B9\u4E0B\uFF0C\u5173\u95EDCsrfFilter\u8FC7\u6EE4\u5668</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
  csrf\uFF1A\u5BF9\u5E94CsrfFilter\u8FC7\u6EE4\u5668
  disabled\uFF1A\u662F\u5426\u542F\u7528CsrfFilter\u8FC7\u6EE4\u5668\uFF0C\u5982\u679C\u4F7F\u7528\u81EA\u5B9A\u4E49\u767B\u5F55\u9875\u9762\u9700\u8981\u5173\u95ED\u6B64\u9879\uFF0C\u5426\u5219\u767B\u5F55\u64CD\u4F5C\u4F1A\u88AB\u7981\u7528\uFF08403\uFF09
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>csrf</span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>csrf</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-5-3-\u4ECE\u6570\u636E\u5E93\u67E5\u8BE2\u7528\u6237\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_3-5-3-\u4ECE\u6570\u636E\u5E93\u67E5\u8BE2\u7528\u6237\u4FE1\u606F" aria-hidden="true">#</a> 3.5.3 \u4ECE\u6570\u636E\u5E93\u67E5\u8BE2\u7528\u6237\u4FE1\u606F</h4><p>\u5982\u679C\u6211\u4EEC\u8981\u4ECE\u6570\u636E\u5E93\u52A8\u6001\u67E5\u8BE2\u7528\u6237\u4FE1\u606F\uFF0C\u5C31\u5FC5\u987B\u6309\u7167spring security\u6846\u67B6\u7684\u8981\u6C42\u63D0\u4F9B\u4E00\u4E2A\u5B9E\u73B0UserDetailsService\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7B\uFF0C\u5E76\u6309\u7167\u6846\u67B6\u7684\u8981\u6C42\u8FDB\u884C\u914D\u7F6E\u5373\u53EF\u3002\u6846\u67B6\u4F1A\u81EA\u52A8\u8C03\u7528\u5B9E\u73B0\u7C7B\u4E2D\u7684\u65B9\u6CD5\u5E76\u81EA\u52A8\u8FDB\u884C\u5BC6\u7801\u6821\u9A8C\u3002</p><p>\u5B9E\u73B0\u7C7B\u4EE3\u7801\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>security</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">GrantedAuthority</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>authority<span class="token punctuation">.</span></span><span class="token class-name">SimpleGrantedAuthority</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetails</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetailsService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UsernameNotFoundException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token keyword">implements</span> <span class="token class-name">UserDetailsService</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6A21\u62DF\u6570\u636E\u5E93\u4E2D\u7684\u7528\u6237\u6570\u636E</span>
    <span class="token keyword">public</span>  <span class="token keyword">static</span>  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span> user1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user1<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user1<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span> user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;xiaoming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>user1<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>user2<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/**
     * \u6839\u636E\u7528\u6237\u540D\u52A0\u8F7D\u7528\u6237\u4FE1\u606F
     * <span class="token keyword">@param</span> <span class="token parameter">username</span>
     * <span class="token keyword">@return</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">UsernameNotFoundException</span></span>
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;username:&quot;</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span> userInDb <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6A21\u62DF\u6839\u636E\u7528\u6237\u540D\u67E5\u8BE2\u6570\u636E\u5E93</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>userInDb <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u6839\u636E\u7528\u6237\u540D\u6CA1\u6709\u67E5\u8BE2\u5230\u7528\u6237</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u6A21\u62DF\u6570\u636E\u5E93\u4E2D\u7684\u5BC6\u7801\uFF0C\u540E\u671F\u9700\u8981\u67E5\u8BE2\u6570\u636E\u5E93</span>
        <span class="token class-name">String</span> passwordInDb <span class="token operator">=</span> <span class="token string">&quot;{noop}&quot;</span> <span class="token operator">+</span> userInDb<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6388\u6743\uFF0C\u540E\u671F\u9700\u8981\u6539\u4E3A\u67E5\u8BE2\u6570\u636E\u5E93\u52A8\u6001\u83B7\u5F97\u7528\u6237\u62E5\u6709\u7684\u6743\u9650\u548C\u89D2\u8272</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span><span class="token string">&quot;ROLE_ADMIN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	
        <span class="token class-name">UserDetails</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>passwordInDb<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>spring-security.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
  authentication-manager\uFF1A\u8BA4\u8BC1\u7BA1\u7406\u5668\uFF0C\u7528\u4E8E\u5904\u7406\u8BA4\u8BC1\u64CD\u4F5C
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>authentication-manager</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--
    authentication-provider\uFF1A\u8BA4\u8BC1\u63D0\u4F9B\u8005\uFF0C\u6267\u884C\u5177\u4F53\u7684\u8BA4\u8BC1\u903B\u8F91
  --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>authentication-provider</span> <span class="token attr-name">user-service-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>authentication-provider</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>authentication-manager</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.security.UserService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u672C\u7AE0\u8282\u6211\u4EEC\u63D0\u4F9B\u4E86UserService\u5B9E\u73B0\u7C7B\uFF0C\u5E76\u4E14\u6309\u7167\u6846\u67B6\u7684\u8981\u6C42\u5B9E\u73B0\u4E86UserDetailsService\u63A5\u53E3\u3002\u5728spring\u914D\u7F6E\u6587\u4EF6\u4E2D\u6CE8\u518CUserService\uFF0C\u6307\u5B9A\u5176\u4F5C\u4E3A\u8BA4\u8BC1\u8FC7\u7A0B\u4E2D\u6839\u636E\u7528\u6237\u540D\u67E5\u8BE2\u7528\u6237\u4FE1\u606F\u7684\u5904\u7406\u7C7B\u3002\u5F53\u6211\u4EEC\u8FDB\u884C\u767B\u5F55\u64CD\u4F5C\u65F6\uFF0Cspring security\u6846\u67B6\u4F1A\u8C03\u7528UserService\u7684loadUserByUsername\u65B9\u6CD5\u67E5\u8BE2\u7528\u6237\u4FE1\u606F\uFF0C\u5E76\u6839\u636E\u6B64\u65B9\u6CD5\u4E2D\u63D0\u4F9B\u7684\u5BC6\u7801\u548C\u7528\u6237\u9875\u9762\u8F93\u5165\u7684\u5BC6\u7801\u8FDB\u884C\u6BD4\u5BF9\u6765\u5B9E\u73B0\u8BA4\u8BC1\u64CD\u4F5C\u3002</p><h4 id="_3-5-4-\u5BF9\u5BC6\u7801\u8FDB\u884C\u52A0\u5BC6" tabindex="-1"><a class="header-anchor" href="#_3-5-4-\u5BF9\u5BC6\u7801\u8FDB\u884C\u52A0\u5BC6" aria-hidden="true">#</a> 3.5.4 \u5BF9\u5BC6\u7801\u8FDB\u884C\u52A0\u5BC6</h4><p>\u524D\u9762\u6211\u4EEC\u4F7F\u7528\u7684\u5BC6\u7801\u90FD\u662F\u660E\u6587\u7684\uFF0C\u8FD9\u662F\u975E\u5E38\u4E0D\u5B89\u5168\u7684\u3002\u4E00\u822C\u60C5\u51B5\u4E0B\u7528\u6237\u7684\u5BC6\u7801\u9700\u8981\u8FDB\u884C\u52A0\u5BC6\u540E\u518D\u4FDD\u5B58\u5230\u6570\u636E\u5E93\u4E2D\u3002</p><p>\u5E38\u89C1\u7684\u5BC6\u7801\u52A0\u5BC6\u65B9\u5F0F\u6709\uFF1A</p><p>3DES\u3001AES\u3001DES\uFF1A\u4F7F\u7528\u5BF9\u79F0\u52A0\u5BC6\u7B97\u6CD5\uFF0C\u53EF\u4EE5\u901A\u8FC7\u89E3\u5BC6\u6765\u8FD8\u539F\u51FA\u539F\u59CB\u5BC6\u7801</p><p>MD5\u3001SHA1\uFF1A\u4F7F\u7528\u5355\u5411HASH\u7B97\u6CD5\uFF0C\u65E0\u6CD5\u901A\u8FC7\u8BA1\u7B97\u8FD8\u539F\u51FA\u539F\u59CB\u5BC6\u7801\uFF0C\u4F46\u662F\u53EF\u4EE5\u5EFA\u7ACB\u5F69\u8679\u8868\u8FDB\u884C\u67E5\u8868\u7834\u89E3</p><p>bcrypt\uFF1A\u5C06salt\u968F\u673A\u5E76\u6DF7\u5165\u6700\u7EC8\u52A0\u5BC6\u540E\u7684\u5BC6\u7801\uFF0C\u9A8C\u8BC1\u65F6\u4E5F\u65E0\u9700\u5355\u72EC\u63D0\u4F9B\u4E4B\u524D\u7684salt\uFF0C\u4ECE\u800C\u65E0\u9700\u5355\u72EC\u5904\u7406salt\u95EE\u9898</p><p>\u52A0\u5BC6\u540E\u7684\u683C\u5F0F\u4E00\u822C\u4E3A\uFF1A</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code>$2a$10$/bTVvqqlH9UiE0ZJZ7N2Me3RIgUCdgMheyTgV0B4cMCSokPa.6oCa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u52A0\u5BC6\u540E\u5B57\u7B26\u4E32\u7684\u957F\u5EA6\u4E3A\u56FA\u5B9A\u768460\u4F4D\u3002\u5176\u4E2D\uFF1A$\u662F\u5206\u5272\u7B26\uFF0C\u65E0\u610F\u4E49\uFF1B2a\u662Fbcrypt\u52A0\u5BC6\u7248\u672C\u53F7\uFF1B10\u662Fcost\u7684\u503C\uFF1B\u800C\u540E\u7684\u524D22\u4F4D\u662Fsalt\u503C\uFF1B\u518D\u7136\u540E\u7684\u5B57\u7B26\u4E32\u5C31\u662F\u5BC6\u7801\u7684\u5BC6\u6587\u4E86\u3002</p><p>\u5B9E\u73B0\u6B65\u9AA4\uFF1A</p><p>\u7B2C\u4E00\u6B65\uFF1A\u5728spring-security.xml\u6587\u4EF6\u4E2D\u6307\u5B9A\u5BC6\u7801\u52A0\u5BC6\u5BF9\u8C61</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u914D\u7F6E\u5BC6\u7801\u52A0\u5BC6\u5BF9\u8C61--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>passwordEncoder<span class="token punctuation">&quot;</span></span> 
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--\u8BA4\u8BC1\u7BA1\u7406\u5668\uFF0C\u7528\u4E8E\u5904\u7406\u8BA4\u8BC1\u64CD\u4F5C--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>authentication-manager</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--\u8BA4\u8BC1\u63D0\u4F9B\u8005\uFF0C\u6267\u884C\u5177\u4F53\u7684\u8BA4\u8BC1\u903B\u8F91--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>authentication-provider</span> <span class="token attr-name">user-service-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u6307\u5B9A\u5BC6\u7801\u52A0\u5BC6\u7B56\u7565--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>password-encoder</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>passwordEncoder<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>authentication-provider</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">security:</span>authentication-manager</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u5F00\u542Fspring\u6CE8\u89E3\u4F7F\u7528--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>annotation-config</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>annotation-config</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u6B65\uFF1A\u4FEE\u6539UserService\u5B9E\u73B0\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>security</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">GrantedAuthority</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>authority<span class="token punctuation">.</span></span><span class="token class-name">SimpleGrantedAuthority</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetails</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetailsService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UsernameNotFoundException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>bcrypt<span class="token punctuation">.</span></span><span class="token class-name">BCryptPasswordEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token keyword">implements</span> <span class="token class-name">UserDetailsService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BCryptPasswordEncoder</span> passwordEncoder<span class="token punctuation">;</span>

    <span class="token keyword">public</span>  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6A21\u62DF\u6570\u636E\u5E93\u4E2D\u7684\u7528\u6237\u6570\u636E</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span> user1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user1<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user1<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>passwordEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span> user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;xiaoming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>passwordEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>user1<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>user2<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/**
     * \u6839\u636E\u7528\u6237\u540D\u52A0\u8F7D\u7528\u6237\u4FE1\u606F
     * <span class="token keyword">@param</span> <span class="token parameter">username</span>
     * <span class="token keyword">@return</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">UsernameNotFoundException</span></span>
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;username:&quot;</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span> userInDb <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6A21\u62DF\u6839\u636E\u7528\u6237\u540D\u67E5\u8BE2\u6570\u636E\u5E93</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>userInDb <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u6839\u636E\u7528\u6237\u540D\u6CA1\u6709\u67E5\u8BE2\u5230\u7528\u6237</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">String</span> passwordInDb <span class="token operator">=</span> userInDb<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6A21\u62DF\u6570\u636E\u5E93\u4E2D\u7684\u5BC6\u7801\uFF0C\u540E\u671F\u9700\u8981\u67E5\u8BE2\u6570\u636E\u5E93</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6388\u6743\uFF0C\u540E\u671F\u9700\u8981\u6539\u4E3A\u67E5\u8BE2\u6570\u636E\u5E93\u52A8\u6001\u83B7\u5F97\u7528\u6237\u62E5\u6709\u7684\u6743\u9650\u548C\u89D2\u8272</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span><span class="token string">&quot;ROLE_ADMIN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserDetails</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>passwordInDb<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-5-5-\u914D\u7F6E\u591A\u79CD\u6821\u9A8C\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#_3-5-5-\u914D\u7F6E\u591A\u79CD\u6821\u9A8C\u89C4\u5219" aria-hidden="true">#</a> 3.5.5 \u914D\u7F6E\u591A\u79CD\u6821\u9A8C\u89C4\u5219</h4><p>\u4E3A\u4E86\u6D4B\u8BD5\u65B9\u4FBF\uFF0C\u9996\u5148\u5728\u9879\u76EE\u4E2D\u521B\u5EFAa.html\u3001b.html\u3001c.html\u3001d.html\u51E0\u4E2A\u9875\u9762</p><p>\u4FEE\u6539spring-security.xml\u6587\u4EF6\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u53EA\u8981\u8BA4\u8BC1\u901A\u8FC7\u5C31\u53EF\u4EE5\u8BBF\u95EE--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>intercept-url</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/index.jsp<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isAuthenticated()<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>intercept-url</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a.html<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isAuthenticated()<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--\u62E5\u6709add\u6743\u9650\u5C31\u53EF\u4EE5\u8BBF\u95EEb.html\u9875\u9762--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>intercept-url</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/b.html<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hasAuthority(&#39;add&#39;)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--\u62E5\u6709ROLE_ADMIN\u89D2\u8272\u5C31\u53EF\u4EE5\u8BBF\u95EEc.html\u9875\u9762--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>intercept-url</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/c.html<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hasRole(&#39;ROLE_ADMIN&#39;)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--\u62E5\u6709ROLE_ADMIN\u89D2\u8272\u5C31\u53EF\u4EE5\u8BBF\u95EEd.html\u9875\u9762\uFF0C
	\u6CE8\u610F\uFF1A\u6B64\u5904\u867D\u7136\u5199\u7684\u662FADMIN\u89D2\u8272\uFF0C\u6846\u67B6\u4F1A\u81EA\u52A8\u52A0\u4E0A\u524D\u7F00ROLE_--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>intercept-url</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/d.html<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hasRole(&#39;ADMIN&#39;)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-5-6-\u6CE8\u89E3\u65B9\u5F0F\u6743\u9650\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#_3-5-6-\u6CE8\u89E3\u65B9\u5F0F\u6743\u9650\u63A7\u5236" aria-hidden="true">#</a> 3.5.6 \u6CE8\u89E3\u65B9\u5F0F\u6743\u9650\u63A7\u5236</h4><p>Spring Security\u9664\u4E86\u53EF\u4EE5\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u914D\u7F6E\u6743\u9650\u6821\u9A8C\u89C4\u5219\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528\u6CE8\u89E3\u65B9\u5F0F\u63A7\u5236\u7C7B\u4E2D\u65B9\u6CD5\u7684\u8C03\u7528\u3002\u4F8B\u5982Controller\u4E2D\u7684\u67D0\u4E2A\u65B9\u6CD5\u8981\u6C42\u5FC5\u987B\u5177\u6709\u67D0\u4E2A\u6743\u9650\u624D\u53EF\u4EE5\u8BBF\u95EE\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u4F7F\u7528Spring Security\u6846\u67B6\u63D0\u4F9B\u7684\u6CE8\u89E3\u65B9\u5F0F\u8FDB\u884C\u63A7\u5236\u3002</p><p>\u5B9E\u73B0\u6B65\u9AA4\uFF1A</p><p>\u7B2C\u4E00\u6B65\uFF1A\u5728spring-security.xml\u6587\u4EF6\u4E2D\u914D\u7F6E\u7EC4\u4EF6\u626B\u63CF\uFF0C\u7528\u4E8E\u626B\u63CFController</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F00\u542Fspring\u6CE8\u89E3\u4F7F\u7528\uFF0C\u548C&lt;context:annotation-config/&gt;\u4E00\u6837\uFF0C\u4E8C\u8005\u914D\u5176\u4E2D\u4E00\u4E2A\u90FD\u53EF\u4EE5\uFF0Cmvc\u6CE8\u89E3\u662F\u9488\u5BF9\u4E8Espringmvc\u4F7F\u7528\u7684--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.controller<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u6B65\uFF1A\u5728spring-security.xml\u6587\u4EF6\u4E2D\u5F00\u542F\u6743\u9650\u6CE8\u89E3\u652F\u6301</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F00\u542F\u6CE8\u89E3\u65B9\u5F0F\u6743\u9650\u63A7\u5236--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>global-method-security</span> <span class="token attr-name">pre-post-annotations</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enabled<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E09\u6B65\uFF1A\u521B\u5EFAController\u7C7B\u5E76\u5728Controller\u7684\u65B9\u6CD5\u4E0A\u52A0\u5165\u6CE8\u89E3\u8FDB\u884C\u6743\u9650\u63A7\u5236</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>access<span class="token punctuation">.</span>prepost<span class="token punctuation">.</span></span><span class="token class-name">PreAuthorize</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/add&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">&quot;hasAuthority(&#39;add&#39;)&quot;</span><span class="token punctuation">)</span><span class="token comment">//\u8868\u793A\u7528\u6237\u5FC5\u987B\u62E5\u6709add\u6743\u9650\u624D\u80FD\u8C03\u7528\u5F53\u524D\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;add...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;</span><span class="token punctuation">)</span><span class="token comment">//\u8868\u793A\u7528\u6237\u5FC5\u987B\u62E5\u6709ROLE_ADMIN\u89D2\u8272\u624D\u80FD\u8C03\u7528\u5F53\u524D\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;delete...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-5-7-\u9000\u51FA\u767B\u5F55" tabindex="-1"><a class="header-anchor" href="#_3-5-7-\u9000\u51FA\u767B\u5F55" aria-hidden="true">#</a> 3.5.7 \u9000\u51FA\u767B\u5F55</h4><p>\u7528\u6237\u5B8C\u6210\u767B\u5F55\u540ESpring Security\u6846\u67B6\u4F1A\u8BB0\u5F55\u5F53\u524D\u7528\u6237\u8BA4\u8BC1\u72B6\u6001\u4E3A\u5DF2\u8BA4\u8BC1\u72B6\u6001\uFF0C\u5373\u8868\u793A\u7528\u6237\u767B\u5F55\u6210\u529F\u4E86\u3002\u90A3\u7528\u6237\u5982\u4F55\u9000\u51FA\u767B\u5F55\u5462\uFF1F\u6211\u4EEC\u53EF\u4EE5\u5728spring-security.xml\u6587\u4EF6\u4E2D<code>&lt;security:http&gt;&lt;/security:http&gt;</code>\u8282\u70B9\u4E0B\u8FDB\u884C\u5982\u4E0B\u914D\u7F6E\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
  logout\uFF1A\u9000\u51FA\u767B\u5F55
  logout-url\uFF1A\u9000\u51FA\u767B\u5F55\u64CD\u4F5C\u5BF9\u5E94\u7684\u8BF7\u6C42\u8DEF\u5F84
  logout-success-url\uFF1A\u9000\u51FA\u767B\u5F55\u540E\u7684\u8DF3\u8F6C\u9875\u9762
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">security:</span>logout</span> <span class="token attr-name">logout-url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/logout.do<span class="token punctuation">&quot;</span></span> 
                 <span class="token attr-name">logout-success-url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">invalidate-session</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
       
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7\u4E0A\u9762\u7684\u914D\u7F6E\u53EF\u4EE5\u53D1\u73B0\uFF0C\u5982\u679C\u7528\u6237\u8981\u9000\u51FA\u767B\u5F55\uFF0C\u53EA\u9700\u8981\u8BF7\u6C42/logout.do\u8FD9\u4E2AURL\u5730\u5740\u5C31\u53EF\u4EE5\uFF0C\u540C\u65F6\u4F1A\u5C06\u5F53\u524Dsession\u5931\u6548\uFF0C\u6700\u540E\u9875\u9762\u4F1A\u8DF3\u8F6C\u5230login.html\u9875\u9762\u3002</p>`,76);function v(g,b){const t=l("ExternalLinkIcon");return e(),o("div",null,[i,n("p",null,[k,n("a",r,[d,c(t)])]),m])}var y=p(u,[["render",v],["__file","\u4F20\u667A\u5065\u5EB7\u9879\u76EE\u8BB2\u4E49\uFF08\u7B2C9\u7AE0\uFF09.html.vue"]]);export{y as default};
