import{_ as c,o as l,c as r,a as n,b as a,w as o,e as t,d as s,r as i}from"./app.3924f47e.js";var u="/assets/code-mp-weixin.f1700662.png",d="/assets/code-h5.cc0b9bd7.png",k="/assets/code-android.137e0c1f.png",v="/assets/index_picture_1.a9098091.png",m="/assets/index_picture_2.5f339a2f.png";const b={},h=t('<h1 id="\u5C0F\u5154\u9C9C\u513F-\u9879\u76EE\u8D77\u6B65" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u5154\u9C9C\u513F-\u9879\u76EE\u8D77\u6B65" aria-hidden="true">#</a> \u5C0F\u5154\u9C9C\u513F - \u9879\u76EE\u8D77\u6B65</h1><h2 id="\u6548\u679C\u9884\u89C8" tabindex="-1"><a class="header-anchor" href="#\u6548\u679C\u9884\u89C8" aria-hidden="true">#</a> \u6548\u679C\u9884\u89C8</h2><table><tr><td>\u4F53\u9A8C\u5C0F\u7A0B\u5E8F\u7AEF</td><td><a target="_blank" href="https://megasu.gitee.io/uniapp-shop-vue3-ts/">\u4F53\u9A8C H5 \u7AEF</a></td><td><a target="_blank" href="https://gitee.com/Megasu/uniapp-shop-vue3-ts/releases/download/v1.0.0/heima-shop.apk">\u4F53\u9A8C App \u7AEF(\u5B89\u5353)</a></td></tr><tr><td><img width="300" src="'+u+'" alt=""></td><td><img width="300" src="'+d+'" alt=""></td><td><img width="300" src="'+k+'" alt=""></td></tr></table><h2 id="\u8D44\u6599\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u8D44\u6599\u8BF4\u660E" aria-hidden="true">#</a> \u8D44\u6599\u8BF4\u660E</h2><h3 id="\u{1F4C0}-\u89C6\u9891\u5B66\u4E60" tabindex="-1"><a class="header-anchor" href="#\u{1F4C0}-\u89C6\u9891\u5B66\u4E60" aria-hidden="true">#</a> \u{1F4C0} \u89C6\u9891\u5B66\u4E60</h3>',5),g={href:"https://www.bilibili.com/video/BV1Bp4y1379L/?share_source=copy_web&vd_source=2ac50d29193927b3c8597537dc4bc81d",target:"_blank",rel:"noopener noreferrer"},f=s("https://www.bilibili.com/video/BV1Bp4y1379L/"),y=n("h3",{id:"\u{1F4D7}-\u63A5\u53E3\u6587\u6863",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u{1F4D7}-\u63A5\u53E3\u6587\u6863","aria-hidden":"true"},"#"),s(" \u{1F4D7} \u63A5\u53E3\u6587\u6863")],-1),_={href:"https://www.apifox.cn/apidoc/shared-0e6ee326-d646-41bd-9214-29dbf47648fa/",target:"_blank",rel:"noopener noreferrer"},w=s("https://www.apifox.cn/apidoc/shared-0e6ee326-d646-41bd-9214-29dbf47648fa/"),x=n("h3",{id:"\u270F\uFE0F-\u5728\u7EBF\u7B14\u8BB0",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u270F\uFE0F-\u5728\u7EBF\u7B14\u8BB0","aria-hidden":"true"},"#"),s(" \u270F\uFE0F \u5728\u7EBF\u7B14\u8BB0")],-1),q={href:"https://megasu.gitee.io/uni-app-shop-note/",target:"_blank",rel:"noopener noreferrer"},j=s("https://megasu.gitee.io/uni-app-shop-note/"),S=n("h3",{id:"\u{1F4E6}-\u9879\u76EE\u6E90\u7801",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u{1F4E6}-\u9879\u76EE\u6E90\u7801","aria-hidden":"true"},"#"),s(" \u{1F4E6} \u9879\u76EE\u6E90\u7801")],-1),A={href:"https://gitee.com/Megasu/uniapp-shop-vue3-ts/",target:"_blank",rel:"noopener noreferrer"},P=s("https://gitee.com/Megasu/uniapp-shop-vue3-ts/"),I=t('<h2 id="\u9879\u76EE\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u67B6\u6784" aria-hidden="true">#</a> \u9879\u76EE\u67B6\u6784</h2><h3 id="\u9879\u76EE\u67B6\u6784\u56FE" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u67B6\u6784\u56FE" aria-hidden="true">#</a> \u9879\u76EE\u67B6\u6784\u56FE</h3><p><img src="'+v+`" alt="\u9879\u76EE\u67B6\u6784\u56FE"></p><h2 id="\u62C9\u53D6\u9879\u76EE\u6A21\u677F\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u62C9\u53D6\u9879\u76EE\u6A21\u677F\u4EE3\u7801" aria-hidden="true">#</a> \u62C9\u53D6\u9879\u76EE\u6A21\u677F\u4EE3\u7801</h2><p>\u9879\u76EE\u6A21\u677F\u5305\u542B\uFF1A\u76EE\u5F55\u7ED3\u6784\uFF0C\u9879\u76EE\u7D20\u6750\uFF0C\u4EE3\u7801\u98CE\u683C\u3002</p><h3 id="\u6A21\u677F\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#\u6A21\u677F\u5730\u5740" aria-hidden="true">#</a> \u6A21\u677F\u5730\u5740</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone http://git.itcast.cn/heimaqianduan/erabbit-uni-app-vue3-ts.git heima-shop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">\u6CE8\u610F\u4E8B\u9879</p><p>\u5C0F\u7A0B\u5E8F\u771F\u673A\u9884\u89C8\u9700\u5728 <code>manifest.json</code> \u4E2D\u6DFB\u52A0\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u7684 <code>appid</code></p></div><h2 id="\u5F15\u5165-uni-ui-\u7EC4\u4EF6\u5E93" tabindex="-1"><a class="header-anchor" href="#\u5F15\u5165-uni-ui-\u7EC4\u4EF6\u5E93" aria-hidden="true">#</a> \u5F15\u5165 uni-ui \u7EC4\u4EF6\u5E93</h2><h3 id="\u64CD\u4F5C\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u64CD\u4F5C\u6B65\u9AA4" aria-hidden="true">#</a> \u64CD\u4F5C\u6B65\u9AA4</h3>`,10),T=s("\u5B89\u88C5 "),C={href:"https://uniapp.dcloud.net.cn/component/uniui/quickstart.html#npm%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"},O=s("uni-ui \u7EC4\u4EF6\u5E93"),D=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i @dcloudio/uni-ui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u914D\u7F6E\u81EA\u52A8\u5BFC\u5165\u7EC4\u4EF6</strong></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// pages.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// \u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165</span>
  <span class="token property">&quot;easycom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;autoscan&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;custom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// uni-ui \u89C4\u5219\u5982\u4E0B\u914D\u7F6E  // [!code ++]</span>
      <span class="token property">&quot;^uni-(.*)&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue&quot;</span> <span class="token comment">// [!code ++]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// \u2026\u7701\u7565</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5B89\u88C5\u7C7B\u578B\u58F0\u660E\u6587\u4EF6</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> @uni-helper/uni-ui-types
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u914D\u7F6E\u7C7B\u578B\u58F0\u660E\u6587\u4EF6</strong></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;@dcloudio/types&quot;</span><span class="token punctuation">,</span> <span class="token comment">// uni-app API \u7C7B\u578B</span>
      <span class="token string">&quot;miniprogram-api-typings&quot;</span><span class="token punctuation">,</span> <span class="token comment">// \u539F\u751F\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u7C7B\u578B</span>
      <span class="token string">&quot;@uni-helper/uni-app-types&quot;</span><span class="token punctuation">,</span> <span class="token comment">// uni-app \u7EC4\u4EF6\u7C7B\u578B</span>
      <span class="token string">&quot;@uni-helper/uni-ui-types&quot;</span> <span class="token comment">// uni-ui \u7EC4\u4EF6\u7C7B\u578B  // [!code ++]</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// vue \u7F16\u8BD1\u5668\u7C7B\u578B\uFF0C\u6821\u9A8C\u6807\u7B7E\u7C7B\u578B</span>
  <span class="token property">&quot;vueCompilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;nativeTags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;block&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;template&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;slot&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5C0F\u7A0B\u5E8F\u7AEF-pinia-\u6301\u4E45\u5316" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u7A0B\u5E8F\u7AEF-pinia-\u6301\u4E45\u5316" aria-hidden="true">#</a> \u5C0F\u7A0B\u5E8F\u7AEF Pinia \u6301\u4E45\u5316</h2><p>\u8BF4\u660E\uFF1A<code>Pinia</code> \u7528\u6CD5\u4E0E <code>Vue3</code> \u9879\u76EE\u5B8C\u5168\u4E00\u81F4\uFF0C<code>uni-app</code> \u9879\u76EE\u4EC5\u9700\u89E3\u51B3<strong>\u6301\u4E45\u5316\u63D2\u4EF6\u517C\u5BB9\u6027</strong>\u95EE\u9898\u3002</p><h3 id="\u6301\u4E45\u5316\u5B58\u50A8\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u6301\u4E45\u5316\u5B58\u50A8\u63D2\u4EF6" aria-hidden="true">#</a> \u6301\u4E45\u5316\u5B58\u50A8\u63D2\u4EF6</h3>`,10),M=s("\u5B89\u88C5\u6301\u4E45\u5316\u5B58\u50A8\u63D2\u4EF6\uFF1A "),V={href:"https://prazdevs.github.io/pinia-plugin-persistedstate/zh/guide/config.html#storage",target:"_blank",rel:"noopener noreferrer"},B=s("pinia-plugin-persistedstate"),L=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i pinia-plugin-persistedstate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u63D2\u4EF6\u9ED8\u8BA4\u4F7F\u7528 <code>localStorage</code> \u5B9E\u73B0\u6301\u4E45\u5316\uFF0C\u5C0F\u7A0B\u5E8F\u7AEF\u4E0D\u517C\u5BB9\uFF0C\u9700\u8981\u66FF\u6362\u6301\u4E45\u5316 API\u3002</p><h3 id="\u57FA\u672C\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u7528\u6CD5" aria-hidden="true">#</a> \u57FA\u672C\u7528\u6CD5</h3>`,3),R=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" defineStore "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'pinia'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ref "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`

`),n("span",{class:"token comment"},"// \u5B9A\u4E49 Store"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" useMemberStore "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"defineStore"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token string"},"'member'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u4F1A\u5458\u4FE1\u606F"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" profile "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"ref"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),n("span",{class:"token builtin"},"any"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`

    `),n("span",{class:"token comment"},"// \u4FDD\u5B58\u4F1A\u5458\u4FE1\u606F\uFF0C\u767B\u5F55\u65F6\u4F7F\u7528"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"setProfile"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("val"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      profile`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(` val
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// \u6E05\u7406\u4F1A\u5458\u4FE1\u606F\uFF0C\u9000\u51FA\u65F6\u4F7F\u7528"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"clearProfile"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      profile`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"undefined"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// \u8BB0\u5F97 return"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
      profile`),n("span",{class:"token punctuation"},","),s(`
      setProfile`),n("span",{class:"token punctuation"},","),s(`
      clearProfile`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token comment"},"// TODO: \u6301\u4E45\u5316"),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    persist`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),U=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" createPinia "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'pinia'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" persist "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'pinia-plugin-persistedstate'"),s(`

`),n("span",{class:"token comment"},"// \u521B\u5EFA pinia \u5B9E\u4F8B"),s(`
`),n("span",{class:"token keyword"},"const"),s(" pinia "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createPinia"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token comment"},"// \u4F7F\u7528\u6301\u4E45\u5316\u5B58\u50A8\u63D2\u4EF6"),s(`
pinia`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s("persist"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// \u9ED8\u8BA4\u5BFC\u51FA\uFF0C\u7ED9 main.ts \u4F7F\u7528"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(` pinia

`),n("span",{class:"token comment"},"// \u6A21\u5757\u7EDF\u4E00\u5BFC\u51FA"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./modules/member'"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" createSSRApp "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" pinia "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./stores'"),s(`

`),n("span",{class:"token keyword"},"import"),s(" App "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./App.vue'"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"createApp"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" app "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createSSRApp"),n("span",{class:"token punctuation"},"("),s("App"),n("span",{class:"token punctuation"},")"),s(`

  app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s("pinia"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
    app`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),N=t(`<h3 id="\u591A\u7AEF\u517C\u5BB9" tabindex="-1"><a class="header-anchor" href="#\u591A\u7AEF\u517C\u5BB9" aria-hidden="true">#</a> \u591A\u7AEF\u517C\u5BB9</h3><p><strong>\u7F51\u9875\u7AEF\u6301\u4E45\u5316 API</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u7F51\u9875\u7AEFAPI</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u591A\u7AEF\u6301\u4E45\u5316 API</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u517C\u5BB9\u591A\u7AEFAPI</span>
uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u53C2\u8003\u4EE3\u7801</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// stores/modules/member.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span>
  <span class="token string">&#39;member&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u2026\u7701\u7565</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// \u914D\u7F6E\u6301\u4E45\u5316</span>
    persist<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u8C03\u6574\u4E3A\u517C\u5BB9\u591A\u7AEF\u7684API</span>
      storage<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token comment">// [!code warning]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">// [!code warning]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="uni-request-\u8BF7\u6C42\u5C01\u88C5" tabindex="-1"><a class="header-anchor" href="#uni-request-\u8BF7\u6C42\u5C01\u88C5" aria-hidden="true">#</a> uni.request \u8BF7\u6C42\u5C01\u88C5</h2><h3 id="\u8BF7\u6C42\u548C\u4E0A\u4F20\u6587\u4EF6\u62E6\u622A\u5668" tabindex="-1"><a class="header-anchor" href="#\u8BF7\u6C42\u548C\u4E0A\u4F20\u6587\u4EF6\u62E6\u622A\u5668" aria-hidden="true">#</a> \u8BF7\u6C42\u548C\u4E0A\u4F20\u6587\u4EF6\u62E6\u622A\u5668</h3>`,9),z=n("strong",null,"uniapp \u62E6\u622A\u5668",-1),G=s("\uFF1A "),W={href:"https://uniapp.dcloud.net.cn/api/interceptor.html",target:"_blank",rel:"noopener noreferrer"},F=s("uni.addInterceptor"),H=n("strong",null,"\u63A5\u53E3\u8BF4\u660E",-1),$=s("\uFF1A"),Q={href:"https://www.apifox.cn/apidoc/shared-0e6ee326-d646-41bd-9214-29dbf47648fa/doc-1521513",target:"_blank",rel:"noopener noreferrer"},J=s("\u63A5\u53E3\u6587\u6863"),K=t(`<div class="custom-container tip"><p class="custom-container-title">\u5B9E\u73B0\u9700\u6C42</p><ol><li>\u62FC\u63A5\u57FA\u7840\u5730\u5740</li><li>\u8BBE\u7F6E\u8D85\u65F6\u65F6\u95F4</li><li>\u6DFB\u52A0\u8BF7\u6C42\u5934\u6807\u8BC6</li><li>\u6DFB\u52A0 token</li></ol></div><p><strong>\u53C2\u8003\u4EE3\u7801</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// src/utils/http.ts</span>

<span class="token comment">// \u8BF7\u6C42\u57FA\u5730\u5740</span>
<span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token string">&#39;https://pcapi-xiaotuxian-front-devtest.itheima.net&#39;</span>

<span class="token comment">// \u62E6\u622A\u5668\u914D\u7F6E</span>
<span class="token keyword">const</span> httpInterceptor <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u62E6\u622A\u524D\u89E6\u53D1</span>
  <span class="token function">invoke</span><span class="token punctuation">(</span>options<span class="token operator">:</span> UniApp<span class="token punctuation">.</span>RequestOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. \u975E http \u5F00\u5934\u9700\u62FC\u63A5\u5730\u5740</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>url <span class="token operator">=</span> baseURL <span class="token operator">+</span> options<span class="token punctuation">.</span>url
    <span class="token punctuation">}</span>
    <span class="token comment">// 2. \u8BF7\u6C42\u8D85\u65F6</span>
    options<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">10000</span>
    <span class="token comment">// 3. \u6DFB\u52A0\u5C0F\u7A0B\u5E8F\u7AEF\u8BF7\u6C42\u5934\u6807\u8BC6</span>
    options<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;source-client&#39;</span><span class="token operator">:</span> <span class="token string">&#39;miniapp&#39;</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>options<span class="token punctuation">.</span>header<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 4. \u6DFB\u52A0 token \u8BF7\u6C42\u5934\u6807\u8BC6</span>
    <span class="token keyword">const</span> memberStore <span class="token operator">=</span> <span class="token function">useMemberStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> memberStore<span class="token punctuation">.</span>profile<span class="token operator">?.</span>token
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>header<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> token
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u62E6\u622A request \u8BF7\u6C42</span>
uni<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token string">&#39;request&#39;</span><span class="token punctuation">,</span> httpInterceptor<span class="token punctuation">)</span>
<span class="token comment">// \u62E6\u622A uploadFile \u6587\u4EF6\u4E0A\u4F20</span>
uni<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token string">&#39;uploadFile&#39;</span><span class="token punctuation">,</span> httpInterceptor<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),X={class:"custom-container warning"},Y=n("p",{class:"custom-container-title"},"\u6CE8\u610F\u4E8B\u9879",-1),Z=s("\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u7AEF\uFF0C\u9700\u767B\u5F55 "),nn={href:"https://mp.weixin.qq.com",target:"_blank",rel:"noopener noreferrer"},sn=s("\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0"),an=s(" \u914D\u7F6E\u5408\u6CD5\u57DF\u540D \u{1F447}"),en=n("p",null,[n("code",null,"https://pcapi-xiaotuxian-front-devtest.itheima.net")],-1),tn=t(`<h3 id="\u5C01\u88C5-promise-\u8BF7\u6C42\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5-promise-\u8BF7\u6C42\u51FD\u6570" aria-hidden="true">#</a> \u5C01\u88C5 Promise \u8BF7\u6C42\u51FD\u6570</h3><div class="custom-container tip"><p class="custom-container-title">\u5B9E\u73B0\u9700\u6C42</p><ol><li>\u8FD4\u56DE Promise \u5BF9\u8C61\uFF0C\u7528\u4E8E\u5904\u7406\u8FD4\u56DE\u503C\u7C7B\u578B</li><li>\u6210\u529F resolve <ol><li>\u63D0\u53D6\u6570\u636E</li><li>\u6DFB\u52A0\u6CDB\u578B</li></ol></li><li>\u5931\u8D25 reject <ol><li>401 \u9519\u8BEF</li><li>\u5176\u4ED6\u9519\u8BEF</li><li>\u7F51\u7EDC\u9519\u8BEF</li></ol></li></ol></div><p><strong>\u53C2\u8003\u4EE3\u7801</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/**
 * \u8BF7\u6C42\u51FD\u6570
 * @param  UniApp.RequestOptions
 * @returns Promise
 *  1. \u8FD4\u56DE Promise \u5BF9\u8C61\uFF0C\u7528\u4E8E\u5904\u7406\u8FD4\u56DE\u503C\u7C7B\u578B
 *  2. \u83B7\u53D6\u6570\u636E\u6210\u529F
 *    2.1 \u63D0\u53D6\u6838\u5FC3\u6570\u636E res.data
 *    2.2 \u6DFB\u52A0\u7C7B\u578B\uFF0C\u652F\u6301\u6CDB\u578B
 *  3. \u83B7\u53D6\u6570\u636E\u5931\u8D25
 *    3.1 401\u9519\u8BEF  -&gt; \u6E05\u7406\u7528\u6237\u4FE1\u606F\uFF0C\u8DF3\u8F6C\u5230\u767B\u5F55\u9875
 *    3.2 \u5176\u4ED6\u9519\u8BEF -&gt; \u6839\u636E\u540E\u7AEF\u9519\u8BEF\u4FE1\u606F\u8F7B\u63D0\u793A
 *    3.3 \u7F51\u7EDC\u9519\u8BEF -&gt; \u63D0\u793A\u7528\u6237\u6362\u7F51\u7EDC
 */</span>
<span class="token keyword">type</span> <span class="token class-name">Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  code<span class="token operator">:</span> <span class="token builtin">string</span>
  msg<span class="token operator">:</span> <span class="token builtin">string</span>
  result<span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2.2 \u6DFB\u52A0\u7C7B\u578B\uFF0C\u652F\u6301\u6CDB\u578B</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>options<span class="token operator">:</span> UniApp<span class="token punctuation">.</span>RequestOptions<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. \u8FD4\u56DE Promise \u5BF9\u8C61</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span>Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>options<span class="token punctuation">,</span>
      <span class="token comment">// \u54CD\u5E94\u6210\u529F</span>
      <span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u72B6\u6001\u7801 2xx\uFF0C\u53C2\u8003 axios \u7684\u8BBE\u8BA1</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 2.1 \u63D0\u53D6\u6838\u5FC3\u6570\u636E res.data</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token keyword">as</span> Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 401\u9519\u8BEF  -&gt; \u6E05\u7406\u7528\u6237\u4FE1\u606F\uFF0C\u8DF3\u8F6C\u5230\u767B\u5F55\u9875</span>
          <span class="token keyword">const</span> memberStore <span class="token operator">=</span> <span class="token function">useMemberStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          memberStore<span class="token punctuation">.</span><span class="token function">clearProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&#39;/pages/login/login&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u5176\u4ED6\u9519\u8BEF -&gt; \u6839\u636E\u540E\u7AEF\u9519\u8BEF\u4FE1\u606F\u8F7B\u63D0\u793A</span>
          uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            icon<span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
            title<span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token keyword">as</span> Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>msg <span class="token operator">||</span> <span class="token string">&#39;\u8BF7\u6C42\u9519\u8BEF&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// \u54CD\u5E94\u5931\u8D25</span>
      <span class="token function">fail</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          icon<span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
          title<span class="token operator">:</span> <span class="token string">&#39;\u7F51\u7EDC\u9519\u8BEF\uFF0C\u6362\u4E2A\u7F51\u7EDC\u8BD5\u8BD5&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u3010\u62D3\u5C55\u3011\u4EE3\u7801\u89C4\u8303" tabindex="-1"><a class="header-anchor" href="#\u3010\u62D3\u5C55\u3011\u4EE3\u7801\u89C4\u8303" aria-hidden="true">#</a> \u3010\u62D3\u5C55\u3011\u4EE3\u7801\u89C4\u8303</h2><p><strong>\u4E3A\u4EC0\u4E48\u9700\u8981\u4EE3\u7801\u89C4\u8303</strong></p><p>\u5982\u679C\u6CA1\u6709\u7EDF\u4E00\u4EE3\u7801\u98CE\u683C\uFF0C\u56E2\u961F\u534F\u4F5C\u4E0D\u4FBF\u4E8E\u67E5\u770B\u4EE3\u7801\u63D0\u4EA4\u65F6\u6240\u505A\u7684\u4FEE\u6539\u3002</p><p><img src="`+m+`" alt="diff"></p><h3 id="\u7EDF\u4E00\u4EE3\u7801\u98CE\u683C" tabindex="-1"><a class="header-anchor" href="#\u7EDF\u4E00\u4EE3\u7801\u98CE\u683C" aria-hidden="true">#</a> \u7EDF\u4E00\u4EE3\u7801\u98CE\u683C</h3><ul><li>\u5B89\u88C5 <code>eslint</code> + <code>prettier</code></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> eslint prettier eslint-plugin-vue @vue/eslint-config-prettier @vue/eslint-config-typescript @rushstack/eslint-patch @vue/tsconfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u65B0\u5EFA <code>.eslintrc.cjs</code> \u6587\u4EF6\uFF0C\u6DFB\u52A0\u4EE5\u4E0B <code>eslint</code> \u914D\u7F6E</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* eslint-env node */</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@rushstack/eslint-patch/modern-module-resolution&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;plugin:vue/vue3-essential&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;eslint:recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;@vue/eslint-config-typescript&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;@vue/eslint-config-prettier&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// \u5C0F\u7A0B\u5E8F\u5168\u5C40\u53D8\u91CF</span>
  <span class="token literal-property property">globals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">uni</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">wx</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">WechatMiniprogram</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getCurrentPages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getApp</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">UniApp</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">UniHelper</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">App</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">Page</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">Component</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">AnyObject</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">&#39;latest&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;prettier/prettier&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">endOfLine</span><span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;vue/multi-word-component-names&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;vue/no-setup-props-destructure&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;vue/no-deprecated-html-element-is&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/no-unused-vars&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u914D\u7F6E <code>package.json</code></li></ul><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... \u7701\u7565 ...</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint . --ext .vue,.js,.ts --fix --ignore-path .gitignore&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u8FD0\u884C</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> lint
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">\u6E29\u99A8\u63D0\u793A</p><p>\u5230\u6B64\uFF0C\u4F60\u5DF2\u5B8C\u6210 <code>eslint</code> + <code>prettier</code> \u7684\u914D\u7F6E\u3002</p></div><h3 id="git-\u5DE5\u4F5C\u6D41\u89C4\u8303" tabindex="-1"><a class="header-anchor" href="#git-\u5DE5\u4F5C\u6D41\u89C4\u8303" aria-hidden="true">#</a> Git \u5DE5\u4F5C\u6D41\u89C4\u8303</h3><ul><li>\u5B89\u88C5\u5E76\u521D\u59CB\u5316 <code>husky</code></li></ul>`,20),pn=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token function"},"pnpm"),s(` dlx husky-init
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),on=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,`npx husky-init
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),cn=t(`<ul><li>\u5B89\u88C5 <code>lint-staged</code></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> lint-staged
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u914D\u7F6E <code>package.json</code></li></ul><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... \u7701\u7565 ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{vue,ts,js}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;eslint --fix&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u4FEE\u6539 <code>.husky/pre-commit</code> \u6587\u4EF6</li></ul><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code>npm test   // [!code --]
npm run lint-staged     // [!code ++]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">\u6E29\u99A8\u63D0\u793A</p><p>\u5230\u6B64\uFF0C\u4F60\u5DF2\u5B8C\u6210 <code>husky</code> + <code>lint-staged</code> \u7684\u914D\u7F6E\u3002</p></div>`,7);function ln(rn,un){const e=i("ExternalLinkIcon"),p=i("CodeGroup");return l(),r("div",null,[h,n("p",null,[n("a",g,[f,a(e)])]),y,n("p",null,[n("a",_,[w,a(e)])]),x,n("p",null,[n("a",q,[j,a(e)])]),S,n("p",null,[n("a",A,[P,a(e)])]),I,n("p",null,[T,n("a",C,[O,a(e)])]),D,n("p",null,[M,n("a",V,[B,a(e)])]),L,a(p,null,{default:o(()=>[R,U,E]),_:1}),N,n("p",null,[z,G,n("a",W,[F,a(e)])]),n("p",null,[H,$,n("a",Q,[J,a(e)])]),K,n("div",X,[Y,n("p",null,[Z,n("a",nn,[sn,a(e)]),an]),en]),tn,a(p,null,{default:o(()=>[pn,on]),_:1}),cn])}var kn=c(b,[["render",ln],["__file","01-\u9879\u76EE\u8D77\u6B65.html.vue"]]);export{kn as default};
