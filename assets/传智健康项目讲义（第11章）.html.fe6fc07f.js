import{_ as n,o as s,c as a,e as t}from"./app.166c275a.js";const p={},e=t(`<h1 id="\u7B2C11\u7AE0-\u56FE\u5F62\u62A5\u8868\u3001poi\u62A5\u8868" tabindex="-1"><a class="header-anchor" href="#\u7B2C11\u7AE0-\u56FE\u5F62\u62A5\u8868\u3001poi\u62A5\u8868" aria-hidden="true">#</a> \u7B2C11\u7AE0 \u56FE\u5F62\u62A5\u8868\u3001POI\u62A5\u8868</h1><h2 id="_1-\u5957\u9910\u9884\u7EA6\u5360\u6BD4\u997C\u5F62\u56FE" tabindex="-1"><a class="header-anchor" href="#_1-\u5957\u9910\u9884\u7EA6\u5360\u6BD4\u997C\u5F62\u56FE" aria-hidden="true">#</a> 1. \u5957\u9910\u9884\u7EA6\u5360\u6BD4\u997C\u5F62\u56FE</h2><h3 id="_1-1-\u9700\u6C42\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_1-1-\u9700\u6C42\u5206\u6790" aria-hidden="true">#</a> 1.1 \u9700\u6C42\u5206\u6790</h3><p>\u4F1A\u5458\u53EF\u4EE5\u901A\u8FC7\u79FB\u52A8\u7AEF\u81EA\u52A9\u8FDB\u884C\u4F53\u68C0\u9884\u7EA6\uFF0C\u5728\u9884\u7EA6\u65F6\u9700\u8981\u9009\u62E9\u9884\u7EA6\u7684\u4F53\u68C0\u5957\u9910\u3002\u672C\u7AE0\u8282\u6211\u4EEC\u9700\u8981\u901A\u8FC7\u997C\u5F62\u56FE\u76F4\u89C2\u7684\u5C55\u793A\u51FA\u4F1A\u5458\u9884\u7EA6\u7684\u5404\u4E2A\u5957\u9910\u5360\u6BD4\u60C5\u51B5\u3002\u5C55\u793A\u6548\u679C\u5982\u4E0B\u56FE\uFF1A</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202208231011769.png" alt="1"></p><h3 id="_1-2-\u5B8C\u5584\u9875\u9762" tabindex="-1"><a class="header-anchor" href="#_1-2-\u5B8C\u5584\u9875\u9762" aria-hidden="true">#</a> 1.2 \u5B8C\u5584\u9875\u9762</h3><p>\u5957\u9910\u9884\u7EA6\u5360\u6BD4\u997C\u5F62\u56FE\u5BF9\u5E94\u7684\u9875\u9762\u4E3A/pages/report_setmeal.html\u3002</p><h4 id="_1-2-1-\u5BFC\u5165echarts\u5E93" tabindex="-1"><a class="header-anchor" href="#_1-2-1-\u5BFC\u5165echarts\u5E93" aria-hidden="true">#</a> 1.2.1 \u5BFC\u5165ECharts\u5E93</h4><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../plugins/echarts/echarts.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_1-2-2-\u53C2\u7167\u5B98\u65B9\u5B9E\u4F8B\u5BFC\u5165\u997C\u5F62\u56FE" tabindex="-1"><a class="header-anchor" href="#_1-2-2-\u53C2\u7167\u5B98\u65B9\u5B9E\u4F8B\u5BFC\u5165\u997C\u5F62\u56FE" aria-hidden="true">#</a> 1.2.2 \u53C2\u7167\u5B98\u65B9\u5B9E\u4F8B\u5BFC\u5165\u997C\u5F62\u56FE</h4><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- \u4E3A ECharts \u51C6\u5907\u4E00\u4E2A\u5177\u5907\u5927\u5C0F\uFF08\u5BBD\u9AD8\uFF09\u7684 DOM --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chart1<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span>600px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">// \u57FA\u4E8E\u51C6\u5907\u597D\u7684dom\uFF0C\u521D\u59CB\u5316echarts\u5B9E\u4F8B</span>
  <span class="token keyword">var</span> myChart1 <span class="token operator">=</span> echarts<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;chart1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//\u53D1\u9001ajax\u8BF7\u6C42\u83B7\u53D6\u52A8\u6001\u6570\u636E</span>
  axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/report/getSetmealReport.do&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    myChart1<span class="token punctuation">.</span><span class="token function">setOption</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;\u5957\u9910\u9884\u7EA6\u5360\u6BD4&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">subtext</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span><span class="token string">&#39;center&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tooltip</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">//\u63D0\u793A\u6846\u7EC4\u4EF6</span>
        <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;item&#39;</span><span class="token punctuation">,</span><span class="token comment">//\u89E6\u53D1\u7C7B\u578B\uFF0C\u5728\u997C\u5F62\u56FE\u4E2D\u4E3Aitem</span>
        <span class="token literal-property property">formatter</span><span class="token operator">:</span> <span class="token string">&quot;{a} &lt;br/&gt;{b} : {c} ({d}%)&quot;</span><span class="token comment">//\u63D0\u793A\u5185\u5BB9\u683C\u5F0F</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">orient</span><span class="token operator">:</span> <span class="token string">&#39;vertical&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>setmealNames
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">series</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u5957\u9910\u9884\u7EA6\u5360\u6BD4&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;pie&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">radius</span> <span class="token operator">:</span> <span class="token string">&#39;55%&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;50%&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;60%&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">data</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>setmealCount<span class="token punctuation">,</span>
          <span class="token literal-property property">itemStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">emphasis</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">shadowBlur</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
              <span class="token literal-property property">shadowOffsetX</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              <span class="token literal-property property">shadowColor</span><span class="token operator">:</span> <span class="token string">&#39;rgba(0, 0, 0, 0.5)&#39;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6839\u636E\u997C\u5F62\u56FE\u5BF9\u6570\u636E\u683C\u5F0F\u7684\u8981\u6C42\uFF0C\u6211\u4EEC\u53D1\u9001ajax\u8BF7\u6C42\uFF0C\u670D\u52A1\u7AEF\u9700\u8981\u8FD4\u56DE\u5982\u4E0B\u683C\u5F0F\u7684\u6570\u636E\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token property">&quot;setmealNames&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;\u5957\u99101&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u5957\u99102&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u5957\u99103&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;setmealCount&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
							<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5957\u99101&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
							<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5957\u99102&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
							<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5957\u99103&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">}</span>
						   <span class="token punctuation">]</span>
		   <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;flag&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u83B7\u53D6\u5957\u9910\u7EDF\u8BA1\u6570\u636E\u6210\u529F&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-\u540E\u53F0\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_1-3-\u540E\u53F0\u4EE3\u7801" aria-hidden="true">#</a> 1.3 \u540E\u53F0\u4EE3\u7801</h3><h4 id="_1-3-1-controller" tabindex="-1"><a class="header-anchor" href="#_1-3-1-controller" aria-hidden="true">#</a> 1.3.1 Controller</h4><p>\u5728health_backend\u5DE5\u7A0B\u7684ReportController\u4E2D\u63D0\u4F9BgetSetmealReport\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Reference</span>
<span class="token keyword">private</span> <span class="token class-name">SetmealService</span> setmealService<span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * \u5957\u9910\u5360\u6BD4\u7EDF\u8BA1
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getSetmealReport&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">getSetmealReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> setmealService<span class="token punctuation">.</span><span class="token function">findSetmealCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;setmealCount&quot;</span><span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> setmealNames <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> m <span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    setmealNames<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;setmealNames&quot;</span><span class="token punctuation">,</span>setmealNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">GET_SETMEAL_COUNT_REPORT_SUCCESS</span><span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-2-\u670D\u52A1\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_1-3-2-\u670D\u52A1\u63A5\u53E3" aria-hidden="true">#</a> 1.3.2 \u670D\u52A1\u63A5\u53E3</h4><p>\u5728SetmealService\u670D\u52A1\u63A5\u53E3\u4E2D\u6269\u5C55\u65B9\u6CD5findSetmealCount</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findSetmealCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_1-3-3-\u670D\u52A1\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-3-3-\u670D\u52A1\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> 1.3.3 \u670D\u52A1\u5B9E\u73B0\u7C7B</h4><p>\u5728SetmealServiceImpl\u670D\u52A1\u5B9E\u73B0\u7C7B\u4E2D\u5B9E\u73B0findSetmealCount\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findSetmealCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> setmealDao<span class="token punctuation">.</span><span class="token function">findSetmealCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-4-dao\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_1-3-4-dao\u63A5\u53E3" aria-hidden="true">#</a> 1.3.4 Dao\u63A5\u53E3</h4><p>\u5728SetmealDao\u63A5\u53E3\u4E2D\u6269\u5C55\u65B9\u6CD5findSetmealCount</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findSetmealCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_1-3-5-mapper\u6620\u5C04\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-3-5-mapper\u6620\u5C04\u6587\u4EF6" aria-hidden="true">#</a> 1.3.5 Mapper\u6620\u5C04\u6587\u4EF6</h4><p>\u5728SetmealDao.xml\u6620\u5C04\u6587\u4EF6\u4E2D\u63D0\u4F9BSQL\u8BED\u53E5</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findSetmealCount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select s.name,count(o.id) as value 
  	from t_order o ,t_setmeal s 
  	where o.setmeal_id = s.id 
  	group by s.name
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1" tabindex="-1"><a class="header-anchor" href="#_2-\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1" aria-hidden="true">#</a> 2. \u8FD0\u8425\u6570\u636E\u7EDF\u8BA1</h2><h3 id="_2-1-\u9700\u6C42\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_2-1-\u9700\u6C42\u5206\u6790" aria-hidden="true">#</a> 2.1 \u9700\u6C42\u5206\u6790</h3><p>\u901A\u8FC7\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1\u53EF\u4EE5\u5C55\u793A\u51FA\u4F53\u68C0\u673A\u6784\u7684\u8FD0\u8425\u60C5\u51B5\uFF0C\u5305\u62EC\u4F1A\u5458\u6570\u636E\u3001\u9884\u7EA6\u5230\u8BCA\u6570\u636E\u3001\u70ED\u95E8\u5957\u9910\u7B49\u4FE1\u606F\u3002\u672C\u7AE0\u8282\u5C31\u662F\u8981\u901A\u8FC7\u4E00\u4E2A\u8868\u683C\u7684\u5F62\u5F0F\u6765\u5C55\u793A\u8FD9\u4E9B\u8FD0\u8425\u6570\u636E\u3002\u6548\u679C\u5982\u4E0B\u56FE\uFF1A</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202208231011870.png" alt="2"></p><h3 id="_2-2-\u5B8C\u5584\u9875\u9762" tabindex="-1"><a class="header-anchor" href="#_2-2-\u5B8C\u5584\u9875\u9762" aria-hidden="true">#</a> 2.2 \u5B8C\u5584\u9875\u9762</h3><p>\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1\u5BF9\u5E94\u7684\u9875\u9762\u4E3A/pages/report_business.html\u3002</p><h4 id="_2-2-1-\u5B9A\u4E49\u6A21\u578B\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_2-2-1-\u5B9A\u4E49\u6A21\u578B\u6570\u636E" aria-hidden="true">#</a> 2.2.1 \u5B9A\u4E49\u6A21\u578B\u6570\u636E</h4><p>\u5B9A\u4E49\u6570\u636E\u6A21\u578B\uFF0C\u901A\u8FC7VUE\u7684\u6570\u636E\u7ED1\u5B9A\u5C55\u793A\u6570\u636E</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">var</span> vue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">reportData</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">reportDate</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todayNewMember</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">totalMember</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisWeekNewMember</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisMonthNewMember</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todayOrderNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todayVisitsNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisWeekOrderNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisWeekVisitsNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisMonthOrderNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisMonthVisitsNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">hotSetmeal</span> <span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 900px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>excelTitle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exportExcel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5BFC\u51FAExcel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>excelTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u65E5\u671F\uFF1A{{reportData.reportDate}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exceTable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cellspacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cellpadding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headBody<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u4F1A\u5458\u6570\u636E\u7EDF\u8BA1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>20%<span class="token punctuation">&#39;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u65B0\u589E\u4F1A\u5458\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>30%<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>{{reportData.todayNewMember}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>20%<span class="token punctuation">&#39;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u603B\u4F1A\u5458\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>30%<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>{{reportData.totalMember}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u672C\u5468\u65B0\u589E\u4F1A\u5458\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{reportData.thisWeekNewMember}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u672C\u6708\u65B0\u589E\u4F1A\u5458\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{reportData.thisMonthNewMember}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headBody<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u9884\u7EA6\u5230\u8BCA\u6570\u636E\u7EDF\u8BA1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u4ECA\u65E5\u9884\u7EA6\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{reportData.todayOrderNumber}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u4ECA\u65E5\u5230\u8BCA\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{reportData.todayVisitsNumber}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u672C\u5468\u9884\u7EA6\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{reportData.thisWeekOrderNumber}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u672C\u5468\u5230\u8BCA\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{reportData.thisWeekVisitsNumber}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u672C\u6708\u9884\u7EA6\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{reportData.thisMonthOrderNumber}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u672C\u6708\u5230\u8BCA\u6570<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{reportData.thisMonthVisitsNumber}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headBody<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u70ED\u95E8\u5957\u9910<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabletrBg textCenter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>\u5957\u9910\u540D\u79F0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>\u9884\u7EA6\u6570\u91CF<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>\u5360\u6BD4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>\u5907\u6CE8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s in reportData.hotSetmeal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{s.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{s.setmeal_count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{s.proportion}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-2-\u53D1\u9001\u8BF7\u6C42\u83B7\u53D6\u52A8\u6001\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_2-2-2-\u53D1\u9001\u8BF7\u6C42\u83B7\u53D6\u52A8\u6001\u6570\u636E" aria-hidden="true">#</a> 2.2.2 \u53D1\u9001\u8BF7\u6C42\u83B7\u53D6\u52A8\u6001\u6570\u636E</h4><p>\u5728VUE\u7684\u94A9\u5B50\u51FD\u6570\u4E2D\u53D1\u9001ajax\u8BF7\u6C42\u83B7\u53D6\u52A8\u6001\u6570\u636E\uFF0C\u901A\u8FC7VUE\u7684\u6570\u636E\u7ED1\u5B9A\u5C06\u6570\u636E\u5C55\u793A\u5230\u9875\u9762</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">var</span> vue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">reportData</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">reportDate</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todayNewMember</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">totalMember</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisWeekNewMember</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisMonthNewMember</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todayOrderNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">todayVisitsNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisWeekOrderNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisWeekVisitsNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisMonthOrderNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">thisMonthVisitsNumber</span> <span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">hotSetmeal</span> <span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//\u53D1\u9001ajax\u8BF7\u6C42\u83B7\u53D6\u52A8\u6001\u6570\u636E</span>
      axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/report/getBusinessReportData.do&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reportData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6839\u636E\u9875\u9762\u5BF9\u6570\u636E\u683C\u5F0F\u7684\u8981\u6C42\uFF0C\u6211\u4EEC\u53D1\u9001ajax\u8BF7\u6C42\uFF0C\u670D\u52A1\u7AEF\u9700\u8981\u8FD4\u56DE\u5982\u4E0B\u683C\u5F0F\u7684\u6570\u636E\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;todayVisitsNumber&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reportDate&quot;</span><span class="token operator">:</span><span class="token string">&quot;2019-04-25&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;todayNewMember&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;thisWeekVisitsNumber&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;thisMonthNewMember&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;thisWeekNewMember&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalMember&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;thisMonthOrderNumber&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;thisMonthVisitsNumber&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;todayOrderNumber&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;thisWeekOrderNumber&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hotSetmeal&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;proportion&quot;</span><span class="token operator">:</span><span class="token number">0.4545</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u7C89\u7EA2\u73CD\u7231(\u5973)\u5347\u7EA7TM12\u9879\u7B5B\u67E5\u4F53\u68C0\u5957\u9910&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;setmeal_count&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;proportion&quot;</span><span class="token operator">:</span><span class="token number">0.1818</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u9633\u5149\u7238\u5988\u5347\u7EA7\u80BF\u762412\u9879\u7B5B\u67E5\u4F53\u68C0\u5957\u9910&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;setmeal_count&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;proportion&quot;</span><span class="token operator">:</span><span class="token number">0.1818</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u73CD\u7231\u9AD8\u7AEF\u5347\u7EA7\u80BF\u762412\u9879\u7B5B\u67E5&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;setmeal_count&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;proportion&quot;</span><span class="token operator">:</span><span class="token number">0.0909</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5B55\u524D\u68C0\u67E5\u5957\u9910&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;setmeal_count&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;flag&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u83B7\u53D6\u8FD0\u8425\u7EDF\u8BA1\u6570\u636E\u6210\u529F&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-\u540E\u53F0\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_2-3-\u540E\u53F0\u4EE3\u7801" aria-hidden="true">#</a> 2.3 \u540E\u53F0\u4EE3\u7801</h3><h4 id="_2-3-1-controller" tabindex="-1"><a class="header-anchor" href="#_2-3-1-controller" aria-hidden="true">#</a> 2.3.1 Controller</h4><p>\u5728ReportController\u4E2D\u63D0\u4F9BgetBusinessReportData\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Reference</span>
<span class="token keyword">private</span> <span class="token class-name">ReportService</span> reportService<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u83B7\u53D6\u8FD0\u8425\u7EDF\u8BA1\u6570\u636E
 * <span class="token keyword">@return</span>
*/</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getBusinessReportData&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">getBusinessReportData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> reportService<span class="token punctuation">.</span><span class="token function">getBusinessReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">GET_BUSINESS_REPORT_SUCCESS</span><span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">GET_BUSINESS_REPORT_FAIL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-2-\u670D\u52A1\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_2-3-2-\u670D\u52A1\u63A5\u53E3" aria-hidden="true">#</a> 2.3.2 \u670D\u52A1\u63A5\u53E3</h4><p>\u5728health_interface\u5DE5\u7A0B\u4E2D\u521B\u5EFAReportService\u670D\u52A1\u63A5\u53E3\u5E76\u58F0\u660EgetBusinessReport\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ReportService</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u83B7\u5F97\u8FD0\u8425\u7EDF\u8BA1\u6570\u636E
     * Map\u6570\u636E\u683C\u5F0F\uFF1A
     *      todayNewMember -&gt; number
     *      totalMember -&gt; number
     *      thisWeekNewMember -&gt; number
     *      thisMonthNewMember -&gt; number
     *      todayOrderNumber -&gt; number
     *      todayVisitsNumber -&gt; number
     *      thisWeekOrderNumber -&gt; number
     *      thisWeekVisitsNumber -&gt; number
     *      thisMonthOrderNumber -&gt; number
     *      thisMonthVisitsNumber -&gt; number
     *      hotSetmeals -&gt; List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Setmeal</span><span class="token punctuation">&gt;</span></span>
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getBusinessReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-3-\u670D\u52A1\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-3-3-\u670D\u52A1\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> 2.3.3 \u670D\u52A1\u5B9E\u73B0\u7C7B</h4><p>\u5728health_service_provider\u5DE5\u7A0B\u4E2D\u521B\u5EFA\u670D\u52A1\u5B9E\u73B0\u7C7BReportServiceImpl\u5E76\u5B9E\u73B0ReportService\u63A5\u53E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">MemberDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">OrderDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">DateUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Transactional</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u7EDF\u8BA1\u62A5\u8868\u670D\u52A1
 */</span>
<span class="token annotation punctuation">@Service</span><span class="token punctuation">(</span>interfaceClass <span class="token operator">=</span> <span class="token class-name">ReportService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReportServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ReportService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MemberDao</span> memberDao<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">OrderDao</span> orderDao<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * \u83B7\u5F97\u8FD0\u8425\u7EDF\u8BA1\u6570\u636E
     * Map\u6570\u636E\u683C\u5F0F\uFF1A
     *      todayNewMember -&gt; number
     *      totalMember -&gt; number
     *      thisWeekNewMember -&gt; number
     *      thisMonthNewMember -&gt; number
     *      todayOrderNumber -&gt; number
     *      todayVisitsNumber -&gt; number
     *      thisWeekOrderNumber -&gt; number
     *      thisWeekVisitsNumber -&gt; number
     *      thisMonthOrderNumber -&gt; number
     *      thisMonthVisitsNumber -&gt; number
     *      hotSetmeal -&gt; List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Setmeal</span><span class="token punctuation">&gt;</span></span>
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getBusinessReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
      	<span class="token comment">//\u83B7\u5F97\u5F53\u524D\u65E5\u671F</span>
        <span class="token class-name">String</span> today <span class="token operator">=</span> <span class="token class-name">DateUtils</span><span class="token punctuation">.</span><span class="token function">parseDate2String</span><span class="token punctuation">(</span><span class="token class-name">DateUtils</span><span class="token punctuation">.</span><span class="token function">getToday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u5F97\u672C\u5468\u4E00\u7684\u65E5\u671F</span>
        <span class="token class-name">String</span> thisWeekMonday <span class="token operator">=</span> <span class="token class-name">DateUtils</span><span class="token punctuation">.</span><span class="token function">parseDate2String</span><span class="token punctuation">(</span><span class="token class-name">DateUtils</span><span class="token punctuation">.</span><span class="token function">getThisWeekMonday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u5F97\u672C\u6708\u7B2C\u4E00\u5929\u7684\u65E5\u671F  </span>
        <span class="token class-name">String</span> firstDay4ThisMonth <span class="token operator">=</span> 
          					<span class="token class-name">DateUtils</span><span class="token punctuation">.</span><span class="token function">parseDate2String</span><span class="token punctuation">(</span><span class="token class-name">DateUtils</span><span class="token punctuation">.</span><span class="token function">getFirstDay4ThisMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4ECA\u65E5\u65B0\u589E\u4F1A\u5458\u6570</span>
        <span class="token class-name">Integer</span> todayNewMember <span class="token operator">=</span> memberDao<span class="token punctuation">.</span><span class="token function">findMemberCountByDate</span><span class="token punctuation">(</span>today<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u603B\u4F1A\u5458\u6570</span>
        <span class="token class-name">Integer</span> totalMember <span class="token operator">=</span> memberDao<span class="token punctuation">.</span><span class="token function">findMemberTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u672C\u5468\u65B0\u589E\u4F1A\u5458\u6570</span>
        <span class="token class-name">Integer</span> thisWeekNewMember <span class="token operator">=</span> memberDao<span class="token punctuation">.</span><span class="token function">findMemberCountAfterDate</span><span class="token punctuation">(</span>thisWeekMonday<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u672C\u6708\u65B0\u589E\u4F1A\u5458\u6570</span>
        <span class="token class-name">Integer</span> thisMonthNewMember <span class="token operator">=</span> memberDao<span class="token punctuation">.</span><span class="token function">findMemberCountAfterDate</span><span class="token punctuation">(</span>firstDay4ThisMonth<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4ECA\u65E5\u9884\u7EA6\u6570</span>
        <span class="token class-name">Integer</span> todayOrderNumber <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">findOrderCountByDate</span><span class="token punctuation">(</span>today<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u672C\u5468\u9884\u7EA6\u6570</span>
        <span class="token class-name">Integer</span> thisWeekOrderNumber <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">findOrderCountAfterDate</span><span class="token punctuation">(</span>thisWeekMonday<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u672C\u6708\u9884\u7EA6\u6570</span>
        <span class="token class-name">Integer</span> thisMonthOrderNumber <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">findOrderCountAfterDate</span><span class="token punctuation">(</span>firstDay4ThisMonth<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4ECA\u65E5\u5230\u8BCA\u6570</span>
        <span class="token class-name">Integer</span> todayVisitsNumber <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">findVisitsCountByDate</span><span class="token punctuation">(</span>today<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u672C\u5468\u5230\u8BCA\u6570</span>
        <span class="token class-name">Integer</span> thisWeekVisitsNumber <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">findVisitsCountAfterDate</span><span class="token punctuation">(</span>thisWeekMonday<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u672C\u6708\u5230\u8BCA\u6570</span>
        <span class="token class-name">Integer</span> thisMonthVisitsNumber <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">findVisitsCountAfterDate</span><span class="token punctuation">(</span>firstDay4ThisMonth<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u70ED\u95E8\u5957\u9910\uFF08\u53D6\u524D4\uFF09</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> hotSetmeal <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">findHotSetmeal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;reportDate&quot;</span><span class="token punctuation">,</span>today<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;todayNewMember&quot;</span><span class="token punctuation">,</span>todayNewMember<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;totalMember&quot;</span><span class="token punctuation">,</span>totalMember<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;thisWeekNewMember&quot;</span><span class="token punctuation">,</span>thisWeekNewMember<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;thisMonthNewMember&quot;</span><span class="token punctuation">,</span>thisMonthNewMember<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;todayOrderNumber&quot;</span><span class="token punctuation">,</span>todayOrderNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;thisWeekOrderNumber&quot;</span><span class="token punctuation">,</span>thisWeekOrderNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;thisMonthOrderNumber&quot;</span><span class="token punctuation">,</span>thisMonthOrderNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;todayVisitsNumber&quot;</span><span class="token punctuation">,</span>todayVisitsNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;thisWeekVisitsNumber&quot;</span><span class="token punctuation">,</span>thisWeekVisitsNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;thisMonthVisitsNumber&quot;</span><span class="token punctuation">,</span>thisMonthVisitsNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;hotSetmeal&quot;</span><span class="token punctuation">,</span>hotSetmeal<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-4-dao\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_2-3-4-dao\u63A5\u53E3" aria-hidden="true">#</a> 2.3.4 Dao\u63A5\u53E3</h4><p>\u5728OrderDao\u548CMemberDao\u4E2D\u58F0\u660E\u76F8\u5173\u7EDF\u8BA1\u67E5\u8BE2\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Order</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByCondition</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">findById4Detail</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">findOrderCountByDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">findOrderCountAfterDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">findVisitsCountByDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">findVisitsCountAfterDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> <span class="token function">findHotSetmeal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>pagehelper<span class="token punctuation">.</span></span><span class="token class-name">Page</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Member</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MemberDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Member</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Member</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByCondition</span><span class="token punctuation">(</span><span class="token class-name">String</span> queryString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Member</span> member<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Member</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Member</span> <span class="token function">findByTelephone</span><span class="token punctuation">(</span><span class="token class-name">String</span> telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">edit</span><span class="token punctuation">(</span><span class="token class-name">Member</span> member<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">findMemberCountBeforeDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">findMemberCountByDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">findMemberCountAfterDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">findMemberTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-5-mapper\u6620\u5C04\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-3-5-mapper\u6620\u5C04\u6587\u4EF6" aria-hidden="true">#</a> 2.3.5 Mapper\u6620\u5C04\u6587\u4EF6</h4><p>\u5728OrderDao.xml\u548CMemberDao.xml\u4E2D\u5B9A\u4E49SQL\u8BED\u53E5</p><p>OrderDao.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u6839\u636E\u65E5\u671F\u7EDF\u8BA1\u9884\u7EA6\u6570--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrderCountByDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select count(id) from t_order where orderDate = #{value}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u6839\u636E\u65E5\u671F\u7EDF\u8BA1\u9884\u7EA6\u6570\uFF0C\u7EDF\u8BA1\u6307\u5B9A\u65E5\u671F\u4E4B\u540E\u7684\u9884\u7EA6\u6570--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findOrderCountAfterDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select count(id) from t_order where orderDate <span class="token entity named-entity" title="&gt;">&amp;gt;</span>= #{value}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u6839\u636E\u65E5\u671F\u7EDF\u8BA1\u5230\u8BCA\u6570--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findVisitsCountByDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select count(id) from t_order where orderDate = #{value} and orderStatus = &#39;\u5DF2\u5230\u8BCA&#39;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u6839\u636E\u65E5\u671F\u7EDF\u8BA1\u5230\u8BCA\u6570\uFF0C\u7EDF\u8BA1\u6307\u5B9A\u65E5\u671F\u4E4B\u540E\u7684\u5230\u8BCA\u6570--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findVisitsCountAfterDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select count(id) from t_order where orderDate <span class="token entity named-entity" title="&gt;">&amp;gt;</span>= #{value} and orderStatus = &#39;\u5DF2\u5230\u8BCA&#39;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u70ED\u95E8\u5957\u9910\uFF0C\u67E5\u8BE2\u524D4\u6761--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findHotSetmeal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select 
      s.name, 
      count(o.id) setmeal_count ,
      count(o.id)/(select count(id) from t_order) proportion
    from t_order o inner join t_setmeal s on s.id = o.setmeal_id
    group by o.setmeal_id
    order by setmeal_count desc 
  	limit 0,4
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MemberDao.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u6839\u636E\u65E5\u671F\u7EDF\u8BA1\u4F1A\u5458\u6570\uFF0C\u7EDF\u8BA1\u6307\u5B9A\u65E5\u671F\u4E4B\u524D\u7684\u4F1A\u5458\u6570--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findMemberCountBeforeDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select count(id) from t_member where regTime <span class="token entity named-entity" title="&lt;">&amp;lt;</span>= #{value}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u6839\u636E\u65E5\u671F\u7EDF\u8BA1\u4F1A\u5458\u6570--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findMemberCountByDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select count(id) from t_member where regTime = #{value}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u6839\u636E\u65E5\u671F\u7EDF\u8BA1\u4F1A\u5458\u6570\uFF0C\u7EDF\u8BA1\u6307\u5B9A\u65E5\u671F\u4E4B\u540E\u7684\u4F1A\u5458\u6570--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findMemberCountAfterDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select count(id) from t_member where regTime <span class="token entity named-entity" title="&gt;">&amp;gt;</span>= #{value}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u603B\u4F1A\u5458\u6570--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findMemberTotalCount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select count(id) from t_member
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1\u62A5\u8868\u5BFC\u51FA" tabindex="-1"><a class="header-anchor" href="#_3-\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1\u62A5\u8868\u5BFC\u51FA" aria-hidden="true">#</a> 3. \u8FD0\u8425\u6570\u636E\u7EDF\u8BA1\u62A5\u8868\u5BFC\u51FA</h2><h3 id="_3-1-\u9700\u6C42\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_3-1-\u9700\u6C42\u5206\u6790" aria-hidden="true">#</a> 3.1 \u9700\u6C42\u5206\u6790</h3><p>\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1\u62A5\u8868\u5BFC\u51FA\u5C31\u662F\u5C06\u7EDF\u8BA1\u6570\u636E\u5199\u5165\u5230Excel\u5E76\u63D0\u4F9B\u7ED9\u5BA2\u6237\u7AEF\u6D4F\u89C8\u5668\u8FDB\u884C\u4E0B\u8F7D\uFF0C\u4EE5\u4FBF\u4F53\u68C0\u673A\u6784\u7BA1\u7406\u4EBA\u5458\u5BF9\u8FD0\u8425\u6570\u636E\u7684\u67E5\u770B\u548C\u5B58\u6863\u3002</p><h3 id="_3-2-\u63D0\u4F9B\u6A21\u677F\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_3-2-\u63D0\u4F9B\u6A21\u677F\u6587\u4EF6" aria-hidden="true">#</a> 3.2 \u63D0\u4F9B\u6A21\u677F\u6587\u4EF6</h3><p>\u672C\u7AE0\u8282\u6211\u4EEC\u9700\u8981\u5C06\u8FD0\u8425\u7EDF\u8BA1\u6570\u636E\u901A\u8FC7POI\u5199\u5165\u5230Excel\u6587\u4EF6\uFF0C\u5BF9\u5E94\u7684Excel\u6548\u679C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/xiaweifeng/picgo/raw/master/images/202208231011797.png" alt="3"></p><p>\u901A\u8FC7\u4E0A\u9762\u7684Excel\u6548\u679C\u53EF\u4EE5\u770B\u5230\uFF0C\u8868\u683C\u6BD4\u8F83\u590D\u6742\uFF0C\u6D89\u53CA\u5230\u5408\u5E76\u5355\u5143\u683C\u3001\u5B57\u4F53\u3001\u5B57\u53F7\u3001\u5B57\u4F53\u52A0\u7C97\u3001\u5BF9\u9F50\u65B9\u5F0F\u7B49\u7684\u8BBE\u7F6E\u3002\u5982\u679C\u6211\u4EEC\u901A\u8FC7POI\u7F16\u7A0B\u7684\u65B9\u5F0F\u6765\u8BBE\u7F6E\u8FD9\u4E9B\u6548\u679C\u4EE3\u7801\u4F1A\u975E\u5E38\u7E41\u7410\u3002</p><p>\u5728\u4F01\u4E1A\u5B9E\u9645\u5F00\u53D1\u4E2D\uFF0C\u5BF9\u4E8E\u8FD9\u79CD\u6BD4\u8F83\u590D\u6742\u7684\u8868\u683C\u5BFC\u51FA\u4E00\u822C\u6211\u4EEC\u4F1A\u63D0\u524D\u8BBE\u8BA1\u4E00\u4E2AExcel\u6A21\u677F\u6587\u4EF6\uFF0C\u5728\u8FD9\u4E2A\u6A21\u677F\u6587\u4EF6\u4E2D\u63D0\u524D\u5C06\u8868\u683C\u7684\u7ED3\u6784\u548C\u6837\u5F0F\u8BBE\u7F6E\u597D\uFF0C\u6211\u4EEC\u7684\u7A0B\u5E8F\u53EA\u9700\u8981\u8BFB\u53D6\u8FD9\u4E2A\u6587\u4EF6\u5E76\u5728\u6587\u4EF6\u4E2D\u7684\u76F8\u5E94\u4F4D\u7F6E\u5199\u5165\u5177\u4F53\u7684\u503C\u5C31\u53EF\u4EE5\u4E86\u3002</p><p>\u5728\u672C\u7AE0\u8282\u8D44\u6599\u4E2D\u5DF2\u7ECF\u63D0\u4F9B\u4E86\u4E00\u4E2A\u540D\u4E3Areport_template.xlsx\u7684\u6A21\u677F\u6587\u4EF6\uFF0C\u9700\u8981\u5C06\u8FD9\u4E2A\u6587\u4EF6\u590D\u5236\u5230health_backend\u5DE5\u7A0B\u7684template\u76EE\u5F55\u4E2D</p><h3 id="_3-3-\u5B8C\u5584\u9875\u9762" tabindex="-1"><a class="header-anchor" href="#_3-3-\u5B8C\u5584\u9875\u9762" aria-hidden="true">#</a> 3.3 \u5B8C\u5584\u9875\u9762</h3><p>\u5728report_business.html\u9875\u9762\u63D0\u4F9B\u5BFC\u51FA\u6309\u94AE\u5E76\u7ED1\u5B9A\u4E8B\u4EF6</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>excelTitle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exportExcel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5BFC\u51FAExcel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token comment">//\u5BFC\u51FAExcel\u62A5\u8868</span>
  <span class="token function">exportExcel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&#39;/report/exportBusinessReport.do&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-\u540E\u53F0\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_3-4-\u540E\u53F0\u4EE3\u7801" aria-hidden="true">#</a> 3.4 \u540E\u53F0\u4EE3\u7801</h3><p>\u5728ReportController\u4E2D\u63D0\u4F9BexportBusinessReport\u65B9\u6CD5\uFF0C\u57FA\u4E8EPOI\u5C06\u6570\u636E\u5199\u5165\u5230Excel\u4E2D\u5E76\u901A\u8FC7\u8F93\u51FA\u6D41\u4E0B\u8F7D\u5230\u5BA2\u6237\u7AEF</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * \u5BFC\u51FAExcel\u62A5\u8868
  * <span class="token keyword">@return</span>
*/</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/exportBusinessReport&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">exportBusinessReport</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">//\u8FDC\u7A0B\u8C03\u7528\u62A5\u8868\u670D\u52A1\u83B7\u53D6\u62A5\u8868\u6570\u636E</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> reportService<span class="token punctuation">.</span><span class="token function">getBusinessReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//\u53D6\u51FA\u8FD4\u56DE\u7ED3\u679C\u6570\u636E\uFF0C\u51C6\u5907\u5C06\u62A5\u8868\u6570\u636E\u5199\u5165\u5230Excel\u6587\u4EF6\u4E2D</span>
    <span class="token class-name">String</span> reportDate <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;reportDate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> todayNewMember <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;todayNewMember&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> totalMember <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;totalMember&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> thisWeekNewMember <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;thisWeekNewMember&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> thisMonthNewMember <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;thisMonthNewMember&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> todayOrderNumber <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;todayOrderNumber&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> thisWeekOrderNumber <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;thisWeekOrderNumber&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> thisMonthOrderNumber <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;thisMonthOrderNumber&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> todayVisitsNumber <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;todayVisitsNumber&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> thisWeekVisitsNumber <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;thisWeekVisitsNumber&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> thisMonthVisitsNumber <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;thisMonthVisitsNumber&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> hotSetmeal <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;hotSetmeal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
    <span class="token comment">//\u83B7\u5F97Excel\u6A21\u677F\u6587\u4EF6\u7EDD\u5BF9\u8DEF\u5F84</span>
    <span class="token class-name">String</span> temlateRealPath <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;template&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      											<span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> <span class="token string">&quot;report_template.xlsx&quot;</span><span class="token punctuation">;</span>
	
    <span class="token comment">//\u8BFB\u53D6\u6A21\u677F\u6587\u4EF6\u521B\u5EFAExcel\u8868\u683C\u5BF9\u8C61</span>
    <span class="token class-name">XSSFWorkbook</span> workbook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XSSFWorkbook</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>temlateRealPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">XSSFSheet</span> sheet <span class="token operator">=</span> workbook<span class="token punctuation">.</span><span class="token function">getSheetAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token class-name">XSSFRow</span> row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>reportDate<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u65E5\u671F</span>

    row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>todayNewMember<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u65B0\u589E\u4F1A\u5458\u6570\uFF08\u672C\u65E5\uFF09</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>totalMember<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u603B\u4F1A\u5458\u6570</span>

    row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>thisWeekNewMember<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u672C\u5468\u65B0\u589E\u4F1A\u5458\u6570</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>thisMonthNewMember<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u672C\u6708\u65B0\u589E\u4F1A\u5458\u6570</span>

    row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>todayOrderNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4ECA\u65E5\u9884\u7EA6\u6570	</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>todayVisitsNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4ECA\u65E5\u5230\u8BCA\u6570</span>

    row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>thisWeekOrderNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u672C\u5468\u9884\u7EA6\u6570</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>thisWeekVisitsNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u672C\u5468\u5230\u8BCA\u6570</span>

    row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>thisMonthOrderNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u672C\u6708\u9884\u7EA6\u6570</span>
    row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>thisMonthVisitsNumber<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u672C\u6708\u5230\u8BCA\u6570</span>

    <span class="token keyword">int</span> rowNum <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Map</span> map <span class="token operator">:</span> hotSetmeal<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//\u70ED\u95E8\u5957\u9910</span>
      <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Long</span> setmeal_count <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;setmeal_count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">BigDecimal</span> proportion <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BigDecimal</span><span class="token punctuation">)</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;proportion&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span>rowNum <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5957\u9910\u540D\u79F0</span>
      row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>setmeal_count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u9884\u7EA6\u6570\u91CF</span>
      row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>proportion<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5360\u6BD4</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u901A\u8FC7\u8F93\u51FA\u6D41\u8FDB\u884C\u6587\u4EF6\u4E0B\u8F7D</span>
    <span class="token class-name">ServletOutputStream</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/vnd.ms-excel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-Disposition&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attachment;filename=report.xlsx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    workbook<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    workbook<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">GET_BUSINESS_REPORT_FAIL</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,81),o=[e];function c(l,u){return s(),a("div",null,o)}var k=n(p,[["render",c],["__file","\u4F20\u667A\u5065\u5EB7\u9879\u76EE\u8BB2\u4E49\uFF08\u7B2C11\u7AE0\uFF09.html.vue"]]);export{k as default};
